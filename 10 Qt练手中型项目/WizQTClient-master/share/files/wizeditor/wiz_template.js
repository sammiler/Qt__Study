!function e(t,l,n){function a(d,u){if(!l[d]){if(!t[d]){var s="function"==typeof require&&require;if(!u&&s)return s(d,!0);if(o)return o(d,!0);var i=new Error("Cannot find module '"+d+"'");throw i.code="MODULE_NOT_FOUND",i}var r=l[d]={exports:{}};t[d][0].call(r.exports,function(e){var l=t[d][1][e];return a(l?l:e)},r,r.exports,e,t,l,n)}return l[d].exports}for(var o="function"==typeof require&&require,d=0;d<n.length;d++)a(n[d]);return a}({1:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./common/env"),o=n(a),d=e("./common/const"),u=(n(d),e("./common/lang")),s=(n(u),e("./utils/utils.js")),i=(n(s),e("./utils/insertImgUtils")),r=n(i),f=e("./template/base"),c=n(f),m={init:function(e){return o["default"].setDoc(e.document||window.document),o["default"].client.setType(e.clientType),u.initLang(e.lang),m},on:function(e){return c["default"].getTemplate()&&c["default"].on(e),m},off:function(){return c["default"].off(),m},focus:function(){return c["default"].focus(),m},getTemplate:function(){return c["default"].getTemplate()},hideTemplate:function(){return c["default"].hideElement(),m},hideTemplateFormHtml:function(e){return c["default"].hideElementFromHtml(e)},img:{insertByPath:function(e,t){r["default"].insertByPath(e,t)}},setContenteditable:function(e){return c["default"].setContenteditable(e),m},version:"0.1.0"};window.WizTemplate=m},{"./common/const":2,"./common/env":3,"./common/lang":4,"./template/base":5,"./utils/insertImgUtils":7,"./utils/utils.js":14}],2:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n="wiz-template-",a={Attr:{TemplateFormat:"data-template-format",TemplateName:"data-template-name",SelectBind:"data-select-bind",SelectLayer:"data-select-layer",MenuBind:"data-menu-bind",MenuLayer:"data-menu-layer",TemplateVersion:"data-template-version",OptionAction:"data-option-action",ClientType:"data-template-client",Placeholder:"data-template-placeholder"},Class:{Active:"active",Common:n+"node",Date:n+"date",Editable:n+"editable",FloatLayer:n+"floatLayer",Focus:n+"focus",Hide:n+"hide",InsertImg:n+"insert-img",Option:n+"option",Select:n+"select",SelectBtn:n+"select-btn",Menu:n+"menu",MenuBtn:n+"menu-btn",Diary:{blue:"mood-blue",purple:"mood-purple",green:"mood-green",red:"mood-red",sun:"weather-sun",wind:"weather-wind",rain:"weather-rain",snow:"weather-snow",mood:"mood",weather:"weather"},TodoImg:"wiz-todo-img",Sudoku:{index:n+"sudoku-index",indexHide:"sudoku-index-hide",content:n+"sudoku-content",grid:"sudoku-grid",aniDiV:"sudoku-animation",btn:n+"sudoku-btn",indexBtn:"sudoku-btn-index",nextBtn:"sudoku-btn-next",previousBtn:"sudoku-btn-previous"}},Id:{TemplateInfo:n+"info",TemplateInsertImgPre:n+"insert-img"},EVENT:{InsertImg:"wizTemplateInsertImg",setStyle:"wizTemplateSetStyle"},DiaryStyle:{bgColor:{blue:"#e0f5fc",purple:"#eee6f5",green:"#e3f6e3",red:"#fae7ea"}},NAME:{TMP_STYLE:"wiz_tmp_editor_style"}};l["default"]=a,t.exports=l["default"]},{}],3:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var a=e("./const"),o=n(a),d="wiznotecmd://",u={win:null,doc:null,setDoc:function(e){e&&(u.doc=e,u.win=u.doc.defaultView)},client:{clientType:"windows",type:{isWeb:function(){return location&&0===location.protocol.indexOf("http")}(),isWin:!1,isMac:!1,isIOS:!1,isAndroid:!1,isPad:!1,isPhone:!1},sendCmdToWiznote:function(e,t){},setType:function(e){e&&(e=e.toLowerCase(),e.indexOf("windows")>-1||e.indexOf("win")>-1?(u.client.type.isWin=!0,u.client.clientType="windows"):e.indexOf("ios")>-1?(u.client.type.isIOS=!0,u.client.clientType="ios",u.client.sendCmdToWiznote=function(e,t){var l="";e==o["default"].EVENT.InsertImg?l=d+e+"?userInfo="+encodeURIComponent(t.userInfo)+"&message="+encodeURIComponent(t.message)+"&cameraOnly="+t.cameraOnly:e==o["default"].EVENT.setStyle&&(l=d+e+"?bgColor="+encodeURIComponent(t.bgColor)+"&titleColor="+encodeURIComponent(t.titleColor)+"&folderColor="+encodeURIComponent(t.folderColor)+"&lineColor="+encodeURIComponent(t.lineColor));var n=u.doc.createElement("iframe");n.setAttribute("src",l),u.doc.documentElement.appendChild(n),n.parentNode.removeChild(n),n=null}):e.indexOf("android")>-1?(u.client.type.isAndroid=!0,u.client.clientType="android",u.client.sendCmdToWiznote=function(e,t){}):e.indexOf("mac")>-1?(u.client.type.isMac=!0,u.client.clientType="mac"):e.indexOf("web")>-1&&(u.client.type.isMac=!0,u.client.clientType="web"),(u.client.type.isIOS||u.client.type.isAndroid)&&(e.indexOf("pad")>-1?u.client.type.isPad=!0:u.client.type.isPhone=!0))}}};l["default"]=u,t.exports=l["default"]},{"./const":2}],4:[function(e,t,l){"use strict";function n(e){e||(e="en"),e=e.toLowerCase().replace("_","-"),a[e]?o=e:e="en";var t;for(t in a[e])a[e].hasOwnProperty(t)&&(d[t]=a[e][t])}Object.defineProperty(l,"__esModule",{value:!0});var a={},o="en",d={};a.en={weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},a["zh-cn"]={weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},a["zh-tw"]={weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},l["default"]=d;var u=function(e){n(e)};l.initLang=u},{}],5:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var a=e("../common/env"),o=n(a),d=e("../common/const"),u=n(d),s=e("../utils/utils"),i=n(s),r=e("../utils/insertImgUtils.js"),f=n(r),c=e("../utils/dateUtils.js"),m=n(c),p=e("../utils/selectUtils.js"),h=n(p),v=e("../utils/todoPatch.js"),y=n(v),C=e("../utils/menuUtils.js"),g=n(C),b=e("../utils/sudokuUtils.js"),w=n(b),S=e("../utils/placeHolederUtils.js"),A=n(S),x=e("../utils/snowUtils.js"),E=n(x),j={on:function(e){E["default"].on(),w["default"].on(e),e||(j.showElement(),j.bind(),f["default"].on(),m["default"].on(),h["default"].on(),y["default"].on(),g["default"].on(),A["default"].on())},off:function(){j.hideElement(),j.unbind(),f["default"].off(),m["default"].off(),h["default"].off(),y["default"].off(),g["default"].off(),w["default"].off(),E["default"].off()},bind:function(){},unbind:function(){},focus:function(){var e=o["default"].doc.querySelector("."+u["default"].Class.Focus);e?e.focus():o["default"].doc.body.focus()},getTemplate:function(){var e=o["default"].doc.querySelector("#"+u["default"].Id.TemplateInfo);return e?{name:e.getAttribute(u["default"].Attr.TemplateName),version:e.getAttribute(u["default"].Attr.TemplateVersion)}:null},hideElement:function(){var e,t,l=i["default"].getTemplateElements();if(l)for(e=0,t=l.length;t>e;e++)i["default"].addClass(l[e],u["default"].Class.Hide)},hideElementFromHtml:function(e){var t=/(<[^<> ]*[^<>]* class[ ]*=[ ]*['"])([^'"]*)(['"])/i,l=/(<[^<> ]*[^<>]* class[ ]*=[ ]*['"])([^'"]*)(['"])/gi;if(!t.test(e))return e;for(var n,a,o,d=[],s=0;n=l.exec(e);){if(a=n[2],(" "+a+" ").indexOf(" "+u["default"].Class.FloatLayer+" ")>-1)o=new RegExp(" "+u["default"].Class.Active+" ","ig"),a=i["default"].trim((" "+a+" ").replace(o,""));else{if(-1===(" "+a+" ").indexOf(" "+u["default"].Class.Common+" ")){d.push(e.substr(s,n.index-s),n[0]),s=n.index+n[0].length;continue}-1===(" "+a+" ").indexOf(" "+u["default"].Class.Hide+" ")&&(a+=" "+u["default"].Class.Hide)}d.push(e.substr(s,n.index-s),n[1],a,n[3]),s=n.index+n[0].length}return d.push(e.substr(s)),d.join("")},setContenteditable:function(e){var t,l,n=o["default"].doc.querySelectorAll("."+u["default"].Class.Editable);if(0===n.length)o["default"].doc.body.setAttribute("contenteditable",e?"true":"false");else for(e&&o["default"].doc.body.setAttribute("contenteditable","false"),t=0,l=n.length;l>t;t++)n[t].setAttribute("contenteditable",e?"true":"false")},showElement:function(){var e,t,l,n=i["default"].getTemplateElements();if(n)for(e=0,t=n.length;t>e&&(l=n[e].getAttribute(u["default"].Attr.ClientType),!(l&&l.indexOf(o["default"].client.clientType)>0));e++)i["default"].removeClass(n[e],u["default"].Class.Hide)}};l["default"]=j,t.exports=l["default"]},{"../common/const":2,"../common/env":3,"../utils/dateUtils.js":6,"../utils/insertImgUtils.js":7,"../utils/menuUtils.js":8,"../utils/placeHolederUtils.js":9,"../utils/selectUtils.js":10,"../utils/snowUtils.js":11,"../utils/sudokuUtils.js":12,"../utils/todoPatch.js":13,"../utils/utils":14}],6:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(!e)return"";var t=new Date,l=o(t.getFullYear(),4),n=o(t.getMonth()+1,2),a=o(t.getDate(),2),d=f["default"].weeks[t.getDay()];return e.replace(/yyyy/gi,l).replace(/mm/gi,n).replace(/dd/gi,a).replace(/ww/gi,d)}function o(e,t){for(e+="";e.length<t;)e="0"+e;return e}Object.defineProperty(l,"__esModule",{value:!0});var d=e("../common/env"),u=n(d),s=e("../common/const"),i=n(s),r=e("../common/lang"),f=n(r),c=e("./utils"),m=n(c),p={on:function(){var e=0;u["default"].client.type.isWin&&(e=500),setTimeout(function(){var e,t,l,n=u["default"].doc.querySelectorAll("."+i["default"].Class.Date);for(e=0,t=n.length;t>e;e++)l=n[e],l.innerHTML=a(l.getAttribute(i["default"].Attr.TemplateFormat)),l.removeAttribute(i["default"].Attr.TemplateFormat),m["default"].removeClass(l,i["default"].Class.Date)},e)},off:function(){}};l["default"]=p,t.exports=l["default"]},{"../common/const":2,"../common/env":3,"../common/lang":4,"./utils":14}],7:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return m["default"].hasClass(e,f["default"].Class.InsertImg)}function o(e){var t,l=e.target||e.srcElement,n=m["default"].getParentByFilter(l,a);n&&(l.id||(l.id=f["default"].Id.TemplateInsertImgPre+(new Date).valueOf()),t={id:l.id},i["default"].client.sendCmdToWiznote(f["default"].EVENT.InsertImg,{userInfo:JSON.stringify(t),message:"模板插入图片",cameraOnly:"true"}))}function d(e,t,l){if(e){var n,a;if(m["default"].isArray(e))for(n=0,a=e.length;a>n;n++)t.insertBefore(e[n],l);else t.insertBefore(e,l)}}function u(e){var t,l,n,a,o=[],d=[];for(e.indexOf("*")?d=e.split("*"):d.push(e),n=0,a=d.length;a>n;n++)t=i["default"].doc.createElement("div"),o.push(t),l=i["default"].doc.createElement("img"),l.src=d[n],l.style.maxWidth="100%",t.insertBefore(l,null);return t=i["default"].doc.createElement("div"),t.insertBefore(i["default"].doc.createElement("br"),null),o.push(t),o}Object.defineProperty(l,"__esModule",{value:!0});var s=e("../common/env.js"),i=n(s),r=e("../common/const.js"),f=n(r),c=e("./utils.js"),m=n(c),p={on:function(){p.off(),m["default"].bind(i["default"].doc.body,"click",o)},off:function(){m["default"].unbind(i["default"].doc.body,"click",o)},insertByPath:function(e,t){t?"string"==typeof t&&(t=decodeURIComponent(t),t=JSON.parse(t)):t={};var l=i["default"].doc.getElementById(t.id),n=l&&l!=i["default"].doc.body?l.parentNode:i["default"].doc.body;d(u(e),n,l||null)}};l["default"]=p,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":14}],8:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return y["default"].hasClass(e,h["default"].Class.MenuBtn)||y["default"].hasClass(e,h["default"].Class.Option)}function o(e){return y["default"].hasClass(e,h["default"].Class.Menu)}function d(e){return y["default"].hasClass(e,h["default"].Class.FloatLayer)}function u(e){var t,l,n=e.target||e.srcElement,o=y["default"].getParentByFilter(n,a);if(o&&y["default"].hasClass(o,h["default"].Class.MenuBtn)){if(t=o.getAttribute(h["default"].Attr.MenuLayer),!t)return;if(l=m["default"].doc.getElementById(t),!l)return;y["default"].hasClass(l,h["default"].Class.Active)||(C=y["default"].getTemplateRange())}}function s(e){var t,l,n,d,u=e.target||e.srcElement,s=y["default"].getParentByFilter(u,a);if(s&&y["default"].hasClass(s,h["default"].Class.MenuBtn)){if(n=s.getAttribute(h["default"].Attr.MenuLayer),!n)return;if(d=m["default"].doc.getElementById(n),!d)return;y["default"].hasClass(d,h["default"].Class.Active)?(y["default"].removeClass(d,h["default"].Class.Active),y["default"].removeClass(s,h["default"].Class.Active),y["default"].setTemplateRange(C),f()):(y["default"].addClass(d,h["default"].Class.Active),y["default"].addClass(s,h["default"].Class.Active),r())}else if(s){if(t=y["default"].getParentByFilter(u,o),!t)return;if(y["default"].hasClass(s,h["default"].Class.Active))return;l=m["default"].doc.querySelector("."+h["default"].Class.MenuBtn),l.innerHTML=s.innerHTML,n=l.getAttribute(h["default"].Attr.MenuLayer),d=m["default"].doc.getElementById(n),y["default"].removeClass(d,h["default"].Class.Active),y["default"].removeClass(l,h["default"].Class.Active)}}function i(e){var t=e.target||e.srcElement,l=y["default"].getParentByFilter(t,a);l||(l=y["default"].getParentByFilter(t,d));var n,o,u;if(!l){for(n=m["default"].doc.querySelectorAll("."+h["default"].Class.FloatLayer+"."+h["default"].Class.Active),o=0,u=n.length;u>o;o++)y["default"].removeClass(n[o],h["default"].Class.Active);f()}}function r(){m["default"].client.type.isPhone?y["default"].bind(m["default"].doc.body,"touchstart",i):y["default"].bind(m["default"].doc.body,"click",i)}function f(){m["default"].client.type.isPhone?y["default"].unbind(m["default"].doc.body,"touchstart",i):y["default"].unbind(m["default"].doc.body,"click",i)}Object.defineProperty(l,"__esModule",{value:!0});var c=e("../common/env.js"),m=n(c),p=e("../common/const.js"),h=n(p),v=e("./utils.js"),y=n(v),C=null,g={on:function(){g.off(),y["default"].bind(m["default"].doc.body,m["default"].client.type.isPhone?"touchstart":"mousedown",u),y["default"].bind(m["default"].doc.body,"click",s)},off:function(){y["default"].unbind(m["default"].doc.body,m["default"].client.type.isPhone?"touchstart":"mousedown",u),y["default"].unbind(m["default"].doc.body,"click",s)}};l["default"]=g,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":14}],9:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){r["default"].bind(e,"focus",function(){e.textContent.trim()||(e.textContent=e.getAttribute(s["default"].Attr.Placeholder))}),r["default"].bind(e,"blur",function(){e.textContent.trim()==e.getAttribute(s["default"].Attr.Placeholder)&&(e.textContent="")})}Object.defineProperty(l,"__esModule",{value:!0});var o=e("../common/env.js"),d=n(o),u=e("../common/const.js"),s=n(u),i=e("./utils.js"),r=n(i),f={on:function(){f.off();var e=d["default"].doc.querySelectorAll(".wiz-template-placeholder");if(e.length)for(var t=0,l=e.length;l>t;t++)a(e[t])},off:function(){}};l["default"]=f,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":14}],10:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return g["default"].hasClass(e,y["default"].Class.SelectBtn)||g["default"].hasClass(e,y["default"].Class.Option)}function o(e){return g["default"].hasClass(e,y["default"].Class.Select)}function d(e){return g["default"].hasClass(e,y["default"].Class.FloatLayer)}function u(e){var t,l,n=e.target||e.srcElement,o=g["default"].getParentByFilter(n,a);if(o&&g["default"].hasClass(o,y["default"].Class.SelectBtn)){if(t=o.getAttribute(y["default"].Attr.SelectLayer),!t)return;if(l=h["default"].doc.getElementById(t),!l)return;g["default"].hasClass(l,y["default"].Class.Active)||(b=g["default"].getTemplateRange())}}function s(e){var t,l,n,d=e.target||e.srcElement,u=g["default"].getParentByFilter(d,a);if(u&&g["default"].hasClass(u,y["default"].Class.SelectBtn)){if(l=u.getAttribute(y["default"].Attr.SelectLayer),!l)return;if(n=h["default"].doc.getElementById(l),!n)return;g["default"].hasClass(n,y["default"].Class.Active)?(g["default"].removeClass(n,y["default"].Class.Active),h["default"].doc.querySelector(".layer-mask")&&g["default"].removeClass(h["default"].doc.querySelector(".layer-mask"),y["default"].Class.Active),g["default"].setTemplateRange(b),f()):(g["default"].addClass(n,y["default"].Class.Active),h["default"].doc.querySelector(".layer-mask")&&g["default"].addClass(h["default"].doc.querySelector(".layer-mask"),y["default"].Class.Active),r())}else if(u){if(t=g["default"].getParentByFilter(d,o),!t)return;if(g["default"].hasClass(u,y["default"].Class.Active))return;if(g["default"].hasClass(u.parentNode,y["default"].Class.Diary.mood)){if(h["default"].doc.body.className=u.querySelector("i").className,h["default"].doc.querySelector("."+y["default"].Class.Sudoku.content))return;m(u.querySelector("i").className)}else if(g["default"].hasClass(u.parentNode,y["default"].Class.Diary.weather)){if(h["default"].doc.querySelector("i."+y["default"].Class.Diary.weather).className=y["default"].Class.Diary.weather+" "+u.querySelector("i").className,h["default"].doc.querySelector(".weather-animation")&&(h["default"].doc.querySelector(".weather-animation").className="weather-animation "+u.querySelector("i").className),h["default"].doc.querySelector("."+y["default"].Class.Sudoku.content))return;c(u.querySelector("i").className)}}}function i(e){var t=e.target||e.srcElement,l=g["default"].getParentByFilter(t,a);l||(l=g["default"].getParentByFilter(t,d));var n,o,u;if(!l){for(n=h["default"].doc.querySelectorAll("."+y["default"].Class.FloatLayer+"."+y["default"].Class.Active),o=0,u=n.length;u>o;o++)g["default"].removeClass(n[o],y["default"].Class.Active);h["default"].doc.querySelector(".layer-mask")&&g["default"].removeClass(h["default"].doc.querySelector(".layer-mask"),y["default"].Class.Active),f()}}function r(){h["default"].client.type.isPhone||h["default"].client.type.isPad?g["default"].bind(h["default"].doc.body,"touchstart",i):g["default"].bind(h["default"].doc.body,"click",i)}function f(){h["default"].client.type.isPhone||h["default"].client.type.isPad?g["default"].unbind(h["default"].doc.body,"touchstart",i):g["default"].unbind(h["default"].doc.body,"click",i)}function c(e){var t,l;l=e.split("-"),l.length&&l.length>0&&(t=l[l.length-1],h["default"].doc.getElementById(y["default"].Id.TemplateInfo).setAttribute("data-template-weather",t))}function m(e){var t,l,n,a=y["default"].DiaryStyle.bgColor;if(n=e.split("-"),n.length&&n.length>0){t=n[n.length-1];for(var o in a)if(t==o){l=a[o],h["default"].doc.getElementById(y["default"].Id.TemplateInfo).setAttribute("data-template-bgcolor",l);break}h["default"].client.sendCmdToWiznote(y["default"].EVENT.setStyle,{bgColor:l,titleColor:"",folderColor:"",lineColor:""})}g["default"].modifyHtmlForPC()}Object.defineProperty(l,"__esModule",{value:!0});var p=e("../common/env.js"),h=n(p),v=e("../common/const.js"),y=n(v),C=e("./utils.js"),g=n(C),b=null,w={on:function(){w.off(),g["default"].bind(h["default"].doc.body,h["default"].client.type.isPhone||h["default"].client.type.isPad?"touchstart":"mousedown",u),g["default"].bind(h["default"].doc.body,"click",s)},off:function(){g["default"].unbind(h["default"].doc.body,h["default"].client.type.isPhone||h["default"].client.type.isPad?"touchstart":"mousedown",u),g["default"].unbind(h["default"].doc.body,"click",s)}};l["default"]=w,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":14}],11:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var a=e("../common/env.js"),o=n(a),d=e("../common/const.js"),u=(n(d),e("./utils.js")),s=(n(u),[]),i=null,r={on:function(){r.off();var e=o["default"].doc.querySelector("div.weather-animation.weather-snow");if(e){var t=o["default"].doc.querySelectorAll("div.hide img");if(t.length){for(var l=0;l<t.length;l++)s.push(t[l].getAttribute("src"));e.innerHTML="",f.f=!0,f.createSnow("index_files/",100)}}},off:function(){f.f=!1;var e=o["default"].doc.querySelector("div.weather-animation.weather-snow");e&&(e.innerHTML="")}},f={play:!0,k:function(e,t,l){e.addEventListener?e.addEventListener(t,l,!1):e.attachEvent&&e.attachEvent("on"+t,l)},g:function(e){if("function"!=typeof window.onload)window.onload=e;else{var t=window.onload;window.onload=function(){t(),e()}}},h:function(){var e={};for(var t in{Top:"",Left:""}){var l="Top"==t?"Y":"X";"undefined"!=typeof window["page"+l+"Offset"]?e[t.toLowerCase()]=window["page"+l+"Offset"]:(l=document.documentElement.clientHeight?document.documentElement:document.body,e[t.toLowerCase()]=l["scroll"+t])}return e},l:function(){var e,t=document.querySelector("div.weather-animation");return window.innerHeight?e=window.innerHeight:t.parentElement.clientHeight?e=t.parentElement.clientHeight:t&&t.clientHeight&&(e=t.clientHeight),e},i:function(e){this.parent=o["default"].doc.querySelector("div.weather-animation"),this.parent&&(this.createEl(this.parent,e),this.size=5*Math.random()+5,this.el.style.width=Math.round(this.size)+"px",this.el.style.height=Math.round(this.size)+"px",this.maxLeft=o["default"].doc.querySelector("div.weather-animation").offsetWidth-this.size,this.maxTop=o["default"].doc.querySelector("div.weather-animation").offsetHeight-this.size,this.left=Math.random()*this.maxLeft,this.top=0,this.angle=1.4+.2*Math.random(),this.minAngle=1.4,this.maxAngle=1.6,this.angleDelta=.01*Math.random(),this.speed=2+Math.random())},f:!0,createSnow:function(e,t){var l=[];i&&clearInterval(i),i=setInterval(function(){if(f.f&&t>l.length&&Math.random()<.0025*t){var n=new f.i(e);n.parent?l.push(n):clearInterval(i)}f.f||l.length||clearInterval(i);for(var a=document.querySelector("div.weather-animation"),o=f.h().top,d=f.l(),u=l.length-1;a&&u>=0;u--)l[u]&&(l[u].top>a.offsetHeight-10||l[u].top+l[u].size+1>o+d?(l[u].remove(),l[u]=null,l.splice(u,1)):(l[u].move(),l[u].draw()))},40),f.k(window,"scroll",function(){for(var e=l.length-1;e>=0;e--)l[e].draw()})}};f.i.prototype={createEl:function(e,t){this.el=document.createElement("img"),this.el.setAttribute("src",s[Math.floor(4*Math.random())]),this.el.style.position="absolute",this.el.style.display="block",this.el.style.zIndex="99999",this.el.className="no-lazyload",this.parent.appendChild(this.el)},move:function(){(this.angle<this.minAngle||this.angle>this.maxAngle)&&(this.angleDelta=-this.angleDelta),this.angle+=this.angleDelta,this.left+=this.speed*Math.cos(this.angle*Math.PI),this.top-=this.speed*Math.sin(this.angle*Math.PI),this.left<0?this.left=this.maxLeft:this.left>this.maxLeft&&(this.left=0)},draw:function(){this.el.style.top=Math.round(this.top)+"px",this.el.style.left=Math.round(this.left)+"px"},remove:function(){this.el.parentNode&&this.parent.removeChild(this.el),this.parent=this.el=null}},l["default"]=r,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":14}],12:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return m["default"].client.type.isAndroid?void(window.WizNote&&window.WizNote.saveFakeCookie&&window.WizNote.saveFakeCookie(t)):void localStorage.setItem(e,t)}function o(e,t){return m["default"].client.type.isAndroid?void(window.WizNote&&window.WizNote.prepareCookie&&(window.getFakeCookie=function(e){t(e),window.getFakeCookie=null},window.WizNote.prepareCookie())):void t(localStorage.getItem(e))}function d(e){return y["default"].hasClass(e,h["default"].Class.Sudoku.grid)||y["default"].hasClass(e,h["default"].Class.Sudoku.indexBtn)||y["default"].hasClass(e,h["default"].Class.Sudoku.nextBtn)||y["default"].hasClass(e,h["default"].Class.Sudoku.previousBtn)}function u(e){var t,l,n=e.target||e.srcElement,o=y["default"].getParentByFilter(n,d),u=m["default"].doc.querySelector("."+h["default"].Class.Sudoku.nextBtn),r=m["default"].doc.querySelector("."+h["default"].Class.Sudoku.previousBtn);if(o&&!m["default"].doc.querySelector(".wiz-template-floatLayer.active")){if(y["default"].hasClass(o,h["default"].Class.Sudoku.grid)){if(y["default"].hasClass(m["default"].doc.body,h["default"].Class.Sudoku.indexHide))return;return m["default"].doc.body.scrollTop=0,y["default"].addClass(m["default"].doc.body,h["default"].Class.Sudoku.indexHide),y["default"].addClass(o,h["default"].Class.Active),i(o.querySelector(".quadrant-content")),o.previousElementSibling?y["default"].addClass(o.previousElementSibling,"previous"):y["default"].addClass(r,"unenable"),o.nextElementSibling?y["default"].addClass(o.nextElementSibling,"next"):y["default"].addClass(u,"unenable"),a("sudoku-active-grid",o.className.substr(12,5)),void(m["default"].doc.querySelector("body.for-quadrant")&&setTimeout(function(){y["default"].addClass(m["default"].doc.body,"animation")},200))}if(t=m["default"].doc.querySelector("."+h["default"].Class.Sudoku.content+" .active")){if(y["default"].hasClass(o,h["default"].Class.Sudoku.indexBtn))t.nextElementSibling&&y["default"].removeClass(t.nextElementSibling,"next"),t.previousElementSibling&&y["default"].removeClass(t.previousElementSibling,"previous"),u&&y["default"].removeClass(u,"unenable"),r&&y["default"].removeClass(r,"unenable"),y["default"].removeClass(m["default"].doc.body,h["default"].Class.Sudoku.indexHide),s(),a("sudoku-active-grid",""),m["default"].doc.querySelector("body.for-quadrant")&&y["default"].removeClass(m["default"].doc.body,"animation");else if(y["default"].hasClass(o,h["default"].Class.Sudoku.nextBtn)){if(t==t.parentNode.lastChild)return;l=t.nextElementSibling,y["default"].addClass(t,"previous"),l!=l.parentNode.lastChild?y["default"].addClass(l.nextElementSibling,"next"):y["default"].addClass(u,"unenable"),y["default"].addClass(l,h["default"].Class.Active),a("sudoku-active-grid",l.className.substr(12,5)),t.previousElementSibling?y["default"].removeClass(t.previousElementSibling,"previous"):y["default"].removeClass(r,"unenable"),y["default"].removeClass(l,"next")}else if(y["default"].hasClass(o,h["default"].Class.Sudoku.previousBtn)){if(t==t.parentNode.firstChild)return void y["default"].addClass(r,"unenable");l=t.previousElementSibling,y["default"].addClass(t,"next"),l!=l.parentNode.firstChild?y["default"].addClass(l.previousElementSibling,"previous"):y["default"].addClass(r,"unenable"),y["default"].addClass(l,h["default"].Class.Active),a("sudoku-active-grid",l.className.substr(12,5)),t.nextElementSibling?y["default"].removeClass(t.nextElementSibling,"next"):y["default"].removeClass(u,"unenable"),y["default"].removeClass(l,"previous")}y["default"].removeClass(t,h["default"].Class.Active)}}}function s(){var e=m["default"].doc.querySelectorAll(".quadrant-content");if(e.length)for(var t=0,l=e.length;l>t;t++)if(e[t].textContent.trim()||e[t].querySelector("img"))y["default"].addClass(e[t].parentNode,"quadrant-content-edit");else{y["default"].hasClass(e[t].parentNode,"quadrant-content-edit")&&y["default"].removeClass(e[t].parentNode,"quadrant-content-edit");var n=e[t].parentNode.querySelectorAll(".sudoku-placeholder .wiz-todo-tail");if(n.length>0)for(var a=0;a<n.length;a++)if(n[a].textContent.trim()||3==n[a].previousSibling.nodeType||n[a].querySelector("img")){y["default"].addClass(e[t].parentNode,"quadrant-content-edit");break}}}function i(e){e&&setTimeout(function(){e.focus();var t=m["default"].doc.getSelection();t.collapse(e,e.childNodes.length)},300)}function r(e){if(e){var t=m["default"].doc.querySelector("."+e);y["default"].addClass(m["default"].doc.body,h["default"].Class.Sudoku.indexHide),y["default"].addClass(t,"active"),i(t)}else y["default"].removeClass(m["default"].doc.body,"sudoku-index-hide")}function f(){var e=m["default"].doc.querySelectorAll("."+h["default"].Class.Sudoku.grid);if(e.length)for(var t=0,l=e.length;l>t;t++)y["default"].removeClass(e[t],h["default"].Class.Active),y["default"].removeClass(e[t],"previous"),y["default"].removeClass(e[t],"next");o("sudoku-active-grid",r)}Object.defineProperty(l,"__esModule",{value:!0});var c=e("../common/env.js"),m=n(c),p=e("../common/const.js"),h=n(p),v=e("./utils.js"),y=n(v),C={on:function(e){C.off(),y["default"].bind(m["default"].doc.body,"click",u),s(),m["default"].doc.body.scrollTop=0;var t=m["default"].doc.querySelector("#wiz-template-info").getAttribute("data-newnote");e?a("sudoku-active-grid",""):t&&(a("sudoku-active-grid",""),m["default"].doc.querySelector("#wiz-template-info").removeAttribute("data-newnote")),f()},off:function(){y["default"].unbind(m["default"].doc.body,"click",u)}};l["default"]=C,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":14}],13:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var a=e("../common/const.js"),o=n(a),d=e("../common/env.js"),u=n(d),s={on:function(){var e,t,l=u["default"].doc.querySelectorAll("."+o["default"].Class.TodoImg);if(l)for(var n=0,a=l.length;a>n;n++){e=["wiz_todo"],t=[];for(var d=0;6>d;d++)t.push(Math.floor(10*Math.random()));e.push((new Date).getTime()+n),e.push(t.join("")),e.push(u["default"].doc.getElementById(o["default"].Id.TemplateInfo).getAttribute("data-templatename")),l[n].id||(l[n].id=e.join("_"))}},off:function(){}};l["default"]=s,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3}],14:[function(e,t,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var a=e("../common/const.js"),o=n(a),d=e("../common/env.js"),u=n(d),s={bind:function(e,t,l){e.addEventListener?e.addEventListener(t,l,!1):(e["e"+l]=function(){l.call(e,window.event)},e.attachEvent("on"+t,e["e"+l]))},unbind:function(e,t,l){e.removeEventListener?e.removeEventListener(t,l,!1):e.detachEvent&&e.detachEvent("on"+t,e["e"+l])},getTemplateElements:function(){return u["default"].doc.querySelectorAll("."+o["default"].Class.Common)},hasClass:function(e,t){return e?(" "+e.className+" ").indexOf(" "+t+" ")>-1:void 0},addClass:function(e,t){s.hasClass(e,t)||e&&(e.className=s.trim(e.className+" "+t))},removeClass:function(e,t){e&&(e.className=s.trim((" "+e.className+" ").replace(" "+t+" "," ")))},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},getParentByFilter:function(e,t){if(!t)return e;if(e&&e!=u["default"].doc.body)for(;e;){if(t(e))return e;if(e==u["default"].doc.body)return null;e=e.parentNode}return null},getTemplateRange:function(){var e=document.getSelection();if(!e.rangeCount)return null;var t=e.getRangeAt(0);return{start:t.startContainer,startOffset:t.startOffset,end:t.endContainer,endOffset:t.endOffset}},setTemplateRange:function(e){if(e){var t=document.getSelection();t.collapse(e.start,e.startOffset),t.extend(e.end,e.endOffset)}},modifyHtmlForPC:function(){if(u["default"].client.type.isWin){var e=u["default"].doc.createElement("div");e.setAttribute("name",o["default"].NAME.TMP_STYLE),e.setAttribute("style","display:none"),u["default"].doc.body.appendChild(e)}}};l["default"]=s,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3}]},{},[1]);