!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=567)}([function(e,t,n){var r=n(6),o=n(12),i=n(21),a=n(18),l=n(27),s=function e(t,n,s){var c,d,u,f,h=t&e.F,p=t&e.G,m=t&e.P,g=t&e.B,v=p?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,b=p?o:o[n]||(o[n]={}),y=b.prototype||(b.prototype={});for(c in p&&(s=n),s)u=((d=!h&&v&&void 0!==v[c])?v:s)[c],f=g&&d?l(u,r):m&&"function"==typeof u?l(Function.call,u):u,v&&a(v,c,u,t&e.U),b[c]!=u&&i(b,c,f),m&&y[c]!=u&&(y[c]=u)};r.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var n={version:"1.1.6",wizContentVersion:"0.1.7",wizPainterVersion:"0.1.9",minderVersion:"1.4.52",WIZ_DOCUMENT_MIN_VERSION:{OUTLINE:"1.0.60.14"},AMEND_TIME_SPACE:18e4,AMEND_BATCH_TIME_SPACE:3e4,SPACE_CHAR:" ",SPACE_CHAR_REG:/\u00A0/gi,FILL_CHAR:"​",FILL_CHAR_REG:new RegExp("​","ig"),WIZ_TABLE_IN_MARKDOWN_SRC_REG:"<div [^>]*wiz-table-container[^>]*>(.|\\n)*?</table></div></div>",EMPTY_NOTE_TEMPLATE:"<!DOCTYPE html><html><head></head><body>${body}</body></html>",AMEND:{INFO_SPACE:0,INFO_TIMER:300},ATTR:{IMG:"data-wiz-img",IMG_MASK:"data-wiz-img-mask",IMG_RATE:"data-wiz-img-rate",IMG_EDITING:"data-wiz-img-editing",SPAN:"data-wiz-span",SPAN_USERID:"data-wiz-user-id",SPAN_INSERT:"data-wiz-insert",SPAN_DELETE:"data-wiz-delete",SPAN_PASTE:"data-wiz-paste",SPAN_PASTE_TYPE:"data-wiz-paste-type",SPAN_PASTE_ID:"data-wiz-paste-id",SPAN_TIMESTAMP:"data-wiz-amend-time",TODO_ID:"wiz_todo_id",TODO_CHECK:"data-wiz-check",WIZ_DOCUMENT_MIN_VERSION:"data-wiz-document-min-version",WIZ_DOCUMENT_TYPE:"data-wiz-document-type"},CLASS:{BLOCK_SCROLL:"wiz-block-scroll",CODE_CONTAINER:"wiz-code-container",CODE_CONTAINER_PASTE:"wiz-code-container-paste",CODE_CONTAINER_OLD:"prettyprint",CODE_MIRROR:"CodeMirror",CODE_MIRROR_LINE:"CodeMirror-line",CODE_MIRROR_MEASURE:"CodeMirror-measure",CODE_MIRROR_GUTTER:"CodeMirror-gutter-wrapper",CODE_MIRROR_HSCROLL:"CodeMirror-scroll",CODE_TOOLS:"wiz-code-tools",CODE_TOOLS_INFO:"wiz-code-tools-info",CODE_TOOLS_MODE:"wiz-code-tools-mode",CODE_TOOLS_THEME:"wiz-code-tools-theme",CODE_TOOLS_MORE:"wiz-code-tools-more",EDITING:"wiz-editing",EDITOR_CONTAINER:"wiz-editor-container",EDITOR_PREVIEW_SHOW:"wiz-editor-preview-show",FLOAT_LAYER:"wiz-float-layer",HOTKEY:"hotkey",HOTKEY_LAYER:"hotkey-layer",IMG_ATTACHMENT:"wiz-img-attachment",IMG_NOT_DRAG:"wiz-img-cannot-drag",IMG_CONTAINER:"wiz-image-container",IMG_MENU:"wiz-img-menu",IMG_RESIZE_ACTIVE:"wiz-img-resize-active",IMG_RESIZE_CONTAINER:"wiz-img-resize-container",IMG_RESIZE_HANDLE:"wiz-img-resize-handle",IMG_SUB_MENU:"wiz-img-sub-menu",IMG_SUB_MENU_CONTAINER:"wiz-img-sub-menu-container",IMG_SUB_MENU_ITEM:"wiz-img-sub-menu-item",IMG_TITLE:"wiz-image-title",MARKDOWN_BODY:"markdown-body",MEDIA_DATA:"wiz-media-data",MENU_PLUGIN_CONTAINER:"wiz-menu-plugin-container",MENU_PLUGIN_OPTIONS:"wiz-menu-plugin-options",MENU_PLUGIN_OPTIONS_ITEM:"wiz-menu-plugin-options-item",ORDER_LIST_LEVEL:["wiz-list-level3","wiz-list-level1","wiz-list-level2"],ORDER_LIST_ALIGN_STYLE:"wiz-list-align-style",READONLY:"wiz-readonly",SELECTED_CELL:"wiz-selected-cell",SELECTED_CELL_MULTI:"wiz-selected-cell-multi",SELECT_PLUGIN_CONTAINER:"wiz-select-plugin-container",SELECT_PLUGIN_HEADER:"wiz-select-plugin-header",SELECT_PLUGIN_HEADER_TEXT:"wiz-select-plugin-header-text",SELECT_PLUGIN_MENU:"wiz-select-plugin-menu",SVG_IMAGE:"wiz-svg-image",SVG_TEMPLATE:"wiz-svg-template",TEMPLATE_EDITABLE:"wiz-template-editable",TABLE_ADD_BTN:"wiz-table-add-btn",TABLE_ADD_TIP_LINE:"wiz-table-add-tip-line",TABLE_ALL_BAR:"wiz-table-all-bar",TABLE_BAR:"wiz-table-bar",TABLE_BODY:"wiz-table-body",TABLE_COL_BAR:"wiz-table-col-bar",TABLE_COLOR_PAD:"wiz-table-color-pad",TABLE_COLOR_PAD_ROW:"wiz-table-color-pad-row",TABLE_COLOR_PAD_ITEM:"wiz-table-color-pad-item",TABLE_CONTAINER:"wiz-table-container",TABLE_DELETE_ZONE:"wiz-table-delete-zone",TABLE_LINE_BOX:"wiz-table-bar-box",TABLE_LINE_POINT:"wiz-table-bar-point",TABLE_MAIN_MENU:"wiz-table-main-meun",TABLE_MENU_BUTTON:"wiz-table-menu-button",TABLE_MOVING:"wiz-table-moving",TABLE_ROW_BAR:"wiz-table-row-bar",TABLE_SUB_MENU:"wiz-table-sub-menu",TABLE_TOOLS:"wiz-table-tools",TODO_ACCOUNT:"wiz-todo-account",TODO_AVATAR:"wiz-todo-avatar",TODO_CHECKBOX:"wiz-todo-checkbox",TODO_CHECK_IMG_OLD:"wiz-todo-img",TODO_DATE:"wiz-todo-dt",TODO_LAYER:"wiz-todo-layer",TODO_MAIN:"wiz-todo-main",TODO_LABEL_OLD:"wiz-todo-label",TODO_CHECKED:"wiz-todo-checked",TODO_UNCHECKED:"wiz-todo-unchecked",TODO_CHECKED_OLD:"wiz-todo-label-checked",TODO_UNCHECKED_OLD:"wiz-todo-label-unchecked",TODO_TAIL_OLD:"wiz-todo-tail",TODO_USER_AVATAR:"wiz-todo-avatar-",TODO_USER_INFO:"wiz-todo-completed-info",TOOL_TIP:"wiz-tooltip",TOOL_TIP_ITEM:"wiz-tooltip-item",TOOL_TIP_ARROW:"wiz-tooltip-arrow",TOOL_TIP_COLOR_BOX:"wiz-tooltip-color-box",TOOL_TIP_ARROW_BG:"wiz-tooltip-arrow-bg",WIZ_BODY:"wiz-editor-body",WIZ_OUTLINE:"wiz-editor-outline",WIZ_CONTENT_IFRAME_ACTIVE:"wiz-content-active",WIZ_EIDTOR_BODY_CONTAINER:"wiz-editor-body-container",WIZ_EIDTOR_IFRAME:"wiz-editor-iframe",WIZ_EIDTOR_PREVIEW_CONTAINER:"wiz-editor-preview-container",WIZ_EIDTOR_TOOlBAR_CONTAINER:"wiz-editor-toolbar-container",WIZ_EIDTOR_TOOlBAR_MAIN:"wiz-editor-toolbar-main",WIZ_EIDTOR_TOOlBAR_SIDE:"wiz-editor-toolbar-side"},CLIENT_EVENT:{WizEditorClickImg:"WizEditorClickImg",WizEditorClickSvg:"WizEditorClickSvg",WizEditorAfterCopied:"WizEditorAfterCopied",WizEditorPaste:"WizEditorPaste",WizEditorSetScrollTop:"WizEditorSetScrollTop",WizEditorTrackEvent:"WizEditorTrackEvent",WizMarkdownRender:"WizMarkdownRender",WizReaderClickImg:"WizReaderClickImg",IosPrompt:"IosPrompt"},CODE:{StorageKey:{Mode:"wiz-code-mode",Theme:"wiz-code-theme",Wrap:"wiz-code-wrap"}},COLOR:["#CB3C3C","#0C9460","#FF3399","#FF6005","#8058BD","#009999","#8AA725","#339900","#CC6600","#3BBABA","#D4CA1A","#2389B0","#006699","#FF8300","#2C6ED5","#FF0000","#B07CFF","#CC3399","#EB4847","#3917E6"],CSS:{DEFAULT_FONT:'Helvetica, "Hiragino Sans GB", "微软雅黑", "Microsoft YaHei UI", SimSun, SimHei, arial, sans-serif',IMG:{SPAN:{position:"relative",display:"inline-block"},MASK:{position:"absolute",width:"100% !important",height:"100% !important",top:"0",left:"0",opacity:".5",filter:"alpha(opacity=50)",border:"2px solid","box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box"}},IMG_DELETED:{background:"#fdc6c6 url(data:image/gif;base64,R0lGODlhDwAPAIABAIcUFP///yH5BAEKAAEALAAAAAAPAA8AAAIajI8IybadHjxyhjox1I0zH1mU6JCXCSpmUAAAOw==)","border-color":"#E47070"},IMG_INSERT:{background:"#ccffcc","border-color":"#00AA00"},TODO_LIST:{IMG_WIDTH:40},Z_INDEX:{amendInfo:150,tableBorder:105,tableColRowLine:120,tableRangeDot:110,tableTDBefore:100,tableTools:130,tableToolsArrow:10},TABLECOMPONENT:{PADDING:28}},DOCUMENT_TYPE:{COMMON:"common",OUTLINE:"outline"},EVENT:{BEFORE_GET_DOCHTML:"BEFORE_GET_DOCHTML",BEFORE_SAVESNAP:"BEFORE_SAVESNAP",AFTER_INSERT_DOM:"AFTER_INSERT_DOM",AFTER_RESTORE_HISTORY:"AFTER_RESTORE_HISTORY",AUTO_EDIT:"AUTO_EDIT",EXEC_COMMEND:"EXEC_COMMEND",ON_DBLCLICK:"ON_DBLCLICK",ON_CLICK:"ON_CLICK",ON_COPY:"ON_COPY",ON_CUT:"ON_CUT",ON_DOM_SUBTREE_MODIFIED:"ON_DOM_SUBTREE_MODIFIED",ON_DRAG_START:"ON_DRAG_START",ON_DRAG_ENTER:"ON_DRAG_ENTER",ON_DROP:"ON_DROP",ON_EXEC_COMMAND:"ON_EXEC_COMMAND",ON_INPUT:"ON_INPUT",ON_KEY_DOWN:"ON_KEY_DOWN",ON_KEY_UP:"ON_KEY_UP",ON_MARKER_INITIATED:"ON_MARKER_INITIATED",ON_MENU_PLUGIN_HIDE:"ON_MENU_PLUGIN_HIDE",ON_MENU_PLUGIN_SHOW:"ON_MENU_PLUGIN_SHOW",ON_MOUSE_DOWN:"ON_MOUSE_DOWN",ON_MOUSE_MOVE:"ON_MOUSE_MOVE",ON_MOUSE_OVER:"ON_MOUSE_OVER",ON_MOUSE_UP:"ON_MOUSE_UP",ON_ORIENTATION_CHANGE:"ON_ORIENTATION_CHANGE",ON_PASTE:"ON_PASTE",ON_RESIZE:"ON_RESIZE",ON_SCROLL:"ON_SCROLL",ON_SELECT_PLUGIN_CHANGE:"ON_SELECT_PLUGIN_CHANGE",ON_SELECT_PLUGIN_HIDE:"ON_SELECT_PLUGIN_HIDE",ON_SELECT_PLUGIN_SHOW:"ON_SELECT_PLUGIN_SHOW",ON_SELECTION_CHANGE:"ON_SELECTION_CHANGE",ON_SELECT_START:"ON_SELECT_START",ON_TEXT_INPUT:"ON_TEXT_INPUT",ON_TOUCH_START:"ON_TOUCH_START",ON_TOUCH_END:"ON_TOUCH_END",UPDATE_TABLE_RENDER:"UPDATE_TABLE_RENDER"},HISTORY:{TYPE:{CODE_MIRROR:"CODE_MIRROR",COMMON:"COMMON"}},ID:{BODY_TMP_BOTTOM_STYLE:"wiz-tmp-bottom-style",AMEND_INFO:"wiz-amend-info",AMEND_INFO_SINGLE:"wiz-amend-info-single",AMEND_INFO_MULTI:"wiz-amend-info-multi",AMEND_INFO_NAME:"wiz-amend-info-name",AMEND_INFO_IMG:"wiz-amend-info-image",AMEND_INFO_CONTENT:"wiz-amend-info-content",AMEND_INFO_TIME:"wiz-amend-info-time",AMEND_INFO_TOOLS:"wiz-amend-info-tools",AMEND_INFO_ACCEPT:"wiz-amend-info-accept",AMEND_INFO_REFUSE:"wiz-amend-info-refuse",AMEND_USER_INFO:"wiz-amend-user",CODE_STYLE:"wiz_code_style",FORMAT_PAINTER_STYLE:"wiz_format_painter_style",IFRAME_FOR_SAVE:"wiz-iframe-for-save",IMAGE_MENU_CONTAINER:"wiz-img-menu-container",MARKER_ROOT:"wiz-painter-root",MARKER_STYLE:"wiz-marker-style",MEDIA_STYLE:"wiz-media-style",PURE_READ_STYLE:"wiz-pure-read-style",TABLE_RANGE_BORDER:"wiz-table-range-border",TABLE_ROW_LINE:"wiz-table-row-line",TABLE_COL_LINE:"wiz-table-col-line",TODO_STYLE:"wiz_todo_style",TODO_STYLE_OLD:"wiz_todo_style_id",TODO_AVATAR_STYLE:"wiz_todo_style_avatar_",TMP_STYLE_PRE:"wiz_tmp_style_",WIZ_DEFAULT_STYLE:"wiz_custom_css",WIZ_EIDTOR_FRAME_STYLE:"wiz-editor-frame-style",WIZ_EIDTOR_FRAME_BODY_STYLE:"wiz-editor-frame-body-style",WIZ_EIDTOR_PREVIEW_STYLE:"wiz-editor-preview-style",WIZ_EIDTOR_TOOlBAR_STYLE:"wiz-editor-toolbar-style",WIZ_TEMPLATE_INFO:"wiz-template-info"},NAME:{CODE_STYLE:"wiz_code_style",TMP_STYLE:"wiz_tmp_editor_style",UNSAVE_STYLE:"wiz_unsave_style"},NOTE_READER_TYPE:{COMMON:"common",MARKDOWN:"markdown",MATHJAX:"mathjax",OUTLINE:"outline"},NOTE_EDITOR_TYPE:{COMMON:"common",MARKDOWN:"markdown",OUTLINE:"outline"},MENU_PLUGIN:{TYPE:{MENU:"menu",SELECT:"select"}},SELECT_PLUGIN:{TYPE:{COMMON:"common",ICON:"icon"}},TAG:{CODE_MIRROR:"wiz_code_mirror",MARKER:"wiz_marker",MEDIA:"wiz_media",TMP_CARET:"wiz_tmp_caret",TMP_HIGHLIGHT_TAG:"wiz_tmp_highlight_tag",TMP_PLUGIN_TAG:"wiz_tmp_plugin_tag",TMP_TAG:"wiz_tmp_tag"},TYPE:{EDITOR_EVENT:{SelectionChange:"selectionchange",HistoryUndo:"historyUndo"},IMG_DELETE:"delete",IMG_INSERT:"insert",LAYOUT:{BOTTOM:"BOTTOM",BOTTOM_END:"BOTTOM_END",BOTTOM_START:"BOTTOM_START",TOP:"TOP",TOP_END:"TOP_END",TOP_START:"TOP_START",LEFT_START:"LEFT_START",LEFT_END:"LEFT_END",RIGHT_START:"RIGHT_START",RIGHT_END:"RIGHT_END"},PASTE:{START:"start",END:"end",CONTENT:"content"},TABLE:{COPY:"copy",PASTE:"paste",CLEAR_CELL:"clearCell",MERGE_CELL:"mergeCell",SPLIT_CELL:"splitCell",INSERT_ROW_UP:"insertRowUp",INSERT_ROW_DOWN:"insertRowDown",INSERT_COL_LEFT:"insertColLeft",INSERT_COL_RIGHT:"insertColRight",DELETE_ROW:"deleteRow",DELETE_COL:"deleteCol",SET_CELL_BG:"setCellBg",SELECT_BG:"selectBg",SET_CELL_ALIGN:"setCellAlign",DISTRIBUTE_COLS:"distributeCols",DELETE_TABLE:"deleteTable",OPEN_MENU:"openMenu",OPEN_SUB_MENU:"openSubMenu"}}};e.exports=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"initCore",value:function(e){this._core=e,this._env=e.env,this._lang=e.lang,this._require=e.require}},{key:"core",get:function(){return this._core}},{key:"env",get:function(){return this._env}},{key:"lang",get:function(){return this._lang}},{key:"req",get:function(){return this._require}},{key:"domUtils",get:function(){return this._require.domUtils}},{key:"rangeUtils",get:function(){return this._require.rangeUtils}}])&&n(t.prototype,r),o&&n(t,o),e}();e.exports=r},function(e,t,n){var r=n(1),o=n(174);try{"abc".localeCompare("abcd")}catch(e){String.prototype.localeCompare=function(e){return this.toString()===e?0:this.toString()>e?1:-1}}var i=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;"wiz".trim||(String.prototype.trim=function(){return this.replace(i,"")});var a=/[\-\[\]{}()*+?.,\\^$|#\s]/g;try{"abc".escapeRegex()}catch(e){String.prototype.escapeRegex=function(){return this.toString().replace(a,"\\$&")}}try{"abc".escapeReplace()}catch(e){String.prototype.escapeReplace=function(){return this.toString().replace(/\$/gi,"$$$$")}}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1});var l={checkNonTxtKey:function(e){var t=e.keyCode||e.which;return!(!e.ctrlKey&&!e.metaKey)||!(t>=48&&t<=57||t>=65&&t<=90||t>=96&&t<=107||t>=109&&t<=111||t>=186&&t<=192||t>=219&&t<=222||229===t||0===t||13===t||32===t)},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isBoolean:function(e){return"[object Boolean]"===Object.prototype.toString.apply(e)},isEmpty:function(e){if(!e)return!0;var t=new RegExp("[\r\n"+r.FILL_CHAR+"]","ig"),n=/\r?\n/gi.test(e),o=e.replace(t,""),i=0===e.replace(t,"").trim().length;return 0===o.length||n&&i},isSameAmendTime:function(e,t){if(!e||!t)return!1;var n=l.getDateForTimeStr(e),o=l.getDateForTimeStr(t);return Math.abs(n-o)<=r.AMEND_BATCH_TIME_SPACE},checkChar:function(e,t){var n,r,o,i;for(n=0,r=t.length;n<r;n++){if(o=t[n][0],null===(i=t[n].length>1?t[n][1]:null)&&e===o)return!0;if(null!==i&&e>=o&&e<=i)return!0}return!1},compareVersion:function(e,t){var n,r,o,i;for(e=e.split("."),t=t.split("."),n=0,r=e.length;n<r;n++){if((o=parseInt(e[n],10))<(i=t[n]?parseInt(t[n],10):-1))return-1;if(o>i)return 1}return e.length<t.length?-1:0},isAlpha:function(e){return l.checkChar(e,[[48,57],[65,90],[97,122],[192,214],[216,246],[248,256]])},isCJK:function(e){return l.checkChar(e,[[12352,12687],[13056,13183],[13312,15661],[19968,40959],[63744,64255],[44032,55215]])},isCommonProtocol:function(e){if(!e)return!1;return/^[\w\d-_]*:\/\//i.test(e)},isSpace:function(e){return l.checkChar(e,[[9,13],[32],[160]])},isWizProtocol:function(e){if(!e)return!1;return/^(wiz|wiznote|wiznotecmd):/i.test(e)},forEach:function(e,t){if(e&&t)for(var n=0;n<e.length;n++)t(e[n],n)},getWordCount:function(e){var t,n,r,o={nWords:0,nWordsWithPunctuation:0,nChars:0,nCharsWithSpace:0,nNonAsianWords:0,nNonAsianChars:0,nAsianChars:0,nPunctuations:0};if(!e)return o;var i=!1,a=!1,s=0;for(o.nCharsWithSpace=e.length,o.nChars=o.nCharsWithSpace,t=0,n=e.length;t<n;t++)r=e.charCodeAt(t),i=!1,l.isCJK(r)?o.nAsianChars++:l.isSpace(r)?o.nChars--:l.isAlpha(r)&&(i=!0),i&&!a?(s=1,a=!0):i&&a?s++:i||(a&&(o.nNonAsianWords++,o.nNonAsianChars+=s,s=0),a=!1);return i&&a&&o.nNonAsianWords++,o.nWords=o.nNonAsianWords+o.nAsianChars,o.nPunctuations=o.nCharsWithSpace-o.nAsianChars-o.nNonAsianChars,o.nWordsWithPunctuation=o.nWords+o.nPunctuations,o},getEventClientPos:function(e){return{x:e.changedTouches?e.changedTouches[0].clientX:e.clientX,y:e.changedTouches?e.changedTouches[0].clientY:e.clientY}},getFileNameByUrl:function(e){var t=e.lastIndexOf("/");return t<0?e:e.substr(t+1)},getHash:function(e){var t,n=1315423911;for(t=e.length-1;t>=0;t--)n^=(n<<5)+e.charCodeAt(t)+(n>>2);return 2147483647&n},getTime:function(){var e=new Date;return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds());function t(e){var t=e.toString();return 1===t.length?"0"+t:t}},getDateForTimeStr:function(e){return new Date(Date.parse(e.replace(/-/g,"/")))},listToMap:function(e){if(!e)return{};var t,n,r,o={};for(t=0,n=(e=l.isArray(e)?e:e.split(",")).length;t<n;t++)o[(r=e[t]).toUpperCase()]=o[r]=1;return o},rgb2Hex:function(e){if(!e)return"";if(!/^rgba?\(.*\)$/i.test(e))return e;var t=e.replace(/.*\((.*)\)/gi,"$1").split(",");if(t.length<3)return"";var n=parseInt(t[0],10),r=parseInt(t[1],10),o=parseInt(t[2],10),i=4===t.length?parseFloat(t[3]):1;return 0===i?"":"#"+l(a(n,i))+l(a(r,i))+l(a(o,i));function a(e,t){return e+Math.floor((255-e)*(1-t))}function l(e){var t=parseInt(e).toString(16);return 1===t.length?"0"+t:t}},removeDup:function(e){var t,n,r,o=[];for(t=0,n=e.length;t<n;t++)r=e[t],o.indexOf(r)<0&&o.push(r);return o},replaceSpecialChar:function(e){return e=e.replace(new RegExp(String.fromCharCode(160),"g")," ").replace(String.fromCharCode(65279),"")},getByteLength:function(e){try{return encodeURIComponent(e).match(/%[89ABab]/g)?2:e.length}catch(e){return console.error(e),1}},splitByByteLength:function(e,t){e||(e="");var n=/[\ud800-\udbff]/g,r=e.split(""),o=[],i=0,a=[],s="";return r.forEach((function(e){if(n.test(e))s=e;else{var r=e;s&&(r=s+e,s="");var c=l.getByteLength(r);i+c<=t?(a.push(r),i+=c):(o.push(a.join("")),a=[r],i=c)}})),a.length>0&&o.push(a.join("")),o},stopEvent:function(e){e&&(l.stopEventBubble(e),l.stopEventDefault(e))},stopEventBubble:function(e){e.stopPropagation()},stopEventDefault:function(e){e.preventDefault()},space2HTML:function(e){var t=/  /g;return(e||"").replace(/	/g,"    ").replace(t,r.SPACE_CHAR+" ").replace(t,r.SPACE_CHAR+" ").replace(/^ /gm,r.SPACE_CHAR)},txt2HTML:function(e,t){for(var n,o,i=!!(t=t||{}).wizTableSaveDom,a=[],s=(e=l.space2HTML(e)).split(/\r?\n/),c=new RegExp(r.WIZ_TABLE_IN_MARKDOWN_SRC_REG),d=/^```/,u=!1,f=0;f<s.length;f++){if(n=s[f],i&&!u&&d.test(n)?u=!0:i&&u&&d.test(n)&&(u=!1),i&&!u&&c.test(n))o=n;else if(n)if(i)o="<div>"+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>";else{var h=0===f?"span":"div";o="<"+h+">"+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</"+h+">"}else o="<br/>";a.push(o)}return a.join("")},dom:{insertToHead:function(e,t){t.querySelector("HEAD").appendChild(e)}},math:{getDistance:function(e,t){if(e.x===t.x)return Math.abs(t.y-e.y);if(e.y===t.y)return Math.abs(t.x-e.x);var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},getRandomArbitrary:function(e,t){return l.math.random()*(t-e)+e},random:function(){return o()()}},storage:{get:function(e){try{var t=window.localStorage[e];return t?JSON.parse(t):null}catch(e){return console.error(e),null}},set:function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}},remove:function(e){window.localStorage.removeItem(e)}}};e.exports=l},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){var r=n(16),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=a),i(o,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===n(e)?null!==e:"function"==typeof e}},function(e,t,n){var r=n(74)("wks"),o=n(45),i=n(6).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(29),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,r){"use strict";function o(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function a(e,t,n){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var l;"object"===t(e)?e.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{l=n(442).Buffer}catch(e){}function s(e,t,n){for(var r=0,o=Math.min(e.length,n),i=t;i<o;i++){var a=e.charCodeAt(i)-48;r<<=4,r|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return r}function c(e,t,n,r){for(var o=0,i=Math.min(e.length,n),a=t;a<i;a++){var l=e.charCodeAt(a)-48;o*=r,o+=l>=49?l-49+10:l>=17?l-17+10:l}return o}a.isBN=function(e){return e instanceof a||null!==e&&"object"===t(e)&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,n,r){if("number"==typeof e)return this._initNumber(e,n,r);if("object"===t(e))return this._initArray(e,n,r);"hex"===n&&(n=16),o(n===(0|n)&&n>=2&&n<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===n?this._parseHex(e,i):this._parseBase(e,n,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),n,r)},a.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(o(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},a.prototype._initArray=function(e,t,n){if(o("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,a,l=0;if("be"===n)for(r=e.length-1,i=0;r>=0;r-=3)a=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[i]|=a<<l&67108863,this.words[i+1]=a>>>26-l&67108863,(l+=24)>=26&&(l-=26,i++);else if("le"===n)for(r=0,i=0;r<e.length;r+=3)a=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[i]|=a<<l&67108863,this.words[i+1]=a>>>26-l&67108863,(l+=24)>=26&&(l-=26,i++);return this.strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,o,i=0;for(n=e.length-6,r=0;n>=t;n-=6)o=s(e,n,n+6),this.words[r]|=o<<i&67108863,this.words[r+1]|=o>>>26-i&4194303,(i+=24)>=26&&(i-=26,r++);n+6!==t&&(o=s(e,t,n+6),this.words[r]|=o<<i&67108863,this.words[r+1]|=o>>>26-i&4194303),this.strip()},a.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,o=1;o<=67108863;o*=t)r++;r--,o=o/t|0;for(var i=e.length-n,a=i%r,l=Math.min(i,i-a)+n,s=0,d=n;d<l;d+=r)s=c(e,d,d+r,t),this.imuln(o),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==a){var u=1;for(s=c(e,d,e.length,t),d=0;d<a;d++)u*=t;this.imuln(u),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var o=0|e.words[0],i=0|t.words[0],a=o*i,l=67108863&a,s=a/67108864|0;n.words[0]=l;for(var c=1;c<r;c++){for(var d=s>>>26,u=67108863&s,f=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=f;h++){var p=c-h|0;d+=(a=(o=0|e.words[p])*(i=0|t.words[h])+u)/67108864|0,u=67108863&a}n.words[c]=0|u,s=0|d}return 0!==s?n.words[c]=0|s:n.length--,n.strip()}a.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var r=0,i=0,a=0;a<this.length;a++){var l=this.words[a],s=(16777215&(l<<r|i)).toString(16);n=0!==(i=l>>>24-r&16777215)||a!==this.length-1?d[6-s.length]+s+n:s+n,(r+=2)>=26&&(r-=26,a--)}for(0!==i&&(n=i.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],h=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(h).toString(e);n=(p=p.idivn(h)).isZero()?m+n:d[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return o(void 0!==l),this.toArrayLike(l,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,n){var r=this.byteLength(),i=n||Math.max(1,r);o(r<=i,"byte array longer than desired length"),o(i>0,"Requested array length <= 0"),this.strip();var a,l,s="le"===t,c=new e(i),d=this.clone();if(s){for(l=0;!d.isZero();l++)a=d.andln(255),d.iushrn(8),c[l]=a;for(;l<i;l++)c[l]=0}else{for(l=0;l<i-r;l++)c[l]=0;for(l=0;!d.isZero();l++)a=d.andln(255),d.iushrn(8),c[i-l-1]=a}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return o(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return o(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return o(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){o("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){o("number"==typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this.strip()},a.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var o=0,i=0;i<r.length;i++)t=(0|n.words[i])+(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<n.length;i++)t=(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=n.length,0!==o)this.words[this.length]=o,this.length++;else if(n!==this)for(;i<n.length;i++)this.words[i]=n.words[i];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(n=this,r=e):(n=e,r=this);for(var i=0,a=0;a<r.length;a++)i=(t=(0|n.words[a])-(0|r.words[a])+i)>>26,this.words[a]=67108863&t;for(;0!==i&&a<n.length;a++)i=(t=(0|n.words[a])+i)>>26,this.words[a]=67108863&t;if(0===i&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,o,i,a=e.words,l=t.words,s=n.words,c=0,d=0|a[0],u=8191&d,f=d>>>13,h=0|a[1],p=8191&h,m=h>>>13,g=0|a[2],v=8191&g,b=g>>>13,y=0|a[3],_=8191&y,S=y>>>13,E=0|a[4],C=8191&E,T=E>>>13,A=0|a[5],O=8191&A,w=A>>>13,N=0|a[6],L=8191&N,I=N>>>13,U=0|a[7],M=8191&U,D=U>>>13,x=0|a[8],R=8191&x,k=x>>>13,P=0|a[9],B=8191&P,z=P>>>13,F=0|l[0],j=8191&F,q=F>>>13,H=0|l[1],W=8191&H,Y=H>>>13,G=0|l[2],V=8191&G,Z=G>>>13,K=0|l[3],X=8191&K,J=K>>>13,$=0|l[4],Q=8191&$,ee=$>>>13,te=0|l[5],ne=8191&te,re=te>>>13,oe=0|l[6],ie=8191&oe,ae=oe>>>13,le=0|l[7],se=8191&le,ce=le>>>13,de=0|l[8],ue=8191&de,fe=de>>>13,he=0|l[9],pe=8191&he,me=he>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(u,j))|0)+((8191&(o=(o=Math.imul(u,q))+Math.imul(f,j)|0))<<13)|0;c=((i=Math.imul(f,q))+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,j),o=(o=Math.imul(p,q))+Math.imul(m,j)|0,i=Math.imul(m,q);var ve=(c+(r=r+Math.imul(u,W)|0)|0)+((8191&(o=(o=o+Math.imul(u,Y)|0)+Math.imul(f,W)|0))<<13)|0;c=((i=i+Math.imul(f,Y)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(v,j),o=(o=Math.imul(v,q))+Math.imul(b,j)|0,i=Math.imul(b,q),r=r+Math.imul(p,W)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(u,V)|0)|0)+((8191&(o=(o=o+Math.imul(u,Z)|0)+Math.imul(f,V)|0))<<13)|0;c=((i=i+Math.imul(f,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(_,j),o=(o=Math.imul(_,q))+Math.imul(S,j)|0,i=Math.imul(S,q),r=r+Math.imul(v,W)|0,o=(o=o+Math.imul(v,Y)|0)+Math.imul(b,W)|0,i=i+Math.imul(b,Y)|0,r=r+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var ye=(c+(r=r+Math.imul(u,X)|0)|0)+((8191&(o=(o=o+Math.imul(u,J)|0)+Math.imul(f,X)|0))<<13)|0;c=((i=i+Math.imul(f,J)|0)+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(C,j),o=(o=Math.imul(C,q))+Math.imul(T,j)|0,i=Math.imul(T,q),r=r+Math.imul(_,W)|0,o=(o=o+Math.imul(_,Y)|0)+Math.imul(S,W)|0,i=i+Math.imul(S,Y)|0,r=r+Math.imul(v,V)|0,o=(o=o+Math.imul(v,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,r=r+Math.imul(p,X)|0,o=(o=o+Math.imul(p,J)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,J)|0;var _e=(c+(r=r+Math.imul(u,Q)|0)|0)+((8191&(o=(o=o+Math.imul(u,ee)|0)+Math.imul(f,Q)|0))<<13)|0;c=((i=i+Math.imul(f,ee)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(O,j),o=(o=Math.imul(O,q))+Math.imul(w,j)|0,i=Math.imul(w,q),r=r+Math.imul(C,W)|0,o=(o=o+Math.imul(C,Y)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,Y)|0,r=r+Math.imul(_,V)|0,o=(o=o+Math.imul(_,Z)|0)+Math.imul(S,V)|0,i=i+Math.imul(S,Z)|0,r=r+Math.imul(v,X)|0,o=(o=o+Math.imul(v,J)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,J)|0,r=r+Math.imul(p,Q)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,i=i+Math.imul(m,ee)|0;var Se=(c+(r=r+Math.imul(u,ne)|0)|0)+((8191&(o=(o=o+Math.imul(u,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((i=i+Math.imul(f,re)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,j),o=(o=Math.imul(L,q))+Math.imul(I,j)|0,i=Math.imul(I,q),r=r+Math.imul(O,W)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(w,W)|0,i=i+Math.imul(w,Y)|0,r=r+Math.imul(C,V)|0,o=(o=o+Math.imul(C,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,r=r+Math.imul(_,X)|0,o=(o=o+Math.imul(_,J)|0)+Math.imul(S,X)|0,i=i+Math.imul(S,J)|0,r=r+Math.imul(v,Q)|0,o=(o=o+Math.imul(v,ee)|0)+Math.imul(b,Q)|0,i=i+Math.imul(b,ee)|0,r=r+Math.imul(p,ne)|0,o=(o=o+Math.imul(p,re)|0)+Math.imul(m,ne)|0,i=i+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(u,ie)|0)|0)+((8191&(o=(o=o+Math.imul(u,ae)|0)+Math.imul(f,ie)|0))<<13)|0;c=((i=i+Math.imul(f,ae)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(M,j),o=(o=Math.imul(M,q))+Math.imul(D,j)|0,i=Math.imul(D,q),r=r+Math.imul(L,W)|0,o=(o=o+Math.imul(L,Y)|0)+Math.imul(I,W)|0,i=i+Math.imul(I,Y)|0,r=r+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(w,V)|0,i=i+Math.imul(w,Z)|0,r=r+Math.imul(C,X)|0,o=(o=o+Math.imul(C,J)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,J)|0,r=r+Math.imul(_,Q)|0,o=(o=o+Math.imul(_,ee)|0)+Math.imul(S,Q)|0,i=i+Math.imul(S,ee)|0,r=r+Math.imul(v,ne)|0,o=(o=o+Math.imul(v,re)|0)+Math.imul(b,ne)|0,i=i+Math.imul(b,re)|0,r=r+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,ae)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,ae)|0;var Ce=(c+(r=r+Math.imul(u,se)|0)|0)+((8191&(o=(o=o+Math.imul(u,ce)|0)+Math.imul(f,se)|0))<<13)|0;c=((i=i+Math.imul(f,ce)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(R,j),o=(o=Math.imul(R,q))+Math.imul(k,j)|0,i=Math.imul(k,q),r=r+Math.imul(M,W)|0,o=(o=o+Math.imul(M,Y)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,Y)|0,r=r+Math.imul(L,V)|0,o=(o=o+Math.imul(L,Z)|0)+Math.imul(I,V)|0,i=i+Math.imul(I,Z)|0,r=r+Math.imul(O,X)|0,o=(o=o+Math.imul(O,J)|0)+Math.imul(w,X)|0,i=i+Math.imul(w,J)|0,r=r+Math.imul(C,Q)|0,o=(o=o+Math.imul(C,ee)|0)+Math.imul(T,Q)|0,i=i+Math.imul(T,ee)|0,r=r+Math.imul(_,ne)|0,o=(o=o+Math.imul(_,re)|0)+Math.imul(S,ne)|0,i=i+Math.imul(S,re)|0,r=r+Math.imul(v,ie)|0,o=(o=o+Math.imul(v,ae)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,ae)|0,r=r+Math.imul(p,se)|0,o=(o=o+Math.imul(p,ce)|0)+Math.imul(m,se)|0,i=i+Math.imul(m,ce)|0;var Te=(c+(r=r+Math.imul(u,ue)|0)|0)+((8191&(o=(o=o+Math.imul(u,fe)|0)+Math.imul(f,ue)|0))<<13)|0;c=((i=i+Math.imul(f,fe)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,j),o=(o=Math.imul(B,q))+Math.imul(z,j)|0,i=Math.imul(z,q),r=r+Math.imul(R,W)|0,o=(o=o+Math.imul(R,Y)|0)+Math.imul(k,W)|0,i=i+Math.imul(k,Y)|0,r=r+Math.imul(M,V)|0,o=(o=o+Math.imul(M,Z)|0)+Math.imul(D,V)|0,i=i+Math.imul(D,Z)|0,r=r+Math.imul(L,X)|0,o=(o=o+Math.imul(L,J)|0)+Math.imul(I,X)|0,i=i+Math.imul(I,J)|0,r=r+Math.imul(O,Q)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(w,Q)|0,i=i+Math.imul(w,ee)|0,r=r+Math.imul(C,ne)|0,o=(o=o+Math.imul(C,re)|0)+Math.imul(T,ne)|0,i=i+Math.imul(T,re)|0,r=r+Math.imul(_,ie)|0,o=(o=o+Math.imul(_,ae)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,ae)|0,r=r+Math.imul(v,se)|0,o=(o=o+Math.imul(v,ce)|0)+Math.imul(b,se)|0,i=i+Math.imul(b,ce)|0,r=r+Math.imul(p,ue)|0,o=(o=o+Math.imul(p,fe)|0)+Math.imul(m,ue)|0,i=i+Math.imul(m,fe)|0;var Ae=(c+(r=r+Math.imul(u,pe)|0)|0)+((8191&(o=(o=o+Math.imul(u,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((i=i+Math.imul(f,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,W),o=(o=Math.imul(B,Y))+Math.imul(z,W)|0,i=Math.imul(z,Y),r=r+Math.imul(R,V)|0,o=(o=o+Math.imul(R,Z)|0)+Math.imul(k,V)|0,i=i+Math.imul(k,Z)|0,r=r+Math.imul(M,X)|0,o=(o=o+Math.imul(M,J)|0)+Math.imul(D,X)|0,i=i+Math.imul(D,J)|0,r=r+Math.imul(L,Q)|0,o=(o=o+Math.imul(L,ee)|0)+Math.imul(I,Q)|0,i=i+Math.imul(I,ee)|0,r=r+Math.imul(O,ne)|0,o=(o=o+Math.imul(O,re)|0)+Math.imul(w,ne)|0,i=i+Math.imul(w,re)|0,r=r+Math.imul(C,ie)|0,o=(o=o+Math.imul(C,ae)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,ae)|0,r=r+Math.imul(_,se)|0,o=(o=o+Math.imul(_,ce)|0)+Math.imul(S,se)|0,i=i+Math.imul(S,ce)|0,r=r+Math.imul(v,ue)|0,o=(o=o+Math.imul(v,fe)|0)+Math.imul(b,ue)|0,i=i+Math.imul(b,fe)|0;var Oe=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,V),o=(o=Math.imul(B,Z))+Math.imul(z,V)|0,i=Math.imul(z,Z),r=r+Math.imul(R,X)|0,o=(o=o+Math.imul(R,J)|0)+Math.imul(k,X)|0,i=i+Math.imul(k,J)|0,r=r+Math.imul(M,Q)|0,o=(o=o+Math.imul(M,ee)|0)+Math.imul(D,Q)|0,i=i+Math.imul(D,ee)|0,r=r+Math.imul(L,ne)|0,o=(o=o+Math.imul(L,re)|0)+Math.imul(I,ne)|0,i=i+Math.imul(I,re)|0,r=r+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,ae)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,ae)|0,r=r+Math.imul(C,se)|0,o=(o=o+Math.imul(C,ce)|0)+Math.imul(T,se)|0,i=i+Math.imul(T,ce)|0,r=r+Math.imul(_,ue)|0,o=(o=o+Math.imul(_,fe)|0)+Math.imul(S,ue)|0,i=i+Math.imul(S,fe)|0;var we=(c+(r=r+Math.imul(v,pe)|0)|0)+((8191&(o=(o=o+Math.imul(v,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(B,X),o=(o=Math.imul(B,J))+Math.imul(z,X)|0,i=Math.imul(z,J),r=r+Math.imul(R,Q)|0,o=(o=o+Math.imul(R,ee)|0)+Math.imul(k,Q)|0,i=i+Math.imul(k,ee)|0,r=r+Math.imul(M,ne)|0,o=(o=o+Math.imul(M,re)|0)+Math.imul(D,ne)|0,i=i+Math.imul(D,re)|0,r=r+Math.imul(L,ie)|0,o=(o=o+Math.imul(L,ae)|0)+Math.imul(I,ie)|0,i=i+Math.imul(I,ae)|0,r=r+Math.imul(O,se)|0,o=(o=o+Math.imul(O,ce)|0)+Math.imul(w,se)|0,i=i+Math.imul(w,ce)|0,r=r+Math.imul(C,ue)|0,o=(o=o+Math.imul(C,fe)|0)+Math.imul(T,ue)|0,i=i+Math.imul(T,fe)|0;var Ne=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(o=(o=o+Math.imul(_,me)|0)+Math.imul(S,pe)|0))<<13)|0;c=((i=i+Math.imul(S,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(B,Q),o=(o=Math.imul(B,ee))+Math.imul(z,Q)|0,i=Math.imul(z,ee),r=r+Math.imul(R,ne)|0,o=(o=o+Math.imul(R,re)|0)+Math.imul(k,ne)|0,i=i+Math.imul(k,re)|0,r=r+Math.imul(M,ie)|0,o=(o=o+Math.imul(M,ae)|0)+Math.imul(D,ie)|0,i=i+Math.imul(D,ae)|0,r=r+Math.imul(L,se)|0,o=(o=o+Math.imul(L,ce)|0)+Math.imul(I,se)|0,i=i+Math.imul(I,ce)|0,r=r+Math.imul(O,ue)|0,o=(o=o+Math.imul(O,fe)|0)+Math.imul(w,ue)|0,i=i+Math.imul(w,fe)|0;var Le=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(o=(o=o+Math.imul(C,me)|0)+Math.imul(T,pe)|0))<<13)|0;c=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Le>>>26)|0,Le&=67108863,r=Math.imul(B,ne),o=(o=Math.imul(B,re))+Math.imul(z,ne)|0,i=Math.imul(z,re),r=r+Math.imul(R,ie)|0,o=(o=o+Math.imul(R,ae)|0)+Math.imul(k,ie)|0,i=i+Math.imul(k,ae)|0,r=r+Math.imul(M,se)|0,o=(o=o+Math.imul(M,ce)|0)+Math.imul(D,se)|0,i=i+Math.imul(D,ce)|0,r=r+Math.imul(L,ue)|0,o=(o=o+Math.imul(L,fe)|0)+Math.imul(I,ue)|0,i=i+Math.imul(I,fe)|0;var Ie=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((i=i+Math.imul(w,me)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,ie),o=(o=Math.imul(B,ae))+Math.imul(z,ie)|0,i=Math.imul(z,ae),r=r+Math.imul(R,se)|0,o=(o=o+Math.imul(R,ce)|0)+Math.imul(k,se)|0,i=i+Math.imul(k,ce)|0,r=r+Math.imul(M,ue)|0,o=(o=o+Math.imul(M,fe)|0)+Math.imul(D,ue)|0,i=i+Math.imul(D,fe)|0;var Ue=(c+(r=r+Math.imul(L,pe)|0)|0)+((8191&(o=(o=o+Math.imul(L,me)|0)+Math.imul(I,pe)|0))<<13)|0;c=((i=i+Math.imul(I,me)|0)+(o>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,r=Math.imul(B,se),o=(o=Math.imul(B,ce))+Math.imul(z,se)|0,i=Math.imul(z,ce),r=r+Math.imul(R,ue)|0,o=(o=o+Math.imul(R,fe)|0)+Math.imul(k,ue)|0,i=i+Math.imul(k,fe)|0;var Me=(c+(r=r+Math.imul(M,pe)|0)|0)+((8191&(o=(o=o+Math.imul(M,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((i=i+Math.imul(D,me)|0)+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,ue),o=(o=Math.imul(B,fe))+Math.imul(z,ue)|0,i=Math.imul(z,fe);var De=(c+(r=r+Math.imul(R,pe)|0)|0)+((8191&(o=(o=o+Math.imul(R,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((i=i+Math.imul(k,me)|0)+(o>>>13)|0)+(De>>>26)|0,De&=67108863;var xe=(c+(r=Math.imul(B,pe))|0)+((8191&(o=(o=Math.imul(B,me))+Math.imul(z,pe)|0))<<13)|0;return c=((i=Math.imul(z,me))+(o>>>13)|0)+(xe>>>26)|0,xe&=67108863,s[0]=ge,s[1]=ve,s[2]=be,s[3]=ye,s[4]=_e,s[5]=Se,s[6]=Ee,s[7]=Ce,s[8]=Te,s[9]=Ae,s[10]=Oe,s[11]=we,s[12]=Ne,s[13]=Le,s[14]=Ie,s[15]=Ue,s[16]=Me,s[17]=De,s[18]=xe,0!==c&&(s[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=h),a.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,o=0,i=0;i<n.length-1;i++){var a=o;o=0;for(var l=67108863&r,s=Math.min(i,t.length-1),c=Math.max(0,i-e.length+1);c<=s;c++){var d=i-c,u=(0|e.words[d])*(0|t.words[c]),f=67108863&u;l=67108863&(f=f+l|0),o+=(a=(a=a+(u/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[i]=l,r=a,a=o}return 0!==r?n.words[i]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=a.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,o=0;o<t;o++)r|=(1&e)<<t-o-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,o,i){for(var a=0;a<i;a++)r[a]=t[e[a]],o[a]=n[e[a]]},g.prototype.transform=function(e,t,n,r,o,i){this.permute(i,e,t,n,r,o);for(var a=1;a<o;a<<=1)for(var l=a<<1,s=Math.cos(2*Math.PI/l),c=Math.sin(2*Math.PI/l),d=0;d<o;d+=l)for(var u=s,f=c,h=0;h<a;h++){var p=n[d+h],m=r[d+h],g=n[d+h+a],v=r[d+h+a],b=u*g-f*v;v=u*v+f*g,g=b,n[d+h]=p+g,r[d+h]=m+v,n[d+h+a]=p-g,r[d+h+a]=m-v,h!==l&&(b=s*u-c*f,f=s*f+c*u,u=b)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,o=0;for(n=n/2|0;n;n>>>=1)o++;return 1<<o+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var o=e[r];e[r]=e[n-r-1],e[n-r-1]=o,o=t[r],t[r]=-t[n-r-1],t[n-r-1]=-o}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var o=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&o,n=o<67108864?0:o/67108864|0}return e},g.prototype.convert13b=function(e,t,n,r){for(var i=0,a=0;a<t;a++)i+=0|e[a],n[2*a]=8191&i,i>>>=13,n[2*a+1]=8191&i,i>>>=13;for(a=2*t;a<r;++a)n[a]=0;o(0===i),o(0==(-8192&i))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),o=this.makeRBT(r),i=this.stub(r),a=new Array(r),l=new Array(r),s=new Array(r),c=new Array(r),d=new Array(r),u=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,i,l,s,r,o),this.transform(c,i,d,u,r,o);for(var h=0;h<r;h++){var p=l[h]*d[h]-s[h]*u[h];s[h]=l[h]*u[h]+s[h]*d[h],l[h]=p}return this.conjugate(l,s,r),this.transform(l,s,f,i,r,o),this.conjugate(f,i,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){o("number"==typeof e),o(e<67108864);for(var t=0,n=0;n<this.length;n++){var r=(0|this.words[n])*e,i=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,o=n%26;t[n]=(e.words[r]&1<<o)>>>o}return t}(e);if(0===t.length)return new a(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},a.prototype.iushln=function(e){o("number"==typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var l=this.words[t]&i,s=(0|this.words[t])-l<<n;this.words[t]=s|a,a=l>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(e){return o(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,n){var r;o("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var i=e%26,a=Math.min((e-i)/26,this.length),l=67108863^67108863>>>i<<i,s=n;if(r-=a,r=Math.max(0,r),s){for(var c=0;c<a;c++)s.words[c]=this.words[c];s.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-i|u>>>i,d=u&l}return s&&0!==d&&(s.words[s.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,n){return o(0===this.negative),this.iushrn(e,t,n)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){o("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;return!(this.length<=n)&&!!(this.words[n]&r)},a.prototype.imaskn=function(e){o("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(o(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return o("number"==typeof e),o(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(o("number"==typeof e),o(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,n){var r,i,a=e.length+n;this._expand(a);var l=0;for(r=0;r<e.length;r++){i=(0|this.words[r+n])+l;var s=(0|e.words[r])*t;l=((i-=67108863&s)>>26)-(s/67108864|0),this.words[r+n]=67108863&i}for(;r<this.length-n;r++)l=(i=(0|this.words[r+n])+l)>>26,this.words[r+n]=67108863&i;if(0===l)return this.strip();for(o(-1===l),l=0,r=0;r<this.length;r++)l=(i=-(0|this.words[r])+l)>>26,this.words[r]=67108863&i;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,i=0|o.words[o.length-1];0!==(n=26-this._countBits(i))&&(o=o.ushln(n),r.iushln(n),i=0|o.words[o.length-1]);var l,s=r.length-o.length;if("mod"!==t){(l=new a(null)).length=s+1,l.words=new Array(l.length);for(var c=0;c<l.length;c++)l.words[c]=0}var d=r.clone()._ishlnsubmul(o,1,s);0===d.negative&&(r=d,l&&(l.words[s]=1));for(var u=s-1;u>=0;u--){var f=67108864*(0|r.words[o.length+u])+(0|r.words[o.length+u-1]);for(f=Math.min(f/i|0,67108863),r._ishlnsubmul(o,f,u);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,u),r.isZero()||(r.negative^=1);l&&(l.words[u]=f)}return l&&l.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:l||null,mod:r}},a.prototype.divmod=function(e,t,n){return o(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(l=this.neg().divmod(e,t),"mod"!==t&&(r=l.div.neg()),"div"!==t&&(i=l.mod.neg(),n&&0!==i.negative&&i.iadd(e)),{div:r,mod:i}):0===this.negative&&0!==e.negative?(l=this.divmod(e.neg(),t),"mod"!==t&&(r=l.div.neg()),{div:r,mod:l.mod}):0!=(this.negative&e.negative)?(l=this.neg().divmod(e.neg(),t),"div"!==t&&(i=l.mod.neg(),n&&0!==i.negative&&i.isub(e)),{div:l.div,mod:i}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,i,l},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),o=e.andln(1),i=n.cmp(r);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){o(e<=67108863);for(var t=(1<<26)%e,n=0,r=this.length-1;r>=0;r--)n=(t*n+(0|this.words[r]))%e;return n},a.prototype.idivn=function(e){o(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*t;this.words[n]=r/e|0,t=r%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){o(0===e.negative),o(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),i=new a(0),l=new a(0),s=new a(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var d=n.clone(),u=t.clone();!t.isZero();){for(var f=0,h=1;0==(t.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(r.isOdd()||i.isOdd())&&(r.iadd(d),i.isub(u)),r.iushrn(1),i.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(l.isOdd()||s.isOdd())&&(l.iadd(d),s.isub(u)),l.iushrn(1),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(l),i.isub(s)):(n.isub(t),l.isub(r),s.isub(i))}return{a:l,b:s,gcd:n.iushln(c)}},a.prototype._invmp=function(e){o(0===e.negative),o(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,i=new a(1),l=new a(0),s=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)i.isOdd()&&i.iadd(s),i.iushrn(1);for(var u=0,f=1;0==(n.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(n.iushrn(u);u-- >0;)l.isOdd()&&l.iadd(s),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(l)):(n.isub(t),l.isub(i))}return(r=0===t.cmpn(1)?i:l).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var o=t.cmp(n);if(o<0){var i=t;t=n,n=i}else if(0===o||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){o("number"==typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var i=r,a=n;0!==i&&a<this.length;a++){var l=0|this.words[a];i=(l+=i)>>>26,l&=67108863,this.words[a]=l}return 0!==i&&(this.words[a]=i,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),o(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],o=0|e.words[n];if(r!==o){r<o?t=-1:r>o&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new C(e)},a.prototype.toRed=function(e){return o(!this.red,"Already a number in reduction context"),o(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return o(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return o(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else o(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function T(e){C.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(y,b),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=4194303&o,r=10;r<e.length;r++){var i=0|e.words[r];e.words[r-10]=(4194303&i)<<4|o>>>22,o=i}o>>>=22,e.words[r-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,b),i(S,b),i(E,b),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,o=67108863&r;r>>>=26,e.words[n]=o,t=r}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new _;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return v[e]=t,t},C.prototype._verify1=function(e){o(0===e.negative,"red works only with positives"),o(e.red,"red works only with red numbers")},C.prototype._verify2=function(e,t){o(0==(e.negative|t.negative),"red works only with positives"),o(e.red&&e.red===t.red,"red works only with red numbers")},C.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},C.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},C.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},C.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},C.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},C.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},C.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},C.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},C.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},C.prototype.isqr=function(e){return this.imul(e,e.clone())},C.prototype.sqr=function(e){return this.mul(e,e)},C.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(o(t%2==1),3===t){var n=this.m.add(new a(1)).iushrn(2);return this.pow(e,n)}for(var r=this.m.subn(1),i=0;!r.isZero()&&0===r.andln(1);)i++,r.iushrn(1);o(!r.isZero());var l=new a(1).toRed(this),s=l.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(s);)d.redIAdd(s);for(var u=this.pow(d,r),f=this.pow(e,r.addn(1).iushrn(1)),h=this.pow(e,r),p=i;0!==h.cmp(l);){for(var m=h,g=0;0!==m.cmp(l);g++)m=m.redSqr();o(g<p);var v=this.pow(u,new a(1).iushln(p-g-1));f=f.redMul(v),u=v.redSqr(),h=h.redMul(u),p=g}return f},C.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},C.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],i=0,l=0,s=t.bitLength()%26;for(0===s&&(s=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],d=s-1;d>=0;d--){var u=c>>d&1;o!==n[0]&&(o=this.sqr(o)),0!==u||0!==i?(i<<=1,i|=u,(4===++l||0===r&&0===d)&&(o=this.mul(o,n[i]),l=0,i=0)):l=0}s=26}return o},C.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},C.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new T(e)},i(T,C),T.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},T.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},T.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},T.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},T.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(117)(e))},function(e,t,n){e.exports=!n(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(8),o=n(141),i=n(39),a=Object.defineProperty;t.f=n(14)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(406),o=n(407),i=n(175);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),o=(e=l(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|h(t.length);return 0===(e=l(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?l(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(d(t),e=l(e,t<0?0:0|h(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=l(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return w(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){var i,a=1,l=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,l/=2,s/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var d=-1;for(i=n;i<l;i++)if(c(e,i)===c(t,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===s)return d*a}else-1!==d&&(i-=i-d),d=-1}else for(n+s>l&&(n=l-s),i=n;i>=0;i--){for(var u=!0,f=0;f<s;f++)if(c(e,i+f)!==c(t,f)){u=!1;break}if(u)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var l=parseInt(t.substr(2*a,2),16);if(isNaN(l))return a;e[n+a]=l}return a}function _(e,t,n,r){return q(F(t,e.length-n),e,n,r)}function S(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return S(e,t,n,r)}function C(e,t,n,r){return q(j(t),e,n,r)}function T(e,t,n,r){return q(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,l,s,c=e[o],d=null,u=c>239?4:c>223?3:c>191?2:1;if(o+u<=n)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(i=e[o+1]))&&(s=(31&c)<<6|63&i)>127&&(d=s);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(d=s);break;case 4:i=e[o+1],a=e[o+2],l=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&l)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&l)>65535&&s<1114112&&(d=s)}null===d?(d=65533,u=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),o+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return d(t),t<=0?l(e,t):void 0!==n?"string"==typeof r?l(e,t).fill(n,r):l(e,t).fill(n):l(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return u(null,e)},s.allocUnsafeSlow=function(e){return u(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),l=Math.min(i,a),c=this.slice(r,o),d=e.slice(t,n),u=0;u<l;++u)if(c[u]!==d[u]){i=c[u],a=d[u];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=z(e[i]);return o}function I(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function U(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,o,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function x(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function R(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(e,t,n,r,i){return i||R(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,i){return i||R(e,0,n,8),o.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var o=t-e;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),o.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),o.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),o.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),o.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);M(this,e,t,n,o-1,-o)}var i=0,a=1,l=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===l&&0!==this[t+i-1]&&(l=1),this[t+i]=(e/a>>0)-l&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);M(this,e,t,n,o-1,-o)}var i=n-1,a=1,l=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===l&&0!==this[t+i+1]&&(l=1),this[t+i]=(e/a>>0)-l&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return k(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return k(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=s.isBuffer(e)?e:F(new s(e,r).toString()),l=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%l]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function j(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(38))},function(e,t,n){var r=n(35);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(6),o=n(21),i=n(20),a=n(45)("src"),l=n(223),s=(""+l).split("toString");n(12).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,l){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(c&&(i(n,a)||o(n,a,e[t]?""+e[t]:s.join(String(t)))),e===r?e[t]=n:l?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||l.call(this)}))},function(e,t,n){var r=n(0),o=n(7),i=n(35),a=/"/g,l=function(e,t,n,r){var o=String(i(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),l+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(l),r(r.P+r.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(15),o=n(44);e.exports=n(14)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(64),o=n(35);e.exports=function(e){return r(o(e))}},function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";var r=t,o=n(13),i=n(23),a=n(199);r.assert=i,r.toArray=a.toArray,r.zero2=a.zero2,r.toHex=a.toHex,r.encode=a.encode,r.getNAF=function(e,t,n){var r=new Array(Math.max(e.bitLength(),n)+1);r.fill(0);for(var o=1<<t+1,i=e.clone(),a=0;a<r.length;a++){var l,s=i.andln(o-1);i.isOdd()?(l=s>(o>>1)-1?(o>>1)-s:s,i.isubn(l)):l=0,r[a]=l,i.iushrn(1)}return r},r.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r=0,o=0;e.cmpn(-r)>0||t.cmpn(-o)>0;){var i,a,l,s=e.andln(3)+r&3,c=t.andln(3)+o&3;if(3===s&&(s=-1),3===c&&(c=-1),0==(1&s))i=0;else i=3!==(l=e.andln(7)+r&7)&&5!==l||2!==c?s:-s;if(n[0].push(i),0==(1&c))a=0;else a=3!==(l=t.andln(7)+o&7)&&5!==l||2!==s?c:-c;n[1].push(a),2*r===i+1&&(r=1-r),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return n},r.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new o(e,"hex","le")}},function(e,t,n){var r=n(1),o=n(3),i=n(216);function a(e,t,n){var r=0,o=t.length;return function a(){r<o?function(e,t,n){i.load(e,t,n)}(e,t[r++],a):n&&n()}}function l(e,t,n){var i="wiz_"+t;if(e.getElementById(i))return n(),!0;var a=e.createElement("link");return a.rel="stylesheet",a.setAttribute("charset","utf-8"),a.setAttribute("name",r.NAME.TMP_STYLE),a.href=t.replace(/\\/g,"/"),a.id=i,a.onload=n,a.onerror=n,o.dom.insertToHead(a,e),a}var s={getDependencyFiles:function(e,t,n){var r,o,i,a,l,s,c,d=[];for(r=0,o=e[t][n].length;r<o;r++)if(i=e[t][n][r],"css"===t)d.push(e.files[t][i]);else{for(c=[],a=0,l=i.length;a<l;a++)s=i[a],c.push(e.files[t][s]);d.push(c)}return d},loadJs:function(e,t,n){a(e,t,n)()},loadCss:function(e,t,n){var r,o,i=0,a=function(){++i>=t.length&&n&&n()};for(r=0,o=t.length;r<o;r++)l(e,t[r],a)}};e.exports=s},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(28);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(65),o=n(44),i=n(22),a=n(39),l=n(20),s=n(141),c=Object.getOwnPropertyDescriptor;t.f=n(14)?c:function(e,t){if(e=i(e),t=a(t,!0),s)try{return c(e,t)}catch(e){}if(l(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(0),o=n(12),i=n(7);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(27),o=n(64),i=n(17),a=n(11),l=n(157);e.exports=function(e,t){var n=1==e,s=2==e,c=3==e,d=4==e,u=6==e,f=5==e||u,h=t||l;return function(t,l,p){for(var m,g,v=i(t),b=o(v),y=r(l,p,3),_=a(b.length),S=0,E=n?h(t,_):s?h(t,0):void 0;_>S;S++)if((f||S in b)&&(g=y(m=b[S],S,v),e))if(n)E[S]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return S;case 2:E.push(m)}else if(d)return!1;return u?-1:c||d?d:E}}},function(e,t,n){"use strict";var r=n(23),o=n(4);function i(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function l(e){return 1===e.length?"0"+e:e}function s(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=o,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),o=0;o<e.length;o+=2)n.push(parseInt(e[o]+e[o+1],16))}else for(var r=0,o=0;o<e.length;o++){var a=e.charCodeAt(o);a<128?n[r++]=a:a<2048?(n[r++]=a>>6|192,n[r++]=63&a|128):i(e,o)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++o)),n[r++]=a>>18|240,n[r++]=a>>12&63|128,n[r++]=a>>6&63|128,n[r++]=63&a|128):(n[r++]=a>>12|224,n[r++]=a>>6&63|128,n[r++]=63&a|128)}else for(o=0;o<e.length;o++)n[o]=0|e[o];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=l(e[n].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var o=e[r];"little"===t&&(o=a(o)),n+=s(o.toString(16))}return n},t.zero2=l,t.zero8=s,t.join32=function(e,t,n,o){var i=n-t;r(i%4==0);for(var a=new Array(i/4),l=0,s=t;l<a.length;l++,s+=4){var c;c="big"===o?e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]:e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s],a[l]=c>>>0}return a},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,o=0;r<e.length;r++,o+=4){var i=e[r];"big"===t?(n[o]=i>>>24,n[o+1]=i>>>16&255,n[o+2]=i>>>8&255,n[o+3]=255&i):(n[o+3]=i>>>24,n[o+2]=i>>>16&255,n[o+1]=i>>>8&255,n[o]=255&i)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,o){return e+t+n+r+o>>>0},t.sum64=function(e,t,n,r){var o=e[t],i=r+e[t+1]>>>0,a=(i<r?1:0)+n+o;e[t]=a>>>0,e[t+1]=i},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,o,i,a,l){var s=0,c=t;return s+=(c=c+r>>>0)<t?1:0,s+=(c=c+i>>>0)<i?1:0,e+n+o+a+(s+=(c=c+l>>>0)<l?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,o,i,a,l){return t+r+i+l>>>0},t.sum64_5_hi=function(e,t,n,r,o,i,a,l,s,c){var d=0,u=t;return d+=(u=u+r>>>0)<t?1:0,d+=(u=u+i>>>0)<i?1:0,d+=(u=u+l>>>0)<l?1:0,e+n+o+a+s+(d+=(u=u+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,o,i,a,l,s,c){return t+r+i+l+c>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if(n(14)){var o=n(46),i=n(6),a=n(7),l=n(0),s=n(85),c=n(116),d=n(27),u=n(59),f=n(44),h=n(21),p=n(60),m=n(29),g=n(11),v=n(168),b=n(48),y=n(39),_=n(20),S=n(66),E=n(9),C=n(17),T=n(108),A=n(49),O=n(51),w=n(50).f,N=n(110),L=n(45),I=n(10),U=n(32),M=n(75),D=n(67),x=n(112),R=n(57),k=n(78),P=n(58),B=n(111),z=n(159),F=n(15),j=n(30),q=F.f,H=j.f,W=i.RangeError,Y=i.TypeError,G=i.Uint8Array,V=Array.prototype,Z=c.ArrayBuffer,K=c.DataView,X=U(0),J=U(2),$=U(3),Q=U(4),ee=U(5),te=U(6),ne=M(!0),re=M(!1),oe=x.values,ie=x.keys,ae=x.entries,le=V.lastIndexOf,se=V.reduce,ce=V.reduceRight,de=V.join,ue=V.sort,fe=V.slice,he=V.toString,pe=V.toLocaleString,me=I("iterator"),ge=I("toStringTag"),ve=L("typed_constructor"),be=L("def_constructor"),ye=s.CONSTR,_e=s.TYPED,Se=s.VIEW,Ee=U(1,(function(e,t){return we(D(e,e[be]),t)})),Ce=a((function(){return 1===new G(new Uint16Array([1]).buffer)[0]})),Te=!!G&&!!G.prototype.set&&a((function(){new G(1).set({})})),Ae=function(e,t){var n=m(e);if(n<0||n%t)throw W("Wrong offset!");return n},Oe=function(e){if(E(e)&&_e in e)return e;throw Y(e+" is not a typed array!")},we=function(e,t){if(!(E(e)&&ve in e))throw Y("It is not a typed array constructor!");return new e(t)},Ne=function(e,t){return Le(D(e,e[be]),t)},Le=function(e,t){for(var n=0,r=t.length,o=we(e,r);r>n;)o[n]=t[n++];return o},Ie=function(e,t,n){q(e,t,{get:function(){return this._d[n]}})},Ue=function(e){var t,n,r,o,i,a,l=C(e),s=arguments.length,c=s>1?arguments[1]:void 0,u=void 0!==c,f=N(l);if(null!=f&&!T(f)){for(a=f.call(l),r=[],t=0;!(i=a.next()).done;t++)r.push(i.value);l=r}for(u&&s>2&&(c=d(c,arguments[2],2)),t=0,n=g(l.length),o=we(this,n);n>t;t++)o[t]=u?c(l[t],t):l[t];return o},Me=function(){for(var e=0,t=arguments.length,n=we(this,t);t>e;)n[e]=arguments[e++];return n},De=!!G&&a((function(){pe.call(new G(1))})),xe=function(){return pe.apply(De?fe.call(Oe(this)):Oe(this),arguments)},Re={copyWithin:function(e,t){return z.call(Oe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Oe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(Oe(this),arguments)},filter:function(e){return Ne(this,J(Oe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(Oe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return te(Oe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(Oe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Oe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ne(Oe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return de.apply(Oe(this),arguments)},lastIndexOf:function(e){return le.apply(Oe(this),arguments)},map:function(e){return Ee(Oe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Oe(this),arguments)},reduceRight:function(e){return ce.apply(Oe(this),arguments)},reverse:function(){for(var e,t=Oe(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return $(Oe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Oe(this),e)},subarray:function(e,t){var n=Oe(this),r=n.length,o=b(e,r);return new(D(n,n[be]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,g((void 0===t?r:b(t,r))-o))}},ke=function(e,t){return Ne(this,fe.call(Oe(this),e,t))},Pe=function(e){Oe(this);var t=Ae(arguments[1],1),n=this.length,r=C(e),o=g(r.length),i=0;if(o+t>n)throw W("Wrong length!");for(;i<o;)this[t+i]=r[i++]},Be={entries:function(){return ae.call(Oe(this))},keys:function(){return ie.call(Oe(this))},values:function(){return oe.call(Oe(this))}},ze=function(e,t){return E(e)&&e[_e]&&"symbol"!=r(t)&&t in e&&String(+t)==String(t)},Fe=function(e,t){return ze(e,t=y(t,!0))?f(2,e[t]):H(e,t)},je=function(e,t,n){return!(ze(e,t=y(t,!0))&&E(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?q(e,t,n):(e[t]=n.value,e)};ye||(j.f=Fe,F.f=je),l(l.S+l.F*!ye,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:je}),a((function(){he.call({})}))&&(he=pe=function(){return de.call(this)});var qe=p({},Re);p(qe,Be),h(qe,me,Be.values),p(qe,{slice:ke,set:Pe,constructor:function(){},toString:he,toLocaleString:xe}),Ie(qe,"buffer","b"),Ie(qe,"byteOffset","o"),Ie(qe,"byteLength","l"),Ie(qe,"length","e"),q(qe,ge,{get:function(){return this[_e]}}),e.exports=function(e,t,n,r){var c=e+((r=!!r)?"Clamped":"")+"Array",d="get"+e,f="set"+e,p=i[c],m=p||{},b=p&&O(p),y=!p||!s.ABV,_={},C=p&&p.prototype,T=function(e,n){q(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[d](n*t+r.o,Ce)}(this,n)},set:function(e){return function(e,n,o){var i=e._d;r&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),i.v[f](n*t+i.o,o,Ce)}(this,n,e)},enumerable:!0})};y?(p=n((function(e,n,r,o){u(e,p,c,"_d");var i,a,l,s,d=0,f=0;if(E(n)){if(!(n instanceof Z||"ArrayBuffer"==(s=S(n))||"SharedArrayBuffer"==s))return _e in n?Le(p,n):Ue.call(p,n);i=n,f=Ae(r,t);var m=n.byteLength;if(void 0===o){if(m%t)throw W("Wrong length!");if((a=m-f)<0)throw W("Wrong length!")}else if((a=g(o)*t)+f>m)throw W("Wrong length!");l=a/t}else l=v(n),i=new Z(a=l*t);for(h(e,"_d",{b:i,o:f,l:a,e:l,v:new K(i)});d<l;)T(e,d++)})),C=p.prototype=A(qe),h(C,"constructor",p)):a((function(){p(1)}))&&a((function(){new p(-1)}))&&k((function(e){new p,new p(null),new p(1.5),new p(e)}),!0)||(p=n((function(e,n,r,o){var i;return u(e,p,c),E(n)?n instanceof Z||"ArrayBuffer"==(i=S(n))||"SharedArrayBuffer"==i?void 0!==o?new m(n,Ae(r,t),o):void 0!==r?new m(n,Ae(r,t)):new m(n):_e in n?Le(p,n):Ue.call(p,n):new m(v(n))})),X(b!==Function.prototype?w(m).concat(w(b)):w(m),(function(e){e in p||h(p,e,m[e])})),p.prototype=C,o||(C.constructor=p));var N=C[me],L=!!N&&("values"==N.name||null==N.name),I=Be.values;h(p,ve,!0),h(C,_e,c),h(C,Se,!0),h(C,be,p),(r?new p(1)[ge]==c:ge in C)||q(C,ge,{get:function(){return c}}),_[c]=p,l(l.G+l.W+l.F*(p!=m),_),l(l.S,c,{BYTES_PER_ELEMENT:t}),l(l.S+l.F*a((function(){m.of.call(p,1)})),c,{from:Ue,of:Me}),"BYTES_PER_ELEMENT"in C||h(C,"BYTES_PER_ELEMENT",t),l(l.P,c,Re),P(c),l(l.P+l.F*Te,c,{set:Pe}),l(l.P+l.F*!L,c,Be),o||C.toString==he||(C.toString=he),l(l.P+l.F*a((function(){new p(1).slice()})),c,{slice:ke}),l(l.P+l.F*(a((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!a((function(){C.toLocaleString.call([1,2])}))),c,{toLocaleString:xe}),R[c]=L?N:I,o||L||h(C,me,I)}}else e.exports=function(){}},function(e,t){e.exports={CLASS:{CHILD:"child",CHILDREN:"children",COLLAPSED:"collapsed",COMPLETE:"complete",CONTAINER:"outline-container",CONTENT:"content",DOT:"dot",DOT_ICON:"dot-icon",DRAG_CONTAINER:"outline-drag-container",DRAG_FLAG:"outline-drag-flag",IMAGE:"image",MINDER_NOTE:"minder-note",MINDER_MENU_SVG_ICON:"minder-menu-svg-icon",MINDER_MENU_SVG_ICON_LIGHT:"minder-menu-svg-icon-light",NODE:"node",NODE_SELECTED:"selected",NODE_SHOW_MENU:"show-menu",NOTES:"notes",OPERATOR_CONTAINER:"operator-container",OPERATOR_BAR:"operator-bar",ROW:"row",SWITCH:"switch",MINDER_MENU:"minder-menu",MINDER_SUB_MENU:"minder-sub-menu"},ID:{STYLE:"wiz_outline_style",MINDER_CONTAINER:"wiz-minder-container"},NAME:{STYLE:"wiz_outline_style"},MENU:{ADD_NOTES:"add_notes",ADD_IMAGE:"add_image",COMPLETE:"complete",COPY:"copy",DUPLICATE:"duplicate",INDENT:"indent",OUTDENT:"outdent",DELETE:"remove",UNCOMPLETE:"uncomplete"},MINDER_NODE_TEXT_MAX_LENGTH:50,MINDER_TEMPLATE_TYPE:{DEFAULT:"default",FISH_BONE:"fish-bone",RIGHT:"right",STRUCTURE:"structure"},MINDER_THEME_TYPE:{THEME1:"wiz-lightGreen",THEME2:"wiz-blue",THEME3:"wiz-golden",THEME4:"wiz-sakura",THEME5:"wiz-darkBlue",THEME6:"wiz-black",THEME7:"wiz-purple",THEME8:"wiz-cyan",THEME9:"wiz-silver",THEME10:"wiz-green"},MINDER_THEME_TYPE_IMAGE:{THEME1:"wiz-lightGreen.svg",THEME2:"wiz-blue.svg",THEME3:"wiz-golden.svg",THEME4:"wiz-sakura.svg",THEME5:"wiz-darkBlue.svg",THEME6:"wiz-black.svg",THEME7:"wiz-purple.svg",THEME8:"wiz-cyan.svg",THEME9:"wiz-silver.svg",THEME10:"wiz-green.svg",THEME1_NIGHT:"wiz-lightGreen-night.svg",THEME2_NIGHT:"wiz-blue.svg",THEME3_NIGHT:"wiz-golden.svg",THEME4_NIGHT:"wiz-sakura.svg",THEME5_NIGHT:"wiz-darkBlue.svg",THEME6_NIGHT:"wiz-black.svg",THEME7_NIGHT:"wiz-purple.svg",THEME8_NIGHT:"wiz-cyan.svg",THEME9_NIGHT:"wiz-silver.svg",THEME10_NIGHT:"wiz-green.svg"},NODE_ITEM_TYPE:{CONTENT:"content",NOTES:"notes"},HOTKEY_MAP:{WIN:{ADD_NOTES:"Shift + Enter",ADD_IMAGE:"",COMPLETE:"Ctrl + Enter",DUPLICATE:"Shift + Ctrl + D",INDENT:"Tab",OUTDENT:"Shift + Tab",DELETE:"Shift + Delete",UNCOMPLETE:"Ctrl + Enter"},MAC:{ADD_NOTES:"Shift + Enter",ADD_IMAGE:"",COMPLETE:"⌘ + Enter",DUPLICATE:"Shift + Ctrl + D",INDENT:"Tab",OUTDENT:"Shift + Tab",DELETE:"Shift + Delete",UNCOMPLETE:"⌘ + Enter"}},STORAGE_KEY:{MINDER_TEMPLATE:"wiz-minder-template",MINDER_THEME:"wiz-minder-theme",FIRST_MINDER:"wiz-first-open-minder"}}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(45)("meta"),i=n(9),a=n(20),l=n(15).f,s=0,c=Object.isExtensible||function(){return!0},d=!n(7)((function(){return c(Object.preventExtensions({}))})),u=function(e){l(e,o,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==r(e)?e:("string"==typeof e?"S":"P")+e;if(!a(e,o)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[o].i},getWeak:function(e,t){if(!a(e,o)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[o].w},onFreeze:function(e){return d&&f.NEED&&c(e)&&!a(e,o)&&u(e),e}}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,c=[],d=!1,u=-1;function f(){d&&s&&(d=!1,s.length?c=s.concat(c):u=-1,c.length&&h())}function h(){if(!d){var e=l(f);d=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||d||l(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){var r=n(5).Buffer,o=n(122).Transform,i=n(126).StringDecoder;function a(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(4)(a,o),a.prototype.update=function(e,t,n){"string"==typeof e&&(e=r.from(e,t));var o=this._update(e);return this.hashMode?this:(n&&(o=this._toString(o,n)),o)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},a.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},a.prototype._finalOrDigest=function(e){var t=this.__final()||r.alloc(0);return e&&(t=this._toString(t,e,!0)),t},a.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},e.exports=a},function(e,t){e.exports=function(){var e=this,t=0,n={},r={};this.getLoading=function(e){return!!r[e.loadId]},this.setLoading=function(e,t){r[e.loadId]=!!t},this.addCallback=function(e,r){e.loadId||(e.loadId="wizLoadController_"+t++),n[e.loadId]||(n[e.loadId]=[]),n[e.loadId].push(r)},this.callback=function(t){var r=n[t.loadId];if(r&&!e.getLoading(t)){for(var o=r.length-1;o>=0;o--){(0,r.splice(o,1)[0])()}n[t.loadId]=[]}}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(143),o=n(95);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(29),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(8),o=n(144),i=n(95),a=n(94)("IE_PROTO"),l=function(){},s=function(){var e,t=n(92)("iframe"),r=i.length;for(t.style.display="none",n(96).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;r--;)delete s.prototype[i[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=r(e),n=new l,l.prototype=null,n[a]=e):n=s(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(143),o=n(95).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(20),o=n(17),i=n(94)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(10)("unscopables"),o=Array.prototype;null==o[r]&&n(21)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(86),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var i=Object.create(n(69));i.inherits=n(4);var a=n(177),l=n(125);i.inherits(u,a);for(var s=o(l.prototype),c=0;c<s.length;c++){var d=s[c];u.prototype[d]||(u.prototype[d]=l.prototype[d])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){var r=n(15).f,o=n(20),i=n(10)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),o=n(35),i=n(7),a=n(98),l="["+a+"]",s=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(e,t,n){var o={},l=i((function(){return!!a[e]()||"​"!="​"[e]()})),s=o[e]=l?t(u):a[e];n&&(o[n]=s),r(r.P+r.F*l,"String",o)},u=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(6),o=n(15),i=n(14),a=n(10)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(18);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";(function(t,r){var o=n(5).Buffer,i=t.crypto||t.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=o.allocUnsafe(e);if(e>0)if(e>65536)for(var a=0;a<e;a+=65536)i.getRandomValues(n.slice(a,a+65536));else i.getRandomValues(n);if("function"==typeof t)return r.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(38),n(41))},function(e,t,n){var r=n(5).Buffer;function o(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}o.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,o=this._blockSize,i=e.length,a=this._len,l=0;l<i;){for(var s=a%o,c=Math.min(i-l,o-s),d=0;d<c;d++)n[s+d]=e[l+d];l+=c,(a+=c)%o==0&&this._update(n)}return this._len+=i,this},o.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,o=(n-r)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=o},function(e,t,n){var r=n(174),o={run:function(e){e.wizMath={getRandomArbitrary:function(t,n){return e.wizMath.random()*(n-t)+t},random:function(){return r()()}},e.Selection&&!e.Selection.prototype.extend&&(e.Selection.prototype.extend=function(t,n){var r=e.document.getSelection();try{if(!r||0===r.rangeCount)return}catch(e){return}var o=r.getRangeAt(0),i=e.document.createRange(),a=e.document.createRange();a.setStart(o.startContainer,o.startOffset);var l=e.document.createRange();l.setStart(t,n),l.compareBoundaryPoints(Range.START_TO_START,a)>=0?(i.setStart(o.startContainer,o.startOffset),i.setEnd(t,n)):(i.setStart(t,n),i.setEnd(o.startContainer,o.startOffset)),this.removeAllRanges(),this.addRange(i)}),e.document.body.addEventListener("mscontrolselect",(function(e){e.preventDefault()}))}};e.exports=o},function(e,t,n){var r=n(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(34),o=n(10)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(8),o=n(28),i=n(10)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){"use strict";var r=n(4),o=n(121),i=n(127),a=n(128),l=n(42);function s(e){l.call(this,"digest"),this._hash=e}r(s,l),s.prototype._update=function(e){this._hash.update(e)},s.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new o:"rmd160"===e||"ripemd160"===e?new i:new s(a(e))}},function(e,t,n){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"===n(e)},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"===n(e)&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===n(e)||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(16).Buffer)},function(e,t,n){(function(t){e.exports=function(e,n){for(var r=Math.min(e.length,n.length),o=new t(r),i=0;i<r;++i)o[i]=e[i]^n[i];return o}}).call(this,n(16).Buffer)},function(e,t,n){"use strict";var r=n(33),o=n(23);function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=i,i.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var o=0;o<e.length;o+=this._delta32)this._update(e,o,o+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),o(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var o=1;o<n;o++)r[o]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)r[o++]=0;r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=e>>>24&255,r[o++]=e>>>16&255,r[o++]=e>>>8&255,r[o++]=255&e}else for(r[o++]=255&e,r[o++]=e>>>8&255,r[o++]=e>>>16&255,r[o++]=e>>>24&255,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,i=8;i<this.padLength;i++)r[o++]=0;return r}},function(e,t,n){var r=t;r.bignum=n(13),r.define=n(467).define,r.base=n(73),r.constants=n(205),r.decoders=n(472),r.encoders=n(474)},function(e,t,n){var r=t;r.Reporter=n(469).Reporter,r.DecoderBuffer=n(204).DecoderBuffer,r.EncoderBuffer=n(204).EncoderBuffer,r.Node=n(470)},function(e,t,n){var r=n(12),o=n(6),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(46)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(22),o=n(11),i=n(48);e.exports=function(e){return function(t,n,a){var l,s=r(t),c=o(s.length),d=i(a,c);if(e&&n!=n){for(;c>d;)if((l=s[d++])!=l)return!0}else for(;c>d;d++)if((e||d in s)&&s[d]===n)return e||d||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(34);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(10)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(8);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(66),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!==r(a))throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==o(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(161);var r=n(18),o=n(21),i=n(7),a=n(35),l=n(10),s=n(113),c=l("species"),d=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=l(e),h=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),p=h?!i((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!t})):void 0;if(!h||!p||"replace"===e&&!d||"split"===e&&!u){var m=/./[f],g=n(a,f,""[e],(function(e,t,n,r,o){return t.exec===s?h&&!o?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),v=g[0],b=g[1];r(String.prototype,e,v),o(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},function(e,t,n){var r=n(27),o=n(156),i=n(108),a=n(8),l=n(11),s=n(110),c={},d={};(t=e.exports=function(e,t,n,u,f){var h,p,m,g,v=f?function(){return e}:s(e),b=r(n,u,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(i(v)){for(h=l(e.length);h>y;y++)if((g=t?b(a(p=e[y])[0],p[1]):b(e[y]))===c||g===d)return g}else for(m=v.call(e);!(p=m.next()).done;)if((g=o(m,b,p.value,t))===c||g===d)return g}).BREAK=c,t.RETURN=d},function(e,t,n){var r=n(6).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(6),o=n(0),i=n(18),a=n(60),l=n(40),s=n(82),c=n(59),d=n(9),u=n(7),f=n(78),h=n(55),p=n(99);e.exports=function(e,t,n,m,g,v){var b=r[e],y=b,_=g?"set":"add",S=y&&y.prototype,E={},C=function(e){var t=S[e];i(S,e,"delete"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!d(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(v||S.forEach&&!u((function(){(new y).entries().next()})))){var T=new y,A=T[_](v?{}:-0,1)!=T,O=u((function(){T.has(1)})),w=f((function(e){new y(e)})),N=!v&&u((function(){for(var e=new y,t=5;t--;)e[_](t,t);return!e.has(-0)}));w||((y=t((function(t,n){c(t,y,e);var r=p(new b,t,y);return null!=n&&s(n,g,r[_],r),r}))).prototype=S,S.constructor=y),(O||N)&&(C("delete"),C("has"),g&&C("get")),(N||A)&&C(_),v&&S.clear&&delete S.clear}else y=m.getConstructor(t,e,g,_),a(y.prototype,n),l.NEED=!0;return h(y,e),E[e]=y,o(o.G+o.W+o.F*(y!=b),E),v||m.setStrong(y,e,g),y}},function(e,t,n){for(var r,o=n(6),i=n(21),a=n(45),l=a("typed_array"),s=a("view"),c=!(!o.ArrayBuffer||!o.DataView),d=c,u=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(r=o[f[u++]])?(i(r.prototype,l,!0),i(r.prototype,s,!0)):d=!1;e.exports={ABV:c,CONSTR:d,TYPED:l,VIEW:s}},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,l=arguments.length;switch(l){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,o)}));default:for(i=new Array(l-1),a=0;a<i.length;)i[a++]=arguments[a];return t.nextTick((function(){e.apply(null,i)}))}}}:e.exports=t}).call(this,n(41))},function(e,t,n){var r=n(5).Buffer;function o(e){r.isBuffer(e)||(e=r.from(e));for(var t=e.length/4|0,n=new Array(t),o=0;o<t;o++)n[o]=e.readUInt32BE(4*o);return n}function i(e){for(;0<e.length;e++)e[0]=0}function a(e,t,n,r,o){for(var i,a,l,s,c=n[0],d=n[1],u=n[2],f=n[3],h=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],v=4,b=1;b<o;b++)i=c[h>>>24]^d[p>>>16&255]^u[m>>>8&255]^f[255&g]^t[v++],a=c[p>>>24]^d[m>>>16&255]^u[g>>>8&255]^f[255&h]^t[v++],l=c[m>>>24]^d[g>>>16&255]^u[h>>>8&255]^f[255&p]^t[v++],s=c[g>>>24]^d[h>>>16&255]^u[p>>>8&255]^f[255&m]^t[v++],h=i,p=a,m=l,g=s;return i=(r[h>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^t[v++],a=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&h])^t[v++],l=(r[m>>>24]<<24|r[g>>>16&255]<<16|r[h>>>8&255]<<8|r[255&p])^t[v++],s=(r[g>>>24]<<24|r[h>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^t[v++],[i>>>=0,a>>>=0,l>>>=0,s>>>=0]}var l=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],r=[],o=[[],[],[],[]],i=[[],[],[],[]],a=0,l=0,s=0;s<256;++s){var c=l^l<<1^l<<2^l<<3^l<<4;c=c>>>8^255&c^99,n[a]=c,r[c]=a;var d=e[a],u=e[d],f=e[u],h=257*e[c]^16843008*c;o[0][a]=h<<24|h>>>8,o[1][a]=h<<16|h>>>16,o[2][a]=h<<8|h>>>24,o[3][a]=h,h=16843009*f^65537*u^257*d^16843008*a,i[0][c]=h<<24|h>>>8,i[1][c]=h<<16|h>>>16,i[2][c]=h<<8|h>>>24,i[3][c]=h,0===a?a=l=1:(a=d^e[e[e[f^d]]],l^=e[e[l]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:o,INV_SUB_MIX:i}}();function c(e){this._key=o(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,r=4*(n+1),o=[],i=0;i<t;i++)o[i]=e[i];for(i=t;i<r;i++){var a=o[i-1];i%t==0?(a=a<<8|a>>>24,a=s.SBOX[a>>>24]<<24|s.SBOX[a>>>16&255]<<16|s.SBOX[a>>>8&255]<<8|s.SBOX[255&a],a^=l[i/t|0]<<24):t>6&&i%t==4&&(a=s.SBOX[a>>>24]<<24|s.SBOX[a>>>16&255]<<16|s.SBOX[a>>>8&255]<<8|s.SBOX[255&a]),o[i]=o[i-t]^a}for(var c=[],d=0;d<r;d++){var u=r-d,f=o[u-(d%4?0:4)];c[d]=d<4||u<=4?f:s.INV_SUB_MIX[0][s.SBOX[f>>>24]]^s.INV_SUB_MIX[1][s.SBOX[f>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[f>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[255&f]]}this._nRounds=n,this._keySchedule=o,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return a(e=o(e),this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=r.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},c.prototype.decryptBlock=function(e){var t=(e=o(e))[1];e[1]=e[3],e[3]=t;var n=a(e,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),i=r.allocUnsafe(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[3],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[1],12),i},c.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},e.exports.AES=c},function(e,t,n){var r=n(5).Buffer,o=n(121);e.exports=function(e,t,n,i){if(r.isBuffer(e)||(e=r.from(e,"binary")),t&&(r.isBuffer(t)||(t=r.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,l=r.alloc(a),s=r.alloc(i||0),c=r.alloc(0);a>0||i>0;){var d=new o;d.update(c),d.update(e),t&&d.update(t),c=d.digest();var u=0;if(a>0){var f=l.length-a;u=Math.min(a,c.length),c.copy(l,f,0,u),a-=u}if(u<c.length&&i>0){var h=s.length-i,p=Math.min(i,c.length-u);c.copy(s,h,u,u+p),i-=p}}return c.fill(0),{key:l,iv:s}}},function(e,t,n){"use strict";var r=n(13),o=n(24),i=o.getNAF,a=o.getJSF,l=o.assert;function s(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(e,t){l(e.precomputed);var n=e._getDoubles(),r=i(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2==0?2:1);o/=3;for(var a=[],s=0;s<r.length;s+=n.step){var c=0;for(t=s+n.step-1;t>=s;t--)c=(c<<1)+r[t];a.push(c)}for(var d=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=o;f>0;f--){for(s=0;s<a.length;s++){(c=a[s])===f?u=u.mixedAdd(n.points[s]):c===-f&&(u=u.mixedAdd(n.points[s].neg()))}d=d.add(u)}return d.toP()},s.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var o=r.points,a=i(t,n,this._bitLength),s=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(t=0;c>=0&&0===a[c];c--)t++;if(c>=0&&t++,s=s.dblp(t),c<0)break;var d=a[c];l(0!==d),s="affine"===e.type?d>0?s.mixedAdd(o[d-1>>1]):s.mixedAdd(o[-d-1>>1].neg()):d>0?s.add(o[d-1>>1]):s.add(o[-d-1>>1].neg())}return"affine"===e.type?s.toP():s},s.prototype._wnafMulAdd=function(e,t,n,r,o){for(var l=this._wnafT1,s=this._wnafT2,c=this._wnafT3,d=0,u=0;u<r;u++){var f=(A=t[u])._getNAFPoints(e);l[u]=f.wnd,s[u]=f.points}for(u=r-1;u>=1;u-=2){var h=u-1,p=u;if(1===l[h]&&1===l[p]){var m=[t[h],null,null,t[p]];0===t[h].y.cmp(t[p].y)?(m[1]=t[h].add(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg())):0===t[h].y.cmp(t[p].y.redNeg())?(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].add(t[p].neg())):(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=a(n[h],n[p]);d=Math.max(v[0].length,d),c[h]=new Array(d),c[p]=new Array(d);for(var b=0;b<d;b++){var y=0|v[0][b],_=0|v[1][b];c[h][b]=g[3*(y+1)+(_+1)],c[p][b]=0,s[h]=m}}else c[h]=i(n[h],l[h],this._bitLength),c[p]=i(n[p],l[p],this._bitLength),d=Math.max(c[h].length,d),d=Math.max(c[p].length,d)}var S=this.jpoint(null,null,null),E=this._wnafT4;for(u=d;u>=0;u--){for(var C=0;u>=0;){var T=!0;for(b=0;b<r;b++)E[b]=0|c[b][u],0!==E[b]&&(T=!1);if(!T)break;C++,u--}if(u>=0&&C++,S=S.dblp(C),u<0)break;for(b=0;b<r;b++){var A,O=E[b];0!==O&&(O>0?A=s[b][O-1>>1]:O<0&&(A=s[b][-O-1>>1].neg()),S="affine"===A.type?S.mixedAdd(A):S.add(A))}}for(u=0;u<r;u++)s[u]=null;return o?S:S.toP()},s.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(e,t){e=o.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?l(e[e.length-1]%2==0):7===e[0]&&l(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return o.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,o=0;o<t;o+=e){for(var i=0;i<e;i++)r=r.dbl();n.push(r)}return{step:e,points:n}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),o=1;o<n;o++)t[o]=t[o-1].add(r);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(466),i=n(477),a=n(478),l=n(130),s=n(186),c=n(5).Buffer;function d(e){var t;"object"!==r(e)||c.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=c.from(e));var n,d,u=a(e,t),f=u.tag,h=u.data;switch(f){case"CERTIFICATE":d=o.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(d||(d=o.PublicKey.decode(h,"der")),n=d.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case"1.2.840.10040.4.1":return d.algorithm.params.pub_key=o.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+f);case"ENCRYPTED PRIVATE KEY":h=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[e.algorithm.decrypt.cipher.algo.join(".")],a=e.algorithm.decrypt.cipher.iv,d=e.subjectPrivateKey,u=parseInt(o.split("-")[1],10)/8,f=s.pbkdf2Sync(t,n,r,u,"sha1"),h=l.createDecipheriv(o,f,a),p=[];return p.push(h.update(d)),p.push(h.final()),c.concat(p)}(h=o.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(n=(d=o.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(d.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:o.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return d.algorithm.params.priv_key=o.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+f);case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=o.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+f)}}e.exports=d,d.signature=o.signature},function(e,t,n){"use strict";var r,o={},i=o.Base64;e.exports&&(r=n(16).Buffer);var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(a),s=String.fromCharCode,c=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?s(192|t>>>6)+s(128|63&t):s(224|t>>>12&15)+s(128|t>>>6&63)+s(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return s(240|t>>>18&7)+s(128|t>>>12&63)+s(128|t>>>6&63)+s(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(d,c)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[a.charAt(n>>>18),a.charAt(n>>>12&63),t>=2?"=":a.charAt(n>>>6&63),t>=1?"=":a.charAt(63&n)].join("")},h=o.btoa?function(e){return o.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,f)},p=r?function(e){return(e.constructor===r.constructor?e:new r(e)).toString("base64")}:function(e){return h(u(e))},m=function(e,t){return t?p(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):p(String(e))},g=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),v=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return s(55296+(t>>>10))+s(56320+(1023&t));case 3:return s((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return s((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(g,v)},y=function(e){var t=e.length,n=t%4,r=(t>0?l[e.charAt(0)]<<18:0)|(t>1?l[e.charAt(1)]<<12:0)|(t>2?l[e.charAt(2)]<<6:0)|(t>3?l[e.charAt(3)]:0),o=[s(r>>>16),s(r>>>8&255),s(255&r)];return o.length-=[0,0,2,1][n],o.join("")},_=o.atob?function(e){return o.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,y)},S=r?function(e){return(e.constructor===r.constructor?e:new r(e,"base64")).toString()}:function(e){return b(_(e))},E=function(e){return S(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))};if(o.Base64={VERSION:"2.1.8",atob:_,btoa:h,fromBase64:E,toBase64:m,utob:u,encode:m,encodeURI:function(e){return m(e,!0)},btou:b,decode:E,noConflict:function(){var e=o.Base64;return o.Base64=i,e}},"function"==typeof Object.defineProperty){var C=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};o.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",C((function(){return E(this)}))),Object.defineProperty(String.prototype,"toBase64",C((function(e){return m(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",C((function(){return m(this,!0)})))}}e.exports=o.Base64},function(e,t,n){var r=n(9),o=n(6).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){t.f=n(10)},function(e,t,n){var r=n(74)("keys"),o=n(45);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(9),o=n(8),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(27)(Function.call,n(30).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(9),o=n(97).set;e.exports=function(e,t,n){var i,a=t.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},function(e,t,n){"use strict";var r=n(29),o=n(35);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(29),o=n(35);e.exports=function(e){return function(t,n){var i,a,l=String(o(t)),s=r(n),c=l.length;return s<0||s>=c?e?"":void 0:(i=l.charCodeAt(s))<55296||i>56319||s+1===c||(a=l.charCodeAt(s+1))<56320||a>57343?e?l.charAt(s):i:e?l.slice(s,s+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(46),o=n(0),i=n(18),a=n(21),l=n(57),s=n(155),c=n(55),d=n(51),u=n(10)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,m,g,v){s(n,t,p);var b,y,_,S=function(e){if(!f&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",C="values"==m,T=!1,A=e.prototype,O=A[u]||A["@@iterator"]||m&&A[m],w=O||S(m),N=m?C?S("entries"):w:void 0,L="Array"==t&&A.entries||O;if(L&&(_=d(L.call(new e)))!==Object.prototype&&_.next&&(c(_,E,!0),r||"function"==typeof _[u]||a(_,u,h)),C&&O&&"values"!==O.name&&(T=!0,w=function(){return O.call(this)}),r&&!v||!f&&!T&&A[u]||a(A,u,w),l[t]=w,l[E]=h,m)if(b={values:C?w:S("values"),keys:g?w:S("keys"),entries:N},v)for(y in b)y in A||i(A,y,b[y]);else o(o.P+o.F*(f||T),t,b);return b}},function(e,t,n){var r=n(106),o=n(35);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(9),o=n(34),i=n(10)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(10)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(57),o=n(10)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(15),o=n(44);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(66),o=n(10)("iterator"),i=n(57);e.exports=n(12).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(17),o=n(48),i=n(11);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,l=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:o(s,n);c>l;)t[l++]=e;return t}},function(e,t,n){"use strict";var r=n(52),o=n(160),i=n(57),a=n(22);e.exports=n(104)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,o,i=n(79),a=RegExp.prototype.exec,l=String.prototype.replace,s=a,c=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),d=void 0!==/()??/.exec("")[1];(c||d)&&(s=function(e){var t,n,r,o,s=this;return d&&(n=new RegExp("^"+s.source+"$(?!\\s)",i.call(s))),c&&(t=s.lastIndex),r=a.call(s,e),c&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),d&&r&&r.length>1&&l.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=s},function(e,t,n){"use strict";var r=n(103)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,o,i,a=n(27),l=n(149),s=n(96),c=n(92),d=n(6),u=d.process,f=d.setImmediate,h=d.clearImmediate,p=d.MessageChannel,m=d.Dispatch,g=0,v={},b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},y=function(e){b.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++g]=function(){l("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete v[e]},"process"==n(34)(u)?r=function(e){u.nextTick(a(b,e,1))}:m&&m.now?r=function(e){m.now(a(b,e,1))}:p?(i=(o=new p).port2,o.port1.onmessage=y,r=a(i.postMessage,i,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",y,!1)):r="onreadystatechange"in c("script")?function(e){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:f,clear:h}},function(e,t,n){"use strict";var r=n(6),o=n(14),i=n(46),a=n(85),l=n(21),s=n(60),c=n(7),d=n(59),u=n(29),f=n(11),h=n(168),p=n(50).f,m=n(15).f,g=n(111),v=n(55),b=r.ArrayBuffer,y=r.DataView,_=r.Math,S=r.RangeError,E=r.Infinity,C=b,T=_.abs,A=_.pow,O=_.floor,w=_.log,N=_.LN2,L=o?"_b":"buffer",I=o?"_l":"byteLength",U=o?"_o":"byteOffset";function M(e,t,n){var r,o,i,a=new Array(n),l=8*n-t-1,s=(1<<l)-1,c=s>>1,d=23===t?A(2,-24)-A(2,-77):0,u=0,f=e<0||0===e&&1/e<0?1:0;for((e=T(e))!=e||e===E?(o=e!=e?1:0,r=s):(r=O(w(e)/N),e*(i=A(2,-r))<1&&(r--,i*=2),(e+=r+c>=1?d/i:d*A(2,1-c))*i>=2&&(r++,i/=2),r+c>=s?(o=0,r=s):r+c>=1?(o=(e*i-1)*A(2,t),r+=c):(o=e*A(2,c-1)*A(2,t),r=0));t>=8;a[u++]=255&o,o/=256,t-=8);for(r=r<<t|o,l+=t;l>0;a[u++]=255&r,r/=256,l-=8);return a[--u]|=128*f,a}function D(e,t,n){var r,o=8*n-t-1,i=(1<<o)-1,a=i>>1,l=o-7,s=n-1,c=e[s--],d=127&c;for(c>>=7;l>0;d=256*d+e[s],s--,l-=8);for(r=d&(1<<-l)-1,d>>=-l,l+=t;l>0;r=256*r+e[s],s--,l-=8);if(0===d)d=1-a;else{if(d===i)return r?NaN:c?-E:E;r+=A(2,t),d-=a}return(c?-1:1)*r*A(2,d-t)}function x(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function R(e){return[255&e]}function k(e){return[255&e,e>>8&255]}function P(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function B(e){return M(e,52,8)}function z(e){return M(e,23,4)}function F(e,t,n){m(e.prototype,t,{get:function(){return this[n]}})}function j(e,t,n,r){var o=h(+n);if(o+t>e[I])throw S("Wrong index!");var i=e[L]._b,a=o+e[U],l=i.slice(a,a+t);return r?l:l.reverse()}function q(e,t,n,r,o,i){var a=h(+n);if(a+t>e[I])throw S("Wrong index!");for(var l=e[L]._b,s=a+e[U],c=r(+o),d=0;d<t;d++)l[s+d]=c[i?d:t-d-1]}if(a.ABV){if(!c((function(){b(1)}))||!c((function(){new b(-1)}))||c((function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name}))){for(var H,W=(b=function(e){return d(this,b),new C(h(e))}).prototype=C.prototype,Y=p(C),G=0;Y.length>G;)(H=Y[G++])in b||l(b,H,C[H]);i||(W.constructor=b)}var V=new y(new b(2)),Z=y.prototype.setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||s(y.prototype,{setInt8:function(e,t){Z.call(this,e,t<<24>>24)},setUint8:function(e,t){Z.call(this,e,t<<24>>24)}},!0)}else b=function(e){d(this,b,"ArrayBuffer");var t=h(e);this._b=g.call(new Array(t),0),this[I]=t},y=function(e,t,n){d(this,y,"DataView"),d(e,b,"DataView");var r=e[I],o=u(t);if(o<0||o>r)throw S("Wrong offset!");if(o+(n=void 0===n?r-o:f(n))>r)throw S("Wrong length!");this[L]=e,this[U]=o,this[I]=n},o&&(F(b,"byteLength","_l"),F(y,"buffer","_b"),F(y,"byteLength","_l"),F(y,"byteOffset","_o")),s(y.prototype,{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return x(j(this,4,e,arguments[1]))},getUint32:function(e){return x(j(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return D(j(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return D(j(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){q(this,1,e,R,t)},setUint8:function(e,t){q(this,1,e,R,t)},setInt16:function(e,t){q(this,2,e,k,t,arguments[2])},setUint16:function(e,t){q(this,2,e,k,t,arguments[2])},setInt32:function(e,t){q(this,4,e,P,t,arguments[2])},setUint32:function(e,t){q(this,4,e,P,t,arguments[2])},setFloat32:function(e,t){q(this,4,e,z,t,arguments[2])},setFloat64:function(e,t){q(this,8,e,B,t,arguments[2])}});v(b,"ArrayBuffer"),v(y,"DataView"),l(y.prototype,a.VIEW,!0),t.ArrayBuffer=b,t.DataView=y},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===n(e)?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(173)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r=n(4),o=n(176),i=n(5).Buffer,a=new Array(16);function l(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(e,t){return e<<t|e>>>32-t}function c(e,t,n,r,o,i,a){return s(e+(t&n|~t&r)+o+i|0,a)+t|0}function d(e,t,n,r,o,i,a){return s(e+(t&r|n&~r)+o+i|0,a)+t|0}function u(e,t,n,r,o,i,a){return s(e+(t^n^r)+o+i|0,a)+t|0}function f(e,t,n,r,o,i,a){return s(e+(n^(t|~r))+o+i|0,a)+t|0}r(l,o),l.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,o=this._c,i=this._d;n=c(n,r,o,i,e[0],3614090360,7),i=c(i,n,r,o,e[1],3905402710,12),o=c(o,i,n,r,e[2],606105819,17),r=c(r,o,i,n,e[3],3250441966,22),n=c(n,r,o,i,e[4],4118548399,7),i=c(i,n,r,o,e[5],1200080426,12),o=c(o,i,n,r,e[6],2821735955,17),r=c(r,o,i,n,e[7],4249261313,22),n=c(n,r,o,i,e[8],1770035416,7),i=c(i,n,r,o,e[9],2336552879,12),o=c(o,i,n,r,e[10],4294925233,17),r=c(r,o,i,n,e[11],2304563134,22),n=c(n,r,o,i,e[12],1804603682,7),i=c(i,n,r,o,e[13],4254626195,12),o=c(o,i,n,r,e[14],2792965006,17),n=d(n,r=c(r,o,i,n,e[15],1236535329,22),o,i,e[1],4129170786,5),i=d(i,n,r,o,e[6],3225465664,9),o=d(o,i,n,r,e[11],643717713,14),r=d(r,o,i,n,e[0],3921069994,20),n=d(n,r,o,i,e[5],3593408605,5),i=d(i,n,r,o,e[10],38016083,9),o=d(o,i,n,r,e[15],3634488961,14),r=d(r,o,i,n,e[4],3889429448,20),n=d(n,r,o,i,e[9],568446438,5),i=d(i,n,r,o,e[14],3275163606,9),o=d(o,i,n,r,e[3],4107603335,14),r=d(r,o,i,n,e[8],1163531501,20),n=d(n,r,o,i,e[13],2850285829,5),i=d(i,n,r,o,e[2],4243563512,9),o=d(o,i,n,r,e[7],1735328473,14),n=u(n,r=d(r,o,i,n,e[12],2368359562,20),o,i,e[5],4294588738,4),i=u(i,n,r,o,e[8],2272392833,11),o=u(o,i,n,r,e[11],1839030562,16),r=u(r,o,i,n,e[14],4259657740,23),n=u(n,r,o,i,e[1],2763975236,4),i=u(i,n,r,o,e[4],1272893353,11),o=u(o,i,n,r,e[7],4139469664,16),r=u(r,o,i,n,e[10],3200236656,23),n=u(n,r,o,i,e[13],681279174,4),i=u(i,n,r,o,e[0],3936430074,11),o=u(o,i,n,r,e[3],3572445317,16),r=u(r,o,i,n,e[6],76029189,23),n=u(n,r,o,i,e[9],3654602809,4),i=u(i,n,r,o,e[12],3873151461,11),o=u(o,i,n,r,e[15],530742520,16),n=f(n,r=u(r,o,i,n,e[2],3299628645,23),o,i,e[0],4096336452,6),i=f(i,n,r,o,e[7],1126891415,10),o=f(o,i,n,r,e[14],2878612391,15),r=f(r,o,i,n,e[5],4237533241,21),n=f(n,r,o,i,e[12],1700485571,6),i=f(i,n,r,o,e[3],2399980690,10),o=f(o,i,n,r,e[10],4293915773,15),r=f(r,o,i,n,e[1],2240044497,21),n=f(n,r,o,i,e[8],1873313359,6),i=f(i,n,r,o,e[15],4264355552,10),o=f(o,i,n,r,e[6],2734768916,15),r=f(r,o,i,n,e[13],1309151649,21),n=f(n,r,o,i,e[4],4149444226,6),i=f(i,n,r,o,e[11],3174756917,10),o=f(o,i,n,r,e[2],718787259,15),r=f(r,o,i,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+o|0,this._d=this._d+i|0},l.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=l},function(e,t,n){e.exports=o;var r=n(123).EventEmitter;function o(){r.call(this)}n(4)(o,r),o.Readable=n(124),o.Writable=n(415),o.Duplex=n(416),o.Transform=n(417),o.PassThrough=n(418),o.Stream=o,o.prototype.pipe=function(e,t){var n=this;function o(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",o),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",l),n.on("close",s));var a=!1;function l(){a||(a=!0,e.end())}function s(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",o),e.removeListener("drain",i),n.removeListener("end",l),n.removeListener("close",s),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",c),e.on("error",c),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};o=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var l=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function d(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(e))}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i,a,l;if(d(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=u(e))>0&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,l=s,console&&console.warn&&console.warn(l)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(r);return o.listener=n,r.wrapFn=o,o}function m(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var l=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw l.context=i,l}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)a(s,this,t);else{var c=s.length,d=v(s,c);for(n=0;n<c;++n)a(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return d(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return d(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,i,a;if(d(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return m(this,e,!0)},s.prototype.rawListeners=function(e){return m(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(e,t,n){(t=e.exports=n(177)).Stream=t,t.Readable=t,t.Writable=n(125),t.Duplex=n(54),t.Transform=n(180),t.PassThrough=n(414)},function(e,t,n){"use strict";(function(t,r,o){var i=n(86);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var l,s=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:i.nextTick;b.WritableState=v;var c=Object.create(n(69));c.inherits=n(4);var d={deprecate:n(413)},u=n(178),f=n(5).Buffer,h=o.Uint8Array||function(){};var p,m=n(179);function g(){}function v(e,t){l=l||n(54),e=e||{};var r=t instanceof l;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var o=e.highWaterMark,c=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(o(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}(e,n,r,t,o);else{var a=E(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||S(e,n),r?s(_,e,n,a,o):_(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function b(e){if(l=l||n(54),!(p.call(b,this)||this instanceof l))return new b(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function y(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),T(e,t)}function S(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var l=0,s=!0;n;)o[l]=n,n.isBuf||(s=!1),n=n.next,l+=1;o.allBuffers=s,y(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,d=n.encoding,u=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,d,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var n=E(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(b,u),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===b&&(e&&e._writableState instanceof v)}})):p=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,l=!o.objectMode&&(r=e,f.isBuffer(r)||r instanceof h);return l&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),l?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=g),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),i.nextTick(t,n)}(this,n):(l||function(e,t,n,r){var o=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i.nextTick(r,a),o=!1),o}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,o,i){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n));return t}(t,r,o);r!==a&&(n=!0,o="buffer",r=a)}var l=t.objectMode?1:r.length;t.length+=l;var s=t.length<t.highWaterMark;s||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,l,r,o,i);return s}(this,o,l,e,t,n)),a},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||S(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(41),n(411).setImmediate,n(38))},function(e,t,n){"use strict";var r=n(5).Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=c,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=a(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if((o=a(t[r]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if((o=a(t[r]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";var r=n(16).Buffer,o=n(4),i=n(176),a=new Array(16),l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function h(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function m(e,t,n,r,o,i,a,l){return p(e+(t^n^r)+i+a|0,l)+o|0}function g(e,t,n,r,o,i,a,l){return p(e+(t&n|~t&r)+i+a|0,l)+o|0}function v(e,t,n,r,o,i,a,l){return p(e+((t|~n)^r)+i+a|0,l)+o|0}function b(e,t,n,r,o,i,a,l){return p(e+(t&r|n&~r)+i+a|0,l)+o|0}function y(e,t,n,r,o,i,a,l){return p(e+(t^(n|~r))+i+a|0,l)+o|0}o(h,i),h.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,r=0|this._b,o=0|this._c,i=0|this._d,h=0|this._e,_=0|this._a,S=0|this._b,E=0|this._c,C=0|this._d,T=0|this._e,A=0;A<80;A+=1){var O,w;A<16?(O=m(n,r,o,i,h,e[l[A]],u[0],c[A]),w=y(_,S,E,C,T,e[s[A]],f[0],d[A])):A<32?(O=g(n,r,o,i,h,e[l[A]],u[1],c[A]),w=b(_,S,E,C,T,e[s[A]],f[1],d[A])):A<48?(O=v(n,r,o,i,h,e[l[A]],u[2],c[A]),w=v(_,S,E,C,T,e[s[A]],f[2],d[A])):A<64?(O=b(n,r,o,i,h,e[l[A]],u[3],c[A]),w=g(_,S,E,C,T,e[s[A]],f[3],d[A])):(O=y(n,r,o,i,h,e[l[A]],u[4],c[A]),w=m(_,S,E,C,T,e[s[A]],f[4],d[A])),n=h,h=i,i=p(o,10),o=r,r=O,_=T,T=C,C=p(E,10),E=S,S=w}var N=this._b+o+C|0;this._b=this._c+i+T|0,this._c=this._d+h+_|0,this._d=this._e+n+S|0,this._e=this._a+r+E|0,this._a=N},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.alloc?r.alloc(20):new r(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=h},function(e,t,n){(t=e.exports=function(e){e=e.toLowerCase();var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n}).sha=n(419),t.sha1=n(420),t.sha224=n(421),t.sha256=n(181),t.sha384=n(422),t.sha512=n(182)},function(e,t,n){"use strict";var r=n(23);function o(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=o,o.prototype._init=function(){},o.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},o.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<n;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=n,n},o.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(e){var t=0,n=0,r=(this.bufferOff+e.length)/this.blockSize|0,o=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(o,n)));for(var i=e.length-(e.length-t)%this.blockSize;t<i;t+=this.blockSize)this._update(e,t,o,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return o},o.prototype._updateDecrypt=function(e){for(var t=0,n=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,o=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),n+=this._flushBuffer(o,n);return t+=this._buffer(e,t),o},o.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},o.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},o.prototype._unpad=function(e){return e},o.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,n){var r=n(431),o=n(439),i=n(194);t.createCipher=t.Cipher=r.createCipher,t.createCipheriv=t.Cipheriv=r.createCipheriv,t.createDecipher=t.Decipher=o.createDecipher,t.createDecipheriv=t.Decipheriv=o.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(i)}},function(e,t,n){var r={ECB:n(432),CBC:n(433),CFB:n(434),CFB8:n(435),CFB1:n(436),OFB:n(437),CTR:n(192),GCM:n(192)},o=n(194);for(var i in o)o[i].module=r[o[i].mode];e.exports=o},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;function i(e){this.rand=e}if(e.exports=function(e){return o||(o=new i(null)),o.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"===("undefined"==typeof self?"undefined":r(self)))self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"===("undefined"==typeof window?"undefined":r(window))&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=n(443);if("function"!=typeof a.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},function(e,t,n){(function(t){var r=n(13),o=n(61);function i(e,n){var o=function(e){var t=a(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(n),i=n.modulus.byteLength(),l=(r.mont(n.modulus),new r(e).mul(o.blinder).umod(n.modulus)),s=l.toRed(r.mont(n.prime1)),c=l.toRed(r.mont(n.prime2)),d=n.coefficient,u=n.prime1,f=n.prime2,h=s.redPow(n.exponent1),p=c.redPow(n.exponent2);h=h.fromRed(),p=p.fromRed();var m=h.isub(p).imul(d).umod(u);return m.imul(f),p.iadd(m),new t(p.imul(o.unblinder).umod(n.modulus).toArray(!1,i))}function a(e){for(var t=e.modulus.byteLength(),n=new r(o(t));n.cmp(e.modulus)>=0||!n.umod(e.prime1)||!n.umod(e.prime2);)n=new r(o(t));return n}e.exports=i,i.getr=a}).call(this,n(16).Buffer)},function(e,t,n){"use strict";var r=t;r.version=n(448).version,r.utils=n(24),r.rand=n(132),r.curve=n(200),r.curves=n(135),r.ec=n(459),r.eddsa=n(463)},function(e,t,n){"use strict";var r,o=t,i=n(136),a=n(200),l=n(24).assert;function s(e){"short"===e.type?this.curve=new a.short(e):"edwards"===e.type?this.curve=new a.edwards(e):this.curve=new a.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,l(this.g.validate(),"Invalid curve"),l(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){var n=new s(t);return Object.defineProperty(o,e,{configurable:!0,enumerable:!0,value:n}),n}})}o.PresetCurve=s,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(458)}catch(e){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(e,t,n){var r=t;r.utils=n(33),r.common=n(71),r.sha=n(452),r.ripemd=n(456),r.hmac=n(457),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(e,t,n){var r=n(485);function o(e){return e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}var i={xssFilter:function(){if(void 0===r)return null;var e=decodeURIComponent(location.pathname),t=e.lastIndexOf("/")+1,n=e.lastIndexOf(".");e=n>0?e.substring(t,n)+"_files":"";var i=/^(([\w\d-_]*:\/\/)|(index_files\/)|(data:image\/(?!svg)))/,a=new RegExp("^("+"#".escapeRegex()+(e?"|"+e.escapeRegex():"")+")","i"),l=/^(id|class|name|style|data|width|height)/i,s=new r.FilterXSS({onIgnoreTag:function(e,t,n){if(/script/gi.test(e))return r.escapeAttrValue(t);if(n.isClosing)return"</"+e+">";var o=r.parseAttr(t,(function(t,n){return n=s.options.safeAttrValue(e,t,n,s),/^on/i.test(t)?"":n?t+'="'+n+'"':t}));return o=/^<!/i.test(t)?"<!"+o:"<"+o,"/"===t[t.length-2]&&(o+="/"),o+=">"},onIgnoreTagAttr:function(e,t,n){return n=o(n),!/^object$/i.test(e)&&n&&l.test(t)?t+'="'+n+'"':""},safeAttrValue:function(e,t,n){if(n=o(n),/^meta$/i.test(e)&&/^http-equiv$/i.test(t)&&/refresh/i.test(n))return"";if("href"===t||"src"===t){var l=window.location.protocol;if(/^https?:/.test(l)||(l="http:"),n=n.replace(/^\/\//,l+"//"),i.test(n)||a.test(n))return r.escapeAttrValue(n)}return r.safeAttrValue(e,t,n)}});return s.options.whiteList.iframe=["src","scrolling"],s.options.whiteList.button=["title","type","value"],s.options.whiteList.object=[],s.options.whiteList.noscript=[],function(e){return e=(e=s.process(e)).replace(/(<style(\s+[^>]*)?>)(.*)(<\/style>)/gi,(function(e,t,n,r,o){return t+r.replace(/&gt;/gi,">")+o}))}}()};e.exports=i},function(e,t,n){var r=n(213),o=n(486);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(2),s=n(1),c=n(3),d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}(this,o(t).call(this))).TYPE=s.EDITOR_EVENT_TYPE,e._eventTrackHandler={},e._selectTimer=null,e._editorListener={selectionchange:[],historyUndo:[]},e._eventStringify=function(e){var t=[];for(var n in e){var o=e[n],i=r(o).toLowerCase();"string"!==i&&"number"!==i||("string"===i&&(o='"'+o.replace(/"/g,'\\"')+'"'),t.push('"'+n+'":'+o))}return"{"+t.join(",")+"}"},e._fixBlockFormat=function(t){return e.env.browser.isIe&&/ [1-6]$/i.test(t)?t=t.replace(/.* ([1-6])$/,"h$1"):/^h[1-6]$/i.test(t)||(t="div"),t},e._getCommandValue=function(e){return e?"1":"0"},e._queryCommand=function(t){return e._getCommandValue(e.req.commandExtend.queryCommandState(t))},e._getCaretStyle=function(){var t,n,r,o={backColor:"",blockFormat:"",bold:"0",canCreateCode:"1",canCreateTable:"1",canCreateTodo:"1",canFormatPainter:"1",canInsertHorizontalRule:"1",canInsertImage:"1",canSetLink:"1",isInCode:"0",isInTable:"0",clientTools:"1",fontName:"",fontSize:"",foreColor:"",formatPainterStatus:e.req.formatPainter.status().toString(),InsertOrderedList:"0",InsertUnorderedList:"0",italic:"0",justifyleft:"0",justifycenter:"0",justifyright:"0",justifyfull:"0",lineHeight:"",strikeThrough:"0",subscript:"0",superscript:"0",underline:"0",unlink:"0"},i=e.rangeUtils.getRange(),a=e.req.tableZone.getZone(),l=[],d=e.req.editorBridge.isOutline,u=!1;if(d){if(i){var f=i.startContainer,h=!!e.req.outlineUtils.getNodeContentFromDom(f),p=!h&&!!e.req.outlineUtils.getNodeNotesFromDom(f);if(!h&&!p)return}var m=e.req.outlineUtils.getCurNodes();!(u=!!m.focusNode||!!m.showMenuNode)&&i&&(i=null),u||(o.canInsertImage="0"),o.canCreateCode="0",o.canCreateTable="0",o.canCreateTodo="0",o.blockFormat=e._fixBlockFormat(e.req.outlineCore.getContentFormatBlock())}if(i||d||a.range&&!a.active){if(i&&e.domUtils.isInWizTmp(i.startContainer))o.clientTools="0";else if(a.grid&&a.range){o.isInTable="1",o.canCreateCode="0",o.canCreateTable="0";var g=e.req.tableUtils.getAlign(a.grid,a.range);o.justifyleft=e._getCommandValue(/left/i.test(g.align)),o.justifycenter=e._getCommandValue(/center/i.test(g.align)),o.justifyright=e._getCommandValue(/right/i.test(g.align)),i||(o.canCreateTodo="0",o.canFormatPainter="0",o.canInsertHorizontalRule="0",o.canInsertImage="0",o.canSetLink="0")}else i&&e.req.codeUtils&&e.req.codeUtils.getContainerFromChild(i.startContainer)&&(o.isInCode="1",o.clientTools="0");if("0"===o.clientTools&&(o.canCreateCode="0",o.canCreateTable="0",o.canCreateTodo="0",o.canFormatPainter="0",o.canInsertHorizontalRule="0",o.canInsertImage="0",o.canSetLink="0"),!i||a.range&&!e.req.tableZone.isSingleCell())r=e.req.tableUtils.getAlign(a.grid,a.range),n=e.req.tableZone.getSelectedCells(),l=e.req.tableUtils.getDomsByCellList(n),o.justifyleft="left"===r.align?"1":"0",o.justifycenter="center"===r.align?"1":"0",o.justifyright="right"===r.align?"1":"0",t={color:"","font-size":"","font-family":"","font-weight":"","font-style":"","line-height":"","text-decoration":"","background-color":""};else{if(o.blockFormat||(o.blockFormat=e._fixBlockFormat(e.env.doc.queryCommandValue("formatBlock"))),e.env.browser.isIe){var v=e.rangeUtils.getRangeDetail(i.startContainer,i.startOffset);3===v.container.nodeType&&(v.container=v.container.parentNode),o.fontName=e.domUtils.getComputedStyle(v.container,"fontFamily",!1)}else o.fontName=e.env.doc.queryCommandValue("fontName");o.foreColor=c.rgb2Hex(e.env.doc.queryCommandValue("foreColor")),o.backColor=c.rgb2Hex(e.env.doc.queryCommandValue("backColor")),o.bold=e._queryCommand("bold"),o.italic=e._queryCommand("italic"),o.underline=e._queryCommand("underline"),o.strikeThrough=e._queryCommand("strikeThrough"),o.subscript=e._queryCommand("subscript"),o.superscript=e._queryCommand("superscript"),"1"!==o.isInTable&&(o.justifyleft=e._queryCommand("justifyleft"),o.justifycenter=e._queryCommand("justifycenter"),o.justifyright=e._queryCommand("justifyright"),o.justifyfull=e._queryCommand("justifyfull")),o.InsertOrderedList=e._queryCommand("InsertOrderedList"),o.InsertUnorderedList=e._queryCommand("InsertUnorderedList"),o.unlink=e.req.linkUtils.hasLinkFromRange()?"1":"0",t={"font-size":"","line-height":""},(l=e.rangeUtils.getRangeDomList({noSplit:!0}))&&(l=l.list.length>0?l.list:[l.startDom])}for(var b=0,y=l.length;b<y;b++){var _=l[b];if(3===_.nodeType||1===_.nodeType)for(var S in _=3===_.nodeType?_.parentNode:l[b],t)if(t.hasOwnProperty(S)){var E=e.domUtils.getComputedStyle(_,S,!0);if(!E)continue;0===b?t[S]=E:t[S]!==E&&(t[S]="")}}var C=t["font-size"];if(C&&(o.fontSize=Math.round(parseFloat(C)/e.domUtils.pt2px()/e.domUtils.getRootSizeRate())+"pt"),(C=t["font-family"])&&(o.fontName=C),(C=t["font-weight"])&&/bold|bolder/.test(C)&&(o.bold="1"),(C=t["font-style"])&&/italic|oblique/.test(C)&&(o.italic="1"),(C=t["font-style"])&&/italic|oblique/.test(C)&&(o.italic="1"),C=t["line-height"]){var T=Math.round(parseFloat(C)/e.domUtils.getRootSize()*100)/100;isNaN(T)||(o.lineHeight=T)}(C=t["text-decoration"])&&/underline/.test(C)?o.underline="1":C&&/line\-through/.test(C)&&(o.strikeThrough="1"),"#f3f7ff"===o.backColor&&(o.backColor=""),e.triggerListener(s.TYPE.EDITOR_EVENT.SelectionChange,[o])}},e._onSelectionChange=function(){e._selectTimer&&clearTimeout(e._selectTimer),e._selectTimer=setTimeout(e._getCaretStyle,50)},e.addListener=function(t,n){if(n&&"function"==typeof n){var r=e._editorListener[t];if(r){for(var o=0,i=r.length;o<i;o++)if(r[o]===n)return;r.push(n),t===s.TYPE.EDITOR_EVENT.SelectionChange&&e.env.event.add(s.EVENT.ON_SELECTION_CHANGE,e._onSelectionChange)}}},e.removeListener=function(t,n){if(!n||"function"==typeof n){var r=e._editorListener[t];if(r){for(var o=r.length-1;o>=0;o--)r[o]!==n&&n||r.splice(o,1);0===r.length&&e.env.event.remove(s.EVENT.ON_SELECTION_CHANGE,e._onSelectionChange)}}},e.startTrackEvent=function(t,n){e._eventTrackHandler[n]||(e._eventTrackHandler[n]=function(t){e.env.client.sendCmdToWizClient(s.CLIENT_EVENT.WizEditorTrackEvent,{id:n,e:e._eventStringify(t)})},e.env.body.addEventListener(t,e._eventTrackHandler[n]))},e.stopTrackEvent=function(t,n){e._eventTrackHandler[n]&&(e.env.body.removeEventListener(t,e._eventTrackHandler[n]),delete e._eventTrackHandler[n])},e.triggerListener=function(t,n){var r=e._editorListener[t];if(r)for(var o=0,a=r.length;o<a;o++){r[o].apply(i(e),n)}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),t}(l);e.exports=d},function(e,t,n){e.exports=!n(14)&&!n(7)((function(){return 7!=Object.defineProperty(n(92)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(6),o=n(12),i=n(46),a=n(93),l=n(15).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(20),o=n(22),i=n(75)(!1),a=n(94)("IE_PROTO");e.exports=function(e,t){var n,l=o(e),s=0,c=[];for(n in l)n!=a&&r(l,n)&&c.push(n);for(;t.length>s;)r(l,n=t[s++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(15),o=n(8),i=n(47);e.exports=n(14)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),l=a.length,s=0;l>s;)r.f(e,n=a[s++],t[n]);return e}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(22),i=n(50).f,a={}.toString,l="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return l&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return l.slice()}}(e):i(o(e))}},function(e,t,n){"use strict";var r=n(14),o=n(47),i=n(76),a=n(65),l=n(17),s=n(64),c=Object.assign;e.exports=!c||n(7)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=l(e),c=arguments.length,d=1,u=i.f,f=a.f;c>d;)for(var h,p=s(arguments[d++]),m=u?o(p).concat(u(p)):o(p),g=m.length,v=0;g>v;)h=m[v++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:c},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(28),o=n(9),i=n(149),a=[].slice,l={},s=function(e,t,n){if(!(t in l)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";l[t]=Function("F,a","return new F("+r.join(",")+")")}return l[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),l=function r(){var o=n.concat(a.call(arguments));return this instanceof r?s(t,o.length,o):i(t,o,e)};return o(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6).parseInt,o=n(56).trim,i=n(98),a=/^[-+]?0[xX]/;e.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(6).parseFloat,o=n(56).trim;e.exports=1/r(n(98)+"-0")!=-1/0?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(34);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(9),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(49),o=n(44),i=n(55),a={};n(21)(a,n(10)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(8);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(313);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(28),o=n(17),i=n(64),a=n(11);e.exports=function(e,t,n,l,s){r(t);var c=o(e),d=i(c),u=a(c.length),f=s?u-1:0,h=s?-1:1;if(n<2)for(;;){if(f in d){l=d[f],f+=h;break}if(f+=h,s?f<0:u<=f)throw TypeError("Reduce of empty array with no initial value")}for(;s?f>=0:u>f;f+=h)f in d&&(l=t(l,d[f],f,c));return l}},function(e,t,n){"use strict";var r=n(17),o=n(48),i=n(11);e.exports=[].copyWithin||function(e,t){var n=r(this),a=i(n.length),l=o(e,a),s=o(t,a),c=arguments.length>2?arguments[2]:void 0,d=Math.min((void 0===c?a:o(c,a))-s,a-l),u=1;for(s<l&&l<s+d&&(u=-1,s+=d-1,l+=d-1);d-- >0;)s in n?n[l]=n[s]:delete n[l],l+=u,s+=u;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(113);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(14)&&"g"!=/./g.flags&&n(15).f(RegExp.prototype,"flags",{configurable:!0,get:n(79)})},function(e,t,n){"use strict";var r,o,i,a,l=n(46),s=n(6),c=n(27),d=n(66),u=n(0),f=n(9),h=n(28),p=n(59),m=n(82),g=n(67),v=n(115).set,b=n(333)(),y=n(164),_=n(334),S=n(83),E=n(165),C=s.TypeError,T=s.process,A=T&&T.versions,O=A&&A.v8||"",w=s.Promise,N="process"==d(T),L=function(){},I=o=y.f,U=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n(10)("species")]=function(e){e(L,L)};return(N||"function"==typeof PromiseRejectionEvent)&&e.then(L)instanceof t&&0!==O.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;b((function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a,l=o?t.ok:t.fail,s=t.resolve,c=t.reject,d=t.domain;try{l?(o||(2==e._h&&k(e),e._h=1),!0===l?n=r:(d&&d.enter(),n=l(r),d&&(d.exit(),a=!0)),n===t.promise?c(C("Promise-chain cycle")):(i=M(n))?i.call(n,s,c):s(n)):c(r)}catch(e){d&&!a&&d.exit(),c(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&x(e)}))}},x=function(e){v.call(s,(function(){var t,n,r,o=e._v,i=R(e);if(i&&(t=_((function(){N?T.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=N||R(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},k=function(e){v.call(s,(function(){var t;N?T.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})}))},P=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},B=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw C("Promise can't be resolved itself");(n=M(t))?b((function(){var o={_w:r,_d:!1};try{n.call(t,c(e,o,1),c(P,o,1))}catch(e){P.call(o,e)}})):(r._v=t,r._s=1,D(r,!1))}catch(e){P.call({_w:r,_d:!1},e)}}};U||(w=function(e){p(this,w,"Promise","_h"),h(e),r.call(this);try{e(c(B,this,1),c(P,this,1))}catch(e){P.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(60)(w.prototype,{then:function(e,t){var n=I(g(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=N?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=c(B,e,1),this.reject=c(P,e,1)},y.f=I=function(e){return e===w||e===a?new i(e):o(e)}),u(u.G+u.W+u.F*!U,{Promise:w}),n(55)(w,"Promise"),n(58)("Promise"),a=n(12).Promise,u(u.S+u.F*!U,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(l||!U),"Promise",{resolve:function(e){return E(l&&this===a?w:this,e)}}),u(u.S+u.F*!(U&&n(78)((function(e){w.all(e).catch(L)}))),"Promise",{all:function(e){var t=this,n=I(t),r=n.resolve,o=n.reject,i=_((function(){var n=[],i=0,a=1;m(e,!1,(function(e){var l=i++,s=!1;n.push(void 0),a++,t.resolve(e).then((function(e){s||(s=!0,n[l]=e,--a||r(n))}),o)})),--a||r(n)}));return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=I(t),r=n.reject,o=_((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(e,t,n){"use strict";var r=n(28);function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},function(e,t,n){var r=n(8),o=n(9),i=n(164);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(15).f,o=n(49),i=n(60),a=n(27),l=n(59),s=n(82),c=n(104),d=n(160),u=n(58),f=n(14),h=n(40).fastKey,p=n(53),m=f?"_s":"size",g=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var d=e((function(e,r){l(e,d,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&s(r,n,e[c],e)}));return i(d.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=g(n,e);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[m]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(p(this,t),e)}}),f&&r(d.prototype,"size",{get:function(){return p(this,t)[m]}}),d},def:function(e,t,n){var r,o,i=g(e,t);return i?i.v=n:(e._l=i={i:o=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[m]++,"F"!==o&&(e._i[o]=i)),e},getEntry:g,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?d(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,d(1))}),n?"entries":"values",!n,!0),u(t)}}},function(e,t,n){"use strict";var r=n(60),o=n(40).getWeak,i=n(8),a=n(9),l=n(59),s=n(82),c=n(32),d=n(20),u=n(53),f=c(5),h=c(6),p=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return f(e.a,(function(e){return e[0]===t}))};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var c=e((function(e,r){l(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,null!=r&&s(r,n,e[i],e)}));return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=o(e);return!0===n?m(u(this,t)).delete(e):n&&d(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=o(e);return!0===n?m(u(this,t)).has(e):n&&d(n,this._i)}}),c},def:function(e,t,n){var r=o(i(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},function(e,t,n){var r=n(29),o=n(11);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(50),o=n(76),i=n(8),a=n(6).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(i(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(11),o=n(100),i=n(35);e.exports=function(e,t,n,a){var l=String(i(e)),s=l.length,c=void 0===n?" ":String(n),d=r(t);if(d<=s||""==c)return l;var u=d-s,f=o.call(c,Math.ceil(u/c.length));return f.length>u&&(f=f.slice(0,u)),a?f+l:l+f}},function(e,t,n){var r=n(14),o=n(47),i=n(22),a=n(65).f;e.exports=function(e){return function(t){for(var n,l=i(t),s=o(l),c=s.length,d=0,u=[];c>d;)n=s[d++],r&&!a.call(l,n)||u.push(e?[n,l[n]]:l[n]);return u}}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(module,exports,__webpack_require__){(function(module){var __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,b){var l,c=eval("this"),d=256,g="random",h=b.pow(d,6),i=b.pow(2,52),j=2*i,k=d-1;function m(e,t,r){var u=[],f=q(function e(t,n){var r,o=[],i=_typeof(t);if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,s(a)]:null==e?function(){try{var e;return l&&(e=l.randomBytes)?e=e(d):(e=new Uint8Array(d),(c.crypto||c.msCrypto).getRandomValues(e)),s(e)}catch(e){var t=c.navigator,n=t&&t.plugins;return[+new Date,c,n,c.screen,s(a)]}}():e,3),u),p=new n(u),m=function(){for(var e=p.g(6),t=h,n=0;e<i;)e=(e+n)*d,t*=d,n=p.g(1);for(;j<=e;)e/=2,t/=2,n>>>=1;return(e+n)/t};return m.int32=function(){return 0|p.g(4)},m.quick=function(){return p.g(4)/4294967296},m.double=m,q(s(p.S),a),(t.pass||r||function(e,t,n,r){return r&&(r.S&&o(r,p),e.state=function(){return o(p,{})}),n?(b[g]=e,t):e})(m,f,"global"in t?t.global:this==b,t.state)}function n(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);o<d;)a[o]=o++;for(o=0;o<d;o++)a[o]=a[i=k&i+e[o%n]+(t=a[o])],a[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,a=r.S;e--;)t=a[o=k&o+1],n=n*d+a[k&(a[o]=a[i=k&i+t])+(a[i]=t)];return r.i=o,r.j=i,n})(d)}function o(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function q(e,t){for(var n,r=e+"",o=0;o<r.length;)t[k&o]=k&(n^=19*t[k&o])+r.charCodeAt(o++);return s(t)}function s(e){return String.fromCharCode.apply(0,e)}if(q(b.random(),a),"object"==_typeof(module)&&module.exports){module.exports=m;try{l=__webpack_require__(405)}catch(n){}}else __WEBPACK_AMD_DEFINE_RESULT__=function(){return m}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}([],Math)}).call(this,__webpack_require__(117)(module))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=n(5).Buffer,o=n(122).Transform;function i(e){o.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(4)(i,o),i.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(e){r=e}n(r)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(e)||(e=r.from(e,t));for(var n=this._block,o=0;this._blockOffset+e.length-o>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)n[i++]=e[o++];this._update(),this._blockOffset=0}for(;o<e.length;)n[this._blockOffset++]=e[o++];for(var a=0,l=8*e.length;l>0;++a)this._length[a]+=l,(l=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*l);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=i},function(e,t,n){"use strict";(function(t,r){var o=n(86);e.exports=y;var i,a=n(175);y.ReadableState=b;n(123).EventEmitter;var l=function(e,t){return e.listeners(t).length},s=n(178),c=n(5).Buffer,d=t.Uint8Array||function(){};var u=Object.create(n(69));u.inherits=n(4);var f=n(408),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n(409),g=n(179);u.inherits(y,s);var v=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var r=t instanceof(i=i||n(54));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,a=e.readableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(a||0===a)?a:l,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(126).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function y(e){if(i=i||n(54),!(this instanceof y))return new y(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function _(e,t,n,r,o){var i,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,C(e)}(e,a)):(o||(i=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof d||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,t)),i?e.emit("error",i):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?S(e,a,t,!1):A(e,a)):S(e,a,t,!1))):r||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),A(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},y.prototype.unshift=function(e){return _(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return p||(p=n(126).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o.nextTick(T,e):T(e))}function T(e){h("emit readable"),e.emit("readable"),L(e)}function A(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(O,e,t))}function O(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function w(e){h("readable nexttick read 0"),e.read(0)}function N(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;e-=o.length;for(;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(a===i.length?o+=i:o+=i.slice(0,e),0===(e-=a)){a===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(a));break}++r}return t.length-=r,o}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,o=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,a),0===(e-=a)){a===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(a));break}++o}return t.length-=o,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function U(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):C(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&U(this),null;var r,o=t.needReadable;return h("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",o=!0),t.ended||t.reading?h("reading or ended",o=!1):o&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?I(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?d:y;function c(t,r){h("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),e.removeListener("close",v),e.removeListener("finish",b),e.removeListener("drain",u),e.removeListener("error",g),e.removeListener("unpipe",c),n.removeListener("end",d),n.removeListener("end",y),n.removeListener("data",m),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function d(){h("onend"),e.end()}i.endEmitted?o.nextTick(s):n.once("end",s),e.on("unpipe",c);var u=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&l(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",u);var f=!1;var p=!1;function m(t){h("ondata"),p=!1,!1!==e.write(t)||p||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==D(i.pipes,e))&&!f&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(t){h("onerror",t),y(),e.removeListener("error",g),0===l(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",b),y()}function b(){h("onfinish"),e.removeListener("close",v),y()}function y(){h("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",v),e.once("finish",b),e.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var a=D(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},y.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&C(this):o.nextTick(w,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(N,e,t))}(this,e)),this},y.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var o in e.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(h("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o)||(n.objectMode||o&&o.length)&&(t.push(o)||(r=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<v.length;i++)e.on(v[i],this.emit.bind(this,v[i]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=I}).call(this,n(38),n(41))},function(e,t,n){e.exports=n(123).EventEmitter},function(e,t,n){"use strict";var r=n(86);function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";e.exports=a;var r=n(54),o=Object.create(n(69));function i(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){s(e,t,n)})):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=n(4),o.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){var r=n(4),o=n(62),i=n(5).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=new Array(64);function s(){this.init(),this._w=l,o.call(this,64,56)}function c(e,t,n){return n^e&(t^n)}function d(e,t,n){return e&t|n&(e|t)}function u(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function h(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}r(s,o),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},s.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,o=0|this._b,i=0|this._c,l=0|this._d,s=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,v=0;v<16;++v)n[v]=e.readInt32BE(4*v);for(;v<64;++v)n[v]=0|(((t=n[v-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[v-7]+h(n[v-15])+n[v-16];for(var b=0;b<64;++b){var y=g+f(s)+c(s,p,m)+a[b]+n[b]|0,_=u(r)+d(r,o,i)|0;g=m,m=p,p=s,s=l+y|0,l=i,i=o,o=r,r=y+_|0}this._a=r+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=l+this._d|0,this._e=s+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},s.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=s},function(e,t,n){var r=n(4),o=n(62),i=n(5).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],l=new Array(160);function s(){this.init(),this._w=l,o.call(this,128,112)}function c(e,t,n){return n^e&(t^n)}function d(e,t,n){return e&t|n&(e|t)}function u(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function f(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function v(e,t){return e>>>0<t>>>0?1:0}r(s,o),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},s.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,o=0|this._ch,i=0|this._dh,l=0|this._eh,s=0|this._fh,b=0|this._gh,y=0|this._hh,_=0|this._al,S=0|this._bl,E=0|this._cl,C=0|this._dl,T=0|this._el,A=0|this._fl,O=0|this._gl,w=0|this._hl,N=0;N<32;N+=2)t[N]=e.readInt32BE(4*N),t[N+1]=e.readInt32BE(4*N+4);for(;N<160;N+=2){var L=t[N-30],I=t[N-30+1],U=h(L,I),M=p(I,L),D=m(L=t[N-4],I=t[N-4+1]),x=g(I,L),R=t[N-14],k=t[N-14+1],P=t[N-32],B=t[N-32+1],z=M+k|0,F=U+R+v(z,M)|0;F=(F=F+D+v(z=z+x|0,x)|0)+P+v(z=z+B|0,B)|0,t[N]=F,t[N+1]=z}for(var j=0;j<160;j+=2){F=t[j],z=t[j+1];var q=d(n,r,o),H=d(_,S,E),W=u(n,_),Y=u(_,n),G=f(l,T),V=f(T,l),Z=a[j],K=a[j+1],X=c(l,s,b),J=c(T,A,O),$=w+V|0,Q=y+G+v($,w)|0;Q=(Q=(Q=Q+X+v($=$+J|0,J)|0)+Z+v($=$+K|0,K)|0)+F+v($=$+z|0,z)|0;var ee=Y+H|0,te=W+q+v(ee,Y)|0;y=b,w=O,b=s,O=A,s=l,A=T,l=i+Q+v(T=C+$|0,C)|0,i=o,C=E,o=r,E=S,r=n,S=_,n=Q+te+v(_=$+ee|0,$)|0}this._al=this._al+_|0,this._bl=this._bl+S|0,this._cl=this._cl+E|0,this._dl=this._dl+C|0,this._el=this._el+T|0,this._fl=this._fl+A|0,this._gl=this._gl+O|0,this._hl=this._hl+w|0,this._ah=this._ah+n+v(this._al,_)|0,this._bh=this._bh+r+v(this._bl,S)|0,this._ch=this._ch+o+v(this._cl,E)|0,this._dh=this._dh+i+v(this._dl,C)|0,this._eh=this._eh+l+v(this._el,T)|0,this._fh=this._fh+s+v(this._fl,A)|0,this._gh=this._gh+b+v(this._gl,O)|0,this._hh=this._hh+y+v(this._hl,w)|0},s.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=s},function(e,t,n){"use strict";var r=n(4),o=n(423),i=n(42),a=n(5).Buffer,l=n(184),s=n(127),c=n(128),d=a.alloc(128);function u(e,t){i.call(this,"digest"),"string"==typeof t&&(t=a.from(t));var n="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>n)?t=("rmd160"===e?new s:c(e)).update(t).digest():t.length<n&&(t=a.concat([t,d],n));for(var r=this._ipad=a.allocUnsafe(n),o=this._opad=a.allocUnsafe(n),l=0;l<n;l++)r[l]=54^t[l],o[l]=92^t[l];this._hash="rmd160"===e?new s:c(e),this._hash.update(r)}r(u,i),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new s:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new u("rmd160",t):"md5"===e?new o(l,t):new u(e,t)}},function(e,t,n){var r=n(121);e.exports=function(e){return(new r).update(e).digest()}},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,n){t.pbkdf2=n(425),t.pbkdf2Sync=n(189)},function(e,t,n){(function(t){var n=Math.pow(2,30)-1;function r(e,n){if("string"!=typeof e&&!t.isBuffer(e))throw new TypeError(n+" must be a buffer or string")}e.exports=function(e,t,o,i){if(r(e,"Password"),r(t,"Salt"),"number"!=typeof o)throw new TypeError("Iterations not a number");if(o<0)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(i<0||i>n||i!=i)throw new TypeError("Bad key length")}}).call(this,n(16).Buffer)},function(e,t,n){(function(t){var n;t.browser?n="utf-8":n=parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";e.exports=n}).call(this,n(41))},function(e,t,n){var r=n(184),o=n(127),i=n(128),a=n(187),l=n(188),s=n(5).Buffer,c=s.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function u(e,t,n){var a=function(e){function t(t){return i(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?function(e){return(new o).update(e).digest()}:"md5"===e?r:t}(e),l="sha512"===e||"sha384"===e?128:64;t.length>l?t=a(t):t.length<l&&(t=s.concat([t,c],l));for(var u=s.allocUnsafe(l+d[e]),f=s.allocUnsafe(l+d[e]),h=0;h<l;h++)u[h]=54^t[h],f[h]=92^t[h];var p=s.allocUnsafe(l+n+4);u.copy(p,0,0,l),this.ipad1=p,this.ipad2=u,this.opad=f,this.alg=e,this.blocksize=l,this.hash=a,this.size=d[e]}u.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,n,r,o){a(e,t,n,r),s.isBuffer(e)||(e=s.from(e,l)),s.isBuffer(t)||(t=s.from(t,l));var i=new u(o=o||"sha1",e,t.length),c=s.allocUnsafe(r),f=s.allocUnsafe(t.length+4);t.copy(f,0,0,t.length);for(var h=0,p=d[o],m=Math.ceil(r/p),g=1;g<=m;g++){f.writeUInt32BE(g,t.length);for(var v=i.run(f,i.ipad1),b=v,y=1;y<n;y++){b=i.run(b,i.ipad2);for(var _=0;_<p;_++)v[_]^=b[_]}v.copy(c,h),h+=p}return c}},function(e,t,n){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},t.ip=function(e,t,n,r){for(var o=0,i=0,a=6;a>=0;a-=2){for(var l=0;l<=24;l+=8)o<<=1,o|=t>>>l+a&1;for(l=0;l<=24;l+=8)o<<=1,o|=e>>>l+a&1}for(a=6;a>=0;a-=2){for(l=1;l<=25;l+=8)i<<=1,i|=t>>>l+a&1;for(l=1;l<=25;l+=8)i<<=1,i|=e>>>l+a&1}n[r+0]=o>>>0,n[r+1]=i>>>0},t.rip=function(e,t,n,r){for(var o=0,i=0,a=0;a<4;a++)for(var l=24;l>=0;l-=8)o<<=1,o|=t>>>l+a&1,o<<=1,o|=e>>>l+a&1;for(a=4;a<8;a++)for(l=24;l>=0;l-=8)i<<=1,i|=t>>>l+a&1,i<<=1,i|=e>>>l+a&1;n[r+0]=o>>>0,n[r+1]=i>>>0},t.pc1=function(e,t,n,r){for(var o=0,i=0,a=7;a>=5;a--){for(var l=0;l<=24;l+=8)o<<=1,o|=t>>l+a&1;for(l=0;l<=24;l+=8)o<<=1,o|=e>>l+a&1}for(l=0;l<=24;l+=8)o<<=1,o|=t>>l+a&1;for(a=1;a<=3;a++){for(l=0;l<=24;l+=8)i<<=1,i|=t>>l+a&1;for(l=0;l<=24;l+=8)i<<=1,i|=e>>l+a&1}for(l=0;l<=24;l+=8)i<<=1,i|=e>>l+a&1;n[r+0]=o>>>0,n[r+1]=i>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,n,o){for(var i=0,a=0,l=r.length>>>1,s=0;s<l;s++)i<<=1,i|=e>>>r[s]&1;for(s=l;s<r.length;s++)a<<=1,a|=t>>>r[s]&1;n[o+0]=i>>>0,n[o+1]=a>>>0},t.expand=function(e,t,n){var r=0,o=0;r=(1&e)<<5|e>>>27;for(var i=23;i>=15;i-=4)r<<=6,r|=e>>>i&63;for(i=11;i>=3;i-=4)o|=e>>>i&63,o<<=6;o|=(31&e)<<1|e>>>31,t[n+0]=r>>>0,t[n+1]=o>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var n=0,r=0;r<4;r++){n<<=4,n|=o[64*r+(e>>>18-6*r&63)]}for(r=0;r<4;r++){n<<=4,n|=o[256+64*r+(t>>>18-6*r&63)]}return n>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,n=0;n<i.length;n++)t<<=1,t|=e>>>i[n]&1;return t>>>0},t.padSplit=function(e,t,n){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var o=[],i=0;i<t;i+=n)o.push(r.slice(i,i+n));return o.join(" ")}},function(e,t,n){"use strict";var r=n(23),o=n(4),i=n(190),a=n(129);function l(){this.tmp=new Array(2),this.keys=null}function s(e){a.call(this,e);var t=new l;this._desState=t,this.deriveKeys(t,e.key)}o(s,a),e.exports=s,s.create=function(e){return new s(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];s.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var n=i.readUInt32BE(t,0),o=i.readUInt32BE(t,4);i.pc1(n,o,e.tmp,0),n=e.tmp[0],o=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var l=c[a>>>1];n=i.r28shl(n,l),o=i.r28shl(o,l),i.pc2(n,o,e.keys,a)}},s.prototype._update=function(e,t,n,r){var o=this._desState,a=i.readUInt32BE(e,t),l=i.readUInt32BE(e,t+4);i.ip(a,l,o.tmp,0),a=o.tmp[0],l=o.tmp[1],"encrypt"===this.type?this._encrypt(o,a,l,o.tmp,0):this._decrypt(o,a,l,o.tmp,0),a=o.tmp[0],l=o.tmp[1],i.writeUInt32BE(n,a,r),i.writeUInt32BE(n,l,r+4)},s.prototype._pad=function(e,t){for(var n=e.length-t,r=t;r<e.length;r++)e[r]=n;return!0},s.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)r.equal(e[n],t);return e.slice(0,e.length-t)},s.prototype._encrypt=function(e,t,n,r,o){for(var a=t,l=n,s=0;s<e.keys.length;s+=2){var c=e.keys[s],d=e.keys[s+1];i.expand(l,e.tmp,0),c^=e.tmp[0],d^=e.tmp[1];var u=i.substitute(c,d),f=l;l=(a^i.permute(u))>>>0,a=f}i.rip(l,a,r,o)},s.prototype._decrypt=function(e,t,n,r,o){for(var a=n,l=t,s=e.keys.length-2;s>=0;s-=2){var c=e.keys[s],d=e.keys[s+1];i.expand(a,e.tmp,0),c^=e.tmp[0],d^=e.tmp[1];var u=i.substitute(c,d),f=a;a=(l^i.permute(u))>>>0,l=f}i.rip(a,l,r,o)}},function(e,t,n){var r=n(70),o=n(5).Buffer,i=n(193);function a(e){var t=e._cipher.encryptBlockRaw(e._prev);return i(e._prev),t}t.encrypt=function(e,t){var n=Math.ceil(t.length/16),i=e._cache.length;e._cache=o.concat([e._cache,o.allocUnsafe(16*n)]);for(var l=0;l<n;l++){var s=a(e),c=i+16*l;e._cache.writeUInt32BE(s[0],c+0),e._cache.writeUInt32BE(s[1],c+4),e._cache.writeUInt32BE(s[2],c+8),e._cache.writeUInt32BE(s[3],c+12)}var d=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,d)}},function(e,t){e.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,n){var r=n(87),o=n(5).Buffer,i=n(42),a=n(4),l=n(438),s=n(70),c=n(193);function d(e,t,n,a){i.call(this);var s=o.alloc(4,0);this._cipher=new r.AES(t);var d=this._cipher.encryptBlock(s);this._ghash=new l(d),n=function(e,t,n){if(12===t.length)return e._finID=o.concat([t,o.from([0,0,0,1])]),o.concat([t,o.from([0,0,0,2])]);var r=new l(n),i=t.length,a=i%16;r.update(t),a&&(a=16-a,r.update(o.alloc(a,0))),r.update(o.alloc(8,0));var s=8*i,d=o.alloc(8);d.writeUIntBE(s,0,8),r.update(d),e._finID=r.state;var u=o.from(e._finID);return c(u),u}(this,n,d),this._prev=o.from(n),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}a(d,i),d.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=o.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=s(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var r=Math.min(e.length,t.length),o=0;o<r;++o)n+=e[o]^t[o];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},d.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=d},function(e,t,n){var r=n(87),o=n(5).Buffer,i=n(42);function a(e,t,n,a){i.call(this),this._cipher=new r.AES(t),this._prev=o.from(n),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=a,this._mode=e}n(4)(a,i),a.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},e.exports=a},function(e,t,n){var r=n(61);e.exports=b,b.simpleSieve=g,b.fermatTest=v;var o=n(13),i=new o(24),a=new(n(198)),l=new o(1),s=new o(2),c=new o(5),d=(new o(16),new o(8),new o(10)),u=new o(3),f=(new o(7),new o(11)),h=new o(4),p=(new o(12),null);function m(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),o=0;o<t&&e[o]<=r&&n%e[o]!=0;o++);t!==o&&e[o]<=r||(e[t++]=n)}return p=e,e}function g(e){for(var t=m(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function v(e){var t=o.mont(e);return 0===s.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function b(e,t){if(e<16)return new o(2===t||5===t?[140,123]:[140,39]);var n,p;for(t=new o(t);;){for(n=new o(r(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(l),n.testn(1)||n.iadd(s),t.cmp(s)){if(!t.cmp(c))for(;n.mod(d).cmp(u);)n.iadd(h)}else for(;n.mod(i).cmp(f);)n.iadd(h);if(g(p=n.shrn(1))&&g(n)&&v(p)&&v(n)&&a.test(p)&&a.test(n))return n}}},function(e,t,n){var r=n(13),o=n(132);function i(e){this.rand=e||new o.Rand}e.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var o=new r(this.rand.generate(n))}while(o.cmp(e)>=0);return o},i.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},i.prototype.test=function(e,t,n){var o=e.bitLength(),i=r.mont(e),a=new r(1).toRed(i);t||(t=Math.max(1,o/48|0));for(var l=e.subn(1),s=0;!l.testn(s);s++);for(var c=e.shrn(s),d=l.toRed(i);t>0;t--){var u=this._randrange(new r(2),l);n&&n(u);var f=u.toRed(i).redPow(c);if(0!==f.cmp(a)&&0!==f.cmp(d)){for(var h=1;h<s;h++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(d))break}if(h===s)return!1}}return!0},i.prototype.getDivisor=function(e,t){var n=e.bitLength(),o=r.mont(e),i=new r(1).toRed(o);t||(t=Math.max(1,n/48|0));for(var a=e.subn(1),l=0;!a.testn(l);l++);for(var s=e.shrn(l),c=a.toRed(o);t>0;t--){var d=this._randrange(new r(2),a),u=e.gcd(d);if(0!==u.cmpn(1))return u;var f=d.toRed(o).redPow(s);if(0!==f.cmp(i)&&0!==f.cmp(c)){for(var h=1;h<l;h++){if(0===(f=f.redSqr()).cmp(i))return f.fromRed().subn(1).gcd(e);if(0===f.cmp(c))break}if(h===l)return(f=f.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,n){"use strict";var r=t;function o(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",n=0;n<e.length;n++)t+=o(e[n].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var o=e.charCodeAt(r),i=o>>8,a=255&o;i?n.push(i,a):n.push(a)}return n},r.zero2=o,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},function(e,t,n){"use strict";var r=t;r.base=n(89),r.short=n(449),r.mont=n(450),r.edwards=n(451)},function(e,t,n){"use strict";var r=n(33).rotr32;function o(e,t,n){return e&t^~e&n}function i(e,t,n){return e&t^e&n^t&n}function a(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?o(t,n,r):1===e||3===e?a(t,n,r):2===e?i(t,n,r):void 0},t.ch32=o,t.maj32=i,t.p32=a,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},function(e,t,n){"use strict";var r=n(33),o=n(71),i=n(201),a=n(23),l=r.sum32,s=r.sum32_4,c=r.sum32_5,d=i.ch32,u=i.maj32,f=i.s0_256,h=i.s1_256,p=i.g0_256,m=i.g1_256,g=o.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(b,g),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=s(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var o=this.h[0],i=this.h[1],g=this.h[2],v=this.h[3],b=this.h[4],y=this.h[5],_=this.h[6],S=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var E=c(S,h(b),d(b,y,_),this.k[r],n[r]),C=l(f(o),u(o,i,g));S=_,_=y,y=b,b=l(v,E),v=g,g=i,i=o,o=l(E,C)}this.h[0]=l(this.h[0],o),this.h[1]=l(this.h[1],i),this.h[2]=l(this.h[2],g),this.h[3]=l(this.h[3],v),this.h[4]=l(this.h[4],b),this.h[5]=l(this.h[5],y),this.h[6]=l(this.h[6],_),this.h[7]=l(this.h[7],S)},b.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(33),o=n(71),i=n(23),a=r.rotr64_hi,l=r.rotr64_lo,s=r.shr64_hi,c=r.shr64_lo,d=r.sum64,u=r.sum64_hi,f=r.sum64_lo,h=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,v=o.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function _(e,t,n,r,o){var i=e&n^~e&o;return i<0&&(i+=4294967296),i}function S(e,t,n,r,o,i){var a=t&r^~t&i;return a<0&&(a+=4294967296),a}function E(e,t,n,r,o){var i=e&n^e&o^n&o;return i<0&&(i+=4294967296),i}function C(e,t,n,r,o,i){var a=t&r^t&i^r&i;return a<0&&(a+=4294967296),a}function T(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function A(e,t){var n=l(e,t,28)^l(t,e,2)^l(t,e,7);return n<0&&(n+=4294967296),n}function O(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function w(e,t){var n=l(e,t,14)^l(e,t,18)^l(t,e,9);return n<0&&(n+=4294967296),n}function N(e,t){var n=a(e,t,1)^a(e,t,8)^s(e,t,7);return n<0&&(n+=4294967296),n}function L(e,t){var n=l(e,t,1)^l(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function I(e,t){var n=a(e,t,19)^a(t,e,29)^s(e,t,6);return n<0&&(n+=4294967296),n}function U(e,t){var n=l(e,t,19)^l(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(y,v),e.exports=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var o=I(n[r-4],n[r-3]),i=U(n[r-4],n[r-3]),a=n[r-14],l=n[r-13],s=N(n[r-30],n[r-29]),c=L(n[r-30],n[r-29]),d=n[r-32],u=n[r-31];n[r]=h(o,i,a,l,s,c,d,u),n[r+1]=p(o,i,a,l,s,c,d,u)}},y.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],s=this.h[4],c=this.h[5],h=this.h[6],p=this.h[7],v=this.h[8],b=this.h[9],y=this.h[10],N=this.h[11],L=this.h[12],I=this.h[13],U=this.h[14],M=this.h[15];i(this.k.length===n.length);for(var D=0;D<n.length;D+=2){var x=U,R=M,k=O(v,b),P=w(v,b),B=_(v,b,y,N,L),z=S(v,b,y,N,L,I),F=this.k[D],j=this.k[D+1],q=n[D],H=n[D+1],W=m(x,R,k,P,B,z,F,j,q,H),Y=g(x,R,k,P,B,z,F,j,q,H);x=T(r,o),R=A(r,o),k=E(r,o,a,l,s),P=C(r,o,a,l,s,c);var G=u(x,R,k,P),V=f(x,R,k,P);U=L,M=I,L=y,I=N,y=v,N=b,v=u(h,p,W,Y),b=f(p,p,W,Y),h=s,p=c,s=a,c=l,a=r,l=o,r=u(W,Y,G,V),o=f(W,Y,G,V)}d(this.h,0,r,o),d(this.h,2,a,l),d(this.h,4,s,c),d(this.h,6,h,p),d(this.h,8,v,b),d(this.h,10,y,N),d(this.h,12,L,I),d(this.h,14,U,M)},y.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(4),i=n(73).Reporter,a=n(16).Buffer;function l(e,t){i.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function s(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return e instanceof s||(e=new s(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+r(e));this.value=e,this.length=e.length}}o(l,i),t.DecoderBuffer=l,l.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},l.prototype.restore=function(e){var t=new l(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},l.prototype.isEmpty=function(){return this.offset===this.length},l.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},l.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var n=new l(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},l.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=s,s.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},function(e,t,n){var r=t;r._reverse=function(e){var t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);var r=e[n];t[r]=n})),t},r.der=n(471)},function(e,t,n){var r=n(4),o=n(72),i=o.base,a=o.bignum,l=o.constants.der;function s(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){i.Node.call(this,"der",e)}function d(e,t){var n=e.readUInt8(t);if(e.isError(n))return n;var r=l.tagClass[n>>6],o=0==(32&n);if(31==(31&n)){var i=n;for(n=0;128==(128&i);){if(i=e.readUInt8(t),e.isError(i))return i;n<<=7,n|=127&i}}else n&=31;return{cls:r,primitive:o,tag:n,tagStr:l.tag[n]}}function u(e,t,n){var r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;var o=127&r;if(o>4)return e.error("length octect is too long");r=0;for(var i=0;i<o;i++){r<<=8;var a=e.readUInt8(n);if(e.isError(a))return a;r|=a}return r}e.exports=s,s.prototype.decode=function(e,t){return e instanceof i.DecoderBuffer||(e=new i.DecoderBuffer(e,t)),this.tree._decode(e,t)},r(c,i.Node),c.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;var r=e.save(),o=d(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(r),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)},c.prototype._decodeTag=function(e,t,n){var r=d(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;var o=u(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==o)return e.skip(o,'Failed to match body of: "'+t+'"');var i=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(o=e.offset-i.offset,e.restore(i),e.skip(o,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){var n=d(e,t);if(e.isError(n))return n;var r,o=u(e,n.primitive,t);if(e.isError(o))return o;if(r=n.primitive||null!==o?e.skip(o):this._skipUntilEnd(e,t),e.isError(r))return r;if("end"===n.tagStr)break}},c.prototype._decodeList=function(e,t,n,r){for(var o=[];!e.isEmpty();){var i=this._peekTag(e,"end");if(e.isError(i))return i;var a=n.decode(e,"der",r);if(e.isError(a)&&i)break;o.push(a)}return o},c.prototype._decodeStr=function(e,t){if("bitstr"===t){var n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}if("bmpstr"===t){var r=e.raw();if(r.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var o="",i=0;i<r.length/2;i++)o+=String.fromCharCode(r.readUInt16BE(2*i));return o}if("numstr"===t){var a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var l=e.raw().toString("ascii");return this._isPrintstr(l)?l:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,n){for(var r,o=[],i=0;!e.isEmpty();){var a=e.readUInt8();i<<=7,i|=127&a,0==(128&a)&&(o.push(i),i=0)}128&a&&o.push(i);var l=o[0]/40|0,s=o[0]%40;if(r=n?o:[l,s].concat(o.slice(1)),t){var c=t[r.join(" ")];void 0===c&&(c=t[r.join(".")]),void 0!==c&&(r=c)}return r},c.prototype._decodeTime=function(e,t){var n=e.raw().toString();if("gentime"===t)var r=0|n.slice(0,4),o=0|n.slice(4,6),i=0|n.slice(6,8),a=0|n.slice(8,10),l=0|n.slice(10,12),s=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|n.slice(0,2),o=0|n.slice(2,4),i=0|n.slice(4,6),a=0|n.slice(6,8),l=0|n.slice(8,10),s=0|n.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,o-1,i,a,l,s,0)},c.prototype._decodeNull=function(e){return null},c.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){var n=e.raw(),r=new a(n);return t&&(r=t[r.toString(10)]||r),r},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e,t,n){var r=n(4),o=n(16).Buffer,i=n(72),a=i.base,l=i.constants.der;function s(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){a.Node.call(this,"der",e)}function d(e){return e<10?"0"+e:e}e.exports=s,s.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(c,a.Node),c.prototype._encodeComposite=function(e,t,n,r){var i,a=function(e,t,n,r){var o;"seqof"===e?e="seq":"setof"===e&&(e="set");if(l.tagByName.hasOwnProperty(e))o=l.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);o=e}if(o>=31)return r.error("Multi-octet tag encoding unsupported");t||(o|=32);return o|=l.tagClassByName[n||"universal"]<<6}(e,t,n,this.reporter);if(r.length<128)return(i=new o(2))[0]=a,i[1]=r.length,this._createEncoderBuffer([i,r]);for(var s=1,c=r.length;c>=256;c>>=8)s++;(i=new o(2+s))[0]=a,i[1]=128|s;c=1+s;for(var d=r.length;d>0;c--,d>>=8)i[c]=255&d;return this._createEncoderBuffer([i,r])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var n=new o(2*e.length),r=0;r<e.length;r++)n.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(n)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var r=0;r<e.length;r++)e[r]|=0}else if(Array.isArray(e)){e=e.slice();for(r=0;r<e.length;r++)e[r]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var i=0;for(r=0;r<e.length;r++){var a=e[r];for(i++;a>=128;a>>=7)i++}var l=new o(i),s=l.length-1;for(r=e.length-1;r>=0;r--){a=e[r];for(l[s--]=127&a;(a>>=7)>0;)l[s--]=128|127&a}return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(e,t){var n,r=new Date(e);return"gentime"===t?n=[d(r.getFullYear()),d(r.getUTCMonth()+1),d(r.getUTCDate()),d(r.getUTCHours()),d(r.getUTCMinutes()),d(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[d(r.getFullYear()%100),d(r.getUTCMonth()+1),d(r.getUTCDate()),d(r.getUTCHours()),d(r.getUTCMinutes()),d(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!o.isBuffer(e)){var n=e.toArray();!e.sign&&128&n[0]&&n.unshift(0),e=new o(n)}if(o.isBuffer(e)){var r=e.length;0===e.length&&r++;var i=new o(r);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);r=1;for(var a=e;a>=256;a>>=8)r++;for(a=(i=new Array(r)).length-1;a>=0;a--)i[a]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new o(i))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,n){var r,o=this._baseState;if(null===o.default)return!1;var i=e.join();if(void 0===o.defaultBuffer&&(o.defaultBuffer=this._encodeValue(o.default,t,n).join()),i.length!==o.defaultBuffer.length)return!1;for(r=0;r<i.length;r++)if(i[r]!==o.defaultBuffer[r])return!1;return!0}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,n){var r=n(68),o=n(5).Buffer;function i(e){var t=o.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var n,a=o.alloc(0),l=0;a.length<t;)n=i(l++),a=o.concat([a,r("sha1").update(e).update(n).digest()]);return a.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var n=e.length,r=-1;++r<n;)e[r]^=t[r];return e}},function(e,t,n){var r=n(13),o=n(5).Buffer;e.exports=function(e,t){return o.from(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}},function(e,t,n){var r=n(138).FilterCSS,o=n(138).getDefaultWhiteList,i=n(139);function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var l=new r;function s(e){return e.replace(c,"&lt;").replace(d,"&gt;")}var c=/</g,d=/>/g,u=/"/g,f=/&quot;/g,h=/&#([a-zA-Z0-9]*);?/gim,p=/&colon;?/gim,m=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,v=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,b=/u\s*r\s*l\s*\(.*/gi;function y(e){return e.replace(u,"&quot;")}function _(e){return e.replace(f,'"')}function S(e){return e.replace(h,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function E(e){return e.replace(p,":").replace(m," ")}function C(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return i.trim(t)}function T(e){return e=C(e=E(e=S(e=_(e))))}function A(e){return e=s(e=y(e))}var O=/<!--[\s\S]*?-->/g;t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},t.getDefaultWhiteList=a,t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=T(n),"href"===t||"src"===t){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(g.lastIndex=0,g.test(n))return""}else if("style"===t){if(v.lastIndex=0,v.test(n))return"";if(b.lastIndex=0,b.test(n)&&(g.lastIndex=0,g.test(n)))return"";!1!==r&&(n=(r=r||l).process(n))}return n=A(n)},t.escapeHtml=s,t.escapeQuote=y,t.unescapeQuote=_,t.escapeHtmlEntities=S,t.escapeDangerHtml5Entities=E,t.clearNonPrintableCharacter=C,t.friendlyAttrValue=T,t.escapeAttrValue=A,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(a,l,s){if(function(t){return!!n||-1!==i.indexOf(e,t)}(a)){if(s.isClosing){var c="[/removed]",d=s.position+c.length;return r.push([!1!==o?o:s.position,d]),o=!1,c}return o||(o=s.position),"[removed]"}return t(a,l,s)},remove:function(e){var t="",n=0;return i.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){return e.replace(O,"")},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=l,t.getDefaultCSSWhiteList=o},function(e,t){function n(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var r=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},function(e,t,n){var r=n(139);function o(e){var t=r.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=r.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function i(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function l(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function s(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function c(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){var r="",a=0,l=!1,s=!1,c=0,d=e.length,u="",f="";for(c=0;c<d;c++){var h=e.charAt(c);if(!1===l){if("<"===h){l=c;continue}}else if(!1===s){if("<"===h){r+=n(e.slice(a,c)),l=c,a=c;continue}if(">"===h){r+=n(e.slice(a,l)),u=o(f=e.slice(l,c+1)),r+=t(l,r.length,u,f,i(f)),a=c+1,l=!1;continue}if(('"'===h||"'"===h)&&"="===e.charAt(c-1)){s=h;continue}}else if(h===s){s=!1;continue}}return a<e.length&&(r+=n(e.substr(a))),r},t.parseAttr=function(e,t){var n=0,o=[],i=!1,d=e.length;function u(e,n){if(!((e=(e=r.trim(e)).replace(a,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&o.push(i)}}for(var f=0;f<d;f++){var h,p=e.charAt(f);if(!1!==i||"="!==p)if(!1===i||f!==n||'"'!==p&&"'"!==p||"="!==e.charAt(f-1))if(/\s|\n|\t/.test(p)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(h=l(e,f))){u(r.trim(e.slice(n,f))),i=!1,n=f+1;continue}f=h-1;continue}if(-1===(h=s(e,f-1))){u(i,c(r.trim(e.slice(n,f)))),i=!1,n=f+1;continue}}else;else{if(-1===(h=e.indexOf(p,f+1)))break;u(i,r.trim(e.slice(n+1,h))),i=!1,n=(f=h)+1}else i=e.slice(n,f),n=f+1}return n<e.length&&(!1===i?u(e.slice(n)):u(i,c(r.trim(e.slice(n))))),r.trim(o.join(" "))}},function(e,t,n){var r=n(3),o={appendJsCode:function(e,t,n){var o=e.createElement("script");o.type=n,o.text=t,r.dom.insertToHead(o,e)},load:function(e,t,n){if(e&&t){var i,c,d,u,f=(new Date).valueOf(),h=!0;for(i=0,c=t.length;i<c;i++)if("string"==typeof t[i]){if(!0!==(d=this.loadSingleJs(e,t[i]))){var p=a(f,n);d.onload=p,d.onerror=p,h=!1}}else{var m=t[i].link,g=l(t[i].id),v=t[i].version;if(window.localStorage){var b=JSON.parse(r.storage.get(g));b&&b.version===v?!0!==(d=this.inject(e,b.jsStr,g))&&(u=a(f,n),setTimeout((function(){u()}),10),h=!1):(h=!1,u=a(f,n),$.ajax({url:m,context:{id:g,version:v},success:function(t){s({id:this.id,version:this.version,jsStr:t}),!0!==(d=o.inject(e,t,this.id))&&setTimeout((function(){u()}),10)},error:function(){u()}}))}else if(!0!==(d=this.loadSingleJs(e,t[i].link))){var y=a(f,n);d.onload=y,d.onerror=y,h=!1}}h&&n()}},loadSingleJs:function(e,t){var n="wiz_"+t;if(e.getElementById(n))return!0;var o=e.createElement("script");return o.type="text/javascript",o.setAttribute("charset","utf-8"),o.src=t.replace(/\\/g,"/"),o.id=n,r.dom.insertToHead(o,e),o},inject:function(e,t,n){if(!e||e.getElementById(n))return!0;var o=e.createElement("script");return o.type="text/javascript",o.id=n,o.text=t,r.dom.insertToHead(o,e),o}},i={};function a(e,t){return i[e]||(i[e]=0),i[e]++,function(n){n&&"error"===n.type&&n.target.parentNode.removeChild(n.target),i[e]--,0===i[e]&&(i[e]=null,t&&t())}}function l(e){return"wiz_js_"+e}function s(e){if(e){var t={version:e.version,jsStr:e.jsStr};r.storage.set(e.id,JSON.stringify(t))}}e.exports=o},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(1),i=n(3),a=n(529),l=n(530),s=n(25),c=n(43),d=n(137),u=(n(3).dom,new c);e.exports=function(e){var t=this;e=e||{};var n,c,f,h,p=null,m=null,g=null,v=null,b=null;this.initCore=function(n){m=(p=n).env,g=p.require.codeCore,v=p.require.codeUtils,b=p.require.domUtils;var r=p.require.MathJaxRender;r&&(y=new r(e)).initCore(p),t.init()};var y,_=!1,S="",E=!1,C=function(e){var t=function(){m.options.reader.callback.markdown&&m.options.reader.callback.markdown(),_&&y?y.do({container:f},e):e()};s.loadCss(c,s.getDependencyFiles(m.dependency,"css","markdown"),(function(){T.markdownConvert(),n.prettyPrint&&n.prettyPrint(),T.tocRender(),T.flowRender(),T.sequenceRender(),g?g.on({body:f,readOnly:!0},t):t()}))},T={getBodyTxt:function(e){!function(){var e=c.createElement("span");e.innerHTML="<math>a</math>",e.style.opacity="0",f.appendChild(e);var t=e.innerText;if(b.remove(e),!t)for(var n,r,o,i=c.getElementsByTagName("math");i.length>0;)r=(n=i[0]).parentNode,(o=c.createElement("span")).innerText=n.textContent,r.insertBefore(o,n),r.removeChild(n)}();var t=b.getInnerText(e);return t=(t=(t=t.replace(String.fromCharCode(65279),"")).replace(o.SPACE_CHAR_REG," ")).replace(/(\[[^[\]]*]\()<a [^<>]*>(((?!<\/a>).)*)<\/a>/gim,(function(e,t,n,r){return n.indexOf("<img")>-1?e:t+n}))},markdownConvert:function(){var e,r,i,s,c,d,u=/(\$\$?|\\(?:begin|end){[a-z]*\*?}|\\[\\{}$]|[{}]|(?:\n\s*)+|@@\d+@@)/i,h=!1,p=n.$(f);p.addClass(o.CLASS.MARKDOWN_BODY);var g=new a.Converter({nonAsciiLetters:!0,asteriskIntraWordEmphasis:!0,imgSrcFilter:function(e){return m.options.reader.markdownPlugIn.imgSrcFilter?m.options.reader.markdownPlugIn.imgSrcFilter(e):e},customBlockGamut:function(e){return m.options.reader.markdownPlugIn.customBlockGamut?m.options.reader.markdownPlugIn.customBlockGamut(e):e}}),v=function(t,n){var o=s.slice(t,n+1).join("");if(!o.match(/`/i)){for(o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");n>t;)s[n]="",n--;s[t]="@@"+c.length+"@@",c.push(o)}e=r=i=null};try{var b;E?b=S:(S=f.innerHTML,b=t.getMarkdownSrc(f)),b=T.tocReady(b);var y=b.match(/^```/gm);y=y?y.length/2:0,l.init(g,{extensions:"all",highlighter:y>50?"prettify":"codeMirror"});var C=b.replace(/\n/g,"\\n").replace(/\r\n?/g,"\n").replace(/```(.*\n)+?```/gm,"");(_=/(\$\$?)[^$\n]+\1/.test(C))&&(b=function(t){var n;e=r=i=null,c=[];for(var o=1,a=(s=t.replace(/\r\n?/g,"\n").split(u)).length;o<a;o+=2)n=s[o],h&&n.match(/[\n`]/)?e=r=i=null:"@"===n.charAt(0)?(s[o]="@@"+c.length+"@@",c.push(n)):e?n===r?d?i=o:v(e,o):n.match(/\n.*\n/)?(i&&v(e,o=i),e=r=i=null,d=0):"{"===n?d++:"}"===n&&d&&d--:/^\$\$?$/.test(n)?(h=n.length<2,e=o,r=n,d=0):"begin"===n.substr(1,5)&&(e=o,r="\\end"+n.substr(6),d=0);return i&&v(e,i),s.join("")}(b)),b=b.replace(/\\\\/,"\\\\\\\\");var A=g.makeHtml(b);A=A.replace(/<(td|th)><\/\1>/gi,"<$1><br></$1>");A=A.replace(/(<br\/?>)((\n<br\/?>)+)/gi,(function(e,t,n,r){return t+(n=n.replace(/<br\/?>/g,"<span><br></span>"))})),A=T.tocFixForCode(A),_&&(A=function(e){return e=e.replace(/@@(\d+)@@/g,(function(e,t){return c[t]})),c=null,e}(A)),m.options.reader.callback.beforeMarkdownRender&&(A=m.options.reader.callback.beforeMarkdownRender(A)),A=T.xssFilter(A),p[0].innerHTML=A}catch(e){console.error(e)}},markdownPreProcess:function(e){i.forEach(e.querySelectorAll("."+o.CLASS.TABLE_CONTAINER),(function(e){if(b.isVisible(e)){var t=c.createElement("span");t.appendChild(c.createTextNode(e.outerHTML)),e.parentNode.insertBefore(t,e),e.parentNode.insertBefore(c.createElement("br"),e),e.parentNode.removeChild(e)}})),i.forEach(e.querySelectorAll("label."+o.CLASS.TODO_LABEL_OLD),(function(e){if(b.isVisible(e)&&e.querySelector("."+o.CLASS.TODO_CHECK_IMG_OLD)){var t=c.createElement("span");t.appendChild(c.createTextNode(e.outerHTML)),e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})),i.forEach(e.querySelectorAll("."+o.CLASS.TODO_LAYER),(function(e){if(b.isVisible(e)&&e.querySelector("."+o.CLASS.TODO_CHECKBOX)){var t=c.createElement("span");t.appendChild(c.createTextNode(e.outerHTML)),e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})),i.forEach(e.querySelectorAll("a"),(function(e){if(b.isVisible(e)){var t=e.getAttribute("href");if(i.isCommonProtocol(t)){var n=c.createElement("span");n.appendChild(c.createTextNode(e.outerHTML)),e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e)}}})),i.forEach(e.querySelectorAll("img"),(function(e){if(b.isVisible(e)){var t=c.createElement("span");t.appendChild(c.createTextNode(e.outerHTML)),e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})),i.forEach(e.querySelectorAll("p"),(function(e){if(b.isVisible(e)){var t=c.createElement("div");for(e.parentNode.insertBefore(t,e);e.firstChild;)t.appendChild(e.firstChild);e.parentNode.removeChild(e)}}))},tocReady:function(e){return e.replace(/(^[ ]*)(\[toc])([ ]*(\n|$))/gim,"$1$2(#wizToc)$3")},tocFixForCode:function(e){var t=new RegExp("(\\[toc])\\(".concat("#wizToc","\\)"),"ig");return e=e.replace(/<textarea [^>]*>(.|\r?\n)*<\/textarea>/gi,(function(e){return e.replace(t,"$1")}))},tocRender:function(){var e={},t=[],r=6;n.$("h1,h2,h3,h4,h5,h6",f).each((function(e,t){var n=parseInt(t.tagName.charAt(1),10);r=Math.min(r,n)})),n.$("h1,h2,h3,h4,h5,h6",f).each((function(o,a){var l="wiz-toc-".concat(o,"-").concat(i.getHash(""+i.math.random()));e[l]?(++e[l],l+="-"+e[l]):e[l]=1;var s=parseInt(a.tagName.charAt(1),10),c=n.$(a);c.attr("id",l),t.push('<a class="wiz_toc h'+(s-r+1)+'" href="#'+l+'">'+c.text()+"</a>")})),t='<div class="wiz_toc_layer">'+t.join("<br/>")+"</div>",n.$("a",f).each((function(e,r){"#wizToc"===(r=n.$(r)).attr("href")&&(r.before(t),r.css("display","none"))}))},flowRender:function(){n.flowchart&&n.$(".language-flow",f).parents("pre").each((function(e,t){var r="wiz-flow-"+e,o=n.$("textarea",t).val();if(o.length>0)try{t.style.display="none";var i=n.flowchart.parse(o),a=c.createElement("div");if(a.id=r,t.parentNode.insertBefore(a,t),i.drawSVG(r),m.client.type.isPhone){var l=n.$("svg",a);l.attr("width")&&l.css({"max-width":l.attr("width")}).attr({height:null,width:"95%"})}}catch(e){console.error(e)}}))},sequenceRender:function(){if(n.Diagram){var e=function(e){e.each((function(e,t){var r="wiz-sequence-"+e,o=n.$("textarea",t).val();if(o.length>0)try{t.style.display="none";var i=n.Diagram.parse(o),a=c.createElement("div");if(a.id=r,t.parentNode.insertBefore(a,t),i.drawSVG(r,{theme:"simple"}),m.client.type.isPhone){var l=n.$("svg",a);l.attr("width")&&(b.attr(l.get(0),{viewBox:"0 0 "+l.attr("width")+" "+l.attr("height")}),l.css({"max-width":l.attr("width")}).attr({preserveAspectRatio:"xMidYMid meet",height:null,width:"95%"}))}}catch(e){console.error(e)}}))},t=n.$(".language-sequence",f).parents("pre");e(t),e(t=n.$(".language-seq",f).parents("pre"))}},xssFilter:d.xssFilter};this.getMarkdownSrcForEditor=function(e){var n,r;v&&v.saveToText(),e=e||{},r=m.readonly?S.replace(/\n/g,"<div><br/></div>"):m.body.innerHTML;var i=m.doc.createElement("div");e.escapeHtml&&(r=r.replace(/&/g,"&amp;")),i.innerHTML=r,b.html2Markdown(i,{}),b.css(i,{opacity:0,position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px",overflow:"hidden"}),m.body.appendChild(i),v&&v.clearCodeForMarkdown(i);for(var a=i.querySelectorAll(o.TAG.TMP_TAG),l=a.length-1;l>=0;l--)b.remove(a[l]);return n=t.getMarkdownSrc(i),n=b.restoreImgPath(n),m.body.removeChild(i),i=null,n},this.getMarkdownSrc=function(e){var t=e||f;return T.markdownPreProcess(t),T.getBodyTxt(t)},this.do=function(e,t){e.container&&(f=e.container),"string"==typeof e.markdownSrc?(S=e.markdownSrc,E=!0):(S="",E=!1);!function(e){u.addCallback(c,e),u.getLoading(c)||(n.$&&n.Diagram&&n.flowchart&&n.prettyPrint?u.callback(c):(u.setLoading(c,!0),s.loadJs(c,s.getDependencyFiles(m.dependency,"js","markdown"),(function(){u.setLoading(c,!1),u.callback(c)}))))}((function(){b.addClass(f,o.CLASS.READONLY);var e=m.options.reader.timeout.markdown;t=t||h;var n=!1,i=function(){t&&/^function$/i.test(r(t))&&!n&&(t(),n=!0)};setTimeout(i,e),C((function(){i()}))}))},this.init=function(){n=e.win||m.win,c=e.doc||m.doc,f=e.container||m.body,h=e.callback,y&&y.init()}}},function(e,t,n){n(219);var r,o,i,a=n(1),l=n(37),s=n(3),c=n(91),d=n(63),u=n(137),f=n(489),h=n(490),p=n(491),m=n(492),g=n(493),v=n(494),b=n(495),y=n(496),_=n(497);r=n(498),o=n(499),i=n(500);var S,E=n(501);S=n(502);var C,T=n(503),A=n(504),O=n(505),w=n(506),N=n(507),L=n(508),I=n(509),U=n(510),M=n(511),D=n(512),x=n(513),R=n(514),k=n(515),P=n(516),B=n(517),z=n(518),F=n(519),j=n(520),q=n(521),H=n(522),W=n(523),Y=n(524),G=n(525),V=n(526),Z=n(527),K=n(528);C=n(217);var X,J=n(531),$=n(532);X=n(533);var Q,ee=n(534),te=n(535),ne=n(536),re=n(537),oe=n(538),ie=n(539);Q=n(541);var ae,le,se,ce,de=n(542),ue=n(543),fe=n(544),he=n(545),pe=n(546),me=n(547),ge=n(548),ve=n(549),be=n(550),ye=n(551),_e=n(552),Se=n(553),Ee=n(554),Ce=n(555),Te=n(556),Ae=n(557),Oe=n(558);ae=n(559),le=n(560),se=n(561),ce=n(562);var we=n(563),Ne=n(564),Le=function(e,t){for(var n=new f(e),Le={env:n,lang:new h(n.options.lang,n),require:{amend:new p,amendInfo:new m,amendUser:new g,amendUserAction:new v,amendUtils:new b,blockCore:new y,blockUtils:new _,codeCore:r?new r:null,codeStyle:o?new o:null,codeUtils:i?new i:null,commandExtend:new E,commonUtils:new O,contentCore:S?new S:null,clientBridge:new T,clipboardUtils:new A,domUtils:new w,editorBridge:new N,editorCommon:new L,editorCommonEvent:new I,editorOutline:new U,editorOutlineEvent:new M,formatPainter:new D,frameViewCore:new x,frameViewStyle:new R,frameViewUtils:new k,highlightUtils:new P,historyUtils:new B,imgClick:new z,imgCore:new F,imgMenu:new j,imgResize:new q,imgUpload:new H,imgUtils:new W,lazyLoadCore:new Y,lazyLoadUtils:new G,linkCore:new V,linkMenu:new Z,linkUtils:new K,markdownRender:C?new C:null,markerCore:new J,markerStyle:new $,MathJaxRender:X||null,mathJaxRender:X?new X:null,mediaCore:new ee,mediaStyle:new te,mediaUtils:new ne,menuPlugin:new re,minderCore:new oe,minderMenu:new ie,nightModeUtils:Q?new Q:null,outlineCore:new de,outlineStyle:new ue,outlineUtils:new fe,pasteUtils:new he,rangeCore:new pe,rangeUtils:new me,readerCommon:new ge,readerCommonEvent:new ve,readerOutline:new be,readerOutlineEvent:new ye,selectPlugin:new _e,svgClick:new Se,tabKey:new Ee,tableCore:new Ce,tableMenuList:new Te,tableUtils:new Ae,tableZone:new Oe,todoCore:ae?new ae:null,todoStyle:le?new le:null,todoUtils:se?new se:null,toolbarMarkdown:ce?new ce:null,tooltip:new we,wizStyle:new Ne}},Ie=Le.require,Ue=0,Me=Object.keys(Ie);Ue<Me.length;Ue++){var De=Me[Ue],xe=Ie[De];xe&&xe.initCore&&(xe.initCore(Le),delete xe.initCore)}var Re=[],ke=null,Pe=null,Be=null,ze=null,Fe=Ie.editorBridge,je=Ie.amend,qe=Ie.amendInfo,He=Ie.blockUtils,We=Ie.clientBridge,Ye=Ie.commandExtend,Ge=Ie.contentCore,Ve=Ie.codeCore,Ze=Ie.codeUtils,Ke=Ie.domUtils,Xe=Ie.formatPainter,Je=Ie.frameViewUtils,$e=Ie.highlightUtils,Qe=Ie.historyUtils,et=Ie.imgUtils,tt=Ie.lazyLoadUtils,nt=Ie.linkCore,rt=Ie.linkUtils,ot=Ie.markdownRender,it=Ie.markerCore,at=Ie.nightModeUtils,lt=Ie.pasteUtils,st=Ie.rangeUtils,ct=Ie.svgClick,dt=Ie.tableCore,ut=Ie.todoCore,ft=Ie.toolbarMarkdown,ht=Ie.wizStyle;!function(){var e,t,r,o,i,l=n.options.container;if(!l)return n.frame.toolbarContainer=null,void(n.frame.bodyContainer=null);(t=l.querySelector("."+a.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER))||(l.innerHTML="",Ke.addClass(l,a.CLASS.EDITOR_CONTAINER),t=n.doc.createElement("div"),e=n.doc,Ke.addClass(t,a.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER),l.appendChild(t));(r=l.querySelector("."+a.CLASS.WIZ_EIDTOR_BODY_CONTAINER))||(r=n.doc.createElement("div"),Ke.addClass(r,a.CLASS.WIZ_EIDTOR_BODY_CONTAINER),l.appendChild(r));if(n.options.useFrame){if(!(o=l.querySelector("."+a.CLASS.WIZ_EIDTOR_IFRAME))){o=n.doc.createElement("iframe"),Ke.addClass(o,a.CLASS.WIZ_EIDTOR_IFRAME),Ke.attr(o,{scrolling:"no",frameborder:"0",width:"100%",height:"100%"}),r.appendChild(o);var s=o.contentDocument;s.open(),s.write(a.EMPTY_NOTE_TEMPLATE.replace("${body}","<div><br/></div>")),s.close()}n.doc=o.contentDocument,n.win=o.contentWindow,n.body=n.doc.body,n.frame.dom=o,d.run(n.win)}else(i=r.querySelector("."+a.CLASS.WIZ_BODY))||((i=n.doc.createElement("div")).innerHTML="<div><br/></div>",r.appendChild(i)),n.body=i;Ke.attr(n.body,{spellcheck:"false"}),n.frame.toolbarDoc=e,n.frame.toolbarContainer=t,n.frame.bodyContainer=r}();var pt=function(e){if(n.readonly&&!n.options.pureReadMode.enable&&n.options.reader.type!==a.NOTE_READER_TYPE.MARKDOWN&&n.options.reader.type!==a.NOTE_READER_TYPE.MATHJAX&&n.options.reader.autoEdit){if(Fe.isOutline)if(n.body.querySelector("#".concat(l.ID.MINDER_CONTAINER)))return;if(!We.getBridge().hasPermission())return!1;var t=ut.getModifiedListFromReader(),r=Ze.lastFocusCodeForReader,o=st.getRange(),i=n.client.type.isIOS;if(r||o||i){if(!o&&i&&(e.target!==n.body&&(o=st.getEventCaretRange(e)),!o)){var s=Ke.getLast();st.setRange(s,Ke.getEndOffset(s)),o=st.getRange()}var c,d,u,f;r||(c=o.startContainer,d=o.startOffset,u=o.endContainer,f=o.endOffset),n.isAutoReaderToEditor=!0,bt.editor.on({},(function(){t.length>0&&setTimeout((function(){ke.setOriginalHtml("isModified")}),500),r?Ze.setSelection(r.id,r.anchor,r.head):c&&(Fe.isOutline&&c===n.body?Fe.editorUtils.focusLastNode():(st.setRange(c,d,u,f),Fe.isOutline&&Fe.editorUtils.focusNode())),n.options.reader.callback.onAutoEdit&&n.options.reader.callback.onAutoEdit()}))}}},mt=function(){Re.forEach((function(e){Pe.addListener(e.eName,e.fun)})),Re=[]},gt=function(){var e=Fe.init();ke=e.editor,Pe=e.editorEvent,Be=e.editorUtils,ze=e.reader,ke.type===a.DOCUMENT_TYPE.COMMON&&(ze.noteSrcIsText=!1,ze.noteTextSrc="")},vt=function(e){if(e=tt.imgPreprocess(e),n.client.type.isWeb){var t=ht.getDefaultStyle();t='<style id="'.concat(a.ID.WIZ_DEFAULT_STYLE,'">').concat(t,"</style>");var r=ht.getWebTmpStyle();t+='<style name="'.concat(a.NAME.TMP_STYLE,'">').concat(r,"</style>");var o=/<style id="wiz_custom_css">[^<]*<\/style>/gi,i=/<\/head>/gi;e=o.test(e)?e.replace(o,t):i.test(e)?e.replace(i,"".concat(t,"</head>")):t+e}n.options.useFrame?(n.doc.open("text/html","replace"),n.doc.write(e),n.doc.close(),n.body=n.doc.body):n.body.innerHTML=e,Ke.attr(n.body,{spellcheck:"false"}),d.run(n.win)},bt={version:a.version,destroy:function(){n.isWizTemplate&&n.win.WizTemplate&&n.win.WizTemplate.off(),n.isWizTemplate=!1,ke&&ke.offEvent(),ze&&ze.offEvent(),n.body.innerHTML="",n.readonly=null},setOptions:n.setOptions,getDocumentType:function(){return Fe&&Fe.isOutline?a.DOCUMENT_TYPE.OUTLINE:a.DOCUMENT_TYPE.COMMON},editor:{on:function(e,t){if(n.event.remove(a.EVENT.AUTO_EDIT,pt),!1!==n.readonly){var r=function(){mt(),"function"==typeof t&&t()};"function"==typeof e&&(t=e,e={});var o=(e=e||{}).documentBody,i=e.documentBodyType;if(void 0!==e.htmlBaseUrl&&(n.options.htmlBaseUrl=e.htmlBaseUrl),void 0!==e.minHeight&&(n.options.editor.minHeight=e.minHeight),e.reader&&e.reader.type&&(n.options.reader.type=e.reader.type),o||Fe.checkDocumentEditable()){var l=function(){"string"!=typeof o||("text"===i?n.body.innerHTML=u.xssFilter(s.txt2HTML(o,{wizTableSaveDom:!0})):(o=u.xssFilter(o),o=Ke.initDocHtml(o),vt(o)),Fe.checkDocumentEditable())?(gt(),ke.on(e,r)):r()};if(ze)if(ze.type===a.DOCUMENT_TYPE.COMMON){var c={noteSrc:null,useContentExtractionHtml:e.useContentExtractionHtml};"string"!=typeof o&&ze.noteSrcIsText&&(c.noteSrc=u.xssFilter(s.txt2HTML(ze.noteTextSrc,{wizTableSaveDom:!0}))),ze.off(c,l)}else ze.off({},l);else l()}else r()}},caretBackup:function(){return st.caretBackup()},createSvg:function(){ct.createSvg()},execCommand:function(){Qe.saveSnap(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ye.execCommand.apply(bt,t)},find:function(e,t,n,r){return Be.find(e,t,n,r)},focus:function(){ke.focus()},getBodyText:function(){return Ke.getBodyText()},getContentHtml:function(e){return Fe.getContentHtml(e)},getMarkdownSrc:function(e){return ot?ot.getMarkdownSrcForEditor(e):""},insertB64Html:function(e,t){Be.insertHtml(c.decode(e),t)},insertHtml:function(e,t){!1===n.readonly&&(Qe.saveSnap(!1),Be.insertHtml(e,t))},isModified:function(){var e=!1===n.readonly;if(!e)return e;var t=Fe.getContentHtmlForInside(),r=ke.getOriginalHtml();t=Ke.removeByTagFromHtml(t,a.TAG.CODE_MIRROR),r=Ke.removeByTagFromHtml(r,a.TAG.CODE_MIRROR),t=Ke.removeByTagFromHtml(t,a.TAG.TMP_CARET),r=Ke.removeByTagFromHtml(r,a.TAG.TMP_CARET);var o=/<body[^>]*>([\s\S]*)<\/body>/i,i=o.exec(t);i=i&&i[1]||t;var l=o.exec(r);return l=l&&l[1]||r,!1===n.readonly&&i!==l},modifySelectionBlock:function(e){Qe.saveSnap(!1),Be.modifySelectionBlock(e)},modifySelectionDom:function(e,t){n.event.setPause(a.EVENT.ON_SELECTION_CHANGE,!0),Qe.saveSnap(!1),Be.modifySelectionDom(e,t),setTimeout((function(){n.event.setPause(a.EVENT.ON_SELECTION_CHANGE,!1)}),10)},paste:function(e,t){!1===n.readonly&&lt.pasteFromClient(e,t)},pasteB64:function(e,t){var n=c.decode(e),r=c.decode(t);bt.editor.paste(n,r)},redo:function(){Qe.redo()},removeFormat:function(e,t,n){Qe.saveSnap(!1),ht.removeFormat(e,t,n)},replace:function(e,t,n){return Be.replace(e,t,n)},replaceAll:function(e,t,n){Qe.saveSnap(!1),Be.replaceAll(e,t,n)},caretRestore:function(){return st.caretRestore()},saveSnap:function(){Qe.saveSnap(!1)},setUnModified:function(){ke.setOriginalHtml()},undo:function(){Qe.undo()},ListenerType:a.TYPE.EDITOR_EVENT,addListener:function(e,t){Pe?Pe.addListener(e,t):Re.push({eName:e,fun:t})},removeListener:function(e,t){Pe&&Pe.removeListener(e,t)},triggerListener:function(e,t){Pe&&Pe.triggerListener(e,t)},startTrackEvent:function(e,t){Pe&&Pe.startTrackEvent(e,t)},stopTrackEvent:function(e,t){Pe&&Pe.stopTrackEvent(e,t)},amend:{on:function(){je.start()},off:function(){je.startReverse()},changeCurUser:function(e){je.changeCurUser(e)},isEdited:function(){return je.isAmendEdited()},isEditing:function(){return je.isAmendEditing},hasAmendSpanByCursor:function(){return je.hasAmendSpanByCursor()},accept:function(e){je.accept(yt(e))},refuse:function(e){je.refuse(yt(e))}},code:{insertCode:function(){Ve&&Ve.insertCode()}},formatPainter:{on:function(e){return Xe.on(e)},off:function(){Xe.off()}},img:{getAll:function(e,t){return et.getAll(e,t).join(",")},insertAsAttachment:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Qe.saveSnap(!1),!r.insertStart&&!r.insertEnd){var o=He.insertBlock(n.doc.createElement("div"));o.innerHTML=""}Be.insertDom(et.makeAttachmentDom(e,t),r)},insertByPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=et.makeDomByPath(e);if(Fe.isOutline)r.length>0&&ke.addImg(r[0]);else{if(Qe.saveSnap(!1),!t.insertStart&&!t.insertEnd){var o=He.insertBlock(n.doc.createElement("div"));o.innerHTML=""}Be.insertDom(r,t)}},uploadImg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n.readonly){var r=Ie.imgUpload.createdUploadNode(e);if(Fe.isOutline)st.caretRestore(),ke.addImg(r.dom);else{if(Qe.saveSnap(!1),!t.insertStart&&!t.insertEnd){var o=He.insertBlock(n.doc.createElement("div"));o.innerHTML=""}Be.insertDom(r.dom,t)}return r.key}},onImgUploadProgress:function(){var e;return(e=Ie.imgUpload).onImgUploadProgress.apply(e,arguments)},onImgUploadComplete:function(){var e;return(e=Ie.imgUpload).onImgUploadComplete.apply(e,arguments)},onImgUploadError:function(){var e;return(e=Ie.imgUpload).onImgUploadError.apply(e,arguments)},getDom:function(e){return Ie.imgUpload.getUploadDom(e)},removeCur:function(){Qe.saveSnap(!1);var e="img["+a.ATTR.IMG_EDITING+"]";et.remove(e)},replaceCur:function(e){Qe.saveSnap(!1);var t="img["+a.ATTR.IMG_EDITING+"]";et.replaceSrc(t,e)}},link:{on:function(){nt.on()},off:function(){nt.off()},getCurrentLink:function(){return rt.getCurrentLink()},removeSelectedLink:function(){rt.removeSelectedLink()},setCurrentLink:function(e){rt.setCurrentLink(e)}},marker:{start:function(){it.start()},quit:function(e){it.quit(e)},checkMarker:function(){return it.checkMarker()},hide:function(){it.hide()},show:function(){it.show()}},range:{moveToPoint:function(e,t){st.moveToPoint(e,t)}},table:{canCreateTable:dt.canCreateTable,clearCellValue:dt.clearCellValue,deleteCols:dt.deleteCols,deleteRows:dt.deleteRows,deleteTable:dt.deleteTable,distributeCols:dt.distributeCols,insertCol:dt.insertCol,insertRow:dt.insertRow,insertTable:dt.insertTable,merge:dt.merge,setCellAlign:dt.setCellAlign,setCellBg:dt.setCellBg,split:dt.split},todo:{setTodo:function(){ut&&ut.setTodo()}},utils:{clearStyleFromHtml:function(e,t){return Qe.saveSnap(!1),Ke.clearStyleFromHtml(e,t)}},toolbar:{setImgUploaderId:function(e){ft&&ft.setImgUploaderId(e)},onImgUploadBegin:function(e,t){ft&&ft.onImgUploadBegin(e,t)},onImgUploadProgress:function(e,t){ft&&ft.onImgUploadProgress(e,t)},onImgUploadComplete:function(e,t){ft&&ft.onImgUploadComplete(e,t)},onImgUploadError:function(e){ft&&ft.onImgUploadError(e)}}},reader:{on:function(e,t){if(n.isAutoReaderToEditor=!1,n.event.add(a.EVENT.AUTO_EDIT,pt),!0!==n.readonly){"function"==typeof e&&(t=e,e={}),void 0!==(e=e||{}).minHeight&&(n.options.reader.minHeight=e.minHeight),void 0!==e.htmlBaseUrl&&(n.options.htmlBaseUrl=e.htmlBaseUrl),e.reader&&e.reader.type&&(n.options.reader.type=e.reader.type),n.options.pc.pluginModified=!1;var r=e.documentBody,o=e.documentBodyType;"string"==typeof r?"text"===o?(gt(),ze.noteSrcIsText=!0,ze.noteTextSrc=r):(r=u.xssFilter(r),r=Ke.initDocHtml(r),vt(r),gt()):gt(),n.options.reader.type===a.NOTE_READER_TYPE.MARKDOWN&&(n.body.style.opacity="0");ze.on(e,(function(){"function"==typeof t&&(mt(),t()),n.options.pureReadMode.enable&&bt.reader.pureRead.on()}))}},closeDocument:function(){return ut?ut.closeDocument():null},getRenderDocument:function(){return je.hideAmendInfo(),Ke.getRenderDocument()},getWordCount:function(){var e=Ke.getWordCount();return JSON.stringify(e)},setPluginModify:function(e){return n.options.pc.pluginModified?n.options.pc.pluginModified:(n.options.reader.type===a.NOTE_READER_TYPE.COMMON&&(n.options.pc.pluginModified=!!e),n.options.pc.pluginModified)},amendInfo:{on:qe.on,off:qe.off},highlight:{next:function(){$e.next()},off:function(){$e.off()},on:function(e,t){return $e.on(e,t)},previous:function(){$e.previous()}},pureRead:{on:function(e){n.options.pureReadMode.enable=!0,e=e||{},Ge&&Ge.on({needContentExtraction:e.needContentExtraction},(function(){}))},off:function(){n.options.pureReadMode.enable=!1,Ge&&Ge.off()}},todo:{onCheckDocLock:function(e,t){ut&&ut.onCheckDocLock(e,t)}},marker:{hide:function(){it.hide()},show:function(){it.show()}}},outline:{addNotes:function(){Fe.isOutline&&!n.readonly&&ke.addNotes()},setCompleted:function(e){Fe.isOutline&&!n.readonly&&ke.setCompleted(e)},deleteNodes:function(){Fe.isOutline&&!n.readonly&&ke.deleteNodes()},indent:function(){Fe.isOutline&&!n.readonly&&ke.indent()},outdent:function(){Fe.isOutline&&!n.readonly&&ke.outdent()},hideMinder:function(){Fe.isOutline&&ke.hideMinder()},hideMinderTools:function(){Fe.isOutline&&ke.hideMinderTools()},hideMinderToolsMenu:function(){Fe.isOutline&&ke.hideMinderToolsMenu()},getMinderThemeData:function(e){return Fe.isOutline?ke.getMinderThemeData(e):""},minderThemeRegister:function(e){Fe.isOutline&&ke.minderThemeRegister(e)},showMinder:function(e){Fe.isOutline&&ke.showMinder(e)},showMinderTools:function(){Fe.isOutline&&ke.showMinderTools()},showMinderToolsMenu:function(){Fe.isOutline&&ke.showMinderToolsMenu()},userMinderTheme:function(e){Fe.isOutline&&ke.userMinderTheme(e)}},frame:{getFrameElement:Je.getFrameElement,adjustContainerSize:Je.onAdjustContainerSize},nightMode:{on:function(e,t,r){n.options.nightMode.enable=!0,e&&(n.options.nightMode.color=e),t&&(n.options.nightMode.bgColor=t),r&&(n.options.nightMode.brightness=r),at&&at.on()},off:function(){n.options.nightMode.enable=!1,at&&at.off()}},insertCustomStyle:function(e,t,n){ht.insertCustomStyle(e,t,n)},insertDefaultStyle:function(e,t){ht.insertDefaultStyle(e,t)},removeStyleById:function(e){ht.removeStyleById(e)}};return t&&t(Le),n.event.add(a.EVENT.ON_MARKER_INITIATED,(function(e){var t=e.editorTools;for(var n in bt.editor.marker.tools=t,t)t.hasOwnProperty(n)&&(bt.editor.marker[n]=t[n])})),bt;function yt(e){return e?(e.total=!!e.total,e.cursor=!!e.cursor):e={dom:null,cursor:!1,total:!0},e}};window.WizDocument=Le,Le.version=a.version,e.exports=Le},function(e,t,n){"use strict";n(220);var r,o=(r=n(392))&&r.__esModule?r:{default:r};o.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),o.default._babelPolyfill=!0},function(e,t,n){"use strict";n(221),n(364),n(366),n(369),n(371),n(373),n(375),n(377),n(379),n(381),n(383),n(385),n(387),n(391)},function(e,t,n){n(222),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(303),n(304),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(112),n(327),n(161),n(328),n(162),n(329),n(330),n(331),n(332),n(163),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),e.exports=n(12)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(6),i=n(20),a=n(14),l=n(0),s=n(18),c=n(40).KEY,d=n(7),u=n(74),f=n(55),h=n(45),p=n(10),m=n(93),g=n(142),v=n(224),b=n(77),y=n(8),_=n(9),S=n(17),E=n(22),C=n(39),T=n(44),A=n(49),O=n(145),w=n(30),N=n(76),L=n(15),I=n(47),U=w.f,M=L.f,D=O.f,x=o.Symbol,R=o.JSON,k=R&&R.stringify,P=p("_hidden"),B=p("toPrimitive"),z={}.propertyIsEnumerable,F=u("symbol-registry"),j=u("symbols"),q=u("op-symbols"),H=Object.prototype,W="function"==typeof x&&!!N.f,Y=o.QObject,G=!Y||!Y.prototype||!Y.prototype.findChild,V=a&&d((function(){return 7!=A(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=U(H,t);r&&delete H[t],M(e,t,n),r&&e!==H&&M(H,t,r)}:M,Z=function(e){var t=j[e]=A(x.prototype);return t._k=e,t},K=W&&"symbol"==r(x.iterator)?function(e){return"symbol"==r(e)}:function(e){return e instanceof x},X=function(e,t,n){return e===H&&X(q,t,n),y(e),t=C(t,!0),y(n),i(j,t)?(n.enumerable?(i(e,P)&&e[P][t]&&(e[P][t]=!1),n=A(n,{enumerable:T(0,!1)})):(i(e,P)||M(e,P,T(1,{})),e[P][t]=!0),V(e,t,n)):M(e,t,n)},J=function(e,t){y(e);for(var n,r=v(t=E(t)),o=0,i=r.length;i>o;)X(e,n=r[o++],t[n]);return e},$=function(e){var t=z.call(this,e=C(e,!0));return!(this===H&&i(j,e)&&!i(q,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,P)&&this[P][e])||t)},Q=function(e,t){if(e=E(e),t=C(t,!0),e!==H||!i(j,t)||i(q,t)){var n=U(e,t);return!n||!i(j,t)||i(e,P)&&e[P][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=D(E(e)),r=[],o=0;n.length>o;)i(j,t=n[o++])||t==P||t==c||r.push(t);return r},te=function(e){for(var t,n=e===H,r=D(n?q:E(e)),o=[],a=0;r.length>a;)!i(j,t=r[a++])||n&&!i(H,t)||o.push(j[t]);return o};W||(s((x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function t(n){this===H&&t.call(q,n),i(this,P)&&i(this[P],e)&&(this[P][e]=!1),V(this,e,T(1,n))};return a&&G&&V(H,e,{configurable:!0,set:t}),Z(e)}).prototype,"toString",(function(){return this._k})),w.f=Q,L.f=X,n(50).f=O.f=ee,n(65).f=$,N.f=te,a&&!n(46)&&s(H,"propertyIsEnumerable",$,!0),m.f=function(e){return Z(p(e))}),l(l.G+l.W+l.F*!W,{Symbol:x});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)p(ne[re++]);for(var oe=I(p.store),ie=0;oe.length>ie;)g(oe[ie++]);l(l.S+l.F*!W,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=x(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),l(l.S+l.F*!W,"Object",{create:function(e,t){return void 0===t?A(e):J(A(e),t)},defineProperty:X,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=d((function(){N.f(1)}));l(l.S+l.F*ae,"Object",{getOwnPropertySymbols:function(e){return N.f(S(e))}}),R&&l(l.S+l.F*(!W||d((function(){var e=x();return"[null]"!=k([e])||"{}"!=k({a:e})||"{}"!=k(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(_(t)||void 0!==e)&&!K(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,k.apply(R,r)}}),x.prototype[B]||n(21)(x.prototype,B,x.prototype.valueOf),f(x,"Symbol"),f(Math,"Math",!0),f(o.JSON,"JSON",!0)},function(e,t,n){e.exports=n(74)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(47),o=n(76),i=n(65);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,l=n(e),s=i.f,c=0;l.length>c;)s.call(e,a=l[c++])&&t.push(a);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(49)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(14),"Object",{defineProperty:n(15).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(14),"Object",{defineProperties:n(144)})},function(e,t,n){var r=n(22),o=n(30).f;n(31)("getOwnPropertyDescriptor",(function(){return function(e,t){return o(r(e),t)}}))},function(e,t,n){var r=n(17),o=n(51);n(31)("getPrototypeOf",(function(){return function(e){return o(r(e))}}))},function(e,t,n){var r=n(17),o=n(47);n(31)("keys",(function(){return function(e){return o(r(e))}}))},function(e,t,n){n(31)("getOwnPropertyNames",(function(){return n(145).f}))},function(e,t,n){var r=n(9),o=n(40).onFreeze;n(31)("freeze",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(9),o=n(40).onFreeze;n(31)("seal",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(9),o=n(40).onFreeze;n(31)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(9);n(31)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(9);n(31)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(9);n(31)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(146)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(147)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(97).set})},function(e,t,n){"use strict";var r=n(66),o={};o[n(10)("toStringTag")]="z",o+""!="[object z]"&&n(18)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(148)})},function(e,t,n){var r=n(15).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(14)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(9),o=n(51),i=n(10)("hasInstance"),a=Function.prototype;i in a||n(15).f(a,i,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),o=n(150);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(e,t,n){var r=n(0),o=n(151);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(e,t,n){"use strict";var r=n(6),o=n(20),i=n(34),a=n(99),l=n(39),s=n(7),c=n(50).f,d=n(30).f,u=n(15).f,f=n(56).trim,h=r.Number,p=h,m=h.prototype,g="Number"==i(n(49)(m)),v="trim"in String.prototype,b=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){var n,r,o,i=(t=v?t.trim():f(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var a,s=t.slice(2),c=0,d=s.length;c<d;c++)if((a=s.charCodeAt(c))<48||a>o)return NaN;return parseInt(s,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(g?s((function(){m.valueOf.call(n)})):"Number"!=i(n))?a(new p(b(t)),n,h):b(t)};for(var y,_=n(14)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;_.length>S;S++)o(p,y=_[S])&&!o(h,y)&&u(h,y,d(p,y));h.prototype=m,m.constructor=h,n(18)(r,"Number",h)}},function(e,t,n){"use strict";var r=n(0),o=n(29),i=n(152),a=n(100),l=1..toFixed,s=Math.floor,c=[0,0,0,0,0,0],d="Number.toFixed: incorrect invocation!",u=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=s(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=s(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)};r(r.P+r.F*(!!l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)((function(){l.call({})}))),"Number",{toFixed:function(e){var t,n,r,l,s=i(this,d),c=o(e),m="",g="0";if(c<0||c>20)throw RangeError(d);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(m="-",s=-s),s>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(s*p(2,69,1))-69)<0?s*p(2,-t,1):s/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(u(0,n),r=c;r>=7;)u(1e7,0),r-=7;for(u(p(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),u(1,1),f(2),g=h()}else u(0,n),u(1<<-t,0),g=h()+a.call("0",c);return g=c>0?m+((l=g.length)<=c?"0."+a.call("0",c-l)+g:g.slice(0,l-c)+"."+g.slice(l-c)):m+g}})},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(152),a=1..toPrecision;r(r.P+r.F*(o((function(){return"1"!==a.call(1,void 0)}))||!o((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),o=n(6).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(153)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),o=n(153),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),o=n(151);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,n){var r=n(0),o=n(150);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,n){var r=n(0),o=n(154),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+i(e-1)*i(e+1))}})},function(e,t,n){var r=n(0),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(0),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),o=n(101);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,n){var r=n(0),o=n(102);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(267)})},function(e,t,n){var r=n(101),o=Math.pow,i=o(2,-52),a=o(2,-23),l=o(2,127)*(2-a),s=o(2,-126);e.exports=Math.fround||function(e){var t,n,o=Math.abs(e),c=r(e);return o<s?c*(o/s/a+1/i-1/i)*s*a:(n=(t=(1+a/i)*o)-(t-o))>l||n!=n?c*(1/0):c*n}},function(e,t,n){var r=n(0),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,i=0,a=0,l=arguments.length,s=0;a<l;)s<(n=o(arguments[a++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}})},function(e,t,n){var r=n(0),o=Math.imul;r(r.S+r.F*n(7)((function(){return-5!=o(4294967295,5)||2!=o.length})),"Math",{imul:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r;return 0|o*i+((65535&n>>>16)*i+o*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(154)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(101)})},function(e,t,n){var r=n(0),o=n(102),i=Math.exp;r(r.S+r.F*n(7)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),o=n(102),i=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(i(e)+i(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),o=n(48),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),o=n(22),i=n(11);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=i(t.length),r=arguments.length,a=[],l=0;n>l;)a.push(String(t[l++])),l<r&&a.push(String(arguments[l]));return a.join("")}})},function(e,t,n){"use strict";n(56)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(103)(!0);n(104)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(0),o=n(103)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(0),o=n(11),i=n(105),a="".endsWith;r(r.P+r.F*n(107)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),l=void 0===n?r:Math.min(o(n),r),s=String(e);return a?a.call(t,s,l):t.slice(l-s.length,l)===s}})},function(e,t,n){"use strict";var r=n(0),o=n(105);r(r.P+r.F*n(107)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(100)})},function(e,t,n){"use strict";var r=n(0),o=n(11),i=n(105),a="".startsWith;r(r.P+r.F*n(107)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(19)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(19)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(19)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(19)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(19)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(19)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(19)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(19)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(19)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(19)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(19)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(19)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(19)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),o=n(17),i=n(39);r(r.P+r.F*n(7)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=o(this),n=i(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),o=n(302);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(e,t,n){"use strict";var r=n(7),o=Date.prototype.getTime,i=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))}))||!r((function(){i.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:i},function(e,t,n){var r=Date.prototype,o=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(18)(r,"toString",(function(){var e=i.call(this);return e==e?o.call(this):"Invalid Date"}))},function(e,t,n){var r=n(10)("toPrimitive"),o=Date.prototype;r in o||n(21)(o,r,n(305))},function(e,t,n){"use strict";var r=n(8),o=n(39);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(77)})},function(e,t,n){"use strict";var r=n(27),o=n(0),i=n(17),a=n(156),l=n(108),s=n(11),c=n(109),d=n(110);o(o.S+o.F*!n(78)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,u,f=i(e),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=0,b=d(f);if(g&&(m=r(m,p>2?arguments[2]:void 0,2)),null==b||h==Array&&l(b))for(n=new h(t=s(f.length));t>v;v++)c(n,v,g?m(f[v],v):f[v]);else for(u=b.call(f),n=new h;!(o=u.next()).done;v++)c(n,v,g?a(u,m,[o.value,v],!0):o.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(0),o=n(109);r(r.S+r.F*n(7)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),o=n(22),i=[].join;r(r.P+r.F*(n(64)!=Object||!n(26)(i)),"Array",{join:function(e){return i.call(o(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),o=n(96),i=n(34),a=n(48),l=n(11),s=[].slice;r(r.P+r.F*n(7)((function(){o&&s.call(o)})),"Array",{slice:function(e,t){var n=l(this.length),r=i(this);if(t=void 0===t?n:t,"Array"==r)return s.call(this,e,t);for(var o=a(e,n),c=a(t,n),d=l(c-o),u=new Array(d),f=0;f<d;f++)u[f]="String"==r?this.charAt(o+f):this[o+f];return u}})},function(e,t,n){"use strict";var r=n(0),o=n(28),i=n(17),a=n(7),l=[].sort,s=[1,2,3];r(r.P+r.F*(a((function(){s.sort(void 0)}))||!a((function(){s.sort(null)}))||!n(26)(l)),"Array",{sort:function(e){return void 0===e?l.call(i(this)):l.call(i(this),o(e))}})},function(e,t,n){"use strict";var r=n(0),o=n(32)(0),i=n(26)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(9),o=n(77),i=n(10)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),o=n(32)(1);r(r.P+r.F*!n(26)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(32)(2);r(r.P+r.F*!n(26)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(32)(3);r(r.P+r.F*!n(26)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(32)(4);r(r.P+r.F*!n(26)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(158);r(r.P+r.F*!n(26)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),o=n(158);r(r.P+r.F*!n(26)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),o=n(75)(!1),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(26)(i)),"Array",{indexOf:function(e){return a?i.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(22),i=n(29),a=n(11),l=[].lastIndexOf,s=!!l&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(s||!n(26)(l)),"Array",{lastIndexOf:function(e){if(s)return l.apply(this,arguments)||0;var t=o(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(159)}),n(52)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(111)}),n(52)("fill")},function(e,t,n){"use strict";var r=n(0),o=n(32)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(52)("find")},function(e,t,n){"use strict";var r=n(0),o=n(32)(6),i="findIndex",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(52)(i)},function(e,t,n){n(58)("Array")},function(e,t,n){var r=n(6),o=n(99),i=n(15).f,a=n(50).f,l=n(106),s=n(79),c=r.RegExp,d=c,u=c.prototype,f=/a/g,h=/a/g,p=new c(f)!==f;if(n(14)&&(!p||n(7)((function(){return h[n(10)("match")]=!1,c(f)!=f||c(h)==h||"/a/i"!=c(f,"i")})))){c=function(e,t){var n=this instanceof c,r=l(e),i=void 0===t;return!n&&r&&e.constructor===c&&i?e:o(p?new d(r&&!i?e.source:e,t):d((r=e instanceof c)?e.source:e,r&&i?s.call(e):t),n?this:u,c)};for(var m=function(e){e in c||i(c,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},g=a(d),v=0;g.length>v;)m(g[v++]);u.constructor=c,c.prototype=u,n(18)(r,"RegExp",c)}n(58)("RegExp")},function(e,t,n){"use strict";n(162);var r=n(8),o=n(79),i=n(14),a=/./.toString,l=function(e){n(18)(RegExp.prototype,"toString",e,!0)};n(7)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?l((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=a.name&&l((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(8),o=n(11),i=n(114),a=n(80);n(81)("match",1,(function(e,t,n,l){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=l(n,e,this);if(t.done)return t.value;var s=r(e),c=String(this);if(!s.global)return a(s,c);var d=s.unicode;s.lastIndex=0;for(var u,f=[],h=0;null!==(u=a(s,c));){var p=String(u[0]);f[h]=p,""===p&&(s.lastIndex=i(c,o(s.lastIndex),d)),h++}return 0===h?null:f}]}))},function(e,t,n){"use strict";var r=n(8),o=n(17),i=n(11),a=n(29),l=n(114),s=n(80),c=Math.max,d=Math.min,u=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(81)("replace",2,(function(e,t,n,p){return[function(r,o){var i=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(e,t){var o=p(n,e,this,t);if(o.done)return o.value;var u=r(e),f=String(this),h="function"==typeof t;h||(t=String(t));var g=u.global;if(g){var v=u.unicode;u.lastIndex=0}for(var b=[];;){var y=s(u,f);if(null===y)break;if(b.push(y),!g)break;""===String(y[0])&&(u.lastIndex=l(f,i(u.lastIndex),v))}for(var _,S="",E=0,C=0;C<b.length;C++){y=b[C];for(var T=String(y[0]),A=c(d(a(y.index),f.length),0),O=[],w=1;w<y.length;w++)O.push(void 0===(_=y[w])?_:String(_));var N=y.groups;if(h){var L=[T].concat(O,A,f);void 0!==N&&L.push(N);var I=String(t.apply(void 0,L))}else I=m(T,f,A,O,N,t);A>=E&&(S+=f.slice(E,A)+I,E=A+T.length)}return S+f.slice(E)}];function m(e,t,r,i,a,l){var s=r+e.length,c=i.length,d=h;return void 0!==a&&(a=o(a),d=f),n.call(l,d,(function(n,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(s);case"<":l=a[o.slice(1,-1)];break;default:var d=+o;if(0===d)return n;if(d>c){var f=u(d/10);return 0===f?n:f<=c?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):n}l=i[d-1]}return void 0===l?"":l}))}}))},function(e,t,n){"use strict";var r=n(8),o=n(147),i=n(80);n(81)("search",1,(function(e,t,n,a){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var l=r(e),s=String(this),c=l.lastIndex;o(c,0)||(l.lastIndex=0);var d=i(l,s);return o(l.lastIndex,c)||(l.lastIndex=c),null===d?-1:d.index}]}))},function(e,t,n){"use strict";var r=n(106),o=n(8),i=n(67),a=n(114),l=n(11),s=n(80),c=n(113),d=n(7),u=Math.min,f=[].push,h=!d((function(){RegExp(4294967295,"y")}));n(81)("split",2,(function(e,t,n,d){var p;return p="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(o,e,t);for(var i,a,l,s=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,h=void 0===t?4294967295:t>>>0,p=new RegExp(e.source,d+"g");(i=c.call(p,o))&&!((a=p.lastIndex)>u&&(s.push(o.slice(u,i.index)),i.length>1&&i.index<o.length&&f.apply(s,i.slice(1)),l=i[0].length,u=a,s.length>=h));)p.lastIndex===i.index&&p.lastIndex++;return u===o.length?!l&&p.test("")||s.push(""):s.push(o.slice(u)),s.length>h?s.slice(0,h):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):p.call(String(o),n,r)},function(e,t){var r=d(p,e,this,t,p!==n);if(r.done)return r.value;var c=o(e),f=String(this),m=i(c,RegExp),g=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),b=new m(h?c:"^(?:"+c.source+")",v),y=void 0===t?4294967295:t>>>0;if(0===y)return[];if(0===f.length)return null===s(b,f)?[f]:[];for(var _=0,S=0,E=[];S<f.length;){b.lastIndex=h?S:0;var C,T=s(b,h?f:f.slice(S));if(null===T||(C=u(l(b.lastIndex+(h?0:S)),f.length))===_)S=a(f,S,g);else{if(E.push(f.slice(_,S)),E.length===y)return E;for(var A=1;A<=T.length-1;A++)if(E.push(T[A]),E.length===y)return E;S=_=C}}return E.push(f.slice(_)),E}]}))},function(e,t,n){var r=n(6),o=n(115).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,l=r.Promise,s="process"==n(34)(a);e.exports=function(){var e,t,n,c=function(){var r,o;for(s&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(s)n=function(){a.nextTick(c)};else if(!i||r.navigator&&r.navigator.standalone)if(l&&l.resolve){var d=l.resolve(void 0);n=function(){d.then(c)}}else n=function(){o.call(r,c)};else{var u=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),n=function(){f.data=u=!u}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(166),o=n(53);e.exports=n(84)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(166),o=n(53);e.exports=n(84)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,o=n(6),i=n(32)(0),a=n(18),l=n(40),s=n(146),c=n(167),d=n(9),u=n(53),f=n(53),h=!o.ActiveXObject&&"ActiveXObject"in o,p=l.getWeak,m=Object.isExtensible,g=c.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(e){if(d(e)){var t=p(e);return!0===t?g(u(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(u(this,"WeakMap"),e,t)}},y=e.exports=n(84)("WeakMap",v,b,c,!0,!0);f&&h&&(s((r=c.getConstructor(v,"WeakMap")).prototype,b),l.NEED=!0,i(["delete","has","get","set"],(function(e){var t=y.prototype,n=t[e];a(t,e,(function(t,o){if(d(t)&&!m(t)){this._f||(this._f=new r);var i=this._f[e](t,o);return"set"==e?this:i}return n.call(this,t,o)}))})))},function(e,t,n){"use strict";var r=n(167),o=n(53);n(84)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(o(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),o=n(85),i=n(116),a=n(8),l=n(48),s=n(11),c=n(9),d=n(6).ArrayBuffer,u=n(67),f=i.ArrayBuffer,h=i.DataView,p=o.ABV&&d.isView,m=f.prototype.slice,g=o.VIEW;r(r.G+r.W+r.F*(d!==f),{ArrayBuffer:f}),r(r.S+r.F*!o.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||c(e)&&g in e}}),r(r.P+r.U+r.F*n(7)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(a(this),e);for(var n=a(this).byteLength,r=l(e,n),o=l(void 0===t?n:t,n),i=new(u(this,f))(s(o-r)),c=new h(this),d=new h(i),p=0;r<o;)d.setUint8(p++,c.getUint8(r++));return i}}),n(58)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(85).ABV,{DataView:n(116).DataView})},function(e,t,n){n(36)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(36)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(36)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(36)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(36)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(36)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(36)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(36)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(36)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(0),o=n(28),i=n(8),a=(n(6).Reflect||{}).apply,l=Function.apply;r(r.S+r.F*!n(7)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=o(e),s=i(n);return a?a(r,t,s):l.call(r,t,s)}})},function(e,t,n){var r=n(0),o=n(49),i=n(28),a=n(8),l=n(9),s=n(7),c=n(148),d=(n(6).Reflect||{}).construct,u=s((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),f=!s((function(){d((function(){}))}));r(r.S+r.F*(u||f),"Reflect",{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(f&&!u)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var s=n.prototype,h=o(l(s)?s:Object.prototype),p=Function.apply.call(e,h,t);return l(p)?p:h}})},function(e,t,n){var r=n(15),o=n(0),i=n(8),a=n(39);o(o.S+o.F*n(7)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){i(e),t=a(t,!0),i(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),o=n(30).f,i=n(8);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),o=n(8),i=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(155)(i,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,n){var r=n(30),o=n(51),i=n(20),a=n(0),l=n(9),s=n(8);a(a.S,"Reflect",{get:function e(t,n){var a,c,d=arguments.length<3?t:arguments[2];return s(t)===d?t[n]:(a=r.f(t,n))?i(a,"value")?a.value:void 0!==a.get?a.get.call(d):void 0:l(c=o(t))?e(c,n,d):void 0}})},function(e,t,n){var r=n(30),o=n(0),i=n(8);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,n){var r=n(0),o=n(51),i=n(8);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(i(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),o=n(8),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),!i||i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(169)})},function(e,t,n){var r=n(0),o=n(8),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(15),o=n(30),i=n(51),a=n(20),l=n(0),s=n(44),c=n(8),d=n(9);l(l.S,"Reflect",{set:function e(t,n,l){var u,f,h=arguments.length<4?t:arguments[3],p=o.f(c(t),n);if(!p){if(d(f=i(t)))return e(f,n,l,h);p=s(0)}if(a(p,"value")){if(!1===p.writable||!d(h))return!1;if(u=o.f(h,n)){if(u.get||u.set||!1===u.writable)return!1;u.value=l,r.f(h,n,u)}else r.f(h,n,s(0,l));return!0}return void 0!==p.set&&(p.set.call(h,l),!0)}})},function(e,t,n){var r=n(0),o=n(97);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(365),e.exports=n(12).Array.includes},function(e,t,n){"use strict";var r=n(0),o=n(75)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(52)("includes")},function(e,t,n){n(367),e.exports=n(12).Array.flatMap},function(e,t,n){"use strict";var r=n(0),o=n(368),i=n(17),a=n(11),l=n(28),s=n(157);r(r.P,"Array",{flatMap:function(e){var t,n,r=i(this);return l(e),t=a(r.length),n=s(r,0),o(n,r,r,t,0,1,e,arguments[1]),n}}),n(52)("flatMap")},function(e,t,n){"use strict";var r=n(77),o=n(9),i=n(11),a=n(27),l=n(10)("isConcatSpreadable");e.exports=function e(t,n,s,c,d,u,f,h){for(var p,m,g=d,v=0,b=!!f&&a(f,h,3);v<c;){if(v in s){if(p=b?b(s[v],v,n):s[v],m=!1,o(p)&&(m=void 0!==(m=p[l])?!!m:r(p)),m&&u>0)g=e(t,n,p,i(p.length),g,u-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=p}g++}v++}return g}},function(e,t,n){n(370),e.exports=n(12).String.padStart},function(e,t,n){"use strict";var r=n(0),o=n(170),i=n(83),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*a,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(372),e.exports=n(12).String.padEnd},function(e,t,n){"use strict";var r=n(0),o=n(170),i=n(83),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*a,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(374),e.exports=n(12).String.trimLeft},function(e,t,n){"use strict";n(56)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){n(376),e.exports=n(12).String.trimRight},function(e,t,n){"use strict";n(56)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){n(378),e.exports=n(93).f("asyncIterator")},function(e,t,n){n(142)("asyncIterator")},function(e,t,n){n(380),e.exports=n(12).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(0),o=n(169),i=n(22),a=n(30),l=n(109);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=i(e),s=a.f,c=o(r),d={},u=0;c.length>u;)void 0!==(n=s(r,t=c[u++]))&&l(d,t,n);return d}})},function(e,t,n){n(382),e.exports=n(12).Object.values},function(e,t,n){var r=n(0),o=n(171)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){n(384),e.exports=n(12).Object.entries},function(e,t,n){var r=n(0),o=n(171)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){"use strict";n(163),n(386),e.exports=n(12).Promise.finally},function(e,t,n){"use strict";var r=n(0),o=n(12),i=n(6),a=n(67),l=n(165);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){n(388),n(389),n(390),e.exports=n(12)},function(e,t,n){var r=n(6),o=n(0),i=n(83),a=[].slice,l=/MSIE .\./.test(i),s=function(e){return function(t,n){var r=arguments.length>2,o=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};o(o.G+o.B+o.F*l,{setTimeout:s(r.setTimeout),setInterval:s(r.setInterval)})},function(e,t,n){var r=n(0),o=n(115);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){for(var r=n(112),o=n(47),i=n(18),a=n(6),l=n(21),s=n(57),c=n(10),d=c("iterator"),u=c("toStringTag"),f=s.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(h),m=0;m<p.length;m++){var g,v=p[m],b=h[v],y=a[v],_=y&&y.prototype;if(_&&(_[d]||l(_,d,f),_[u]||l(_,u,v),s[v]=f,b))for(g in r)_[g]||i(_,g,r[g],!0)}},function(e,t,n){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(e){"use strict";var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=_(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function u(){}function f(){}function h(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==n&&r.call(g,i)&&(p=g);var v=h.prototype=u.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e){var n;this._invoke=function(o,i){function a(){return new Promise((function(n,a){!function n(o,i,a,l){var s=c(e[o],e,i);if("throw"!==s.type){var d=s.arg,u=d.value;return u&&"object"===t(u)&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):Promise.resolve(u).then((function(e){d.value=e,a(d)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=v.constructor=h,h.constructor=f,h[l]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[a]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,o){var i=new y(s(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),v[l]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(117)(e))},function(e,t,n){n(393),e.exports=n(172).global},function(e,t,n){var r=n(394);r(r.G,{global:n(118)})},function(e,t,n){var r=n(118),o=n(172),i=n(395),a=n(397),l=n(404),s=function e(t,n,s){var c,d,u,f=t&e.F,h=t&e.G,p=t&e.S,m=t&e.P,g=t&e.B,v=t&e.W,b=h?o:o[n]||(o[n]={}),y=b.prototype,_=h?r:p?r[n]:(r[n]||{}).prototype;for(c in h&&(s=n),s)(d=!f&&_&&void 0!==_[c])&&l(b,c)||(u=d?_[c]:s[c],b[c]=h&&"function"!=typeof _[c]?s[c]:g&&d?i(u,r):v&&_[c]==u?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):m&&"function"==typeof u?i(Function.call,u):u,m&&((b.virtual||(b.virtual={}))[c]=u,t&e.R&&y&&!y[c]&&a(y,c,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(396);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(398),o=n(403);e.exports=n(120)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(399),o=n(400),i=n(402),a=Object.defineProperty;t.f=n(120)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(119);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(120)&&!n(173)((function(){return 7!=Object.defineProperty(n(401)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(119),o=n(118).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(119);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=n(61),t.createHash=t.Hash=n(68),t.createHmac=t.Hmac=n(183);var r=n(424),o=Object.keys(r),i=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(o);t.getHashes=function(){return i};var a=n(186);t.pbkdf2=a.pbkdf2,t.pbkdf2Sync=a.pbkdf2Sync;var l=n(426);t.Cipher=l.Cipher,t.createCipher=l.createCipher,t.Cipheriv=l.Cipheriv,t.createCipheriv=l.createCipheriv,t.Decipher=l.Decipher,t.createDecipher=l.createDecipher,t.Decipheriv=l.Decipheriv,t.createDecipheriv=l.createDecipheriv,t.getCiphers=l.getCiphers,t.listCiphers=l.listCiphers;var s=n(441);t.DiffieHellmanGroup=s.DiffieHellmanGroup,t.createDiffieHellmanGroup=s.createDiffieHellmanGroup,t.getDiffieHellman=s.getDiffieHellman,t.createDiffieHellman=s.createDiffieHellman,t.DiffieHellman=s.DiffieHellman;var c=n(446);t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=n(480);var d=n(481);t.publicEncrypt=d.publicEncrypt,t.privateEncrypt=d.privateEncrypt,t.publicDecrypt=d.publicDecrypt,t.privateDecrypt=d.privateDecrypt;var u=n(484);t.randomFill=u.randomFill,t.randomFillSync=u.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),a=r[0],l=r[1],s=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,l)),d=0,u=l>0?a-4:a;for(n=0;n<u;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],s[d++]=t>>16&255,s[d++]=t>>8&255,s[d++]=255&t;2===l&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,s[d++]=255&t);1===l&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,s[d++]=t>>8&255,s[d++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=0,l=n-o;a<l;a+=16383)i.push(d(e,a,a+16383>l?l:a+16383));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,s=a.length;l<s;++l)r[l]=a[l],o[a.charCodeAt(l)]=l;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var o,i,a=[],l=t;l<n;l+=3)o=(e[l]<<16&16711680)+(e[l+1]<<8&65280)+(255&e[l+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,l=8*o-r-1,s=(1<<l)-1,c=s>>1,d=-7,u=n?o-1:0,f=n?-1:1,h=e[t+u];for(u+=f,i=h&(1<<-d)-1,h>>=-d,d+=l;d>0;i=256*i+e[t+u],u+=f,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=256*a+e[t+u],u+=f,d-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,l,s,c=8*i-o-1,d=(1<<c)-1,u=d>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+u>=1?f/s:f*Math.pow(2,1-u))*s>=2&&(a++,s/=2),a+u>=d?(l=0,a=d):a+u>=1?(l=(t*s-1)*Math.pow(2,o),a+=u):(l=t*Math.pow(2,u-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&l,h+=p,l/=256,o-=8);for(a=a<<o|l,c+=o;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*m}},function(e,t){},function(e,t,n){"use strict";var r=n(5).Buffer,o=n(410);function i(e,t,n){e.copy(t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,o=0;n;)i(n.data,t,o),o+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(412),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(38))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,a,l,s=1,c={},d=!1,u=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(o=u.documentElement,r=function(e){var t=u.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",l=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",l,!1):e.attachEvent("onmessage",l),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[s]=o,r(s),s++},f.clearImmediate=h}function h(e){delete c[e]}function p(e){if(d)setTimeout(p,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(38),n(41))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(38))},function(e,t,n){"use strict";e.exports=i;var r=n(180),o=Object.create(n(69));function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}o.inherits=n(4),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(125)},function(e,t,n){e.exports=n(54)},function(e,t,n){e.exports=n(124).Transform},function(e,t,n){e.exports=n(124).PassThrough},function(e,t,n){var r=n(4),o=n(62),i=n(5).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],l=new Array(80);function s(){this.init(),this._w=l,o.call(this,64,56)}function c(e){return e<<30|e>>>2}function d(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(s,o),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,o=0|this._b,i=0|this._c,l=0|this._d,s=0|this._e,u=0;u<16;++u)n[u]=e.readInt32BE(4*u);for(;u<80;++u)n[u]=n[u-3]^n[u-8]^n[u-14]^n[u-16];for(var f=0;f<80;++f){var h=~~(f/20),p=0|((t=r)<<5|t>>>27)+d(h,o,i,l)+s+n[f]+a[h];s=l,l=i,i=c(o),o=r,r=p}this._a=r+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=l+this._d|0,this._e=s+this._e|0},s.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=s},function(e,t,n){var r=n(4),o=n(62),i=n(5).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],l=new Array(80);function s(){this.init(),this._w=l,o.call(this,64,56)}function c(e){return e<<5|e>>>27}function d(e){return e<<30|e>>>2}function u(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(s,o),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,o=0|this._b,i=0|this._c,l=0|this._d,s=0|this._e,f=0;f<16;++f)n[f]=e.readInt32BE(4*f);for(;f<80;++f)n[f]=(t=n[f-3]^n[f-8]^n[f-14]^n[f-16])<<1|t>>>31;for(var h=0;h<80;++h){var p=~~(h/20),m=c(r)+u(p,o,i,l)+s+n[h]+a[p]|0;s=l,l=i,i=d(o),o=r,r=m}this._a=r+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=l+this._d|0,this._e=s+this._e|0},s.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=s},function(e,t,n){var r=n(4),o=n(181),i=n(62),a=n(5).Buffer,l=new Array(64);function s(){this.init(),this._w=l,i.call(this,64,56)}r(s,o),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var e=a.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=s},function(e,t,n){var r=n(4),o=n(182),i=n(62),a=n(5).Buffer,l=new Array(160);function s(){this.init(),this._w=l,i.call(this,128,112)}r(s,o),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var e=a.allocUnsafe(48);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=s},function(e,t,n){"use strict";var r=n(4),o=n(5).Buffer,i=n(42),a=o.alloc(128);function l(e,t){i.call(this,"digest"),"string"==typeof t&&(t=o.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=o.concat([t,a],64));for(var n=this._ipad=o.allocUnsafe(64),r=this._opad=o.allocUnsafe(64),l=0;l<64;l++)n[l]=54^t[l],r[l]=92^t[l];this._hash=[n]}r(l,i),l.prototype._update=function(e){this._hash.push(e)},l.prototype._final=function(){var e=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,e]))},e.exports=l},function(e,t,n){e.exports=n(185)},function(e,t,n){(function(t,r){var o,i=n(187),a=n(188),l=n(189),s=n(5).Buffer,c=t.crypto&&t.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},u=[];function f(e,t,n,r,o){return c.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return c.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:o}},e,r<<3)})).then((function(e){return s.from(e)}))}e.exports=function(e,n,h,p,m,g){"function"==typeof m&&(g=m,m=void 0);var v=d[(m=m||"sha1").toLowerCase()];if(!v||"function"!=typeof t.Promise)return r.nextTick((function(){var t;try{t=l(e,n,h,p,m)}catch(e){return g(e)}g(null,t)}));if(i(e,n,h,p),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");s.isBuffer(e)||(e=s.from(e,a)),s.isBuffer(n)||(n=s.from(n,a)),function(e,t){e.then((function(e){r.nextTick((function(){t(null,e)}))}),(function(e){r.nextTick((function(){t(e)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==u[e])return u[e];var n=f(o=o||s.alloc(8),o,10,128,e).then((function(){return!0})).catch((function(){return!1}));return u[e]=n,n}(v).then((function(t){return t?f(e,n,h,p,v):l(e,n,h,p,m)})),g)}}).call(this,n(38),n(41))},function(e,t,n){var r=n(427),o=n(130),i=n(131),a=n(440),l=n(88);function s(e,t,n){if(e=e.toLowerCase(),i[e])return o.createCipheriv(e,t,n);if(a[e])return new r({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function c(e,t,n){if(e=e.toLowerCase(),i[e])return o.createDecipheriv(e,t,n);if(a[e])return new r({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var n,r;if(e=e.toLowerCase(),i[e])n=i[e].key,r=i[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");n=8*a[e].key,r=a[e].iv}var o=l(t,!1,n,r);return s(e,o.key,o.iv)},t.createCipheriv=t.Cipheriv=s,t.createDecipher=t.Decipher=function(e,t){var n,r;if(e=e.toLowerCase(),i[e])n=i[e].key,r=i[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");n=8*a[e].key,r=a[e].iv}var o=l(t,!1,n,r);return c(e,o.key,o.iv)},t.createDecipheriv=t.Decipheriv=c,t.listCiphers=t.getCiphers=function(){return Object.keys(a).concat(o.getCiphers())}},function(e,t,n){var r=n(42),o=n(428),i=n(4),a=n(5).Buffer,l={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function s(e){r.call(this);var t,n=e.mode.toLowerCase(),o=l[n];t=e.decrypt?"decrypt":"encrypt";var i=e.key;a.isBuffer(i)||(i=a.from(i)),"des-ede"!==n&&"des-ede-cbc"!==n||(i=a.concat([i,i.slice(0,8)]));var s=e.iv;a.isBuffer(s)||(s=a.from(s)),this._des=o.create({key:i,iv:s,type:t})}l.des=l["des-cbc"],l.des3=l["des-ede3-cbc"],e.exports=s,i(s,r),s.prototype._update=function(e){return a.from(this._des.update(e))},s.prototype._final=function(){return a.from(this._des.final())}},function(e,t,n){"use strict";t.utils=n(190),t.Cipher=n(129),t.DES=n(191),t.CBC=n(429),t.EDE=n(430)},function(e,t,n){"use strict";var r=n(23),o=n(4),i={};function a(e){r.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}o(t,e);for(var n=Object.keys(i),r=0;r<n.length;r++){var a=n[r];t.prototype[a]=i[a]}return t.create=function(e){return new t(e)},t},i._cbcInit=function(){var e=new a(this.options.iv);this._cbcState=e},i._update=function(e,t,n,r){var o=this._cbcState,i=this.constructor.super_.prototype,a=o.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)a[l]^=e[t+l];i._update.call(this,a,0,n,r);for(l=0;l<this.blockSize;l++)a[l]=n[r+l]}else{i._update.call(this,e,t,n,r);for(l=0;l<this.blockSize;l++)n[r+l]^=a[l];for(l=0;l<this.blockSize;l++)a[l]=e[t+l]}}},function(e,t,n){"use strict";var r=n(23),o=n(4),i=n(129),a=n(191);function l(e,t){r.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),o=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[a.create({type:"encrypt",key:n}),a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i})]:[a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o}),a.create({type:"decrypt",key:n})]}function s(e){i.call(this,e);var t=new l(this.type,this.options.key);this._edeState=t}o(s,i),e.exports=s,s.create=function(e){return new s(e)},s.prototype._update=function(e,t,n,r){var o=this._edeState;o.ciphers[0]._update(e,t,n,r),o.ciphers[1]._update(n,r,n,r),o.ciphers[2]._update(n,r,n,r)},s.prototype._pad=a.prototype._pad,s.prototype._unpad=a.prototype._unpad},function(e,t,n){var r=n(131),o=n(195),i=n(5).Buffer,a=n(196),l=n(42),s=n(87),c=n(88);function d(e,t,n){l.call(this),this._cache=new f,this._cipher=new s.AES(t),this._prev=i.from(n),this._mode=e,this._autopadding=!0}n(4)(d,l),d.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get();)n=this._mode.encrypt(this,t),r.push(n);return i.concat(r)};var u=i.alloc(16,16);function f(){this.cache=i.allocUnsafe(0)}function h(e,t,n){var l=r[e.toLowerCase()];if(!l)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=i.from(t)),t.length!==l.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=i.from(n)),"GCM"!==l.mode&&n.length!==l.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===l.type?new a(l.module,t,n):"auth"===l.type?new o(l.module,t,n):new d(l.module,t,n)}d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(u))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},f.prototype.add=function(e){this.cache=i.concat([this.cache,e])},f.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},f.prototype.flush=function(){for(var e=16-this.cache.length,t=i.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return i.concat([this.cache,t])},t.createCipheriv=h,t.createCipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var o=c(t,!1,n.key,n.iv);return h(e,o.key,o.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,n){var r=n(70);t.encrypt=function(e,t){var n=r(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var o=e._cipher.decryptBlock(t);return r(o,n)}},function(e,t,n){var r=n(5).Buffer,o=n(70);function i(e,t,n){var i=t.length,a=o(t,e._cache);return e._cache=e._cache.slice(i),e._prev=r.concat([e._prev,n?t:a]),a}t.encrypt=function(e,t,n){for(var o,a=r.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=r.allocUnsafe(0)),!(e._cache.length<=t.length)){a=r.concat([a,i(e,t,n)]);break}o=e._cache.length,a=r.concat([a,i(e,t.slice(0,o),n)]),t=t.slice(o)}return a}},function(e,t,n){var r=n(5).Buffer;function o(e,t,n){var o=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=r.concat([e._prev.slice(1),r.from([n?t:o])]),o}t.encrypt=function(e,t,n){for(var i=t.length,a=r.allocUnsafe(i),l=-1;++l<i;)a[l]=o(e,t[l],n);return a}},function(e,t,n){var r=n(5).Buffer;function o(e,t,n){for(var r,o,a=-1,l=0;++a<8;)r=t&1<<7-a?128:0,l+=(128&(o=e._cipher.encryptBlock(e._prev)[0]^r))>>a%8,e._prev=i(e._prev,n?r:o);return l}function i(e,t){var n=e.length,o=-1,i=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([t])]);++o<n;)i[o]=e[o]<<1|e[o+1]>>7;return i}t.encrypt=function(e,t,n){for(var i=t.length,a=r.allocUnsafe(i),l=-1;++l<i;)a[l]=o(e,t[l],n);return a}},function(e,t,n){(function(e){var r=n(70);function o(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,o(t)]);var i=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),r(n,i)}}).call(this,n(16).Buffer)},function(e,t,n){var r=n(5).Buffer,o=r.alloc(16,0);function i(e){var t=r.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function a(e){this.h=e,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}a.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},a.prototype._multiply=function(){for(var e,t,n,r=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],o=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(o[0]^=r[0],o[1]^=r[1],o[2]^=r[2],o[3]^=r[3]),n=0!=(1&r[3]),t=3;t>0;t--)r[t]=r[t]>>>1|(1&r[t-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=i(o)},a.prototype.update=function(e){var t;for(this.cache=r.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},a.prototype.final=function(e,t){return this.cache.length&&this.ghash(r.concat([this.cache,o],16)),this.ghash(i([0,e,0,t])),this.state},e.exports=a},function(e,t,n){var r=n(195),o=n(5).Buffer,i=n(131),a=n(196),l=n(42),s=n(87),c=n(88);function d(e,t,n){l.call(this),this._cache=new u,this._last=void 0,this._cipher=new s.AES(t),this._prev=o.from(n),this._mode=e,this._autopadding=!0}function u(){this.cache=o.allocUnsafe(0)}function f(e,t,n){var l=i[e.toLowerCase()];if(!l)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=o.from(n)),"GCM"!==l.mode&&n.length!==l.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=o.from(t)),t.length!==l.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===l.type?new a(l.module,t,n,!0):"auth"===l.type?new r(l.module,t,n,!0):new d(l.module,t,n)}n(4)(d,l),d.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),r.push(n);return o.concat(r)},d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},u.prototype.add=function(e){this.cache=o.concat([this.cache,e])},u.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},u.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var n=i[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=c(t,!1,n.key,n.iv);return f(e,r.key,r.iv)},t.createDecipheriv=f},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,n){(function(e){var r=n(197),o=n(444),i=n(445);var a={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var n=new e(o[t].prime,"hex"),r=new e(o[t].gen,"hex");return new i(n,r)},t.createDiffieHellman=t.DiffieHellman=function t(n,o,l,s){return e.isBuffer(o)||void 0===a[o]?t(n,"binary",o,l):(o=o||"binary",s=s||"binary",l=l||new e([2]),e.isBuffer(l)||(l=new e(l,s)),"number"==typeof n?new i(r(n,l),l,!0):(e.isBuffer(n)||(n=new e(n,o)),new i(n,l,!0)))}}).call(this,n(16).Buffer)},function(e,t){},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,n){(function(t){var r=n(13),o=new(n(198)),i=new r(24),a=new r(11),l=new r(10),s=new r(3),c=new r(7),d=n(197),u=n(61);function f(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._pub=new r(e),this}function h(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._priv=new r(e),this}e.exports=m;var p={};function m(e,t,n){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=f,this.setPrivateKey=h):this._primeCode=8}function g(e,n){var r=new t(e.toArray());return n?r.toString(n):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in p)return p[r];var u,f=0;if(e.isEven()||!d.simpleSieve||!d.fermatTest(e)||!o.test(e))return f+=1,f+="02"===n||"05"===n?8:4,p[r]=f,f;switch(o.test(e.shrn(1))||(f+=2),n){case"02":e.mod(i).cmp(a)&&(f+=8);break;case"05":(u=e.mod(l)).cmp(s)&&u.cmp(c)&&(f+=8);break;default:f+=4}return p[r]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new r(u(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var n=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),o=new t(n.toArray()),i=this.getPrime();if(o.length<i.length){var a=new t(i.length-o.length);a.fill(0),o=t.concat([a,o])}return o},m.prototype.getPublicKey=function(e){return g(this._pub,e)},m.prototype.getPrivateKey=function(e){return g(this._priv,e)},m.prototype.getPrime=function(e){return g(this.__prime,e)},m.prototype.getGenerator=function(e){return g(this._gen,e)},m.prototype.setGenerator=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.__gen=e,this._gen=new r(e),this}}).call(this,n(16).Buffer)},function(e,t,n){(function(t){var r=n(68),o=n(122),i=n(4),a=n(447),l=n(479),s=n(185);function c(e){o.Writable.call(this);var t=s[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){o.Writable.call(this);var t=s[e];if(!t)throw new Error("Unknown message digest");this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function u(e){return new c(e)}function f(e){return new d(e)}Object.keys(s).forEach((function(e){s[e].id=new t(s[e].id,"hex"),s[e.toLowerCase()]=s[e]})),i(c,o.Writable),c.prototype._write=function(e,t,n){this._hash.update(e),n()},c.prototype.update=function(e,n){return"string"==typeof e&&(e=new t(e,n)),this._hash.update(e),this},c.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),r=a(n,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},i(d,o.Writable),d.prototype._write=function(e,t,n){this._hash.update(e),n()},d.prototype.update=function(e,n){return"string"==typeof e&&(e=new t(e,n)),this._hash.update(e),this},d.prototype.verify=function(e,n,r){"string"==typeof n&&(n=new t(n,r)),this.end();var o=this._hash.digest();return l(n,o,e,this._signType,this._tag)},e.exports={Sign:u,Verify:f,createSign:u,createVerify:f}}).call(this,n(16).Buffer)},function(e,t,n){(function(t){var r=n(183),o=n(133),i=n(134).ec,a=n(13),l=n(90),s=n(208);function c(e,n,o,i){if((e=new t(e.toArray())).length<n.byteLength()){var a=new t(n.byteLength()-e.length);a.fill(0),e=t.concat([a,e])}var l=o.length,s=function(e,n){e=(e=d(e,n)).mod(n);var r=new t(e.toArray());if(r.length<n.byteLength()){var o=new t(n.byteLength()-r.length);o.fill(0),r=t.concat([o,r])}return r}(o,n),c=new t(l);c.fill(1);var u=new t(l);return u.fill(0),u=r(i,u).update(c).update(new t([0])).update(e).update(s).digest(),c=r(i,u).update(c).digest(),{k:u=r(i,u).update(c).update(new t([1])).update(e).update(s).digest(),v:c=r(i,u).update(c).digest()}}function d(e,t){var n=new a(e),r=(e.length<<3)-t.bitLength();return r>0&&n.ishrn(r),n}function u(e,n,o){var i,a;do{for(i=new t(0);8*i.length<e.bitLength();)n.v=r(o,n.k).update(n.v).digest(),i=t.concat([i,n.v]);a=d(i,e),n.k=r(o,n.k).update(n.v).update(new t([0])).digest(),n.v=r(o,n.k).update(n.v).digest()}while(-1!==a.cmp(e));return a}function f(e,t,n,r){return e.toRed(a.mont(n)).redPow(t).fromRed().mod(r)}e.exports=function(e,n,r,h,p){var m=l(n);if(m.curve){if("ecdsa"!==h&&"ecdsa/rsa"!==h)throw new Error("wrong private key type");return function(e,n){var r=s[n.curve.join(".")];if(!r)throw new Error("unknown curve "+n.curve.join("."));var o=new i(r).keyFromPrivate(n.privateKey).sign(e);return new t(o.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==h)throw new Error("wrong private key type");return function(e,n,r){var o,i=n.params.priv_key,l=n.params.p,s=n.params.q,h=n.params.g,p=new a(0),m=d(e,s).mod(s),g=!1,v=c(i,s,e,r);for(;!1===g;)o=u(s,v,r),p=f(h,o,l,s),0===(g=o.invm(s).imul(m.add(i.mul(p))).mod(s)).cmpn(0)&&(g=!1,p=new a(0));return function(e,n){e=e.toArray(),n=n.toArray(),128&e[0]&&(e=[0].concat(e));128&n[0]&&(n=[0].concat(n));var r=[48,e.length+n.length+4,2,e.length];return r=r.concat(e,[2,n.length],n),new t(r)}(p,g)}(e,m,r)}if("rsa"!==h&&"ecdsa/rsa"!==h)throw new Error("wrong private key type");e=t.concat([p,e]);for(var g=m.modulus.byteLength(),v=[0,1];e.length+v.length+1<g;)v.push(255);v.push(0);for(var b=-1;++b<e.length;)v.push(e[b]);return o(v,m)},e.exports.getKey=c,e.exports.makeKey=u}).call(this,n(16).Buffer)},function(e){e.exports=JSON.parse('{"_args":[["elliptic@6.5.2","D:\\\\projects\\\\WizTemplate\\\\WizDocument"]],"_development":true,"_from":"elliptic@6.5.2","_id":"elliptic@6.5.2","_inBundle":false,"_integrity":"sha512-f4x70okzZbIQl/NSRLkI/+tteV/9WqL98zx+SQ69KbXxmVrmjwsNUPn/gYJJ0sHvEak24cZgHIPegRePAtA/xw==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"elliptic@6.5.2","name":"elliptic","escapedName":"elliptic","rawSpec":"6.5.2","saveSpec":null,"fetchSpec":"6.5.2"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.2.tgz","_spec":"6.5.2","_where":"","author":{"name":"Fedor Indutny","email":""},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh:///indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.2"}')},function(e,t,n){"use strict";var r=n(24),o=n(13),i=n(4),a=n(89),l=r.assert;function s(e){a.call(this,"short",e),this.a=new o(e.a,16).toRed(this.red),this.b=new o(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,n,r){a.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new o(t,16),this.y=new o(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function d(e,t,n,r){a.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new o(0)):(this.x=new o(t,16),this.y=new o(n,16),this.z=new o(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(s,a),e.exports=s,s.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new o(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new o(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?n=i[0]:(n=i[1],l(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new o(e.a,16),b:new o(e.b,16)}})):this._getEndoBasis(n)}}},s.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:o.mont(e),n=new o(2).toRed(t).redInvm(),r=n.redNeg(),i=new o(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},s.prototype._getEndoBasis=function(e){for(var t,n,r,i,a,l,s,c,d,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,h=this.n.clone(),p=new o(1),m=new o(0),g=new o(0),v=new o(1),b=0;0!==f.cmpn(0);){var y=h.div(f);c=h.sub(y.mul(f)),d=g.sub(y.mul(p));var _=v.sub(y.mul(m));if(!r&&c.cmp(u)<0)t=s.neg(),n=p,r=c.neg(),i=d;else if(r&&2==++b)break;s=c,h=f,f=c,g=p,p=d,v=m,m=_}a=c.neg(),l=d;var S=r.sqr().add(i.sqr());return a.sqr().add(l.sqr()).cmp(S)>=0&&(a=t,l=n),r.negative&&(r=r.neg(),i=i.neg()),a.negative&&(a=a.neg(),l=l.neg()),[{a:r,b:i},{a:a,b:l}]},s.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],o=r.b.mul(e).divRound(this.n),i=n.b.neg().mul(e).divRound(this.n),a=o.mul(n.a),l=i.mul(r.a),s=o.mul(n.b),c=i.mul(r.b);return{k1:e.sub(a).sub(l),k2:s.add(c).neg()}},s.prototype.pointFromX=function(e,t){(e=new o(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},s.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(o).cmpn(0)},s.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,o=this._endoWnafT2,i=0;i<e.length;i++){var a=this._endoSplit(t[i]),l=e[i],s=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),s=s.neg(!0)),r[2*i]=l,r[2*i+1]=s,o[2*i]=a.k1,o[2*i+1]=a.k2}for(var c=this._wnafMulAdd(1,r,o,2*i,n),d=0;d<2*i;d++)r[d]=null,o[d]=null;return c},i(c,a.BasePoint),s.prototype.point=function(e,t,n){return new c(this,e,t,n)},s.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function o(t){return e.point(t[0],t[1],n)}var i=t[2];return r.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[r].concat(i.doubles.points.map(o))},naf:i.naf&&{wnd:i.naf.wnd,points:[r].concat(i.naf.points.map(o))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),i=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new o(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){var r=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,o):this.curve._wnafMulAdd(1,r,o,2)},c.prototype.jmulAdd=function(e,t,n){var r=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,o,!0):this.curve._wnafMulAdd(1,r,o,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(d,a.BasePoint),s.prototype.jpoint=function(e,t,n){return new d(this,e,t,n)},d.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},d.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},d.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),o=e.x.redMul(n),i=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),l=r.redSub(o),s=i.redSub(a);if(0===l.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=l.redSqr(),d=c.redMul(l),u=r.redMul(c),f=s.redSqr().redIAdd(d).redISub(u).redISub(u),h=s.redMul(u.redISub(f)).redISub(i.redMul(d)),p=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(f,h,p)},d.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),o=this.y,i=e.y.redMul(t).redMul(this.z),a=n.redSub(r),l=o.redSub(i);if(0===a.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var s=a.redSqr(),c=s.redMul(a),d=n.redMul(s),u=l.redSqr().redIAdd(c).redISub(d).redISub(d),f=l.redMul(d.redISub(u)).redISub(o.redMul(c)),h=this.z.redMul(a);return this.curve.jpoint(u,f,h)},d.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}var r=this.curve.a,o=this.curve.tinv,i=this.x,a=this.y,l=this.z,s=l.redSqr().redSqr(),c=a.redAdd(a);for(n=0;n<e;n++){var d=i.redSqr(),u=c.redSqr(),f=u.redSqr(),h=d.redAdd(d).redIAdd(d).redIAdd(r.redMul(s)),p=i.redMul(u),m=h.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=h.redMul(g);v=v.redIAdd(v).redISub(f);var b=c.redMul(l);n+1<e&&(s=s.redMul(f)),i=m,l=b,c=v}return this.curve.jpoint(i,c.redMul(o),l)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},d.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),o=this.y.redSqr(),i=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(r).redISub(i);a=a.redIAdd(a);var l=r.redAdd(r).redIAdd(r),s=l.redSqr().redISub(a).redISub(a),c=i.redIAdd(i);c=(c=c.redIAdd(c)).redIAdd(c),e=s,t=l.redMul(a.redISub(s)).redISub(c),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),u=this.y.redSqr(),f=u.redSqr(),h=this.x.redAdd(u).redSqr().redISub(d).redISub(f);h=h.redIAdd(h);var p=d.redAdd(d).redIAdd(d),m=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},d.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),o=this.y.redSqr(),i=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(r).redISub(i);a=a.redIAdd(a);var l=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),s=l.redSqr().redISub(a).redISub(a);e=s;var c=i.redIAdd(i);c=(c=c.redIAdd(c)).redIAdd(c),t=l.redMul(a.redISub(s)).redISub(c),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),u=this.y.redSqr(),f=this.x.redMul(u),h=this.x.redSub(d).redMul(this.x.redAdd(d));h=h.redAdd(h).redIAdd(h);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(u).redISub(d);var g=u.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=h.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},d.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,o=r.redSqr().redSqr(),i=t.redSqr(),a=n.redSqr(),l=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(o)),s=t.redAdd(t),c=(s=s.redIAdd(s)).redMul(a),d=l.redSqr().redISub(c.redAdd(c)),u=c.redISub(d),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=l.redMul(u).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(d,h,p)},d.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),o=e.redAdd(e).redIAdd(e),i=o.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(r),l=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(i)).redSqr(),s=r.redIAdd(r);s=(s=(s=s.redIAdd(s)).redIAdd(s)).redIAdd(s);var c=o.redIAdd(a).redSqr().redISub(i).redISub(l).redISub(s),d=t.redMul(c);d=(d=d.redIAdd(d)).redIAdd(d);var u=this.x.redMul(l).redISub(d);u=(u=u.redIAdd(u)).redIAdd(u);var f=this.y.redMul(c.redMul(s.redISub(c)).redISub(a.redMul(l)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=this.z.redAdd(a).redSqr().redISub(n).redISub(l);return this.curve.jpoint(u,f,h)},d.prototype.mul=function(e,t){return e=new o(e,t),this.curve._wnafMul(this,e)},d.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),o=n.redMul(e.z);return 0===this.y.redMul(o).redISub(e.y.redMul(r)).cmpn(0)},d.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),o=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),0===this.x.cmp(n))return!0}},d.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,n){"use strict";var r=n(13),o=n(4),i=n(89),a=n(24);function l(e){i.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function s(e,t,n){i.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}o(l,i),e.exports=l,l.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},o(s,i.BasePoint),l.prototype.decodePoint=function(e,t){return this.point(a.toArray(e,t),1)},l.prototype.point=function(e,t){return new s(this,e,t)},l.prototype.pointFromJSON=function(e){return s.fromJSON(this,e)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(e,t){return new s(e,t[0],t[1]||e.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},s.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),o=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,o)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),o=e.x.redAdd(e.z),i=e.x.redSub(e.z).redMul(n),a=o.redMul(r),l=t.z.redMul(i.redAdd(a).redSqr()),s=t.x.redMul(i.redISub(a).redSqr());return this.curve.point(l,s)},s.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),o=[];0!==t.cmpn(0);t.iushrn(1))o.push(t.andln(1));for(var i=o.length-1;i>=0;i--)0===o[i]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,n){"use strict";var r=n(24),o=n(13),i=n(4),a=n(89),l=r.assert;function s(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,a.call(this,"edwards",e),this.a=new o(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new o(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new o(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),l(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function c(e,t,n,r,i){a.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new o(t,16),this.y=new o(n,16),this.z=r?new o(r,16):this.curve.one,this.t=i&&new o(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(s,a),e.exports=s,s.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},s.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},s.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},s.prototype.pointFromX=function(e,t){(e=new o(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),i=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=r.redMul(i.redInvm()),l=a.redSqrt();if(0!==l.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var s=l.fromRed().isOdd();return(t&&!s||!t&&s)&&(l=l.redNeg()),this.point(e,l)},s.prototype.pointFromY=function(e,t){(e=new o(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=n.redSub(this.c2),i=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=r.redMul(i.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var l=a.redSqrt();if(0!==l.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return l.fromRed().isOdd()!==t&&(l=l.redNeg()),this.point(l,e)},s.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(o)},i(c,a.BasePoint),s.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},s.prototype.point=function(e,t,n,r){return new c(this,e,t,n,r)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=r.redAdd(t),a=i.redSub(n),l=r.redSub(t),s=o.redMul(a),c=i.redMul(l),d=o.redMul(l),u=a.redMul(i);return this.curve.point(s,c,u,d)},c.prototype._projDbl=function(){var e,t,n,r=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),i=this.y.redSqr();if(this.curve.twisted){var a=(c=this.curve._mulA(o)).redAdd(i);if(this.zOne)e=r.redSub(o).redSub(i).redMul(a.redSub(this.curve.two)),t=a.redMul(c.redSub(i)),n=a.redSqr().redSub(a).redSub(a);else{var l=this.z.redSqr(),s=a.redSub(l).redISub(l);e=r.redSub(o).redISub(i).redMul(s),t=a.redMul(c.redSub(i)),n=a.redMul(s)}}else{var c=o.redAdd(i);l=this.curve._mulC(this.z).redSqr(),s=c.redSub(l).redSub(l);e=this.curve._mulC(r.redISub(c)).redMul(s),t=this.curve._mulC(c).redMul(o.redISub(i)),n=c.redMul(s)}return this.curve.point(e,t,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),i=n.redSub(t),a=o.redSub(r),l=o.redAdd(r),s=n.redAdd(t),c=i.redMul(a),d=l.redMul(s),u=i.redMul(s),f=a.redMul(l);return this.curve.point(c,d,f,u)},c.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),o=r.redSqr(),i=this.x.redMul(e.x),a=this.y.redMul(e.y),l=this.curve.d.redMul(i).redMul(a),s=o.redSub(l),c=o.redAdd(l),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(a),u=r.redMul(s).redMul(d);return this.curve.twisted?(t=r.redMul(c).redMul(a.redSub(this.curve._mulA(i))),n=s.redMul(c)):(t=r.redMul(c).redMul(a.redSub(i)),n=this.curve._mulC(s).redMul(c)),this.curve.point(u,t,n)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},c.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(e,t,n){"use strict";t.sha1=n(453),t.sha224=n(454),t.sha256=n(202),t.sha384=n(455),t.sha512=n(203)},function(e,t,n){"use strict";var r=n(33),o=n(71),i=n(201),a=r.rotl32,l=r.sum32,s=r.sum32_5,c=i.ft_1,d=o.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(f,d),e.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=a(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var o=this.h[0],i=this.h[1],d=this.h[2],f=this.h[3],h=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),m=s(a(o,5),c(p,i,d,f),h,n[r],u[p]);h=f,f=d,d=a(i,30),i=o,o=m}this.h[0]=l(this.h[0],o),this.h[1]=l(this.h[1],i),this.h[2]=l(this.h[2],d),this.h[3]=l(this.h[3],f),this.h[4]=l(this.h[4],h)},f.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(33),o=n(202);function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(i,o),e.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(e,t,n){"use strict";var r=n(33),o=n(203);function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(i,o),e.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(e,t,n){"use strict";var r=n(33),o=n(71),i=r.rotl32,a=r.sum32,l=r.sum32_3,s=r.sum32_4,c=o.BlockHash;function d(){if(!(this instanceof d))return new d;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function f(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function h(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(d,c),t.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],o=this.h[2],c=this.h[3],d=this.h[4],b=n,y=r,_=o,S=c,E=d,C=0;C<80;C++){var T=a(i(s(n,u(C,r,o,c),e[p[C]+t],f(C)),g[C]),d);n=d,d=c,c=i(o,10),o=r,r=T,T=a(i(s(b,u(79-C,y,_,S),e[m[C]+t],h(C)),v[C]),E),b=E,E=S,S=i(_,10),_=y,y=T}T=l(this.h[1],o,S),this.h[1]=l(this.h[2],c,E),this.h[2]=l(this.h[3],d,b),this.h[3]=l(this.h[4],n,y),this.h[4]=l(this.h[0],r,_),this.h[0]=T},d.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,n){"use strict";var r=n(33),o=n(23);function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),o(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(13),i=n(460),a=n(24),l=n(135),s=n(132),c=a.assert,d=n(461),u=n(462);function f(e){if(!(this instanceof f))return new f(e);"string"==typeof e&&(c(l.hasOwnProperty(e),"Unknown curve "+e),e=l[e]),e instanceof l.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=f,f.prototype.keyPair=function(e){return new d(this,e)},f.prototype.keyFromPrivate=function(e,t){return d.fromPrivate(this,e,t)},f.prototype.keyFromPublic=function(e,t){return d.fromPublic(this,e,t)},f.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new o(2));;){var a=new o(t.generate(n));if(!(a.cmp(r)>0))return a.iaddn(1),this.keyFromPrivate(a)}},f.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},f.prototype.sign=function(e,t,n,a){"object"===r(n)&&(a=n,n=null),a||(a={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new o(e,16));for(var l=this.n.byteLength(),s=t.getPrivate().toArray("be",l),c=e.toArray("be",l),d=new i({hash:this.hash,entropy:s,nonce:c,pers:a.pers,persEnc:a.persEnc||"utf8"}),f=this.n.sub(new o(1)),h=0;;h++){var p=a.k?a.k(h):new o(d.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(f)>=0)){var m=this.g.mul(p);if(!m.isInfinity()){var g=m.getX(),v=g.umod(this.n);if(0!==v.cmpn(0)){var b=p.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var y=(m.getY().isOdd()?1:0)|(0!==g.cmp(v)?2:0);return a.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),y^=1),new u({r:v,s:b,recoveryParam:y})}}}}}},f.prototype.verify=function(e,t,n,r){e=this._truncateToN(new o(e,16)),n=this.keyFromPublic(n,r);var i=(t=new u(t,"hex")).r,a=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var l,s=a.invm(this.n),c=s.mul(e).umod(this.n),d=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(l=this.g.jmulAdd(c,n.getPublic(),d)).isInfinity()&&l.eqXToP(i):!(l=this.g.mulAdd(c,n.getPublic(),d)).isInfinity()&&0===l.getX().umod(this.n).cmp(i)},f.prototype.recoverPubKey=function(e,t,n,r){c((3&n)===n,"The recovery param is more than two bits"),t=new u(t,r);var i=this.n,a=new o(e),l=t.r,s=t.s,d=1&n,f=n>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");l=f?this.curve.pointFromX(l.add(this.curve.n),d):this.curve.pointFromX(l,d);var h=t.r.invm(i),p=i.sub(a).mul(h).umod(i),m=s.mul(h).umod(i);return this.g.mulAdd(p,l,m)},f.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new u(t,r)).recoveryParam)return t.recoveryParam;for(var o=0;o<4;o++){var i;try{i=this.recoverPubKey(e,t,o)}catch(e){continue}if(i.eq(n))return o}throw new Error("Unable to find valid recovery factor")}},function(e,t,n){"use strict";var r=n(136),o=n(199),i=n(23);function a(e){if(!(this instanceof a))return new a(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=o.toArray(e.entropy,e.entropyEnc||"hex"),n=o.toArray(e.nonce,e.nonceEnc||"hex"),r=o.toArray(e.pers,e.persEnc||"hex");i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}e.exports=a,a.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=o.toArray(e,t),n=o.toArray(n,r),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},a.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=n,n=t,t=null),n&&(n=o.toArray(n,r||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(n),this._reseed++,o.encode(a,t)}},function(e,t,n){"use strict";var r=n(13),o=n(24).assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=i,i.fromPublic=function(e,t,n){return t instanceof i?t:new i(e,{pub:t,pubEnc:n})},i.fromPrivate=function(e,t,n){return t instanceof i?t:new i(e,{priv:t,privEnc:n})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?o(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||o(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.mul(this.priv).getX()},i.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,n){"use strict";var r=n(13),o=n(24),i=o.assert;function a(e,t){if(e instanceof a)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function l(){this.place=0}function s(e,t){var n=e[t.place++];if(!(128&n))return n;for(var r=15&n,o=0,i=0,a=t.place;i<r;i++,a++)o<<=8,o|=e[a];return t.place=a,o}function c(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function d(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=a,a.prototype._importDER=function(e,t){e=o.toArray(e,t);var n=new l;if(48!==e[n.place++])return!1;if(s(e,n)+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var i=s(e,n),a=e.slice(n.place,i+n.place);if(n.place+=i,2!==e[n.place++])return!1;var c=s(e,n);if(e.length!==c+n.place)return!1;var d=e.slice(n.place,c+n.place);return 0===a[0]&&128&a[1]&&(a=a.slice(1)),0===d[0]&&128&d[1]&&(d=d.slice(1)),this.r=new r(a),this.s=new r(d),this.recoveryParam=null,!0},a.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=c(t),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];d(r,t.length),(r=r.concat(t)).push(2),d(r,n.length);var i=r.concat(n),a=[48];return d(a,i.length),a=a.concat(i),o.encode(a,e)}},function(e,t,n){"use strict";var r=n(136),o=n(135),i=n(24),a=i.assert,l=i.parseBytes,s=n(464),c=n(465);function d(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof d))return new d(e);e=o[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=d,d.prototype.sign=function(e,t){e=l(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),o=this.g.mul(r),i=this.encodePoint(o),a=this.hashInt(i,n.pubBytes(),e).mul(n.priv()),s=r.add(a).umod(this.curve.n);return this.makeSignature({R:o,S:s,Rencoded:i})},d.prototype.verify=function(e,t,n){e=l(e),t=this.makeSignature(t);var r=this.keyFromPublic(n),o=this.hashInt(t.Rencoded(),r.pubBytes(),e),i=this.g.mul(t.S());return t.R().add(r.pub().mul(o)).eq(i)},d.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(e){return s.fromPublic(this,e)},d.prototype.keyFromSecret=function(e){return s.fromSecret(this,e)},d.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},d.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},d.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),o=i.intFromLE(n);return this.curve.pointFromY(o,r)},d.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(e){return i.intFromLE(e)},d.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,n){"use strict";var r=n(24),o=r.assert,i=r.parseBytes,a=r.cachedProperty;function l(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}l.fromPublic=function(e,t){return t instanceof l?t:new l(e,{pub:t})},l.fromSecret=function(e,t){return t instanceof l?t:new l(e,{secret:t})},l.prototype.secret=function(){return this._secret},a(l,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(l,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(l,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),a(l,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(l,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(l,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),l.prototype.sign=function(e){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},l.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},l.prototype.getSecret=function(e){return o(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},l.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=l},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(13),i=n(24),a=i.assert,l=i.cachedProperty,s=i.parseBytes;function c(e,t){this.eddsa=e,"object"!==r(t)&&(t=s(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof o&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}l(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),l(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),l(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),l(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},function(e,t,n){"use strict";var r=n(72);t.certificate=n(476);var o=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=o;var i=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=i;var a=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(l),this.key("subjectPublicKey").bitstr())}));t.PublicKey=a;var l=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),s=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(l),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=s;var c=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=c;var d=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=d,t.DSAparam=r.define("DSAparam",(function(){this.int()}));var u=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=u;var f=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t,n){var r=n(72),o=n(4);function i(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new i(e,t)},i.prototype._createNamed=function(e){var t;try{t=n(468).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){t=function(e){this._initNamed(e)}}return o(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},i.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r.decoders[e])),this.decoders[e]},i.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},i.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r.encoders[e])),this.encoders[e]},i.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},function(module,exports){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,o=n.execScript;!r&&o&&(o.call(n,"null"),r=n.eval),forEach(Object_keys(e),(function(t){n[t]=e[t]})),forEach(globals,(function(t){e[t]&&(n[t]=e[t])}));var i=Object_keys(n),a=r.call(n,this.code);return forEach(Object_keys(n),(function(t){(t in e||-1===indexOf(i,t))&&(e[t]=n[t])})),forEach(globals,(function(t){t in e||defineProp(e,t,n[t])})),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return e&&forEach(Object_keys(t),(function(n){e[n]=t[n]})),n},forEach(Object_keys(Script.prototype),(function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}})),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"===_typeof(e)&&forEach(Object_keys(e),(function(n){t[n]=e[n]})),t}},function(e,t,n){var r=n(4);function o(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}t.Reporter=o,o.prototype.isError=function(e){return e instanceof i},o.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},o.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},o.prototype.enterKey=function(e){return this._reporterState.path.push(e)},o.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},o.prototype.leaveKey=function(e,t,n){var r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},o.prototype.path=function(){return this._reporterState.path.join("/")},o.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},o.prototype.leaveObject=function(e){var t=this._reporterState,n=t.obj;return t.obj=e,n},o.prototype.error=function(e){var t,n=this._reporterState,r=e instanceof i;if(t=r?e:new i(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},o.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},r(i,Error),i.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(73).Reporter,i=n(73).EncoderBuffer,a=n(73).DecoderBuffer,l=n(23),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function d(e,t){var n={};this._baseState=n,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}e.exports=d;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];d.prototype.clone=function(){var e=this._baseState,t={};u.forEach((function(n){t[n]=e[n]}));var n=new this.constructor(t.parent);return n._baseState=t,n},d.prototype._wrap=function(){var e=this._baseState;c.forEach((function(t){this[t]=function(){var n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},d.prototype._init=function(e){var t=this._baseState;l(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),l.equal(t.children.length,1,"Root node can have only one child")},d.prototype._useArgs=function(e){var t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(l(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(l(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!==r(e)||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);var r=e[n];t[r]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){d.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),s.forEach((function(e){d.prototype[e]=function(){var t=this._baseState,n=Array.prototype.slice.call(arguments);return l(null===t.tag),t.tag=e,this._useArgs(n),this}})),d.prototype.use=function(e){l(e);var t=this._baseState;return l(null===t.use),t.use=e,this},d.prototype.optional=function(){return this._baseState.optional=!0,this},d.prototype.def=function(e){var t=this._baseState;return l(null===t.default),t.default=e,t.optional=!0,this},d.prototype.explicit=function(e){var t=this._baseState;return l(null===t.explicit&&null===t.implicit),t.explicit=e,this},d.prototype.implicit=function(e){var t=this._baseState;return l(null===t.explicit&&null===t.implicit),t.implicit=e,this},d.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},d.prototype.key=function(e){var t=this._baseState;return l(null===t.key),t.key=e,this},d.prototype.any=function(){return this._baseState.any=!0,this},d.prototype.choice=function(e){var t=this._baseState;return l(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},d.prototype.contains=function(e){var t=this._baseState;return l(null===t.use),t.contains=e,this},d.prototype._decode=function(e,t){var n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));var r,o=n.default,i=!0,l=null;if(null!==n.key&&(l=e.enterKey(n.key)),n.optional){var s=null;if(null!==n.explicit?s=n.explicit:null!==n.implicit?s=n.implicit:null!==n.tag&&(s=n.tag),null!==s||n.any){if(i=this._peekTag(e,s,n.any),e.isError(i))return i}else{var c=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),i=!0}catch(e){i=!1}e.restore(c)}}if(n.obj&&i&&(r=e.enterObject()),i){if(null!==n.explicit){var d=this._decodeTag(e,n.explicit);if(e.isError(d))return d;e=d}var u=e.offset;if(null===n.use&&null===n.choice){if(n.any)c=e.save();var f=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(f))return f;n.any?o=e.raw(c):e=f}if(t&&t.track&&null!==n.tag&&t.track(e.path(),u,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),o=n.any?o:null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),e.isError(o))return o;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var h=new a(o);o=this._getUse(n.contains,e._reporterState.obj)._decode(h,t)}}return n.obj&&i&&(o=e.leaveObject(r)),null===n.key||null===o&&!0!==i?null!==l&&e.exitKey(l):e.leaveKey(l,n.key,o),o},d.prototype._decodeGeneric=function(e,t,n){var r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},d.prototype._getUse=function(e,t){var n=this._baseState;return n.useDecoder=this._use(e,t),l(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},d.prototype._decodeChoice=function(e,t){var n=this._baseState,r=null,o=!1;return Object.keys(n.choice).some((function(i){var a=e.save(),l=n.choice[i];try{var s=l._decode(e,t);if(e.isError(s))return!1;r={type:i,value:s},o=!0}catch(t){return e.restore(a),!1}return!0}),this),o?r:e.error("Choice not matched")},d.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},d.prototype._encode=function(e,t,n){var r=this._baseState;if(null===r.default||r.default!==e){var o=this._encodeValue(e,t,n);if(void 0!==o&&!this._skipDefault(o,t,n))return o}},d.prototype._encodeValue=function(e,t,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new o);var a=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var l=null,s=!1;if(i.any)a=this._createEncoderBuffer(e);else if(i.choice)a=this._encodeChoice(e,t);else if(i.contains)l=this._getUse(i.contains,n)._encode(e,t),s=!0;else if(i.children)l=i.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");var o=t.enterKey(n._baseState.key);if("object"!==r(e))return t.error("Child expected, but input is not object");var i=n._encode(e[n._baseState.key],t,e);return t.leaveKey(o),i}),this).filter((function(e){return e})),l=this._createEncoderBuffer(l);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var c=this.clone();c._baseState.implicit=null,l=this._createEncoderBuffer(e.map((function(n){var r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)}),c))}else null!==i.use?a=this._getUse(i.use,n)._encode(e,t):(l=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&null===i.choice){var d=null!==i.implicit?i.implicit:i.tag,u=null===i.implicit?"universal":"context";null===d?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(a=this._encodeComposite(d,s,u,l))}return null!==i.explicit&&(a=this._encodeComposite(i.explicit,!1,"context",a)),a},d.prototype._encodeChoice=function(e,t){var n=this._baseState,r=n.choice[e.type];return r||l(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},d.prototype._encodePrimitive=function(e,t){var n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},d.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},d.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}},function(e,t,n){var r=n(205);t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=r._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=r._reverse(t.tag)},function(e,t,n){var r=t;r.der=n(206),r.pem=n(473)},function(e,t,n){var r=n(4),o=n(16).Buffer,i=n(206);function a(e){i.call(this,e),this.enc="pem"}r(a,i),e.exports=a,a.prototype.decode=function(e,t){for(var n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,l=-1,s=-1,c=0;c<n.length;c++){var d=n[c].match(a);if(null!==d&&d[2]===r){if(-1!==l){if("END"!==d[1])break;s=c;break}if("BEGIN"!==d[1])break;l=c}}if(-1===l||-1===s)throw new Error("PEM section not found for: "+r);var u=n.slice(l+1,s).join("");u.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new o(u,"base64");return i.prototype.decode.call(this,f,t)}},function(e,t,n){var r=t;r.der=n(207),r.pem=n(475)},function(e,t,n){var r=n(4),o=n(207);function i(e){o.call(this,e),this.enc="pem"}r(i,o),e.exports=i,i.prototype.encode=function(e,t){for(var n=o.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+t.label+"-----"],i=0;i<n.length;i+=64)r.push(n.slice(i,i+64));return r.push("-----END "+t.label+"-----"),r.join("\n")}},function(e,t,n){"use strict";var r=n(72),o=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),i=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),l=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),s=r.define("RelativeDistinguishedName",(function(){this.setof(i)})),c=r.define("RDNSequence",(function(){this.seqof(s)})),d=r.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),u=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))})),f=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),h=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(d),this.key("validity").use(u),this.key("subject").use(d),this.key("subjectPublicKeyInfo").use(l),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),p=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));e.exports=p},function(e){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(e,t,n){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,a=n(88),l=n(130),s=n(5).Buffer;e.exports=function(e,t){var n,c=e.toString(),d=c.match(r);if(d){var u="aes"+d[1],f=s.from(d[2],"hex"),h=s.from(d[3].replace(/[\r\n]/g,""),"base64"),p=a(t,f.slice(0,8),parseInt(d[1],10)).key,m=[],g=l.createDecipheriv(u,p,f);m.push(g.update(h)),m.push(g.final()),n=s.concat(m)}else{var v=c.match(i);n=new s(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(o)[1],data:n}}},function(e,t,n){(function(t){var r=n(13),o=n(134).ec,i=n(90),a=n(208);function l(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,n,s,c,d){var u=i(s);if("ec"===u.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var r=a[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var i=new o(r),l=n.data.subjectPrivateKey.data;return i.verify(t,e,l)}(e,n,u)}if("dsa"===u.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var o=n.data.p,a=n.data.q,s=n.data.g,c=n.data.pub_key,d=i.signature.decode(e,"der"),u=d.s,f=d.r;l(u,a),l(f,a);var h=r.mont(o),p=u.invm(a);return 0===s.toRed(h).redPow(new r(t).mul(p).mod(a)).fromRed().mul(c.toRed(h).redPow(f.mul(p).mod(a)).fromRed()).mod(o).mod(a).cmp(f)}(e,n,u)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");n=t.concat([d,n]);for(var f=u.modulus.byteLength(),h=[1],p=0;n.length+h.length+2<f;)h.push(255),p++;h.push(0);for(var m=-1;++m<n.length;)h.push(n[m]);h=new t(h);var g=r.mont(u.modulus);e=(e=new r(e).toRed(g)).redPow(new r(u.publicExponent)),e=new t(e.fromRed().toArray());var v=p<8?1:0;for(f=Math.min(e.length,h.length),e.length!==h.length&&(v=1),m=-1;++m<f;)v|=e[m]^h[m];return 0===v}}).call(this,n(16).Buffer)},function(e,t,n){(function(t){var r=n(134),o=n(13);e.exports=function(e){return new a(e)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(e){this.curveType=i[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function l(e,n,r){Array.isArray(e)||(e=e.toArray());var o=new t(e);if(r&&o.length<r){var i=new t(r-o.length);i.fill(0),o=t.concat([i,o])}return n?o.toString(n):o}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,a.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},a.prototype.computeSecret=function(e,n,r){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),l(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},a.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),l(n,e)},a.prototype.getPrivateKey=function(e){return l(this.keys.getPrivate(),e)},a.prototype.setPublicKey=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.keys._importPublic(e),this},a.prototype.setPrivateKey=function(e,n){n=n||"utf8",t.isBuffer(e)||(e=new t(e,n));var r=new o(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this,n(16).Buffer)},function(e,t,n){t.publicEncrypt=n(482),t.privateDecrypt=n(483),t.privateEncrypt=function(e,n){return t.publicEncrypt(e,n,!0)},t.publicDecrypt=function(e,n){return t.privateDecrypt(e,n,!0)}},function(e,t,n){var r=n(90),o=n(61),i=n(68),a=n(209),l=n(210),s=n(13),c=n(211),d=n(133),u=n(5).Buffer;e.exports=function(e,t,n){var f;f=e.padding?e.padding:n?1:4;var h,p=r(e);if(4===f)h=function(e,t){var n=e.modulus.byteLength(),r=t.length,c=i("sha1").update(u.alloc(0)).digest(),d=c.length,f=2*d;if(r>n-f-2)throw new Error("message too long");var h=u.alloc(n-r-f-2),p=n-d-1,m=o(d),g=l(u.concat([c,h,u.alloc(1,1),t],p),a(m,p)),v=l(m,a(g,d));return new s(u.concat([u.alloc(1),v,g],n))}(p,t);else if(1===f)h=function(e,t,n){var r,i=t.length,a=e.modulus.byteLength();if(i>a-11)throw new Error("message too long");r=n?u.alloc(a-i-3,255):function(e){var t,n=u.allocUnsafe(e),r=0,i=o(2*e),a=0;for(;r<e;)a===i.length&&(i=o(2*e),a=0),(t=i[a++])&&(n[r++]=t);return n}(a-i-3);return new s(u.concat([u.from([0,n?1:2]),r,u.alloc(1),t],a))}(p,t,n);else{if(3!==f)throw new Error("unknown padding");if((h=new s(t)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?d(h,p):c(h,p)}},function(e,t,n){var r=n(90),o=n(209),i=n(210),a=n(13),l=n(133),s=n(68),c=n(211),d=n(5).Buffer;e.exports=function(e,t,n){var u;u=e.padding?e.padding:n?1:4;var f,h=r(e),p=h.modulus.byteLength();if(t.length>p||new a(t).cmp(h.modulus)>=0)throw new Error("decryption error");f=n?c(new a(t),h):l(t,h);var m=d.alloc(p-f.length);if(f=d.concat([m,f],p),4===u)return function(e,t){var n=e.modulus.byteLength(),r=s("sha1").update(d.alloc(0)).digest(),a=r.length;if(0!==t[0])throw new Error("decryption error");var l=t.slice(1,a+1),c=t.slice(a+1),u=i(l,o(c,a)),f=i(c,o(u,n-a-1));if(function(e,t){e=d.from(e),t=d.from(t);var n=0,r=e.length;e.length!==t.length&&(n++,r=Math.min(e.length,t.length));var o=-1;for(;++o<r;)n+=e[o]^t[o];return n}(r,f.slice(0,a)))throw new Error("decryption error");var h=a;for(;0===f[h];)h++;if(1!==f[h++])throw new Error("decryption error");return f.slice(h)}(h,f);if(1===u)return function(e,t,n){var r=t.slice(0,2),o=2,i=0;for(;0!==t[o++];)if(o>=t.length){i++;break}var a=t.slice(2,o-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&i++;a.length<8&&i++;if(i)throw new Error("decryption error");return t.slice(o)}(0,f,n);if(3===u)return f;throw new Error("unknown padding")}},function(e,t,n){"use strict";(function(e,r){function o(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var i=n(5),a=n(61),l=i.Buffer,s=i.kMaxLength,c=e.crypto||e.msCrypto,d=Math.pow(2,32)-1;function u(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>d||e<0)throw new TypeError("offset must be a uint32");if(e>s||e>t)throw new RangeError("offset out of range")}function f(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>d||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>s)throw new RangeError("buffer too small")}function h(e,t,n,o){if(r.browser){var i=e.buffer,l=new Uint8Array(i,t,n);return c.getRandomValues(l),o?void r.nextTick((function(){o(null,e)})):e}if(!o)return a(n).copy(e,t),e;a(n,(function(n,r){if(n)return o(n);r.copy(e,t),o(null,e)}))}c&&c.getRandomValues||!r.browser?(t.randomFill=function(t,n,r,o){if(!(l.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)o=n,n=0,r=t.length;else if("function"==typeof r)o=r,r=t.length-n;else if("function"!=typeof o)throw new TypeError('"cb" argument must be a function');return u(n,t.length),f(r,n,t.length),h(t,n,r,o)},t.randomFillSync=function(t,n,r){void 0===n&&(n=0);if(!(l.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');u(n,t.length),void 0===r&&(r=t.length-n);return f(r,n,t.length),h(t,n,r)}):(t.randomFill=o,t.randomFillSync=o)}).call(this,n(38),n(41))},function(e,t,n){var r=n(212),o=n(215),i=n(488);function a(e,t){return new i(t).process(e)}for(var l in(t=e.exports=a).filterXSS=a,t.FilterXSS=i,r)t[l]=r[l];for(var l in o)t[l]=o[l];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},function(e,t,n){var r=n(213),o=n(487);n(214);function i(e){return null==e}function a(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,a=t.onIgnoreAttr,l=t.safeAttrValue;return o(e,(function(e,t,o,s,c){var d=n[o],u=!1;if(!0===d?u=d:"function"==typeof d?u=d(s):d instanceof RegExp&&(u=d.test(s)),!0!==u&&(u=!1),s=l(o,s)){var f,h={position:t,sourcePosition:e,source:c,isWhite:u};return u?i(f=r(o,s,h))?o+":"+s:f:i(f=a(o,s,h))?void 0:f}}))},e.exports=a},function(e,t,n){var r=n(214);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,o=!1,i=0,a=0,l="";function s(){if(!o){var n=r.trim(e.slice(i,a)),s=n.indexOf(":");if(-1!==s){var c=r.trim(n.slice(0,s)),d=r.trim(n.slice(s+1));if(c){var u=t(i,l.length,c,d,n);u&&(l+=u+"; ")}}}i=a+1}for(;a<n;a++){var c=e[a];if("/"===c&&"*"===e[a+1]){var d=e.indexOf("*/",a+2);if(-1===d)break;i=(a=d+1)+1,o=!1}else"("===c?o=!0:")"===c?o=!1:";"===c?o||s():"\n"===c&&s()}return r.trim(l)}},function(e,t,n){var r=n(138).FilterCSS,o=n(212),i=n(215),a=i.parseTag,l=i.parseAttr,s=n(139);function c(e){return null==e}function d(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList=e.whiteList||o.whiteList,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}d.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,d=t.onTagAttr,u=t.onIgnoreTagAttr,f=t.safeAttrValue,h=t.escapeHtml,p=this.cssFilter;t.stripBlankChar&&(e=o.stripBlankChar(e)),t.allowCommentTag||(e=o.stripCommentTag(e));var m=!1;if(t.stripIgnoreTagBody){m=o.StripTagBody(t.stripIgnoreTagBody,i);i=m.onIgnoreTag}var g=a(e,(function(e,t,o,a,m){var g,v={sourcePosition:e,position:t,isClosing:m,isWhite:n.hasOwnProperty(o)};if(!c(g=r(o,a,v)))return g;if(v.isWhite){if(v.isClosing)return"</"+o+">";var b=function(e){var t=s.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=s.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=s.trim(e.slice(0,-1))),{html:e,closing:n}}(a),y=n[o],_=l(b.html,(function(e,t){var n,r=-1!==s.indexOf(y,e);return c(n=d(o,e,t,r))?r?(t=f(o,e,t,p))?e+'="'+t+'"':e:c(n=u(o,e,t,r))?void 0:n:n}));a="<"+o;return _&&(a+=" "+_),b.closing&&(a+=" /"),a+=">"}return c(g=i(o,a,v))?h(a):g}),h);return m&&(g=m.remove(g)),g},e.exports=d},function(e,t,n){var r=n(1),o=n(91),i=n(3),a=n(63),l=navigator.userAgent;function s(e,t){var n;if(t)for(n in e)e.hasOwnProperty(n)&&void 0!==t[n]&&(/^(editor|reader|lazyLoad|wizTemplate|pureReadMode|nightMode|documentData|callback|timeout|markdownPlugIn|ios|pc|table|code)$/.test(n)?s(e[n],t[n]):e[n]=t[n])}e.exports=function(e){var t=function(e){var t=this,n={},o="1"===i.storage.get(r.CODE.StorageKey.Wrap),a={options:{document:null,container:null,useFrame:!1,lazyLoad:{enable:!1},htmlBaseUrl:"",lang:"en",clientType:"",userInfo:null,usersData:[],userNameEncoder:"",dependencyUrl:"",wizTemplate:{url:""},pureReadMode:{enable:!1,needContentExtraction:!1,borderColor:"",htmlBgColor:"",bodyBgColor:""},nightMode:{enable:!1,color:"",bgColor:"",brightness:""},editor:{type:r.NOTE_EDITOR_TYPE.COMMON,autoFocus:!0,autoCheckLink:!0,minHeight:300,maxUndo:100,customFixScrollBodyBottom:0,callback:{undo:null,markerUndo:null,markerInitiated:null,onKeyDown:null,onClick:null,onPasteFile:null,onDropFile:null,onClickToolbarInsertImg:null,onClickToolbarHelp:null,onReuploadImage:null,onUploadImage:null}},reader:{type:r.NOTE_READER_TYPE.COMMON,minHeight:300,codeNoIDE:!1,autoEdit:!1,noAmend:!1,clickImageEvent:"dblclick",markdownPlugIn:{imgSrcFilter:null,customBlockGamut:null},callback:{beforeMarkdownRender:null,markdown:null,mathJax:null,onClick:null,onAutoEdit:null},timeout:{markdown:3e4,mathJax:3e4}},callback:{onClickLink:null,onChangeMinderToolsMenuStatus:null},clientRoute:{getUserAlias:null,getUserAvatarFileName:null,getUserGuid:null,hasPermission:null,isPersonalDocument:null,checkDocLock:null,getOriginalDoc:null,saveDoc:null},pc:{pluginModified:!1},table:{colWidth:120,colWidthMin:30,rowHeightMin:33},code:{lineWrapping:o},outline:{hideMinderMenu:!1,minderMenuShowMethod:"click"}},locale:{},win:null,doc:null,body:null,documentType:r.DOCUMENT_TYPE.COMMON,scrollContainer:null,readonly:null,isAutoReaderToEditor:!1,isShowPreview:!1,isSetBodyFontSize:!1,isWizTemplate:null,compositionStart:!1,compositionStartRange:null,indexFilesPath:"",indexFilesFullPath:"",supportTouchEvent:!1,frame:{dom:null,toolbarDoc:null,toolbarContainer:null,bodyContainer:null},dependency:{files:{css:{fonts:"".concat(e,"/fonts.css?v=").concat(r.version),github2:"".concat(e,"/github2.css?v=").concat(r.version),kityminder:"".concat(e,"/minder/kityminder.core.css?v=").concat(r.minderVersion),wizToc:"".concat(e,"/wizToc.css?v=").concat(r.version)},cursor:{formatPainter:"".concat(e,"/format-painter-wiz.cur?v=").concat(r.version)},js:{codemirror:"".concat(e,"/codemirror/codemirror.js?v=").concat(r.version),cmSimple:"".concat(e,"/codemirror/addon/mode/simple.js?v=").concat(r.version),cmActiveLine:"".concat(e,"/codemirror/addon/selection/active-line.js?v=").concat(r.version),cmMatchBrackets:"".concat(e,"/codemirror/addon/edit/matchbrackets.js?v=").concat(r.version),cmMode:"".concat(e,"/codemirror/mode/mode.js?v=").concat(r.version),flowchart:"".concat(e,"/flowchart.js?v=").concat(r.version),jquery:"".concat(e,"/jquery-3.3.1.js?v=").concat(r.version),kity:"".concat(e,"/minder/kity.min.js?v=").concat(r.minderVersion),kityminder:"".concat(e,"/minder/kityminder.core.min.js?v=").concat(r.minderVersion),mathJax:"".concat(e,"/mathjax/MathJax.js?config=TeX-AMS-MML_SVG&v=").concat(r.version),prettify:"".concat(e,"/prettify.js?v=").concat(r.version),raphael:"".concat(e,"/raphael.js?v=").concat(r.version),sequence:"".concat(e,"/sequence-diagram.js?v=").concat(r.version),underscore:"".concat(e,"/underscore.js?v=").concat(r.version),wizContent:"".concat(e,"/WizContent.js?v=").concat(r.wizContentVersion),wizPainter:"".concat(e,"/painter/WizSvgPainter.js?v=").concat(r.wizPainterVersion),wizTemplate:""}},css:{fonts:["fonts"],markdown:["github2","wizToc"],minder:["kityminder"]},js:{codeMirror:[["codemirror"],["cmSimple","cmActiveLine","cmMatchBrackets","cmMode"]],markdown:[["jquery"],["prettify","raphael","underscore"],["flowchart","sequence"]],mathJax:[["jquery"],["mathJax"]],minder:[["kity"],["kityminder"]],wizContent:[["wizContent"]],wizPainter:[["wizPainter"]],wizTemplate:[["wizTemplate"]]}},client:{type:{isWeb:location&&0===location.protocol.indexOf("http"),isWin:!1,isMac:!1,isLinux:!1,isIOS:!1,isAndroid:!1,isPad:!1,isPhone:!1},sendCmdToWizClient:function(){}},browser:{isAndroid:!!l.match(/Android/i),isIOS:!!l.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/i),isIPad:!!l.match(/iPad/i),isIPhone:!!l.match(/iPhone/i),isLinux:!!l.match(/Linux/i),isMac:!!l.match(/Macintosh/i),isMobile:!!l.match(/AppleWebKit.*Mobile.*/i),isWeChat:!!l.match(/MicroMessenger/i),isWindows:!!l.match(/Window/i),isIe:!!l.match(/msie|trident/i)}};return a.event={isPause:function(e){return!!a.event[e+"_pause"]},setPause:function(e,t){a.event[e+"_pause"]=!!t},add:function(e,t){var r=n[e];r||(r=[]);e&&t&&!function(e,t){if(!e||!t)return!1;var r,o,i=n[e];if(!i||0===i.length)return!1;for(r=0,o=i.length;r<o;r++)if(i[r]===t)return!0;return!1}(e,t)&&(r.push(t),n[e]=r)},call:function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i,l,s=r.shift();if(eList=n[s],eList&&0!==eList.length&&!a.event.isPause(s)){var c=[];for(i=0,l=eList.length;i<l;i++)c.push(eList[i]);for(i=0,l=c.length;i<l;i++)c[i].apply(t,r)}},remove:function(e,t){if(e&&t){var r,o,i=n[e];if(i&&0!==i.length)for(r=0,o=i.length;r<o;r++)i[r]===t&&i.splice(r,1)}}},a}(e.dependencyUrl.replace(/\\/g,"/"));s(t.options,e),t.readonly=null;var n,c=t.options.document||window.document;t.doc=c,t.win=t.doc.defaultView,t.body=c.body,t.frame.toolbarDoc=t.doc,a.run(t.win),t.options.container===t.doc||t.options.container===t.body?(t.options.container=null,t.options.useFrame=!1):t.options.container||(t.frame.toolbarContainer=null,t.frame.bodyContainer=null),t.options.wizTemplate.url&&(t.dependency.files.js.wizTemplate=t.options.wizTemplate.url),function(e,t){if(e){var n=!1;if((e=e.toLowerCase()).indexOf("windows")>-1)t.client.type.isWin=!0,t.client.sendCmdToWizClient=function(e,n){e===r.CLIENT_EVENT.WizReaderClickImg?t.win.external.OnClickedImage(n.src,JSON.stringify(n.imgList)):e===r.CLIENT_EVENT.WizEditorClickSvg&&t.win.external.OnClickedSvg(JSON.stringify(n))};else if(e.indexOf("ios")>-1)t.client.type.isIOS=!0,t.client.sendCmdToWizClient=function(e,n){if(e===r.CLIENT_EVENT.WizEditorClickSvg)t.win.webkit.messageHandlers.onClickedSvg.postMessage(JSON.stringify(n));else if(e===r.CLIENT_EVENT.WizEditorPaste)t.win.webkit.messageHandlers.didWizEditorPaste.postMessage(null);else if(e===r.CLIENT_EVENT.WizEditorSetScrollTop)t.win.webkit.messageHandlers.setScrollTop.postMessage(n);else if(e===r.CLIENT_EVENT.WizEditorTrackEvent)t.win.webkit.messageHandlers.didWizEditorTrackEvent.postMessage({options:n});else if(e===r.CLIENT_EVENT.WizReaderClickImg)t.win.webkit.messageHandlers.WizReaderClickImg.postMessage({src:n.src});else if(e===r.CLIENT_EVENT.IosPrompt)return JSON.parse(prompt(JSON.stringify(n)))};else if(e.indexOf("android")>-1)t.client.type.isAndroid=!0,t.client.sendCmdToWizClient=function(e,n){e===r.CLIENT_EVENT.WizReaderClickImg?t.win.WizNote.onClickImg(n.src,n.imgList.join(",")):e===r.CLIENT_EVENT.WizEditorClickImg?t.win.WizNote.onEditorClickImage(n.src):e===r.CLIENT_EVENT.WizEditorClickSvg&&t.win.WizNote.onClickedSvg(JSON.stringify(n))};else if(e.indexOf("mac")>-1){var o=t.win.navigator.userAgent;/Mac/i.test(o)||(t.client.type.isLinux=!0),t.client.type.isMac=!0,t.client.sendCmdToWizClient=function(e,n){e===r.CLIENT_EVENT.WizReaderClickImg?t.win.WizExplorerApp.onClickedImage(n.src,JSON.stringify(n.imgList)):e===r.CLIENT_EVENT.WizEditorAfterCopied?setTimeout((function(){t.win.WizQtEditor.afterCopied()}),100):e===r.CLIENT_EVENT.WizEditorClickSvg?t.win.WizQtEditor.onClickedSvg(JSON.stringify(n)):e===r.CLIENT_EVENT.WizEditorPaste&&t.win.WizQtEditor.doPaste()}}else(e.indexOf("web")>-1||t.client.type.isWeb)&&(n=!0,t.client.type.isWeb=!0,t.client.sendCmdToWizClient=function(e,n){var o=t.options.document.defaultView;e===r.CLIENT_EVENT.WizEditorClickSvg&&o.WizWebEditor.onClickedSvg(n)});n||(t.client.type.isWeb=!1),(t.client.type.isIOS||t.client.type.isAndroid)&&(e.indexOf("pad")>-1?t.client.type.isPad=!0:t.client.type.isPhone=!0)}}(t.options.clientType,t);var d=decodeURIComponent(location.pathname),u=d.lastIndexOf("/")+1,f=d.lastIndexOf("."),h="";if(f>0&&(h=d.substring(u,f)),t.indexFilesPath=h+"_files",t.indexFilesFullPath=location.protocol+"//"+location.host+d.substr(0,u)+t.indexFilesPath+"/","base64"===t.options.userNameEncoder&&((n=t.options.userInfo)&&n.user_name&&(n.user_name=o.decode(n.user_name)),t.options.userData))for(var p=0;p<t.options.usersData.length;p++)(n=t.options.usersData[p]).user_name=o.decode(n.user_name);return t.setOptions=function(e){s(t.options,e)},t.supportTouchEvent=t.client.type.isPhone||t.client.type.isPad||t.browser.isMobile||t.browser.isAndroid||t.browser.isIPad||t.browser.isIPhone||t.browser.isWeChat,t}},function(e,t){var n={en:{version:"en",Month:["Jan.","Feb.","Mar.","Apr.","May","June","July","Agu.","Sep.","Oct.","Nov.","Dec."],Common:{Complete:"Complete",Copy:"Copy",Copied:"Copied",Delete:"Delete",Indent:"Indent",Outdent:"Outdent",Paste:"Paste",UnComplete:"Uncomplete"},Amend:{Edit:"Inserted contents",Delete:"Deleted contents",BtnAccept:"Accept",BtnRefuse:"Reject",Accept:"Accept all changes? Or partially select the changes which need to be accepted.",Refuse:"Reject all changes? Or partially select the changes which need to be rejected.",MultiInfo:"Multiple changes are selected",UserNameDefault:"someone"},Code:{CopyCode:"Copy Code",Wrap:"Code wrap",Language:"Language",Theme:"Theme"},Err:{Copy_Null:"Copy of deleted changes not allowed",Cut_Null:"Cut of deleted changes not allowed"},Outline:{AddNotes:"Add Note",AddImage:"Add Image",Duplicate:"Duplicate",ThemeMenu:"theme",OrganizationMenu:"organization",MinderTemplate:{Default:"Mind Map",Right:"Logic Structure",Structure:"Organization",FishBone:"Fish Bone"},MinderTheme:{Theme1:"Light Green",Theme2:"Blue",Theme3:"Golden",Theme4:"Sakura",Theme5:"Dark Blue",Theme6:"Black",Theme7:"Purple",Theme8:"Cyan",Theme9:"Silver",Theme10:"Green"}},Table:{ClearCell:"Clear",MergeCell:"Merge Cells",SplitCell:"Unmerge Cells",InsertRowUp:"Add Row Above",InsertRowDown:"Add Row Below",InsertColLeft:"Add Column Before",InsertColRight:"Add Column After",DeleteRow:"Delete Selected Row(s)",DeleteCol:"Delete Selected Column(s)",SetCellBg:"Cell Background",CellAlign:"Arrange",DeleteTable:"Delete Table",DistributeCols:"Average Column Width",AlignTop:"Align content to top",AlignMiddle:"Align content to center",AlignBottom:"Align content to bottom"},Toolbar:{LinkTopic:"Topic"},Img:{AddTitle:"Caption",RestoreZoom:"Cancel Resize",DeleteImage:"Delete",cancelUpload:"Cancel Upload",uploadError:"upload error",reupload:"reupload"}},"zh-cn":{version:"zh-cn",Common:{Complete:"完成",Copy:"复制",Copied:"已复制",Delete:"删除",Indent:"增加缩进",Outdent:"减少缩进",Paste:"粘贴",UnComplete:"取消完成"},Amend:{Edit:"插入了内容",Delete:"删除了内容",BtnAccept:"接受修订",BtnRefuse:"拒绝修订",Accept:"是否确认接受全部修订内容？ 如需接受部分内容请使用鼠标进行选择",Refuse:"是否确认拒绝全部修订内容？ 如需拒绝部分内容请使用鼠标进行选择",MultiInfo:"您选中了多处修订",UserNameDefault:"有人"},Code:{CopyCode:"复制代码",Wrap:"自动换行",Language:"语言",Theme:"配色"},Date:{Year:"年",Month:"月",Day:"日"},Err:{Copy_Null:"无法复制已删除的内容",Cut_Null:"无法剪切已删除的内容"},Outline:{AddNotes:"添加注释",AddImage:"添加图片",Duplicate:"创建副本",ThemeMenu:"主题",OrganizationMenu:"结构",MinderTemplate:{Default:"思维导图",Right:"逻辑结构",Structure:"组织结构",FishBone:"鱼骨图"},MinderTheme:{Theme1:"浅葱",Theme2:"青空",Theme3:"栀金",Theme4:"樱粉",Theme5:"藏蓝",Theme6:"赤黑",Theme7:"藤紫",Theme8:"雪青",Theme9:"夕银",Theme10:"苔绿"}},Table:{ClearCell:"清除内容",MergeCell:"合并单元格",SplitCell:"拆分单元格",InsertRowUp:"上插入行",InsertRowDown:"下插入行",InsertColLeft:"左插入列",InsertColRight:"右插入列",DeleteRow:"删除选中行",DeleteCol:"删除选中列",SetCellBg:"单元格背景色",CellAlign:"对齐方式",DeleteTable:"删除表格",DistributeCols:"平均分配各列",AlignTop:"靠上",AlignMiddle:"居中",AlignBottom:"靠下"},Toolbar:{LinkTopic:"标题"},Img:{AddTitle:"添加标题",RestoreZoom:"还原缩放",DeleteImage:"删除图片",cancelUpload:"取消上传",uploadError:"图片上传失败,",reupload:"重新上传"}},"zh-tw":{version:"zh-tw",Common:{Complete:"完成",Copy:"複製",Copied:"已複製",Delete:"刪除",Indent:"增加縮進",Outdent:"減少縮進",Paste:"粘貼",UnComplete:"取消完成"},Amend:{Edit:"插入了內容",Delete:"刪除了內容",BtnAccept:"接受修訂",BtnRefuse:"拒絕修訂",Accept:"是否確認接受全部修訂內容？ 如需接受部分內容請使用滑鼠進行選擇",Refuse:"是否確認拒絕全部修訂內容？ 如需拒絕部分內容請使用滑鼠進行選擇",MultiInfo:"您選中了多處修訂",UserNameDefault:"有人"},Code:{CopyCode:"複製代碼",Wrap:"自動換行",Language:"語言",Theme:"配色"},Date:{Year:"年",Month:"月",Day:"日"},Err:{Copy_Null:"無法複製已刪除的內容",Cut_Null:"無法剪切已刪除的內容"},Outline:{AddNotes:"添加注釋",AddImage:"添加圖片",Duplicate:"創建副本",ThemeMenu:"主题",OrganizationMenu:"组织",MinderTemplate:{Default:"思維導圖",Right:"邏輯結構",Structure:"組織結構",FishBone:"魚骨圖"},MinderTheme:{Theme1:"淺蔥",Theme2:"青空",Theme3:"梔金",Theme4:"櫻粉",Theme5:"藏藍",Theme6:"赤黑",Theme7:"藤紫",Theme8:"雪青",Theme9:"夕銀",Theme10:"苔綠"}},Table:{ClearCell:"清除內容",MergeCell:"合併儲存格",SplitCell:"拆分儲存格",InsertRowUp:"上插入行",InsertRowDown:"下插入行",InsertColLeft:"左插入列",InsertColRight:"右插入列",DeleteRow:"刪除選中行",DeleteCol:"刪除選中列",SetCellBg:"儲存格背景色",CellAlign:"對齊方式",DeleteTable:"刪除表格",DistributeCols:"平均分配各列",AlignTop:"靠上",AlignMiddle:"垂直居中",AlignBottom:"靠下"},Toolbar:{LinkTopic:"標題"},Img:{AddTitle:"添加標題",RestoreZoom:"还原缩放",DeleteImage:"刪除圖片",cancelUpload:"取消上传",uploadError:"上传错误",reupload:"重新上传"}}};e.exports=function(e,t){var r={};e||(e=(t.win||window).navigator.language.replace("_","-").toLowerCase(),e=/^zh-/.test(e)?/(hant)|(tw)|(hk)/.test(e)?"zh-tw":"zh-cn":/^zh/.test(e)?"zh-cn":"en");for(var o in e=e.toLowerCase().replace("_","-"),n[e]?e:e="en",n[e])n[e].hasOwnProperty(o)&&(r[o]=n[e][o]);return r}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._h6Patch=function(){var e,t,r,o,i=!1;return e=n.rangeUtils.getRange(),t=n.env.doc.queryCommandValue("formatBlock"),/^h[1-6]+$/i.test(t)&&e&&e.startOffset===n.domUtils.getEndOffset(e.startContainer)&&(i=function(e,t){if(!e)return!1;var r=n.domUtils.getLastDeepChild(e);return!!n.domUtils.getParentByFilter(r,(function(e){return e===t}),!0)}(r=n.domUtils.getParentByTagName(e.startContainer,t,!0),e.startContainer)),!(!i||!r)&&((o=n.env.doc.createElement("div")).appendChild(n.env.doc.createElement("br")),n.domUtils.after(o,r),n.rangeUtils.setRange(o,0),!0)},n._isAmendEditing=!1,n._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.BEFORE_SAVESNAP,n._handler.onBeforeSaveSnap),n.env.event.add(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory),n.env.event.add(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown),n.env.client.type.isIOS||n.env.client.type.isAndroid?n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onTouchStart):(n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.add(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp)),n.env.event.add(d.EVENT.ON_DRAG_START,n._handler.onDragDrop),n.env.event.add(d.EVENT.ON_DRAG_ENTER,n._handler.onDragDrop),n.env.event.add(d.EVENT.ON_DROP,n._handler.onDragDrop)},unbind:function(){n.env.event.remove(d.EVENT.BEFORE_SAVESNAP,n._handler.onBeforeSaveSnap),n.env.event.remove(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory),n.env.event.remove(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp),n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onTouchStart),n.env.event.remove(d.EVENT.ON_DRAG_START,n._handler.onDragDrop),n.env.event.remove(d.EVENT.ON_DRAG_ENTER,n._handler.onDragDrop),n.env.event.remove(d.EVENT.ON_DROP,n._handler.onDragDrop)},bindReverse:function(){n._event.unbindReverse(),n.env.event.add(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown),n.env.client.type.isIOS||n.env.client.type.isAndroid||(n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.add(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp))},unbindReverse:function(){n.env.event.remove(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp)}},n._handler={onAccept:function(e){n.accept(e)},onRefuse:function(e){n.refuse(e)},onBeforeSaveSnap:function(){n._amendInfo.hide(!0)},onAfterRestoreHistory:function(){n.startAmendInfo()},onDragDrop:function(e){return u.stopEvent(e),!1},onKeyDown:function(e){var t=n.rangeUtils.getRange();n.env.compositionStart||n.rangeUtils.clearFillCharByCollapsed(),n.req.codeCore&&!n.req.codeCore.onKeyDown(e)||!n.req.tableCore.onKeyDown(e)||n.req.todoCore&&!n.req.todoCore.onKeyDown(e)||t&&!n.env.compositionStart&&(n.isAmendEditing?n._handler.onKeyDownAmend(e):n._handler.onKeyDownReverse(e))},onKeyDownAmend:function(e){var t,r,o,i,a,l,s,c,f,h,p,m,g,v=e.keyCode||e.which,b=n.rangeUtils.getSelection();if(8===v)return n.req.historyUtils.saveSnap(!1),b.isCollapsed?(n.rangeUtils.selectCharIncludeFillChar(!0),n._amendUtils.removeSelection(n._amendUser.getCurUser()),p=n.rangeUtils.getRangeParentRoot(),b.collapseToStart(),n._amendUtils.removeUserDel(p,n._amendUser.getCurUser()),b.collapseToStart()):(n._amendUtils.removeSelection(n._amendUser.getCurUser()),n._amendUtils.removeUserDel(null,n._amendUser.getCurUser()),b.collapseToStart()),n.rangeUtils.fixScroll(),void u.stopEvent(e);if(46===v)return n.req.historyUtils.saveSnap(!1),b.isCollapsed&&n.rangeUtils.selectCharIncludeFillChar(!1),n._amendUtils.removeSelection(n._amendUser.getCurUser()),n._amendUtils.removeUserDel(null,n._amendUser.getCurUser()),b.collapseToEnd(),n.rangeUtils.fixScroll(),void u.stopEvent(e);if(!u.checkNonTxtKey(e))if(n.req.historyUtils.saveSnap(!1),b.isCollapsed||(n._amendUtils.removeSelection(n._amendUser.getCurUser()),n._amendUtils.removeUserDel(null,n._amendUser.getCurUser())),t=n.rangeUtils.getRange(),r=t.endContainer,o=t.endOffset,13!==v){var y,_,S;if(m=n._amendUtils.splitInsertDom(r,o,!1,n._amendUser.getCurUser()),g=n._amendUtils.getWizAmendImgParent(r),m.isInsert&&!m.split&&!g)return 0===o&&1===m.insertDom.nodeType?(n.domUtils.before(n.env.doc.createTextNode(d.FILL_CHAR),m.insertDom.childNodes[0]),n.rangeUtils.setRange(m.insertDom,1,null,null)):n.rangeUtils.setRange(r,o,null,null),t=n.rangeUtils.getRange(),void(9===v&&(t.insertNode(n.domUtils.getTab()),n.rangeUtils.modify("move","forward","character"),n.rangeUtils.modify("move","forward","character"),n.rangeUtils.modify("move","forward","character"),n.rangeUtils.modify("move","forward","character"),u.stopEvent(e)));i=n._amendUtils.createDomForInsert(n._amendUser.getCurUser()),m.split?(3===r.nodeType&&(r=r.parentNode),n.domUtils.before(i,r,o>0)):g?n.domUtils.after(i,g):1===r.nodeType?o<r.childNodes.length?r.getAttribute(d.ATTR.SPAN)&&(0===r.childNodes.length||1===r.childNodes.length&&n.domUtils.isTag(r.childNodes[0],"br"))?(n.domUtils.before(i,r),n.domUtils.remove(r)):n.domUtils.before(i,r.childNodes[o]):n.domUtils.isTag(r,["td","th"])||n.domUtils.hasClass(r,d.CLASS.TODO_MAIN)?(n.domUtils.isEmptyDom(r)&&(r.innerHTML=""),r.appendChild(i)):n.domUtils.after(i,r):3===r.nodeType&&(n._amendUtils.splitDeletedDom(r,o)?n.domUtils.after(i,r.parentNode):o<r.nodeValue.length?(f=r.nodeValue.substr(o),h=n.env.doc.createTextNode(f),r.nodeValue=r.nodeValue.substr(0,o),n.domUtils.after([i,h],r)):(s=(c=(l=n.domUtils.getParentByTagName(r,"a",!0,null))?n.domUtils.getNextNode(r):null)?n.domUtils.getParentByTagName(c,"a",!0,null):null,a=r.nextSibling,l&&l!==s?n.domUtils.after(i,l):a?n.domUtils.before(i,a):r.parentNode.insertBefore(i,null))),9===v?(i.appendChild(n.domUtils.getTab()),n.rangeUtils.setRange(i,2,null,null),u.stopEvent(e)):n.rangeUtils.setRange(i.childNodes[0],1,null,null)}else{var E=n._amendUtils.getWizDeleteParent(r),C=n._amendUtils.getWizInsertParent(r),T=!!C&&n._amendUtils.getWizAmendImgParent(r),A=E||C;if(A&&1===A.childNodes.length&&(!n.domUtils.isUsableTextNode(A.childNodes[0])||1===A.childNodes[0].nodeType&&n.domUtils.isTag(A.childNodes[0],"br")))_=A.parentNode,S=n.env.doc.createElement("br"),_.insertBefore(S,A),_.removeChild(A),n.rangeUtils.setRange(S,1,S,1);else if(C&&T)(y=n.domUtils.createSpan()).innerHTML=d.FILL_CHAR,n.domUtils.after(y,C),n.rangeUtils.setRange(y,1,y,1);else if(C)!function(){var e=n.domUtils.createSpan();e.innerHTML=d.FILL_CHAR,(m=n._amendUtils.splitInsertDom(r,o,!0,n._amendUser.getCurUser())).isInsert&&m.split?(n.domUtils.after(e,C),n.rangeUtils.setRange(e,1,e,1)):m.isInsert&&(n.domUtils.before(e,C,o>0),n.rangeUtils.setRange(e,1,e,1))}();else if(E)!function(){var e=n.domUtils.createSpan();e.innerHTML=d.FILL_CHAR,(m=n._amendUtils.splitDeletedDom(r,o))?(n.domUtils.after(e,E),n.rangeUtils.setRange(e,1,e,1)):(n.domUtils.before(e,E,o>0),n.rangeUtils.setRange(e,1,e,1))}();else if(n._h6Patch())return void u.stopEvent(e);b.collapseToEnd()}},onKeyDownReverse:function(e){var t=e.keyCode||e.which,r=n.rangeUtils.getRange(),o=n._amendUtils.fixedAmendRange(),i=function(e,t){var r,o;e&&((o=n._amendUtils.getWizAmendParent(e))&&1===o.childNodes.length&&((r=n.domUtils.createSpan()).innerHTML=d.FILL_CHAR+d.FILL_CHAR,n.domUtils.before(r,o,t>0),n.domUtils.remove(o),n.rangeUtils.setRange(r,t>0?0:2,r,1)))};if(8===t)return n.req.historyUtils.saveSnap(!1),void(r&&r.collapsed&&o&&o.leftDom&&(o.startImg=n._amendUtils.getWizAmendImgParent(o.leftDom),o.startImg?(o.startDom=o.startImg,o.startOffset=0,n.rangeUtils.setRange(o.startDom,o.startOffset,o.endDom,o.endOffset)):3===o.leftDom.nodeType&&1===o.leftDom.nodeValue.length&&i(o.leftDom,-1)));if(46===t)return n.req.historyUtils.saveSnap(!1),void(r&&r.collapsed&&o&&o.rightDom&&(o.endImg=n._amendUtils.getWizAmendImgParent(o.rightDom),o.endImg?(o.endDom=o.endImg,o.endOffset=o.endImg.childNodes.length,n.rangeUtils.setRange(o.startDom,o.startOffset,o.endDom,o.endOffset)):3===o.rightDom.nodeType&&1===o.rightDom.nodeValue.length&&i(o.rightDom,1)));if(!u.checkNonTxtKey(e)){n.req.historyUtils.saveSnap(!1),n.splitAmendDomByRange(o);var a=n.req.tableUtils.checkCaretInTableContainer();n.req.blockUtils.insertEmptyLine(a.tableContainer,a.after),13===t&&n._h6Patch()&&u.stopEvent(e)}},onMouseDown:function(e){n._amendInfo.isInfo(e.target)?u.stopEvent(e):n._amendInfo.stop()},onMouseUp:function(){n._amendInfo.start()},onTouchStart:function(e){}},n.accept=function(e){var t,r=n.rangeUtils.getSelection(),o={};if(e.total)o.selection=!0,o.selectAll=!0;else if(e.dom&&!e.isSelection)o.domList=n._amendUtils.getSameTimeStampDom(e.dom),o.selection=!1;else{if(0===r.rangeCount)return;o.selection=!0,o.selectAll=!1}n.req.historyUtils.saveSnap(!1),(t=o.selection&&!o.selectAll?n._amendUtils.getSelectedAmendDoms():n._amendUtils.getAmendDoms(o))&&(n._amendUtils.splitSelectedAmendDoms(t),n._amendUtils.wizAmendDelete(t.deleteList),n._amendUtils.wizAmendDelete(t.deletedInsertList),n._amendUtils.wizAmendSave(t.insertList)),n.domUtils.clearChildSpan(n.env.body,[])},n.changeCurUser=function(e){n.env.options.userInfo=e,n._amendUser.initUser()},n.fixPaste=function(e,t,r){n._amendUtils.modifyDomForPaste(e,t,r)},n.fragmentFilter=function(e){if(!e)return!1;for(var t=e.querySelectorAll("."+d.CLASS.WIZ_BODY+" span["+d.ATTR.SPAN_DELETE+'="'+n._amendUser.getCurUser().hash+'"]'),r=t.length-1;r>=0;r--){var o=t[r];n.domUtils.remove(o)}},n.hideAmendInfo=function(){n._amendInfo.hide(!0)},n.isAmendEdited=function(){return n._amendUtils.isAmendEdited()},n.hasAmendSpanByCursor=function(){var e=n._amendUtils.getAmendDoms({selection:!0,selectAll:!1});return e.insertList.length>0||e.deleteList.length>0||e.deletedInsertList.length>0},n.readyForPaste=function(){var e,t,r,o,i,a,l,s,c,u,f,h,p,m,g,v=n.rangeUtils.getRange();v&&(v.collapsed||(e=n.domUtils.getParentByTagName(v.endContainer,["td","th"],!0,null),n._amendUtils.removeSelection(n._amendUser.getCurUser()),n._amendUtils.removeUserDel(null,n._amendUser.getCurUser())),t=(v=n.rangeUtils.getRange()).endContainer,r=v.endOffset,n.domUtils.isTag(t,["td","th"])&&0===r&&e!==t&&(t=e,r=n.domUtils.getEndOffset(t)),p=n._amendUtils.splitInsertDom(t,r,!0,n._amendUser.getCurUser()),o=(new Date).valueOf(),i=n._amendUtils.createDomForPaste(o),a=i.start,l=i.content,s=i.end,m=n._amendUtils.getWizAmendImgParent(t),p.split?(3===t.nodeType&&(t=t.parentNode),n.domUtils.before([a,l,s],t,r>0)):m?n.domUtils.after([a,l,s],m):1===t.nodeType?(g=!1,n.domUtils.isTag(t,["td","th"])&&(n.domUtils.isEmptyDom(t)&&(t.innerHTML="",t.appendChild(n.domUtils.createSpan())),g=!0),r<t.childNodes.length?n.domUtils.before([a,l,s],t.childNodes[r]):g?(t.appendChild(a),t.appendChild(l),t.appendChild(s)):n.domUtils.after([a,l,s],t)):3===t.nodeType&&(n._amendUtils.splitDeletedDom(t,r)?n.domUtils.after([a,l,s],t.parentNode):r<t.nodeValue.length?(h=n.env.doc.createTextNode(t.nodeValue.substr(r)),t.nodeValue=t.nodeValue.substr(0,r),n.domUtils.after([a,l,s,h],t)):(u=n.domUtils.getParentByTagName(t,"a",!0,null),c=t.nextSibling,u?n.domUtils.after([a,l,s],u):c?n.domUtils.before([a,l,s],c):((f=t.parentNode).insertBefore(a,null),f.insertBefore(l,null),f.insertBefore(s,null)))),n.rangeUtils.setRange(l.childNodes[0],0,l.childNodes[0],1),setTimeout((function(){s=n.env.body.querySelector(" span["+d.ATTR.SPAN_PASTE_TYPE+'="'+d.TYPE.PASTE.END+'"]['+d.ATTR.SPAN_PASTE_ID+'="'+s.getAttribute(d.ATTR.SPAN_PASTE_ID)+'"]'),n.fixPaste(a,s,n._amendUser.getCurUser())}),200))},n.refuse=function(e){var t,r=n.rangeUtils.getSelection(),o={};if(e.total)o.selection=!0,o.selectAll=!0;else if(e.dom&&!e.isSelection)o.domList=n._amendUtils.getSameTimeStampDom(e.dom),o.selection=!1;else{if(0===r.rangeCount)return;o.selection=!0,o.selectAll=!1}if(n.req.historyUtils.saveSnap(!1),t=o.selection&&!o.selectAll?n._amendUtils.getSelectedAmendDoms():n._amendUtils.getAmendDoms(o)){n._amendUtils.splitSelectedAmendDoms(t);var i=t.deletedInsertList.length>0&&0===t.deleteList.length&&0===t.insertList.length;n._amendUtils.wizAmendSave(t.deleteList),i&&n._amendUtils.wizAmendSave(t.deletedInsertList),n._amendUtils.wizAmendDelete(t.insertList),i||n._amendUtils.wizAmendDelete(t.deletedInsertList)}n.domUtils.clearChildSpan(n.env.body,[])},n.splitAmendDomByRange=function(e){return n._amendUtils.splitAmendDomByRange(e)},n.start=function(){n._isAmendEditing=!0,n.stopReverse(),n._event.bind(),n.startAmendInfo()},n.startReverse=function(){n.stop(),n._event.bindReverse(),n.startAmendInfo()},n.startAmendInfo=function(e){n._amendInfo.init(e,{onAccept:n._handler.onAccept,onRefuse:n._handler.onRefuse})},n.stop=function(){n._isAmendEditing=!1,n._event.unbind(),n._amendInfo.off()},n.stopReverse=function(){n._event.unbindReverse(),n._amendInfo.off()},n.stopAmendInfo=function(){n._amendInfo.off()},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){var n=this;l(s(t.prototype),"initCore",this).call(this,e),this._amendInfo=e.require.amendInfo,this._amendUser=e.require.amendUser,this._amendUtils=e.require.amendUtils,function(){var e=n.domUtils.modifyNodeStyle;n.domUtils.modifyNodeStyle=function(t,r,o,i){var a;return 1===t.nodeType&&o&&o[d.ATTR.SPAN_DELETE]&&n.domUtils.isTag(t,"img")?(n._amendUtils.deleteImg(t,n._amendUser.getCurUser()),t):1===t.nodeType&&o&&o[d.ATTR.SPAN_DELETE]&&n.domUtils.isEmptyDom(t)?((a=t.parentNode).removeChild(t),n.domUtils.removeEmptyParent(a),t):1===t.nodeType&&o&&o[d.ATTR.SPAN_DELETE]&&n.domUtils.isSelfClosingTag(t)?t:o&&o[d.ATTR.SPAN_DELETE]&&n._amendUtils.getWizDeleteParent(t)?t:e(t,r,o,i)};var t=n.domUtils.addDomForGetDomList;n.domUtils.addDomForGetDomList=function(e,r){n._amendUtils.isWizDelete(r)||3===r.nodeType&&!n.domUtils.getParentByTagName(r,["td","th"],!1,null)&&n.domUtils.getParentByTagName(r,"table",!1,null)||t(e,r)}}()}},{key:"isAmendEditing",get:function(){return this._isAmendEditing}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._callback={onAccept:null,onRefuse:null},n._btnAccept=null,n._btnRefuse=null,n._content=null,n._cur=null,n._curPos=null,n._img=null,n._isMulti=!1,n._isSelection=!1,n._main=null,n._name=null,n._template=null,n._time=null,n._pause=!1,n._lastMousePos={x:null,y:null},n._event={bind:function(){n.env.client.type.isIOS||n.env.client.type.isAndroid?(n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onTouchstart),n.env.event.add(d.EVENT.ON_TOUCH_END,n._handler.onMouseMove)):n.env.event.add(d.EVENT.ON_MOUSE_MOVE,n._handler.onMouseMove)},unbind:function(){n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onTouchstart),n.env.event.remove(d.EVENT.ON_TOUCH_END,n._handler.onMouseMove),n.env.event.remove(d.EVENT.ON_MOUSE_MOVE,n._handler.onMouseMove)},bindInfoBtn:function(){n._event.unbindInfoBtn(),n.env.client.type.isIOS||n.env.client.type.isAndroid?n._main.addEventListener("touchend",n._handler.onClick):n._main.addEventListener("click",n._handler.onClick)},unbindInfoBtn:function(){n.env.client.type.isIOS||n.env.client.type.isAndroid?n._main.removeEventListener("touchend",n._handler.onClick):n._main.removeEventListener("click",n._handler.onClick)}},n._handler={onAccept:function(e){n._callback.onAccept&&n._callback.onAccept(n._getCallbackParams()),n.hide(!0),n._amendUserAction.save(n._amendUserAction.ActionId.ClickAcceptFromAmendInfo)},onClick:function(e){var t;(t=e.changedTouches?e.changedTouches[0].target:e.target).id===d.ID.AMEND_INFO_ACCEPT?n._handler.onAccept(e):t.id===d.ID.AMEND_INFO_REFUSE&&n._handler.onRefuse(e),u.stopEvent(e)},onMouseMove:function(e){var t=u.getEventClientPos(e);if((n._lastMousePos.x!==t.x||n._lastMousePos.y!==t.y)&&(n._lastMousePos=t,!n._pause)){var r,o=e.target,i={width:20,height:20};if(n.isInfo(o))return clearTimeout(n.showTimer),void clearTimeout(n.hideTimer);var a,l,s=n.rangeUtils.getSelection(),c=n._amendUtils.getWizDeleteParent(o)||n._amendUtils.getWizInsertParent(o);!s.isCollapsed&&c&&s.containsNode(c,!0)&&(a=s.isCollapsed?null:n._amendUtils.getAmendDoms({selection:!0,selectAll:!1})),a&&0===(a=a.deletedInsertList.concat(a.insertList,a.deleteList)).length&&(a=null),a||c?(l=parseInt(n.env.win.getComputedStyle(c)["font-size"]),isNaN(l)&&(l=14),r=n.domUtils.getPageScroll(),i.left=t.x+r.left,i.top=t.y+r.top-l,i.top<c.offsetTop&&(i.top=c.offsetTop),n.show(a||c,i)):n.hide(!1)}},onTouchstart:function(e){var t=e.target;n.isInfo(t)||n.hide(!1)},onRefuse:function(e){n._callback.onRefuse&&n._callback.onRefuse(n._getCallbackParams()),n.hide(!0),n._amendUserAction.save(n._amendUserAction.ActionId.ClickRefuseFromAmendInfo)}},n._createAmendInfo=function(){var e,t=n.env.body.querySelector("#"+d.ID.AMEND_INFO);return n.domUtils.remove(t),t=n.env.doc.createElement(d.TAG.TMP_TAG),e=n.env.doc.createElement("div"),n.domUtils.setContenteditable(e,!1),t.appendChild(e),t.id=d.ID.AMEND_INFO,n.domUtils.css(t,{position:"absolute","z-index":d.CSS.Z_INDEX.amendInfo,display:"none",padding:"6px","font-family":'"Microsoft Yahei","微软雅黑",Helvetica,SimSun,SimHei'}),e.innerHTML=n._getInfoTemplate(),n.domUtils.css(e,{"background-color":"white",padding:"0px","font-size":"12px",border:"1px solid #D8D8D8","-webkit-border-radius":"4px","-moz-border-radius":"4px","-border-radius":"4px","-webkit-box-shadow":"rgba(0, 0, 0, 0.24) 0px 3px 3px","-moz-box-shadow":"rgba(0, 0, 0, 0.24) 0px 3px 3px","box-shadow":"rgba(0, 0, 0, 0.24) 0px 3px 3px","min-width":"160px","max-width":"280px","min-height":"50px"}),n._template.appendChild(t),t},n._getInfoTemplate=function(){return n.env.client.type.isIOS||n.env.client.type.isMac||n.env.client.type.isAndroid?'<div id="'+d.ID.AMEND_INFO_SINGLE+'" style="display:none; padding: 8px 16px;"><img id="'+d.ID.AMEND_INFO_IMG+'" class="'+d.CLASS.IMG_NOT_DRAG+'" style="width: 40px; height: 40px !important; position: absolute; -webkit-border-radius: 40px;-moz-border-radius:40px;border-radius:40px;"><ul style="list-style-type: none;margin: 4px 0 0 50px;padding-left: 0;"><li style="line-height: 18px;white-space: nowrap;padding: 2px 0;"><span id="'+d.ID.AMEND_INFO_NAME+'" style="color:#000;font-size:12px;font-weight:bold;max-width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;"></span><span id="'+d.ID.AMEND_INFO_CONTENT+'" style="color:#000;font-size:12px;margin-left:.5em;display:inline-block;overflow:hidden;float:right"></span></li><li style="line-height: 18px;text-align: right;"><span id="'+d.ID.AMEND_INFO_TIME+'" style="color:#A3A3A3;font-size:12px;"></span></li></ul></div><div id="'+d.ID.AMEND_INFO_MULTI+'" style="display:none; padding: 8px 16px;"><p style="margin: 4px 16px;">'+n.lang.Amend.MultiInfo+'</p></div><div id="'+d.ID.AMEND_INFO_TOOLS+'" style="padding:0;margin:0;box-sizing: border-box;"><div style="line-height: 26px;width: 50%;display:inline-block;text-align: center;padding:0 8px;margin:0;box-sizing: border-box;"><a id="'+d.ID.AMEND_INFO_REFUSE+'" href="javascript:void(0);" style="font-size:12px;display:block;cursor:pointer;color:#447BD8;text-decoration: blink;">'+n.lang.Amend.BtnRefuse+'</a></div><div style="line-height: 26px;width: 50%;display:inline-block;text-align: center;padding:0 8px;margin:0;box-sizing: border-box;"><a id="'+d.ID.AMEND_INFO_ACCEPT+'" href="javascript:void(0);" style="font-size:12px;display:block;cursor:pointer;color:#447BD8;text-decoration: blink;">'+n.lang.Amend.BtnAccept+"</a></div></div>":'<div id="'+d.ID.AMEND_INFO_SINGLE+'" style="display:none; padding: 8px 16px;"><img id="'+d.ID.AMEND_INFO_IMG+'" class="'+d.CLASS.IMG_NOT_DRAG+'" style="width: 40px; height: 40px !important; position: absolute;"><ul style="list-style-type: none;margin: 4px 0 0 50px;padding-left: 0;"><li style="line-height: 18px;white-space: nowrap;padding: 2px 0;"><span id="'+d.ID.AMEND_INFO_NAME+'" style="color:#000;font-size:12px;font-weight:bold;max-width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;"></span><span id="'+d.ID.AMEND_INFO_CONTENT+'" style="color:#000;font-size:12px;margin-left:.5em;display:inline-block;overflow:hidden;float:right"></span></li><li style="line-height: 18px;text-align: right;"><span id="'+d.ID.AMEND_INFO_TIME+'" style="color:#A3A3A3;font-size:12px;"></span></li></ul></div><div id="'+d.ID.AMEND_INFO_MULTI+'" style="display:none; padding: 8px 16px;"><p style="margin: 4px 16px;">'+n.lang.Amend.MultiInfo+'</p></div><div id="'+d.ID.AMEND_INFO_TOOLS+'" style="padding:0;margin:0;box-sizing:border-box;border-top:1px solid #D8D8D8"><div style="line-height: 26px;width: 50%;display:inline-block;text-align: center;padding:0 8px;margin:0;box-sizing: border-box;border-right: 1px solid #D8D8D8"><a id="'+d.ID.AMEND_INFO_ACCEPT+'" href="javascript:void(0);" style="font-size:12px;display:block;cursor:pointer;color:#447BD8;text-decoration: blink;">'+n.lang.Amend.BtnAccept+'</a></div><div style="line-height: 26px;width: 50%;display:inline-block;text-align: center;padding:0 8px;margin:0;box-sizing: border-box;"><a id="'+d.ID.AMEND_INFO_REFUSE+'" href="javascript:void(0);" style="font-size:12px;display:block;cursor:pointer;color:#447BD8;text-decoration: blink;">'+n.lang.Amend.BtnRefuse+"</a></div></div>"},n._getCallbackParams=function(){return{dom:n._cur,isSelection:!!n._isSelection}},n._hideInfo=function(){n._main&&(n._event.unbindInfoBtn(),n._cur=null,n._curPos=null,n._isMulti=!1,n._isSelection=!1,n._img.src="",n._name.innerText="",n.domUtils.attr(n._name,{title:""}),n._content.innerText="",n.domUtils.css(n._main,{display:"none"}),n._template.appendChild(n._main))},n._initMultiInfo=function(e){n._curPos=e,n.singleUser.style.display="none",n.multiUser.style.display="block"},n._initUserInfo=function(e){var t=n._cur,r=t.getAttribute(d.ATTR.SPAN_USERID),o=n.req.amendUser.getUserByGuid(r),i=o?o.name:n.lang.Amend.UserNameDefault,a=t.getAttribute(d.ATTR.SPAN_TIMESTAMP),l=!!t.getAttribute(d.ATTR.SPAN_DELETE);a=a.substring(0,a.length-3),n._curPos=e,n._img.src=o?o.imgUrl:"",n._name.innerText=i,n.domUtils.attr(n._name,{title:i}),n._content.innerText=l?n.lang.Amend.Delete:n.lang.Amend.Edit,n._time.innerText=a,n.multiUser.style.display="none",n.singleUser.style.display="block"},n._removeAmendInfo=function(){n.domUtils.remove(n.env.body.querySelector("#"+d.ID.AMEND_INFO))},n._showInfo=function(e){n._main.parentNode===n._template&&(n.env.body.appendChild(n._main),n.singleUser=n.env.body.querySelector("#"+d.ID.AMEND_INFO_SINGLE),n.multiUser=n.env.body.querySelector("#"+d.ID.AMEND_INFO_MULTI),n._img=n.env.body.querySelector("#"+d.ID.AMEND_INFO_IMG),n._name=n.env.body.querySelector("#"+d.ID.AMEND_INFO_NAME),n._content=n.env.body.querySelector("#"+d.ID.AMEND_INFO_CONTENT),n._time=n.env.body.querySelector("#"+d.ID.AMEND_INFO_TIME),n.tools=n.env.body.querySelector("#"+d.ID.AMEND_INFO_TOOLS),n._btnAccept=n.env.body.querySelector("#"+d.ID.AMEND_INFO_ACCEPT),n._btnRefuse=n.env.body.querySelector("#"+d.ID.AMEND_INFO_REFUSE)),n._cur?n._initUserInfo(e):n._initMultiInfo(e),n._event.bindInfoBtn(),n.readonly?n.tools.style.display="none":n.tools.style.display="block",n.domUtils.css(n._main,{top:"0px",left:"0px",display:"block",visibility:"hidden"}),n.domUtils.setLayout({layerObj:n._main,target:e,layout:d.TYPE.LAYOUT.TOP_START,isFixed:!1,isReverse:!0,space:d.AMEND.INFO_SPACE}),n.domUtils.css(n._main,{display:"block",visibility:"visible"})},n.hide=function(e){clearTimeout(n.showTimer),clearTimeout(n.hideTimer),(n._cur||n._isMulti)&&(e?n._hideInfo():n.hideTimer=setTimeout(n._hideInfo,d.AMEND.INFO_TIMER))},n.init=function(e,t){n._template=n.env.doc.createElement("div"),n._main=n._createAmendInfo(),n.readonly=!(!e||!e.readonly),n.domUtils.setContenteditable(n._main,!1),t&&t.onAccept&&(n._callback.onAccept=t.onAccept),t&&t.onRefuse&&(n._callback.onRefuse=t.onRefuse),n._event.unbind(),n._event.bind()},n.isInfo=function(e){return!!n.domUtils.getParentByFilter(e,(function(e){return e===n._main}),!0)},n.on=function(){n.env.options.noAmend||n.init({readonly:!0},{onAccept:null,onRefuse:null})},n.off=function(){n._event.unbind(),n._removeAmendInfo(),n._main=null,n._img=null,n._name=null,n._content=null,n._time=null,n._btnAccept=null,n._btnRefuse=null},n.show=function(e,t){clearTimeout(n.showTimer),clearTimeout(n.hideTimer);var r=u.isArray(e),o=r&&e.length>1,i=r?o?null:e[0]:e,a=!1;n._isSelection=r,n._isMulti!==o||i!==n._cur?(n.hide(!0),a=!0):(!n._curPos||Math.abs(n._curPos.left-t.left)>75||Math.abs(n._curPos.top-t.top)>24)&&(a=!0),a&&(n.showTimer=setTimeout((function(){n._isMulti=o,n._cur=i,n._showInfo(t)}),2*d.AMEND.INFO_TIMER))},n.start=function(){n._pause=!1},n.stop=function(){n.hide(!0),n._pause=!0},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._amendUserAction=e.require.amendUserAction,this._amendUtils=e.require.amendUtils}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=n(1),u=n(3),f=n(2),h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAExUlEQVRYR9WZz08bRxTHvya1CHbUSHXCiZzCIaaBBOUUEveQSORWYwwRxRCpqtIqjZL8XQkEUppAbQMX6hgh5UetRiFV4MABQXoK2AgUx1vNzs7u7Hpmf3m3Vc3Blm2Gz/vOd95784goiqLgf/aIhAVdrVaxu7sLKomC7u7uwKQJBPrFi5eoVvfx6VMdZONOnIhjf78KBQoINQEnrwcuD+DkyS9bhvcNfXR0hFKppEKqWqp8BE0l1N7XgPXvKOjq6kJfX29L4L6hCfDh4aEnYBbQjRuD+PhxD4nEV77gfUEvLy/rXm1S2GIJQ3VtJ9TdoFtDfuKxOK5fv+YJ3jM0BfZmCd4y5tcUPp3+Njzo1dVV1Go1X5Yw+Z1oTOLWVI91HMfg4KBrcE9KLy0tq+mrVUvwwGSxzs5ODAxcDgt6yXWWcLIEVd5QezgzFA704iKBdk5rQmCLJdRzwYEPD2fCgS4WF408LMkSooOmhsl5mBYcTmlFQTY7HA50oVi0LRxeLcHDj4QGXShKK50jsGpfsyWY2uR5dCQbjtL5QsHUSzgVDidL8AcxNOiVlRXUagdccTEfSqGfLVmCt4RRpBTcHB0JR+lS6Tn29va04iIBdsgSvCVoxlMQ/SKKTCYdPPT29jb+qFSEB5HvJbxYgnqctq2958+jpyfpCtx1RVxY+M1eYUsKYyrqAWmf85ZgwAx+bOxm8ND0D4rLOK+wXZbQg+F6bALfQAOj2Syi0agjuGul5+cXTA1+EJbg7UFeZ4bS6OjoCA762fy87udWsoTMHkT43PiYIzD5gmul19bW8OHD36Yy7tUSVg/T8q6VeCjIjX8XLDRZ/OkzojZNdX6zhNUSzOPEGrFYLFhotlpxcQkHBwdaZTS3l7LCYWeJeDyGoTBvLgy8XC5jl1jFppeQZQm/luC3wLWn+V9qNBqYm/u1qb3kewmZDXjVe5JJ9PdfdGWJlqHJAk9+mQOBl1nC6dCRTZrIuTt41qh8Kc0WmZmZ1dXmFbTzMCtOly71I3nunGeVPaU80eo7Ozv4vfRcvzY1WULrK8wBqW7HRG7cF3DL0GSBqenHRk9iKc3WQ8eGka0ABwZtpzADNZ4VTE7kfKscCPSjqWm9vZRnDGoJVv1uTf7H0A8fTen24DOGSGH23q3JiX9f6Xq9jnfv/sKfb954BmbTqYsX+nDmTBcSiYTnAFynvK2tLZDhef3zZ60S0huHLNXxHrZTnXwWiUTQffYsUqkrrgKQQpMLbD6fF+ZhN4WD9zB/cTC/ZsN3YwysN1CZNE6fOiUMwgT99u061tfXjRmb4IrkpnCIgOVBNAObdg/A1z1JfJO6qgegQ5fLqyDFwnqnY/M2L4WD75GZh5nCIqWlFqOyq7sdaWvDnZ9uq+A69Ozsk1AUtt4rhd2fNkpg4wWzULT9JZ/d/uF7tLe3U+iNjU1tPGAMBu1uzbJKZ1W4FUuIhpQX+nqRSl2l0O/fb6BSqZhbTX32xmUJm14iVGCN5VjbMfx850cK/erVa2xuburb4LaBl6U1mSVE6zpZwphhE4s0cP/eXQqdzxewX61Kcy6bS9ComPLm0ixKa34PXXMyoMDkoUNPP56Rt5fcITGUEgMH6mGLPdl/fh/cv4t/ANultPKz243RAAAAAElFTkSuQmCC",p=function e(t,n,r){c(this,e),t||(t={}),this.guid=t.user_guid||"",this.hash=this.guid,this.name=t.user_name||"",this.imgUrl=t.img_url?t.img_url:n(this.guid),this.color=t.color||r(this)},m=function(e){function t(){var e,n;c(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=i(this,(e=l(t)).call.apply(e,[this].concat(o))))._curAmendUser=null,n._userDom=null,n._users=null,n._usersForSave=null,n._addUser=function(e){n._users[e.guid]=e,n._usersForSave[e.guid]={color:e.color,name:e.name}},n._createUserColor=function(e){var t=e.hash,r=d.COLOR.length,o={};if(n._loadUsers(),n._users[t])return n._users[t].color;for(var i in n._users){if(n._users.hasOwnProperty(i))o[n._users[i].color]=!0}for(var a=0;a<r;a++){var l=d.COLOR[a];if(!o[l])return l}return d.COLOR[0]},n._createUserDom=function(){n._userDom=n.env.doc.createElement("meta"),n._userDom.id=d.ID.AMEND_USER_INFO,n._userDom.name=d.ID.AMEND_USER_INFO,u.dom.insertToHead(n._userDom,n.env.doc)},n._getImgUrl=function(e){if(n.env.client.type.isWeb)return"/as/user/avatar/"+e+"?default=true&_"+(new Date).valueOf();if(n.env.client.type.isWin)try{var t=external.GetAvatarByUserGUID(e);return t||h}catch(e){console.error(e)}else n.env.client.type.isMac||n.env.client.type.isIOS||n.env.client.type.isAndroid;return h},n._getUserDom=function(){return n._userDom?n._userDom:(n._userDom=n.env.doc.getElementById(d.ID.AMEND_USER_INFO),n._userDom)},n._getUserNameFromClient=function(e){if(n.env.client.type.isWeb);else if(n.env.client.type.isWin)try{return external.GetAliasByUserGUID(e)}catch(e){console.error(e)}else n.env.client.type.isMac||n.env.client.type.isIOS||n.env.client.type.isAndroid;return null},n._loadUsers=function(){if(!n._users&&(n._users={},n._usersForSave={},n._userDom=n._getUserDom(),n._userDom))try{for(var e in n._usersForSave=JSON.parse(n._userDom.content),n._usersForSave)if(n._usersForSave.hasOwnProperty(e)){var t=n._usersForSave[e];t.user_guid=e;var r=n._getUserNameFromClient(e);t.user_name=r||t.name,n._users[e]=new p(t,n._getImgUrl,n._createUserColor)}}catch(e){}},n._saveUser=function(){n._userDom||n._createUserDom(),n._userDom.content=JSON.stringify(n._usersForSave)},n.initUser=function(){n._loadUsers();var e=n.env.options.userInfo;if(!e)return null;n._curAmendUser=new p(e,n._getImgUrl,n._createUserColor),n._addUser(n._curAmendUser)},n.getCurUser=function(){return n._saveUser(),n._curAmendUser},n.getUserByGuid=function(e){return n._curAmendUser&&e===n._curAmendUser.guid?n._curAmendUser:n._users&&n._users[e]?n._users[e]:(n._loadUsers(),n._users[e])},n.setUsersData=function(){var e=n.env.options.usersData;if(e)for(var t=0,r=e.length;t<r;t++){var o=e[t],i=n._users[o.user_guid],a=n._usersForSave[o.user_guid];i&&o.user_name&&(i.name=o.user_name),i&&o.img_url&&(i.imgUrl=o.img_url),a&&o.user_name&&(a.name=o.user_name)}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){a(l(t.prototype),"initCore",this).call(this,e)}}])&&o(n.prototype,r),f&&o(n,f),t}(f);e.exports=m},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(2),u={ClickAcceptFromAmendInfo:"ClickAcceptFromAmendInfo",ClickRefuseFromAmendInfo:"ClickRefuseFromAmendInfo"},f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).save=function(e){if(n.env.client.type.isWin)try{external&&external.LogAction&&external.LogAction(e)}catch(e){console.error(e.toString())}},n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this.ActionId=u}}])&&i(n.prototype,r),d&&i(n,d),t}(d);e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).add2SelectedAmendDoms=function(e,t){t&&(t.getAttribute(d.ATTR.SPAN_INSERT)&&t.getAttribute(d.ATTR.SPAN_DELETE)?e.deletedInsertList.push(t):t.getAttribute(d.ATTR.SPAN_INSERT)?e.insertList.push(t):t.getAttribute(d.ATTR.SPAN_DELETE)&&e.deleteList.push(t))},n.createDomForImg=function(e,t){var r=n.env.doc.createElement("span");n.setDefaultAttr(r,t);var o={};return o[d.ATTR.IMG]="1",e===d.TYPE.IMG_DELETE&&(o[d.ATTR.SPAN_INSERT]=null,o[d.ATTR.SPAN_DELETE]=t.hash),n.domUtils.attr(r,o),n.setUserImgContainerStyle(r),r},n.createDomForInsert=function(e){var t=n.env.doc.createElement("span");return n.setDefaultAttr(t,e),n.setUserInsertStyle(t,e),t.innerHTML=d.FILL_CHAR,t},n.createDomForReverse=function(){var e=n.env.doc.createElement("span");return e.innerHTML=d.FILL_CHAR,e},n.createDomForPaste=function(e){var t,r,o,i;return t=n.domUtils.createSpan(),(i={})[d.ATTR.SPAN_PASTE_TYPE]=d.TYPE.PASTE.START,i[d.ATTR.SPAN_PASTE_ID]=e,n.domUtils.attr(t,i),t.innerHTML=d.FILL_CHAR,r=n.domUtils.createSpan(),(i={})[d.ATTR.SPAN_PASTE_TYPE]=d.TYPE.PASTE.CONTENT,i[d.ATTR.SPAN_PASTE_ID]=e,n.domUtils.attr(r,i),r.innerHTML=d.FILL_CHAR+d.FILL_CHAR,o=n.domUtils.createSpan(),(i={})[d.ATTR.SPAN_PASTE_TYPE]=d.TYPE.PASTE.END,i[d.ATTR.SPAN_PASTE_ID]=e,n.domUtils.attr(o,i),o.innerHTML=d.FILL_CHAR,{start:t,content:r,end:o}},n.deleteImg=function(e,t){var r,o=n.getWizAmendImgParent(e);if(o){if(!o.getAttribute(d.ATTR.SPAN_DELETE)){var i={};i[d.ATTR.SPAN_USERID]=t.hash,i[d.ATTR.SPAN_DELETE]=t.hash,n.domUtils.attr(o,i),r=o.querySelector("img["+d.ATTR.IMG_MASK+"]"),n.domUtils.css(r,d.CSS.IMG.MASK),n.domUtils.css(r,d.CSS.IMG_DELETED)}}else{var a=n.rangeUtils.isRangeEdge(e),l=n.packageImg(e,d.TYPE.IMG_DELETE,t);a.isStart&&(a.startDom=l,a.startOffset=0),a.isEnd&&(a.endDom=l.parentNode,a.endOffset=n.domUtils.getIndex(l)+1),a.isCollapsed&&a.isStart?n.rangeUtils.setRange(a.startDom,n.domUtils.getEndOffset(a.startDom),null,null):a.isCollapsed||!a.isStart&&!a.isEnd||n.rangeUtils.setRange(a.startDom,a.startOffset,a.endDom,a.endOffset)}},n.fixedAmendRange=function(){var e=n.rangeUtils.getRange();if(!e)return null;var t,r,o,i,a,l,s=e.startContainer,c=e.endContainer,d=e.startOffset,u=e.endOffset;return e&&e.collapsed?(r=n.rangeUtils.getRangeAnchor(!1),t=3===c.nodeType&&u>0&&u<c.nodeValue.length?r:n.domUtils.getPreviousNode(r,!1,null)):(o=n.rangeUtils.getRangeAnchor(!0),i=n.rangeUtils.getRangeAnchor(!1),(a=n.getWizAmendImgParent(o))&&(s=a,d=0),(l=n.getWizAmendImgParent(i))&&(c=l,u=l.childNodes.length),(a||l)&&n.rangeUtils.setRange(s,d,c,u)),{startImg:a,endImg:l,startDom:s,startOffset:d,endDom:c,endOffset:u,leftDom:t,rightDom:r}},n.fixSelectionByDeleteImg=function(){var e,t,r,o,i=n.rangeUtils.getRange(),a=!1,l=!1;i&&((e=n.getWizAmendImgParent(i.startContainer))&&!e.getAttribute(d.ATTR.SPAN_DELETE)&&(e=null),e?(a=!0,r=0):(e=i.startContainer,r=i.startOffset),i.collapsed?(t=e,l=a):(t=n.getWizAmendImgParent(i.endContainer))?l=!0:(t=i.endContainer,o=i.endOffset),l&&t&&t.nextSibling?(o=0,t=t.nextSibling):l&&t?(o=n.domUtils.getIndex(t)+1,t=t.parentNode):o=i.endOffset,i.collapsed?n.rangeUtils.setRange(t,o):n.rangeUtils.setRange(e,r,t,o))},n.getAmendDoms=function(e){var t={},r={},o={insertList:[],deleteList:[],deletedInsertList:[]},i=[];if(e.selection)t[d.ATTR.SPAN_INSERT]="",o.insertList=n.getWizSpanFromRange(e.selectAll,t),o.deletedInsertList=n.domUtils.removeListFilter(o.insertList,(function(e){return e.getAttribute(d.ATTR.SPAN_DELETE)})),r[d.ATTR.SPAN_DELETE]="",o.deleteList=n.getWizSpanFromRange(e.selectAll,r),i=n.domUtils.removeListFilter(o.deleteList,(function(e){return e.getAttribute(d.ATTR.SPAN_INSERT)})),o.deletedInsertList=u.removeDup(o.deletedInsertList.concat(i));else for(var a=0,l=e.domList.length;a<l;a++){var s=e.domList[a];s.getAttribute(d.ATTR.SPAN_DELETE)&&s.getAttribute(d.ATTR.SPAN_INSERT)?o.deletedInsertList.push(s):s.getAttribute(d.ATTR.SPAN_DELETE)?o.deleteList.push(s):s.getAttribute(d.ATTR.SPAN_INSERT)&&o.insertList.push(s)}return o},n.getDeletedStyle=function(e){var t={};return t[d.ATTR.SPAN_DELETE]=e.hash,t[d.ATTR.SPAN_USERID]=e.hash,t[d.ATTR.SPAN_TIMESTAMP]=u.getTime(),{attr:t,style:{color:e.color,"text-decoration":"line-through"}}},n.getSameTimeStampDom=function(e){if(!e||1!==e.nodeType)return[];var t=[],r=function(e,t){return t?n.domUtils.getPreviousNode(e,!1,null):n.domUtils.getNextNode(e,!1,null)},o=function(e){return e.getAttribute(d.ATTR.SPAN_DELETE)&&e.getAttribute(d.ATTR.SPAN_INSERT)?1:e.getAttribute(d.ATTR.SPAN_INSERT)?2:e.getAttribute(d.ATTR.SPAN_DELETE)?3:0},i=function(e,t,i){var a=o(e),l=e.getAttribute(d.ATTR.SPAN_TIMESTAMP),s=e.getAttribute(d.ATTR.SPAN_USERID);if(l)for(var c=r(e,t);c;)(c=n.getWizInsertParent(c)||n.getWizDeleteParent(c))&&c.getAttribute(d.ATTR.SPAN_USERID)!==s?c=null:c&&(c.getAttribute(d.ATTR.SPAN_TIMESTAMP),a===o(c)&&u.isSameAmendTime(c.getAttribute(d.ATTR.SPAN_TIMESTAMP),l)?(t?i.splice(0,0,c):i.push(c),c=r(c,t)):c=null)};return i(e,!0,t),t.push(e),i(e,!1,t),t},n.getSelectedAmendDoms=function(){var e,t,r,o,i=n.rangeUtils.getRange(),a=n.getAmendDoms({selection:!0,selectAll:!1});if(!i||0===a.insertList.length&&0===a.deleteList.length&&0===a.deletedInsertList.length)return null;if(i.collapsed)return a;var l=function(e,t,r){if(0===e.length||0===r)return null;var o=e[0];return o===t||n.domUtils.contains(o,t)?(e.splice(0,1),{dom:t,offset:r}):null},s=function(e,t,r){if(0===e.length)return null;if(r===(3===t.nodeType?t.length:t.childNodes.length))return null;var o=e[e.length-1];return o===t||n.domUtils.contains(o,t)?(e.splice(e.length-1,1),{dom:t,offset:r}):null};e=i.startContainer,r=i.startOffset,t=i.endContainer,o=i.endOffset;var c=l(a.deleteList,e,r);c||(c=l(a.insertList,e,r))||(c=l(a.deletedInsertList,e,r));var d={};return t===e&&c?(d.dom=c.dom,d.offset=o):(d=s(a.deleteList,t,o))||(d=s(a.insertList,t,o))||(d=s(a.deletedInsertList,t,o)),a.start=c,a.end=d,a},n.getWizAmendImgParent=function(e){return n.domUtils.getParentByFilter(e,(function(e){return e&&1===e.nodeType&&e.getAttribute(d.ATTR.IMG)}),!0)},n.getWizAmendParent=function(e){return n.domUtils.getParentByFilter(e,(function(e){return e&&1===e.nodeType&&(e.getAttribute(d.ATTR.SPAN_INSERT)||e.getAttribute(d.ATTR.SPAN_DELETE))}),!0)},n.getWizDeleteParent=function(e){return n.domUtils.getParentByFilter(e,(function(e){return e&&1===e.nodeType&&e.getAttribute(d.ATTR.SPAN_DELETE)}),!0)},n.getWizInsertParent=function(e){return n.domUtils.getParentByFilter(e,(function(e){return e&&1===e.nodeType&&e.getAttribute(d.ATTR.SPAN_INSERT)&&!e.getAttribute(d.ATTR.SPAN_DELETE)&&e.childNodes.length>0}),!0)},n.getWizSpanFromRange=function(e,t){var r="span";if(!t)return[];for(var o in t)t.hasOwnProperty(o)&&(t[o]?r+="["+o+'="'+t[o]+'"]':r+="["+o+"]");var i,a,l,s,c,d,u,f,h=function(e){if(!e||1!==e.nodeType)return!1;for(var n in t)if(t.hasOwnProperty(n)&&(!e.getAttribute(n)||t[n]&&e.getAttribute(n)!==t[n]))return!1;return!0},p=n.rangeUtils.getRange(),m=[];if(e){for(var g=n.env.body.querySelectorAll(r),v=0,b=g.length;v<b;v++)m.push(g[v]);return m}if(!p)return[];if(p.collapsed)return a=n.rangeUtils.getRangeAnchor(!1),i=n.domUtils.getPreviousNode(a,!1,null),a&&(a=n.domUtils.getParentByFilter(a,h,!0))&&m.push(a),m;if(i=n.rangeUtils.getRangeAnchor(!0),a=n.rangeUtils.getRangeAnchor(!1),!i||!a)return[];if(l=n.domUtils.getParentByFilter(i,h,!0),s=n.domUtils.getParentByFilter(a,h,!0),l&&l==s)return[l];c=n.domUtils.getParentRoot([i,a]).querySelectorAll(r),d=n.domUtils.getIndexList(i),u=n.domUtils.getIndexList(a),l&&m.push(l);for(var y=0,_=c.length;y<_;y++){var S=c[y];f=n.domUtils.getIndexList(S),n.domUtils.compareIndexList(d,f)<=0&&n.domUtils.compareIndexList(u,f)>=0&&m.push(S)}return m},n.isAmendEdited=function(){var e=n.getAmendDoms({selection:!0,selectAll:!0});return!!e&&(e.deleteList.length>0||e.insertList.length>0||e.deletedInsertList.length>0)},n.isWizAmend=function(e){return n.getWizAmendParent(e)},n.isWizDelete=function(e){return!!n.getWizDeleteParent(e)},n.isWizInsert=function(e){return!!n.getWizInsertParent(e)},n.modifyDomForPaste=function(e,t,r){if(e&&t){1===e.childNodes.length&&e.innerText===d.FILL_CHAR&&(e.innerHTML=""),1===t.childNodes.length&&t.innerText===d.FILL_CHAR&&(t.innerHTML="");var o=n.domUtils.getParentRoot([e,t]);if(o){for(var i,a,l,s,c=0,f=(s=n.domUtils.getListA2B({startDom:e,startOffset:0,endDom:t,endOffset:n.domUtils.getEndOffset(t)}).list).length;c<f;c++){var h=s[c];if(i=h.parentNode,l=n.getWizAmendParent(h),i){if(l)h=l;else if(3===h.nodeType){if(u.isEmpty(h.nodeValue))continue;n.domUtils.isWizSpan(i)&&0===i.children.length?h=i:((a=n.createDomForInsert(r)).innerHTML="",i.insertBefore(a,h),a.appendChild(h),h=a)}if(n.domUtils.isTag(h,"img"))h=n.packageImg(h,d.TYPE.IMG_INSERT,r);else if(n.domUtils.isSelfClosingTag(h))continue;n.setDefaultAttr(h,r),n.setUserInsertStyle(h,r)}}o!==n.env.body&&o!==n.env.body.parentNode&&o.parentNode&&(o=o.parentNode);for(var p=0,m=(s=o.querySelectorAll("span["+d.ATTR.SPAN_PASTE_TYPE+"]")).length;p<m;p++){var g=s[p];if(0===g.childNodes.length)n.domUtils.remove(g);else{var v={};v[d.ATTR.SPAN_PASTE_TYPE]=null,v[d.ATTR.SPAN_PASTE_ID]=null,n.domUtils.attr(g,v)}}}}},n.packageImg=function(e,t,r){var o,i,a,l=n.createDomForImg(t,r);for(o=e.parentNode,i=e.nextSibling;i&&3===i.nodeType&&i.nodeValue===d.FILL_CHAR;)a=i,i=i.nextSibling,n.domUtils.remove(a);l.appendChild(e);var s=n.env.doc.createElement("img");s.className+=d.CLASS.IMG_NOT_DRAG;var c={};return c[d.ATTR.IMG_MASK]="1",n.domUtils.attr(s,c),e.style.maxWidth&&(s.style.maxWidth=e.style.maxWidth),e.style.maxHeight&&(s.style.maxHeight=e.style.maxHeight),e.style.width&&(s.style.width=e.style.width),e.style.height&&(s.style.height=e.style.height),n.domUtils.css(s,d.CSS.IMG.MASK),t===d.TYPE.IMG_DELETE?n.domUtils.css(s,d.CSS.IMG_DELETED):n.domUtils.css(s,d.CSS.IMG_INSERT),l.appendChild(s),o.insertBefore(l,i),l},n.removeUserDel=function(e,t){var r,o=[];e||(e=n.rangeUtils.getRangeParentRoot()),e&&(n.domUtils.isBody(e)||(e=e.parentNode),(r=n.getWizAmendImgParent(e))&&r.getAttribute(d.ATTR.SPAN_USERID)!==t.hash&&(r=null),r?o.push(r):(n.domUtils.search(e,"["+d.ATTR.SPAN_INSERT+'="'+t.hash+'"]['+d.ATTR.SPAN_DELETE+'="'+t.hash+'"]',o),n.domUtils.search(e,"["+d.ATTR.SPAN_USERID+'="'+t.hash+'"] ['+d.ATTR.SPAN_DELETE+'="'+t.hash+'"]',o)));for(var i=0,a=o.length;i<a;i++){var l=o[i],s=l.parentNode;s.removeChild(l),n.domUtils.removeEmptyParent(s)}},n.removeSelection=function(e){var t,r=n.rangeUtils.getRange(),o=r.startContainer,i=r.startOffset,a=r.endContainer,l=r.endOffset,s=n.getWizAmendImgParent(o);if(n.getWizAmendImgParent(a)||(t=n.splitInsertDom(a,l,!0,e)).isInsert&&t.split&&n.rangeUtils.setRange(o,i,a,l),s||(t=n.splitInsertDom(o,i,!0,e)).isInsert&&t.split&&(a===o&&(l=(a=t.insertDom.nextSibling).childNodes.length),o=t.insertDom,i=t.insertDom.childNodes.length,n.rangeUtils.setRange(o,i,a,l)),!(r=n.rangeUtils.getRange()).collapsed){var c=n.getDeletedStyle(e);n.rangeUtils.modifySelectionDom(c.style,c.attr),n.fixSelectionByDeleteImg()}},n.setDefaultAttr=function(e,t){if(1===e.nodeType){var r={};r[d.ATTR.SPAN]=d.ATTR.SPAN,r[d.ATTR.SPAN_INSERT]=t.hash,r[d.ATTR.SPAN_USERID]=t.hash,r[d.ATTR.SPAN_TIMESTAMP]=u.getTime(),n.domUtils.attr(e,r)}},n.setUserImgContainerStyle=function(e){n.domUtils.css(e,d.CSS.IMG.SPAN)},n.setUserInsertStyle=function(e,t){n.domUtils.css(e,{color:t.color,"text-decoration":"underline"})},n.splitAmendDomByRange=function(e){if(!e)return null;var t,r,o=n.rangeUtils.getRange(),i=e.startContainer,a=e.endContainer,l=e.startOffset,s=e.endOffset;if(o&&!o.collapsed){if(o.startContainer===o.endContainer&&3===o.startContainer.nodeType&&o.startContainer.nodeValue===d.FILL_CHAR)return null;n.req.commandExtend.execCommand("delete"),a=(o=n.rangeUtils.getRange()).endContainer,s=o.endOffset}else t=n.getWizAmendImgParent(e.leftDom),(r=n.getWizAmendImgParent(e.rightDom))?(a=r,s=0,n.rangeUtils.setRange(a,s,a,s)):t&&(i=t,l=t.childNodes.length,n.rangeUtils.setRange(i,l,i,l)),(o=n.rangeUtils.getRange())||(n.domUtils.focus(),o=n.rangeUtils.getRange()),o&&(a=o.endContainer,s=o.endOffset);var c=n.splitAmendDomForReverse(a,s);return c?(n.rangeUtils.setRange(c,1,c,1),c):null},n.splitAmendDomForReverse=function(e,t){var r=n.getWizAmendImgParent(e);if(!r&&1===e.nodeType&&t>0?(e=e.childNodes[t-1],t=n.domUtils.getEndOffset(e)):r||1!==e.nodeType||(e=e.childNodes[0]),!e)return null;var o=n.getWizInsertParent(e),i=n.getWizDeleteParent(e),a=o||i,l=n.createDomForReverse();if(r)n.domUtils.before(l,r,t>0);else{if(!a)return null;if(!(a=n.splitWizDomWithTextNode(e,t)))return null;n.domUtils.after(l,a)}return l},n.splitDeletedDom=function(e,t){if(1===e.nodeType)return!1;return!!n.isWizDelete(e)&&!!n.splitWizDomWithTextNode(e,t)},n.splitInsertDom=function(e,t,r,o){var i={insertDom:null,isInsert:!1,split:!1};if(!e)return i;if(1===e.nodeType&&t>0?(e=e.childNodes[t-1],t=n.domUtils.getEndOffset(e)):1===e.nodeType&&(e=e.childNodes[0]),!e)return i;var a,l,s=n.getWizAmendImgParent(e),c=n.getWizInsertParent(e);if(i.insertDom=c,!c&&1===e.nodeType)return i;if(s)return i;if(c&&(r||c.getAttribute(d.ATTR.SPAN_USERID)!==o.hash))i.split=!0;else if(c)if(a=c.getAttribute(d.ATTR.SPAN_TIMESTAMP),l=u.getTime(),u.getDateForTimeStr(l)-u.getDateForTimeStr(a)>=d.AMEND_TIME_SPACE)i.split=!0;else{var f={};f[d.ATTR.SPAN_TIMESTAMP]=l,n.domUtils.attr(c,f)}return i.split&&(i.split=!!n.splitWizDomWithTextNode(e,t)),i.isInsert=!!c,i},n.splitSelectedAmendDoms=function(e){if(e&&(e.start||e.end)){var t,r=n.rangeUtils.getRange(),o=r.startContainer,i=r.startOffset,a=r.endContainer,l=r.endOffset;e.start&&e.end&&mendDoms.start.dom===e.end.dom?(n.splitWizDomWithTextNode(e.end.dom,e.end.offset),t=(t=n.splitWizDomWithTextNode(e.start.dom,e.start.offset)).nextSibling,n.add2SelectedAmendDoms(e,t),o=t,i=0,a=t,l=t.childNodes.length):(e.start&&(t=(t=n.splitWizDomWithTextNode(e.start.dom,e.start.offset)).nextSibling,n.add2SelectedAmendDoms(e,t),o=t,i=0),e.end&&(t=n.splitWizDomWithTextNode(e.end.dom,e.end.offset),n.add2SelectedAmendDoms(e,t),a=t,l=t.childNodes.length)),delete e.start,delete e.end,n.rangeUtils.setRange(o,i,a,l)}},n.splitWizDomWithTextNode=function(e,t){if(!e||3!==e.nodeType)return null;var r,o,i,a,l=null;for(t<e.nodeValue.length?(r=e.nodeValue.substr(t),(o=e.cloneNode(!1)).nodeValue=r,e.nodeValue=e.nodeValue.substr(0,t),e.parentNode.insertBefore(o,e.nextSibling),l=e,i=e.parentNode,a=o):(i=e.parentNode,a=e.nextSibling);i&&!n.domUtils.isBody(i)&&(l=i,n.domUtils.splitDomBeforeSub(i,a),!i||1!==i.nodeType||!i.getAttribute(d.ATTR.SPAN_DELETE)&&!i.getAttribute(d.ATTR.SPAN_INSERT));)a=i.nextSibling,i=i.parentNode;return l},n.wizAmendDelete=function(e){for(var t=0,r=e.length;t<r;t++){var o=e[t],i=o.parentNode;i.removeChild(o),n.domUtils.removeEmptyParent(i)}},n.wizAmendSave=function(e){for(var t=0,r=e.length;t<r;t++){var o=e[t];if(o.getAttribute(d.ATTR.SPAN_DELETE)&&o.getAttribute(d.ATTR.SPAN_INSERT)&&o.getAttribute(d.ATTR.SPAN_INSERT)!==o.getAttribute(d.ATTR.SPAN_USERID)){var i=n.req.amendUser.getUserByGuid(o.getAttribute(d.ATTR.SPAN_INSERT));i=i||{};var a={};a[d.ATTR.SPAN_DELETE]=null,a[d.ATTR.SPAN_USERID]=i.hash,n.domUtils.attr(o,a),o.getAttribute(d.ATTR.IMG)?(n.setUserImgContainerStyle(o),n.domUtils.css(mask,d.CSS.IMG_INSERT)):n.setUserInsertStyle(o,i)}else if(o.getAttribute(d.ATTR.IMG))n.domUtils.before(o.children[0],o),n.domUtils.remove(o);else{n.domUtils.css(o,{color:"","text-decoration":""});var l={};l[d.ATTR.SPAN_USERID]=null,l[d.ATTR.SPAN_INSERT]=null,l[d.ATTR.SPAN_DELETE]=null,l[d.ATTR.SPAN_PASTE]=null,l[d.ATTR.SPAN_PASTE_TYPE]=null,l[d.ATTR.SPAN_PASTE_ID]=null,l[d.ATTR.SPAN_TIMESTAMP]=null,n.domUtils.attr(o,l)}}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(2),f="table",h="code",p=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._scrollContainer=null,n._scroll=null,n._blockList=[],n._findTimer=null,n._checkScroll=function(){if(0!==n._blockList.length){var e=n.env.options.document.documentElement.clientHeight,t=n.domUtils.getPageScroll(),r=t.top+e;if(n.env.options.container){var o=n.domUtils.getOffset(n.env.options.container),i=n.domUtils.getOffset(n.env.scrollContainer);e=n.domUtils.isTag(n.env.scrollContainer,"body")?n.env.scrollContainer.ownerDocument.documentElement.clientHeight:n.env.scrollContainer.clientHeight,r=t.top+e-(o.top-i.top)}for(var a=n._blockList.length-1;a>=0;a--){var l=n._blockList[a];if(l.top<r&&l.top+l.height>r&&l.target.offsetWidth<l.target.scrollWidth)return n._scroll&&n._scroll.curBlock&&n._scroll.curBlock.target===l.target?void n._setScrollSize(l):(n._scroll&&n._hideDiyScroll(),void n._showDiyScroll(l))}n._hideDiyScroll()}},n._findBlocks=function(){var e;n._blockList=[];for(var t=n.env.body.querySelectorAll("table"),r=t.length-1;r>=0;r--){var o=t[r],i=n.req.tableUtils.getContainer(o);i||(n.req.tableUtils.initTableContainer(o),i=n.req.tableUtils.getContainer(o)),i&&(e=i.querySelector("."+d.CLASS.TABLE_BODY),n._blockList.push({type:f,target:e,top:i.offsetTop,height:i.offsetHeight}))}if(!n.env.client.type.isPhone&&!n.env.client.type.isPad)for(var a=n.env.body.querySelectorAll("."+d.CLASS.CODE_MIRROR),l=a.length-1;l>=0;l--){var s=a[l],c=n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(s);!c&&n.req.codeUtils&&(n.req.codeUtils.fixCode(s),c=n.req.codeUtils.getContainerFromChild(s)),c&&(e=s.querySelector("."+d.CLASS.CODE_MIRROR_HSCROLL),n._blockList.push({type:h,target:e,codeMirror:c.codeMirror,top:c.offsetTop,height:c.offsetHeight}))}n._checkScroll()},n._findBlocksController=function(){n._scroll&&n._scroll.parentNode!==n._scrollContainer&&n._checkScroll(),n._findTimer&&clearTimeout(n._findTimer),n._findTimer=setTimeout(n._findBlocks,100)},n._hideDiyScroll=function(){n._scroll&&(n._event.unbindScroll(),n._scroll.curBlock=null,n._scrollContainer.appendChild(n._scroll))},n._setScrollSize=function(e){var t;n._scroll?t=n._scroll.children[0]:(n._scroll=n.env.doc.createElement(d.TAG.TMP_TAG),t=n.env.doc.createElement("div"),n._scroll.appendChild(t),n.domUtils.addClass(n._scroll,d.CLASS.BLOCK_SCROLL));var r=e.target.scrollWidth;n.domUtils.css(t,{width:r+"px",height:"1px","background-color":"rgba(255, 255, 255, 0.2)"});var o=0;if(n.env.options.container){var i=n.domUtils.getOffset(n.env.options.container),a={top:0,left:0};n.env.scrollContainer&&(a=n.domUtils.getOffset(n.env.scrollContainer));var l=n.domUtils.getPageScroll(),s=0;s=n.domUtils.isTag(n.env.scrollContainer,"body")?n.env.scrollContainer.ownerDocument.documentElement.clientHeight:n.env.scrollContainer.clientHeight,o=n.env.options.container.offsetHeight-(s-(i.top-a.top))-l.top}n.domUtils.css(n._scroll,{"background-color":"rgba(255, 255, 255, 0.2)",height:"17px",width:e.target.offsetWidth+"px","overflow-x":"scroll","overflow-y":"hidden",position:"fixed",bottom:o+"px","z-index":999}),n._scroll.scrollLeft=e.target.scrollLeft},n._showDiyScroll=function(e){n._setScrollSize(e),n._scroll.curBlock=e,n.domUtils.after(n._scroll,e.target),n._event.bindScroll(),n._handler.onTxScroll()},n._event={bind:function(){n._event.unbind(),n.env.client.type.isIOS||n.env.client.type.isAndroid||(n.env.event.add(d.EVENT.ON_SCROLL,n._handler.onScroll),n.env.event.add(d.EVENT.ON_DOM_SUBTREE_MODIFIED,n._handler.updateRender),n.env.event.add(d.EVENT.ON_RESIZE,n._handler.updateRender)),n.env.readonly||(n.env.client.type.isPhone||n.env.client.type.isPad?n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown):n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown))},unbind:function(){n._hideDiyScroll(),n.env.event.remove(d.EVENT.ON_SCROLL,n._handler.onScroll),n.env.event.remove(d.EVENT.ON_DOM_SUBTREE_MODIFIED,n._handler.updateRender),n.env.event.remove(d.EVENT.ON_RESIZE,n._handler.updateRender),n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown)},bindScroll:function(){n._event.unbindScroll(),n._scroll.addEventListener("scroll",n._handler.onSxScroll)},unbindScroll:function(){n._scroll.removeEventListener("scroll",n._handler.onSxScroll)}},n._handler={onMouseDown:function(e){("mousedown"!==e.type||0===e.button||1===e.button)&&n.req.blockUtils.checkAndInsertEmptyLine(e)},onScroll:function(){n._findBlocksController()},onSxScroll:function(){n._scroll.curBlock&&(n._scroll.curBlock.target.scrollLeft=n._scroll.scrollLeft)},onTxScroll:function(){n._scroll.curBlock&&(n._scroll.scrollLeft=n._scroll.curBlock.target.scrollLeft)},updateRender:function(){n._findBlocksController()}},n.on=function(){n._event.bind(),n.env.client.type.isIOS||n.env.client.type.isAndroid||(n._scrollContainer||(n._scrollContainer=n.env.doc.createElement("div")),n._findBlocksController())},n.off=function(){n._event.unbind()},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(u);e.exports=p},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._checkPageFirst=function(e,t,r){var o,i,a=!1,l=!1,s=t?n.domUtils.getFirstDeepChild(e):n.domUtils.getLastDeepChild(e);if(i=n.domUtils.getParentByClass(s,d.CLASS.CODE_CONTAINER))s=i;else for(;s&&!n.domUtils.canEdit(s);)s=t?n.domUtils.getNextNodeCanEdit(s,!1):n.domUtils.getPreviousNodeCanEdit(s,!1);return s&&(3===s.nodeType&&(s=s.parentNode),o=n.domUtils.getOffset(s),i=n.domUtils.getParentByFilter(s,n._getBlockFun,!0),t&&r<o.top&&i?a=!0:!t&&r>o.top+s.offsetHeight&&i?l=!0:s=null),{container:i,isFirst:a,isLast:l}},n._checkLi=function(e,t){var r={start:e,end:t},o=n.domUtils.getParentByTagName(e,"li",!0),i=n.domUtils.getParentByTagName(t,"li",!0);return o||i?(o!==i&&(r.start=o||e,r.end=i||t),r):r},n._clearEmptyBlock=function(e){return!(!n.domUtils.isEmptyDom(e)||n.domUtils.isIncludeBr(e))&&(n.domUtils.remove(e),!0)},n._fixBlockList=function(e,t,r){if(n.rangeUtils.getRange())for(var o,i,a,l,s,c,f=e,h=!1;f;){var p=n.domUtils.getIndexList(t).join(".");if(c=n.domUtils.getIndexList(f).join("."),u.compareVersion(c,p)>0)break;if(o=!1,i=!1,a=!1,l=!1,s=!1,n.domUtils.isBlock(f,{includeBr:!1})){var m=n.domUtils.getParentByClass(f,d.CLASS.CODE_CONTAINER,!0);if(m?(i=!0,f=m):l=n.domUtils.isWizDom(f),!i&&!l){var g=n.domUtils.getParentByClass(f,d.CLASS.TABLE_CONTAINER,!0);g&&(a=!0,f=g)}l||i||a||(o=n.req.todoUtils&&!!n.req.todoUtils.isLayer(f)),l||i||a||o||(s=n.domUtils.isTag(f,["blockquote"]));var v=void 0,b=n.domUtils.getParentList(f);if(s&&b.length>0)for(var y=f,_=b.length-1;_>=0;_--){var S=b[_];n.domUtils.isTag(S,["blockquote"])?(y=S,v=S):(v=n.domUtils.splitDomSingle(S,y),n.domUtils.before(y,v),n.domUtils.remove(v),v=y)}else if(r<b.length){var E=b[r];v=n.domUtils.splitDomSingle(E,f)}else v=f;v.isBlock=!0,(l||i||a)&&(v.notFormat=!0)}var C=!h&&!n.domUtils.isTag(f,["ol","ul"])&&f.childNodes.length>0,T=void 0;if(l||i||a||o||!C)for(T=f.nextSibling;!T&&f!==n.env.body&&f.parentNode;)h=!(T=(f=f.parentNode).nextSibling),!T&&n.domUtils.isTag(f,["blockquote"])&&(T=f);else T=f.childNodes[0];f=T}},n._getBlockFun=function(e){return n.domUtils.hasClass(e,d.CLASS.CODE_CONTAINER)||n.domUtils.hasClass(e,d.CLASS.TABLE_CONTAINER)},n._getBlockContainer=function(e){return n.domUtils.getParentByFilter(e,n._getBlockFun,!0)},n._isComponentBlock=function(e){return n.domUtils.hasClass(e,d.CLASS.CODE_CONTAINER)||n.domUtils.hasClass(e,d.CLASS.TABLE_CONTAINER)||n.domUtils.hasClass(e,d.CLASS.TABLE_BODY)},n.checkAndInsertEmptyLine=function(e){var t=e.changedTouches?e.changedTouches[0]:null,r=t?t.target:e.target,o=u.getEventClientPos(e),i=n.domUtils.getPageScroll().top+o.y;if(n.env.doc.elementFromPoint){var a=n.domUtils.getPageScroll().left+o.x,l=n.env.doc.elementFromPoint(a,i-10);l&&(l=n._getBlockContainer(l)),l&&n.domUtils.isParent(l,r)&&(r=l)}var s,c,d,f,h=!1,p=!1,m=n.domUtils.getParentByFilter(r,(function(e){return"true"===e.getAttribute("contenteditable")&&!n.req.tableUtils.getContainer(r)}),!0)||n.env.body,g=m&&r===m,v=m&&r===m.parentNode;if(g||v)g&&(p=(d=n._checkPageFirst(m,!0,i)).isFirst,c=d.container),p||(h=(d=n._checkPageFirst(m,!1,i)).isLast,c=d.container);else if(n._isComponentBlock(r))if(f=0,(c=n._getBlockContainer(r))&&(f=i-n.domUtils.getOffset(c).top),c&&f<15){s=n.domUtils.getPreviousNodeCanEdit(r,!1);var b=n._getBlockContainer(s);!s||b&&b!==c?p=!0:s&&(b=n.domUtils.getBlockParent(s,!0))&&n.domUtils.isTag(b,"li")&&!n.domUtils.isParent(c,b)&&(p=!0)}else if(c&&r.offsetHeight-f<15){s=n.domUtils.getNextNodeCanEdit(r,!1);var y=n._getBlockContainer(s);!s||y&&y!==c?h=!0:s&&(y=n.domUtils.getBlockParent(s,!0))&&n.domUtils.isTag(y,"li")&&!n.domUtils.isParent(c,y)&&(h=!0)}c&&(h||p)?(n.req.historyUtils.saveSnap(!1),n.insertEmptyLine(c,h)):s=null},n.insertBlock=function(e){var t,r,o,i=n.rangeUtils.getRange();if(i){t=n.rangeUtils.getRangeDetail(i.startContainer,i.startOffset).container;var a=r=n.domUtils.getBlockParent(t,!0);if(n.domUtils.hasClass(r,d.CLASS.TODO_LAYER))t=n.env.doc.createElement(r.tagName),n.domUtils.after(t,r),t.appendChild(e),r=t;else if(!r||!n.domUtils.isEmptyDom(r)){var l=null;r&&n.domUtils.isTag(t,"br")&&(l=t.previousSibling),n.domUtils.isTag(l,"br")||(n.req.commandExtend.execCommand("insertparagraph"),t=1===(i=n.rangeUtils.getRange()).startContainer.nodeType&&i.startContainer.childNodes.length>0?i.startContainer.childNodes[i.startOffset]:i.startContainer,r=n.domUtils.getBlockParent(t,!0),t.nextSibling&&n.domUtils.isTag(t,"br")&&n.domUtils.remove(t))}r!==a&&n.domUtils.isEmptyDom(r)&&n.domUtils.isTag(r,"div")?(r.innerHTML="",r.appendChild(e)):(r===a&&(r=t),t=n.env.doc.createElement("div"),n.domUtils.isTag(r,"li")&&n.domUtils.isTag(r.previousElementSibling,"li")?r.previousElementSibling.appendChild(t):n.domUtils.before(t,r),t.appendChild(e),(n.domUtils.isEmptyDom(r)||n.domUtils.isTag(r,"br"))&&n.domUtils.remove(r),r=t),n.domUtils.clearChild(a)}else(r=n.env.doc.createElement("div")).appendChild(e),n.env.body.appendChild(r),(o=n.env.doc.createElement("div")).appendChild(n.env.doc.createElement("br")),n.env.body.appendChild(o);return r},n.insertEmptyLine=function(e,t){if(e){var r=n.env.doc.createElement("div"),o=n.env.doc.createElement("br");r.appendChild(o),n.domUtils.before(r,e,t),n.req.tableZone.clear(),n.rangeUtils.setRange(o,0)}},n.fixAndGetBlockListFromRange=function(){var e=[],t=n.rangeUtils.getRange();if(!t){if(n.req.tableZone.getZone().range)for(var r=n.req.tableZone.getSelectedCells(),o=0;o<r.length;o++)e.push(r[o]);return e}var i,a=n.rangeUtils.getRangeDetail(t.startContainer,t.startOffset).container,l=n.rangeUtils.getRangeDetail(t.endContainer,t.endOffset).container;if(n.domUtils.isBlock(a,{includeBr:!0})||(a=(i=n.domUtils.getPrevBlock(a))&&i!==n.env.body&&n.domUtils.isParent(a,i)?i:i&&i!==n.env.body?n.domUtils.getNextNode(i,!1,a):n.domUtils.getFirstDeepChild(n.env.body)),!n.domUtils.isBlock(l,{includeBr:!0})){var s=n.domUtils.getNextBlock(l);l=s&&s!==n.env.body&&n.domUtils.isParent(l,s)?n.domUtils.getLastDeepChild(s):s&&s!==n.env.body?n.domUtils.getPreviousNode(s,!1,l):n.domUtils.getLastDeepChild(n.env.body)}var c=a===l;if(!c){var d=n._checkLi(a,l);a=d.start,l=d.end}if(n.domUtils.isBlock(a,{includeBr:!0})||(i=n.domUtils.getPrevBlock(a))&&n.domUtils.isTag(i,["br"])&&n.domUtils.remove(i),!n.domUtils.isBlock(l,{includeBr:!0})){var f=n.domUtils.getNextBlock(l);f&&n.domUtils.isTag(f,["br"])&&(n.domUtils.isParent(f,i)&&(n.domUtils.isTag(i,["li"])&&(i=n.domUtils.packageChildNodesByDiv(i)),n.domUtils.splitDomBeforeSub(i,f)),n.domUtils.remove(f))}var h=n.domUtils.getParentRoot([a,l]);if(n.domUtils.isTag(h,["td","th"])){var p=n.domUtils.packageChildNodesByDiv(h);a===h&&(a=p),l===h&&(l=p),h=p}var m=0;h!==n.env.body&&(m=n.domUtils.getParentList(h).length+1);var g,v,b=n.domUtils.getParentList(a);m<b.length?(g=b[m],a=n.domUtils.splitDomBeforeSub(g,a)):g=a,c?l=a:m<(b=n.domUtils.getParentList(l)).length&&(v=b[m],n.domUtils.splitDomAfterSub(v,l)),n._fixBlockList(a,l,m);var y,_=g=m<(b=n.domUtils.getParentList(a)).length?b[m]:a;if(g===l&&n.domUtils.isTag(g,"br")){for(var S=g.parentNode,E=null;S&&S!==n.env.body&&1===S.childNodes.length;)E=S,S=S.parentNode;E&&(_=E,n.domUtils.isBlock(_)&&(_.isBlock=!0))}for(;_;){var C=_.nextSibling;if(_.isBlock?(y=null,n.domUtils.isTag(_,"br")?(y=n.env.doc.createElement("div"),n.domUtils.before(y,_),e.push(y),y.appendChild(_)):n._clearEmptyBlock(_)||e.push(_)):(y||(y=n.env.doc.createElement("div"),n.domUtils.before(y,_),e.push(y)),y.appendChild(_)),_=C){var T=n.domUtils.getIndexList(l).join("."),A=n.domUtils.getIndexList(_).join(".");if(u.compareVersion(A,T)>0)break}}return e},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(43),h=n(25),p=n(2),m=new f,g=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).hasLoaded=!1,n._loadDependency=function(e){m.addCallback(n.env.doc,e),m.getLoading(n.env.doc)||(void 0===n.env.win.CodeMirror?(m.setLoading(n.env.doc,!0),h.loadJs(n.env.doc,h.getDependencyFiles(n.env.dependency,"js","codeMirror"),(function(){m.setLoading(n.env.doc,!1),m.callback(n.env.doc)}))):m.callback(n.env.doc))},n._event={bindDefault:function(){n.env.event.add(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml),n.env.event.add(d.EVENT.BEFORE_SAVESNAP,n._handler.onBeforeSaveSnap)},unbindDefault:function(){n.env.event.remove(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml),n.env.event.remove(d.EVENT.BEFORE_SAVESNAP,n._handler.onBeforeSaveSnap)},bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.ON_SELECT_PLUGIN_CHANGE,n._handler.onChangeSelector),n.env.event.add(d.EVENT.ON_SELECT_PLUGIN_HIDE,n._handler.onHideSelector),n.env.event.add(d.EVENT.ON_SELECT_PLUGIN_SHOW,n._handler.onShowSelector),n.env.event.add(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory),n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown)},unbind:function(){n.env.event.remove(d.EVENT.ON_SELECT_PLUGIN_CHANGE,n._handler.onChangeSelector),n.env.event.remove(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown)}},n._handler={beforeGetDocHtml:function(){n.req.codeUtils.saveToText(),n.req.codeStyle.clearStyle()},onAfterRestoreHistory:function(){for(var e=n.req.codeUtils.getContainerList(),t=e.length-1;t>=0;t--){var r=e[t],o=r.codeMirror;if(!o){n.req.codeUtils.fixCodeContainer({container:r});var i=n.req.historyUtils.getCodeMirrorDoc(r.id);i&&(o=r.codeMirror).swapDoc(i)}}},onBeforeSaveSnap:function(){for(var e=n.req.codeUtils.getContainerList(),t=e.length-1;t>=0;t--){var r=e[t].codeMirror;r&&(r.save(),n.domUtils.setTextarea(r.getTextArea()))}},onHideSelector:function(e){var t=n.req.codeUtils.getContainerFromChild(e);t&&n.domUtils.removeClass(t,"CodeMirror-show-tools")},onShowSelector:function(e){var t=n.req.codeUtils.getContainerFromChild(e);t&&n.domUtils.addClass(t,"CodeMirror-show-tools")},onChangeSelector:function(e){var t=n.req.codeUtils.getContainerFromChild(e);t&&(n.domUtils.hasClass(e,d.CLASS.CODE_TOOLS_MODE)?n.req.codeUtils.changeMode(t,e.value,!1):n.domUtils.hasClass(e,d.CLASS.CODE_TOOLS_THEME)?(n.req.codeStyle.insertTheme(e.value),n.req.codeUtils.changeTheme(t,e.value,!1)):n.domUtils.hasClass(e,d.CLASS.CODE_TOOLS_MORE)&&(e.value===d.CODE.StorageKey.Wrap?n.req.codeUtils.changeLineWrapping(!n.env.options.code.lineWrapping):"copy"===e.value&&n.req.codeUtils.copyAll(t)),t.codeMirror.focus())},onMouseDown:function(e){n.req.codeUtils.getToolsFromChild(e.target)&&u.stopEvent(e)},onKeyDown:function(e){return!(n.hasLoaded&&!n.req.codeUtils.onKeyDown(e))||(u.stopEvent(e),!1)}},n.on=function(e,t){n.req.codeStyle.initCommon(),n._event.bindDefault();var r=n.req.codeUtils.oldPatch.getOldCodeList(e.body),o=n.req.codeUtils.getContainerList(e.body),i=n.req.codeUtils.pastePatch.getPasteCodeList();e.forceLoad||0!==r.length||0!==o.length||0!==i.length?n._loadDependency((function(){n.hasLoaded=!0,n._event.bind(),e=e||{},n.req.codeUtils.oldPatch.fixOldCode(e.body),n.req.codeUtils.fixCodeContainer({body:e.body,container:null,readOnly:e.readOnly}),t&&t()})):t&&t()},n.off=function(){n._event.unbindDefault(),n._event.unbind(),n.req.codeUtils.clearCodeMirror(),n.hasLoaded=!1},n.insertCode=function(){if(n.hasLoaded){n.req.historyUtils.saveSnap(!1);var e=n.rangeUtils.getRange();if(!e||n.req.codeUtils.canCreateCode()){var t,r,o,i,a,l="";if(e){if(!e.collapsed){for(i=n.env.doc.createElement("div"),a=e.cloneContents();a.firstChild;)i.appendChild(a.firstChild);i.style.position="absolute",i.style.top="0px",i.style.left="-10000px",i.style.height="1px",n.env.body.appendChild(i),l=i.innerText,n.env.body.removeChild(i),e.deleteContents()}t=n.rangeUtils.getRangeDetail(e.startContainer,e.startOffset),(t=n.domUtils.getBlockParent(t.container,!0))&&t!==n.env.body&&n.domUtils.isEmptyDom(t)&&n.domUtils.isTag(t,"div")&&(r=t,t.innerHTML="")}o=n.env.doc.createElement("textarea"),n.domUtils.setTextarea(o,l),(r=r||n.env.doc.createElement("div")).appendChild(o),n.domUtils.addClass(r,d.CLASS.CODE_CONTAINER),r.isNew=!0,r.parentNode||n.req.blockUtils.insertBlock(r),n.req.codeUtils.fixCodeContainer({container:r}),r.isNew=!1,setTimeout((function(){r.codeMirror.focus()}),100)}}else n.on({forceLoad:!0},n.insertCode)},n.onKeyDown=n._handler.onKeyDown,n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(p);e.exports=g},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(2),f={tmp:{common:".wiz-code-tools {display:none; align-items: center;position: absolute; top: -32px; right: 0; opacity: .95; z-index: 110;}."+d.CLASS.WIZ_BODY+" ."+d.CLASS.CODE_CONTAINER+" .wiz-code-tools {opacity:0;display:flex;transition: opacity 500ms;}."+d.CLASS.WIZ_BODY+" ."+d.CLASS.CODE_CONTAINER+":hover .wiz-code-tools {opacity:1; }."+d.CLASS.WIZ_BODY+" ."+d.CLASS.CODE_TOOLS+" ."+d.CLASS.CODE_TOOLS_INFO+" {background: rgba(255, 255, 255, 0.4);font-size: 14px;padding: 2px 20px;position: absolute;right: 5px;top: 36px;border-radius: 4px;white-space: nowrap;opacity:0;transition: opacity 200ms;}."+d.CLASS.WIZ_BODY+" ."+d.CLASS.CODE_TOOLS+".active ."+d.CLASS.CODE_TOOLS_INFO+" {opacity:1;}."+d.CLASS.EDITING+" .CodeMirror-show-tools .wiz-code-tools {z-index: 220;}."+d.CLASS.READONLY+" .wiz-code-tools.mobile,."+d.CLASS.EDITING+" .CodeMirror-show-tools .wiz-code-tools,."+d.CLASS.EDITING+" .CodeMirror-focused .wiz-code-tools {opacity:1; display: flex;}.CodeMirror-sizer {border-right: 0 !important;}."+d.CLASS.WIZ_BODY+" pre.prettyprint {padding:0;}."+d.CLASS.WIZ_BODY+" pre.prettyprint code {white-space: pre-wrap;}."+d.CLASS.WIZ_BODY+" pre.prettyprint.linenums {box-shadow:none; overflow: auto;-webkit-overflow-scrolling: touch;}."+d.CLASS.WIZ_BODY+" pre.prettyprint.linenums ol.linenums {box-shadow: 40px 0 0 #FBFBFC inset, 41px 0 0 #ECECF0 inset; padding: 10px 10px 10px 44px !important;margin:0;font-size:0.875rem;}."+d.CLASS.EDITING+" .CodeMirror-activeline-background {display: none;}."+d.CLASS.EDITING+" .CodeMirror-focused .CodeMirror-activeline-background {display: block;}",reader:"."+d.CLASS.READONLY+" .CodeMirror-cursors {visibility: hidden !important;}",readerForIphone:"."+d.CLASS.READONLY+" ."+d.CLASS.CODE_CONTAINER+" .CodeMirror-scroll {-webkit-overflow-scrolling: touch;}."+d.CLASS.READONLY+" ."+d.CLASS.CODE_CONTAINER+" .CodeMirror-sizer {min-width: auto !important;}",phone:"."+d.CLASS.CODE_CONTAINER+"{margin-left:0; margin-right:0;}",scrollForPhone:"."+d.CLASS.CODE_CONTAINER+" .CodeMirror-scroll {overflow-x: auto !important;overflow-y: hidden !important;}"},common:"."+d.CLASS.WIZ_BODY+" ."+d.CLASS.CODE_CONTAINER+'{position: relative; padding:8px 0; margin: 5px 0;text-indent:0; text-align:left;}.CodeMirror {font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace; color: black; font-size: 10.5pt; font-size: 0.875rem}.'+d.CLASS.WIZ_BODY+" ."+d.CLASS.CODE_CONTAINER+' .CodeMirror div {margin-top: 0; margin-bottom: 0;}.CodeMirror-lines {padding: 4px 0;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {padding: 0 4px;}.CodeMirror pre.CodeMirror-line {min-height: 24px;}.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {background-color: white;}.CodeMirror-gutters {border-right: 1px solid #ddd; background-color: #f7f7f7; white-space: nowrap;}.CodeMirror-linenumbers {}.CodeMirror-linenumber {padding: 0 3px 0 5px; min-width: 20px; text-align: right; color: #999; white-space: nowrap;}.CodeMirror-guttermarker {color: black;}.CodeMirror-guttermarker-subtle {color: #999;}.CodeMirror-cursor {border-left: 1px solid black; border-right: none; width: 0;}.CodeMirror div.CodeMirror-secondarycursor {border-left: 1px solid silver;}.cm-fat-cursor .CodeMirror-cursor {width: auto; border: 0 !important; background: #7e7;}.cm-fat-cursor div.CodeMirror-cursors {z-index: 1;}.cm-fat-cursor-mark {background-color: rgba(20, 255, 20, 0.5);-webkit-animation: blink 1.06s steps(1) infinite;-moz-animation: blink 1.06s steps(1) infinite;animation: blink 1.06s steps(1) infinite;}.cm-animate-fat-cursor {width: auto; border: 0; -webkit-animation: blink 1.06s steps(1) infinite; -moz-animation: blink 1.06s steps(1) infinite; animation: blink 1.06s steps(1) infinite; background-color: #7e7;}@-moz-keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}@-webkit-keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}@keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}.CodeMirror-overwrite .CodeMirror-cursor {}.cm-tab { display: inline-block; text-decoration: inherit; }.CodeMirror-rulers {position: absolute; left: 0; right: 0; top: -50px; bottom: -20px; overflow: hidden;}.CodeMirror-ruler {border-left: 1px solid #ccc; top: 0; bottom: 0; position: absolute;}.cm-s-default .cm-header {color: blue;}.cm-s-default .cm-quote {color: #090;}.cm-negative {color: #d44;}.cm-positive {color: #292;}.cm-header, .cm-strong {font-weight: bold;}.cm-em {font-style: italic;}.cm-link {text-decoration: underline;}.cm-strikethrough {text-decoration: line-through;}.cm-s-default .cm-keyword {color: #708;}.cm-s-default .cm-atom {color: #219;}.cm-s-default .cm-number {color: #164;}.cm-s-default .cm-def {color: #00f;}.cm-s-default .cm-variable,.cm-s-default .cm-punctuation,.cm-s-default .cm-property,.cm-s-default .cm-operator {}.cm-s-default .cm-variable-2 {color: #05a;}.cm-s-default .cm-variable-3 {color: #085;}.cm-s-default .cm-comment {color: #a50;}.cm-s-default .cm-string {color: #a11;}.cm-s-default .cm-string-2 {color: #f50;}.cm-s-default .cm-meta {color: #555;}.cm-s-default .cm-qualifier {color: #555;}.cm-s-default .cm-builtin {color: #30a;}.cm-s-default .cm-bracket {color: #997;}.cm-s-default .cm-tag {color: #170;}.cm-s-default .cm-attribute {color: #00c;}.cm-s-default .cm-hr {color: #999;}.cm-s-default .cm-link {color: #00c;}.cm-s-default .cm-error {color: #f00;}.cm-invalidchar {color: #f00;}.CodeMirror-composing { border-bottom: 2px solid; }div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }.CodeMirror-activeline-background {background: #e8f2ff;}.CodeMirror {position: relative; background: #f5f5f5;}.CodeMirror-scroll {overflow: hidden !important; margin-bottom: 0; margin-right: -30px; padding: 16px 30px 16px 0; outline: none; position: relative;}.CodeMirror-sizer {position: relative; border-right: 30px solid transparent;}.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {position: absolute; z-index: 6; display: none;}.CodeMirror-vscrollbar {right: 0; top: 0; overflow-x: hidden; overflow-y: scroll;}.CodeMirror-hscrollbar {bottom: 0; left: 0 !important; overflow-y: hidden; overflow-x: scroll;pointer-events: auto !important;outline: none;}.CodeMirror-scrollbar-filler {right: 0; bottom: 0;}.CodeMirror-gutter-filler {left: 0; bottom: 0;}.CodeMirror-gutters {position: absolute; left: 0; top: 0; min-height: 100%; z-index: 3;}.CodeMirror-gutter {white-space: normal; height: 100%; display: inline-block; vertical-align: top; margin-bottom: -30px;}.CodeMirror-gutter-wrapper {position: absolute; z-index: 4; background: none !important; border: none !important;}.CodeMirror-gutter-background {position: absolute; top: 0; bottom: 0; z-index: 4;}.CodeMirror-gutter-elt {position: absolute; cursor: default; z-index: 4;}.CodeMirror-gutter-wrapper ::selection { background-color: transparent }.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }.CodeMirror-lines {cursor: text; min-height: 1px;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {-moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; border-width: 0; background: transparent; font-family: inherit; font-size: inherit; margin: 0; white-space: pre; word-wrap: normal; line-height: inherit; color: inherit; z-index: 2; position: relative; overflow: visible; -webkit-tap-highlight-color: transparent; -webkit-font-variant-ligatures: contextual; font-variant-ligatures: contextual;}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like {word-wrap: break-word; white-space: pre-wrap; word-break: normal;}.CodeMirror-linebackground {position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: 0;}.CodeMirror-linewidget {position: relative; z-index: 2; padding: 0.1px;}.CodeMirror-widget {}.CodeMirror-rtl pre { direction: rtl; }.CodeMirror-code {outline: none;}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber {-moz-box-sizing: content-box; box-sizing: content-box;}.CodeMirror-measure {position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;}.CodeMirror-cursor {position: absolute; pointer-events: none;}.CodeMirror-measure pre { position: static; }div.CodeMirror-cursors {visibility: hidden; position: relative; z-index: 3;}div.CodeMirror-dragcursors {visibility: visible;}.CodeMirror-focused div.CodeMirror-cursors {visibility: visible;}.CodeMirror-selected { background: #d9d9d9; }.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }.CodeMirror-crosshair { cursor: crosshair; }.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }.cm-searching {background: #ffa; background: rgba(255, 255, 0, .4);}.cm-force-border { padding-right: .1px; }@media print {  .CodeMirror div.CodeMirror-cursors {visibility: hidden;}}.cm-tab-wrap-hack:after { content: ""; }span.CodeMirror-selectedtext { background: none; }.CodeMirror-activeline-background, .CodeMirror-selected {transition: visibility 0ms 100ms;}.CodeMirror-blur .CodeMirror-activeline-background, .CodeMirror-blur .CodeMirror-selected {visibility:hidden;}.CodeMirror-blur .CodeMirror-matchingbracket {color:inherit !important;outline:none !important;text-decoration:none !important;}.CodeMirror-sizer {min-height:auto !important;}',theme:{"base16-dark":".cm-s-base16-dark.CodeMirror { background: #151515; color: #e0e0e0; }.cm-s-base16-dark div.CodeMirror-selected { background: #303030; }.cm-s-base16-dark .CodeMirror-line::selection, .cm-s-base16-dark .CodeMirror-line > span::selection, .cm-s-base16-dark .CodeMirror-line > span > span::selection { background: rgba(48, 48, 48, .99); }.cm-s-base16-dark .CodeMirror-line::-moz-selection, .cm-s-base16-dark .CodeMirror-line > span::-moz-selection, .cm-s-base16-dark .CodeMirror-line > span > span::-moz-selection { background: rgba(48, 48, 48, .99); }.cm-s-base16-dark .CodeMirror-gutters { background: #151515; border-right: 0px; }.cm-s-base16-dark .CodeMirror-guttermarker { color: #ac4142; }.cm-s-base16-dark .CodeMirror-guttermarker-subtle { color: #505050; }.cm-s-base16-dark .CodeMirror-linenumber { color: #505050; }.cm-s-base16-dark .CodeMirror-cursor { border-left: 1px solid #b0b0b0; }.cm-s-base16-dark span.cm-comment { color: #8f5536; }.cm-s-base16-dark span.cm-atom { color: #aa759f; }.cm-s-base16-dark span.cm-number { color: #aa759f; }.cm-s-base16-dark span.cm-property, .cm-s-base16-dark span.cm-attribute { color: #90a959; }.cm-s-base16-dark span.cm-keyword { color: #ac4142; }.cm-s-base16-dark span.cm-string { color: #f4bf75; }.cm-s-base16-dark span.cm-variable { color: #90a959; }.cm-s-base16-dark span.cm-variable-2 { color: #6a9fb5; }.cm-s-base16-dark span.cm-def { color: #d28445; }.cm-s-base16-dark span.cm-bracket { color: #e0e0e0; }.cm-s-base16-dark span.cm-tag { color: #ac4142; }.cm-s-base16-dark span.cm-link { color: #aa759f; }.cm-s-base16-dark span.cm-error { background: #ac4142; color: #b0b0b0; }.cm-s-base16-dark .CodeMirror-activeline-background { background: #202020; }.cm-s-base16-dark .CodeMirror-matchingbracket { text-decoration: underline; color: white !important; }","base16-light":".cm-s-base16-light.CodeMirror { background: #f5f5f5; color: #202020; }.cm-s-base16-light div.CodeMirror-selected { background: #e0e0e0; }.cm-s-base16-light .CodeMirror-line::selection, .cm-s-base16-light .CodeMirror-line > span::selection, .cm-s-base16-light .CodeMirror-line > span > span::selection { background: #e0e0e0; }.cm-s-base16-light .CodeMirror-line::-moz-selection, .cm-s-base16-light .CodeMirror-line > span::-moz-selection, .cm-s-base16-light .CodeMirror-line > span > span::-moz-selection { background: #e0e0e0; }.cm-s-base16-light .CodeMirror-gutters { background: #f5f5f5; border-right: 0px; }.cm-s-base16-light .CodeMirror-guttermarker { color: #ac4142; }.cm-s-base16-light .CodeMirror-guttermarker-subtle { color: #b0b0b0; }.cm-s-base16-light .CodeMirror-linenumber { color: #b0b0b0; }.cm-s-base16-light .CodeMirror-cursor { border-left: 1px solid #505050; }.cm-s-base16-light span.cm-comment { color: #8f5536; }.cm-s-base16-light span.cm-atom { color: #aa759f; }.cm-s-base16-light span.cm-number { color: #aa759f; }.cm-s-base16-light span.cm-property, .cm-s-base16-light span.cm-attribute { color: #90a959; }.cm-s-base16-light span.cm-keyword { color: #ac4142; }.cm-s-base16-light span.cm-string { color: #f4bf75; }.cm-s-base16-light span.cm-variable { color: #90a959; }.cm-s-base16-light span.cm-variable-2 { color: #6a9fb5; }.cm-s-base16-light span.cm-def { color: #d28445; }.cm-s-base16-light span.cm-bracket { color: #202020; }.cm-s-base16-light span.cm-tag { color: #ac4142; }.cm-s-base16-light span.cm-link { color: #aa759f; }.cm-s-base16-light span.cm-error { background: #ac4142; color: #505050; }.cm-s-base16-light .CodeMirror-activeline-background { background: #DDDCDC; }.cm-s-base16-light .CodeMirror-matchingbracket { text-decoration: underline; color: white !important; }",blackboard:".cm-s-blackboard.CodeMirror { background: #0C1021; color: #F8F8F8; }.cm-s-blackboard div.CodeMirror-selected { background: #253B76; }.cm-s-blackboard .CodeMirror-line::selection, .cm-s-blackboard .CodeMirror-line > span::selection, .cm-s-blackboard .CodeMirror-line > span > span::selection { background: rgba(37, 59, 118, .99); }.cm-s-blackboard .CodeMirror-line::-moz-selection, .cm-s-blackboard .CodeMirror-line > span::-moz-selection, .cm-s-blackboard .CodeMirror-line > span > span::-moz-selection { background: rgba(37, 59, 118, .99); }.cm-s-blackboard .CodeMirror-gutters { background: #0C1021; border-right: 0; }.cm-s-blackboard .CodeMirror-guttermarker { color: #FBDE2D; }.cm-s-blackboard .CodeMirror-guttermarker-subtle { color: #888; }.cm-s-blackboard .CodeMirror-linenumber { color: #888; }.cm-s-blackboard .CodeMirror-cursor { border-left: 1px solid #A7A7A7; }.cm-s-blackboard .cm-keyword { color: #FBDE2D; }.cm-s-blackboard .cm-atom { color: #D8FA3C; }.cm-s-blackboard .cm-number { color: #D8FA3C; }.cm-s-blackboard .cm-def { color: #8DA6CE; }.cm-s-blackboard .cm-variable { color: #FF6400; }.cm-s-blackboard .cm-operator { color: #FBDE2D; }.cm-s-blackboard .cm-comment { color: #AEAEAE; }.cm-s-blackboard .cm-string { color: #61CE3C; }.cm-s-blackboard .cm-string-2 { color: #61CE3C; }.cm-s-blackboard .cm-meta { color: #D8FA3C; }.cm-s-blackboard .cm-builtin { color: #8DA6CE; }.cm-s-blackboard .cm-tag { color: #8DA6CE; }.cm-s-blackboard .cm-attribute { color: #8DA6CE; }.cm-s-blackboard .cm-header { color: #FF6400; }.cm-s-blackboard .cm-hr { color: #AEAEAE; }.cm-s-blackboard .cm-link { color: #8DA6CE; }.cm-s-blackboard .cm-error { background: #9D1E15; color: #F8F8F8; }.cm-s-blackboard .CodeMirror-activeline-background { background: #3C3636; }.cm-s-blackboard .CodeMirror-matchingbracket { outline:1px solid grey;color:white !important; }",eclipse:".cm-s-eclipse span.cm-meta { color: #FF1717; }.cm-s-eclipse span.cm-keyword { line-height: 1em; font-weight: bold; color: #7F0055; }.cm-s-eclipse span.cm-atom { color: #219; }.cm-s-eclipse span.cm-number { color: #164; }.cm-s-eclipse span.cm-def { color: #00f; }.cm-s-eclipse span.cm-variable { color: black; }.cm-s-eclipse span.cm-variable-2 { color: #0000C0; }.cm-s-eclipse span.cm-variable-3 { color: #0000C0; }.cm-s-eclipse span.cm-property { color: black; }.cm-s-eclipse span.cm-operator { color: black; }.cm-s-eclipse span.cm-comment { color: #3F7F5F; }.cm-s-eclipse span.cm-string { color: #2A00FF; }.cm-s-eclipse span.cm-string-2 { color: #f50; }.cm-s-eclipse span.cm-qualifier { color: #555; }.cm-s-eclipse span.cm-builtin { color: #30a; }.cm-s-eclipse span.cm-bracket { color: #cc7; }.cm-s-eclipse span.cm-tag { color: #170; }.cm-s-eclipse span.cm-attribute { color: #00c; }.cm-s-eclipse span.cm-link { color: #219; }.cm-s-eclipse span.cm-error { color: #f00; }.cm-s-eclipse .CodeMirror-activeline-background { background: #e8f2ff; }.cm-s-eclipse .CodeMirror-matchingbracket { outline:1px solid grey; color:black !important; }",material:".cm-s-material.CodeMirror {background-color: #263238; color: rgba(233, 237, 237, 1);}.cm-s-material .CodeMirror-gutters {background: #263238; color: rgb(83,127,126); border: none;}.cm-s-material .CodeMirror-guttermarker, .cm-s-material .CodeMirror-guttermarker-subtle, .cm-s-material .CodeMirror-linenumber { color: rgb(83,127,126); }.cm-s-material .CodeMirror-cursor { border-left: 1px solid #f8f8f0; }.cm-s-material div.CodeMirror-selected { background: rgba(255, 255, 255, 0.15); }.cm-s-material.CodeMirror-focused div.CodeMirror-selected { background: rgba(255, 255, 255, 0.10); }.cm-s-material .CodeMirror-line::selection, .cm-s-material .CodeMirror-line > span::selection, .cm-s-material .CodeMirror-line > span > span::selection { background: rgba(255, 255, 255, 0.10); }.cm-s-material .CodeMirror-line::-moz-selection, .cm-s-material .CodeMirror-line > span::-moz-selection, .cm-s-material .CodeMirror-line > span > span::-moz-selection { background: rgba(255, 255, 255, 0.10); }.cm-s-material .CodeMirror-activeline-background { background: rgba(0, 0, 0, 0); }.cm-s-material .cm-keyword { color: rgba(199, 146, 234, 1); }.cm-s-material .cm-operator { color: rgba(233, 237, 237, 1); }.cm-s-material .cm-variable-2 { color: #80CBC4; }.cm-s-material .cm-variable-3 { color: #82B1FF; }.cm-s-material .cm-builtin { color: #DECB6B; }.cm-s-material .cm-atom { color: #F77669; }.cm-s-material .cm-number { color: #F77669; }.cm-s-material .cm-def { color: rgba(233, 237, 237, 1); }.cm-s-material .cm-string { color: #C3E88D; }.cm-s-material .cm-string-2 { color: #80CBC4; }.cm-s-material .cm-comment { color: #546E7A; }.cm-s-material .cm-variable { color: #82B1FF; }.cm-s-material .cm-tag { color: #80CBC4; }.cm-s-material .cm-meta { color: #80CBC4; }.cm-s-material .cm-attribute { color: #FFCB6B; }.cm-s-material .cm-property { color: #80CBAE; }.cm-s-material .cm-qualifier { color: #DECB6B; }.cm-s-material .cm-variable-3 { color: #DECB6B; }.cm-s-material .cm-tag { color: rgba(255, 83, 112, 1); }.cm-s-material .cm-error {color: rgba(255, 255, 255, 1.0); background-color: #EC5F67;}.cm-s-material .CodeMirror-matchingbracket {text-decoration: underline; color: white !important;}",monokai:".cm-s-monokai.CodeMirror { background: #272822; color: #f8f8f2; }.cm-s-monokai div.CodeMirror-selected { background: #49483E; }.cm-s-monokai .CodeMirror-line::selection, .cm-s-monokai .CodeMirror-line > span::selection, .cm-s-monokai .CodeMirror-line > span > span::selection { background: rgba(73, 72, 62, .99); }.cm-s-monokai .CodeMirror-line::-moz-selection, .cm-s-monokai .CodeMirror-line > span::-moz-selection, .cm-s-monokai .CodeMirror-line > span > span::-moz-selection { background: rgba(73, 72, 62, .99); }.cm-s-monokai .CodeMirror-gutters { background: #272822; border-right: 0px; }.cm-s-monokai .CodeMirror-guttermarker { color: white; }.cm-s-monokai .CodeMirror-guttermarker-subtle { color: #d0d0d0; }.cm-s-monokai .CodeMirror-linenumber { color: #d0d0d0; }.cm-s-monokai .CodeMirror-cursor { border-left: 1px solid #f8f8f0; }.cm-s-monokai span.cm-comment { color: #75715e; }.cm-s-monokai span.cm-atom { color: #ae81ff; }.cm-s-monokai span.cm-number { color: #ae81ff; }.cm-s-monokai span.cm-property, .cm-s-monokai span.cm-attribute { color: #a6e22e; }.cm-s-monokai span.cm-keyword { color: #f92672; }.cm-s-monokai span.cm-builtin { color: #66d9ef; }.cm-s-monokai span.cm-string { color: #e6db74; }.cm-s-monokai span.cm-variable { color: #f8f8f2; }.cm-s-monokai span.cm-variable-2 { color: #9effff; }.cm-s-monokai span.cm-variable-3 { color: #66d9ef; }.cm-s-monokai span.cm-def { color: #fd971f; }.cm-s-monokai span.cm-bracket { color: #f8f8f2; }.cm-s-monokai span.cm-tag { color: #f92672; }.cm-s-monokai span.cm-header { color: #ae81ff; }.cm-s-monokai span.cm-link { color: #ae81ff; }.cm-s-monokai span.cm-error { background: #f92672; color: #f8f8f0; }.cm-s-monokai .CodeMirror-activeline-background { background: #373831; }.cm-s-monokai .CodeMirror-matchingbracket {text-decoration: underline; color: white !important;}","tomorrow-night-eighties":".cm-s-tomorrow-night-eighties.CodeMirror { background: #000000; color: #CCCCCC; }.cm-s-tomorrow-night-eighties div.CodeMirror-selected { background: #2D2D2D; }.cm-s-tomorrow-night-eighties .CodeMirror-line::selection, .cm-s-tomorrow-night-eighties .CodeMirror-line > span::selection, .cm-s-tomorrow-night-eighties .CodeMirror-line > span > span::selection { background: rgba(45, 45, 45, 0.99); }.cm-s-tomorrow-night-eighties .CodeMirror-line::-moz-selection, .cm-s-tomorrow-night-eighties .CodeMirror-line > span::-moz-selection, .cm-s-tomorrow-night-eighties .CodeMirror-line > span > span::-moz-selection { background: rgba(45, 45, 45, 0.99); }.cm-s-tomorrow-night-eighties .CodeMirror-gutters { background: #000000; border-right: 0px; }.cm-s-tomorrow-night-eighties .CodeMirror-guttermarker { color: #f2777a; }.cm-s-tomorrow-night-eighties .CodeMirror-guttermarker-subtle { color: #777; }.cm-s-tomorrow-night-eighties .CodeMirror-linenumber { color: #515151; }.cm-s-tomorrow-night-eighties .CodeMirror-cursor { border-left: 1px solid #6A6A6A; }.cm-s-tomorrow-night-eighties span.cm-comment { color: #d27b53; }.cm-s-tomorrow-night-eighties span.cm-atom { color: #a16a94; }.cm-s-tomorrow-night-eighties span.cm-number { color: #a16a94; }.cm-s-tomorrow-night-eighties span.cm-property, .cm-s-tomorrow-night-eighties span.cm-attribute { color: #99cc99; }.cm-s-tomorrow-night-eighties span.cm-keyword { color: #f2777a; }.cm-s-tomorrow-night-eighties span.cm-string { color: #ffcc66; }.cm-s-tomorrow-night-eighties span.cm-variable { color: #99cc99; }.cm-s-tomorrow-night-eighties span.cm-variable-2 { color: #6699cc; }.cm-s-tomorrow-night-eighties span.cm-def { color: #f99157; }.cm-s-tomorrow-night-eighties span.cm-bracket { color: #CCCCCC; }.cm-s-tomorrow-night-eighties span.cm-tag { color: #f2777a; }.cm-s-tomorrow-night-eighties span.cm-link { color: #a16a94; }.cm-s-tomorrow-night-eighties span.cm-error { background: #f2777a; color: #6A6A6A; }.cm-s-tomorrow-night-eighties .CodeMirror-activeline-background { background: #343600; }.cm-s-tomorrow-night-eighties .CodeMirror-matchingbracket { text-decoration: underline; color: white !important; }"}},h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).clearStyle=function(){for(var e=n.env.doc.getElementsByName(d.NAME.CODE_STYLE),t=e.length-1;t>=0;t--){var r=e[t],o=r.id.replace(d.ID.CODE_STYLE+"-","");n.env.doc.querySelector("."+d.CLASS.CODE_CONTAINER+"[data-theme="+o+"]")||n.req.wizStyle.removeStyleById(r.id)}0===n.env.doc.querySelectorAll("."+d.CLASS.CODE_CONTAINER).length&&n.req.wizStyle.removeStyleById(d.ID.CODE_STYLE)},n.initCommon=function(){n.req.wizStyle.replaceStyleById(d.ID.CODE_STYLE,f.common,!1),n.insertTemp()},n.insertCommon=function(){n.env.doc.getElementById(d.ID.CODE_STYLE)||n.req.wizStyle.replaceStyleById(d.ID.CODE_STYLE,f.common,!1)},n.insertTemp=function(){n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"code_common",name:d.NAME.TMP_STYLE},f.tmp.common),n.req.codeUtils.checkMobile()&&n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"code_phone",name:d.NAME.TMP_STYLE},f.tmp.phone),n.env.browser.isIPhone&&n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"code_reader_for_iphone",name:d.NAME.TMP_STYLE},f.tmp.readerForIphone),n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"code_reader",name:d.NAME.TMP_STYLE},f.tmp.reader)},n.fixScrollStyle=function(e){var t=d.ID.TMP_STYLE_PRE+"code_scroll_for_phone";!e&&n.req.codeUtils.checkMobile()?n.req.wizStyle.insertStyle({id:t,name:d.NAME.TMP_STYLE},f.tmp.scrollForPhone):n.req.wizStyle.removeStyleById(t)},n.insertTheme=function(e){f.theme[e]&&!n.env.doc.querySelector("#"+d.ID.CODE_STYLE+"-"+e)&&n.req.wizStyle.insertStyle({id:d.ID.CODE_STYLE+"-"+e,name:d.NAME.CODE_STYLE},f.theme[e])},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(u);e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h={MODE:{APL:{cm:"text/apl",file:"apl",same:["apollo"]},C:{cm:"text/x-csrc",file:"clike",same:[]},"C++":{cm:"text/x-c++src",file:"clike",same:["cpp"]},"C#":{cm:"text/x-csharp",file:"clike",same:["cs"]},CSS:{cm:"text/css",file:"css",same:[]},Dart:{cm:"application/dart",file:["clike","dart"],same:[]},Erlang:{cm:"text/x-erlang",file:"erlang",same:[]},Fortran:{cm:"text/x-fortran",file:"fortran",same:[]},Go:{cm:"text/x-go",file:"go",same:[]},HTML:{cm:"text/html",file:[["xml","css","javascript","vbscript"],["htmlmixed"]],same:[]},Java:{cm:"text/x-java",file:"clike",same:[]},JavaScript:{cm:"text/javascript",file:"javascript",same:["js"]},JSX:{cm:"text/jsx",file:[["xml","javascript"],["jsx"]],same:[]},Julia:{cm:"text/x-julia",file:"julia",same:[]},Lisp:{cm:"text/x-common-lisp",file:"commonlisp",same:[]},Lua:{cm:"text/x-lua",file:"lua",same:[]},"Octave (MATLAB)":{cm:"text/x-octave",file:"octave",same:["matlab","octave"]},"Objective-C":{cm:"text/x-objectivec",file:"clike",same:[]},Pascal:{cm:"text/x-pascal",file:"pascal",same:[]},Perl:{cm:"text/x-perl",file:"perl",same:[]},PHP:{cm:"application/x-httpd-php",file:"php",same:[]},Python:{cm:"text/x-python",file:"python",same:["py"]},R:{cm:"text/x-rsrc",file:"r",same:[]},Ruby:{cm:"text/x-ruby",file:"ruby",same:["rb"]},Rust:{cm:"text/x-rustsrc",file:"rust",same:[]},Shell:{cm:"text/x-sh",file:"shell",same:["sh"]},SQL:{cm:"text/x-sql",file:"sql",same:[]},Swift:{cm:"text/x-swift",file:"swift",same:[]},VBScript:{cm:"text/vbscript",file:"vbscript",same:["basic","vb"]},Verilog:{cm:"text/x-verilog",file:"verilog",same:[]},VHDL:{cm:"text/x-vhdl",file:"vhdl",same:[]},XML:{cm:"application/xml",file:"xml",same:[]},XSL:{cm:"application/xml",file:"xml",same:[]},YAML:{cm:"text/x-yaml",file:"yaml",same:[]}},THEME:{default:{name:"L1 (default)",same:["L1"]},"base16-light":{name:"L2 (base16-light)",same:["L2"]},eclipse:{name:"L3 (eclipse)",same:["L3"]},"base16-dark":{name:"D1 (base16-dark)",same:["D1"]},blackboard:{name:"D2 (blackboard)",same:["D2"]},material:{name:"D3 (material)",same:["D3"]},monokai:{name:"D4 (monokai)",same:["D4"]},"tomorrow-night-eighties":{name:"D5 (tomorrow)",same:["D5"]}}},p=[],m=[],g={},v={};!function(){for(var e in h.MODE)if(h.MODE.hasOwnProperty(e)){p.push({text:e,value:e});var t=h.MODE[e].same;g[e.toLowerCase()]=e;for(var n=0;n<t.length;n++)g[t[n].toLowerCase()]=e}for(var r in h.THEME)if(h.THEME.hasOwnProperty(r)){m.push({text:h.THEME[r].name,value:r});var o=h.THEME[r].same;v[r.toLowerCase()]=r;for(var i=0;i<o.length;i++)v[o[i].toLowerCase()]=r}}();var b=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._codeToolInfoTimer=null,n._lastFocusCodeForReader=null,n._createTextOption=function(e,t,r){var o=n.env.doc.createElement("div"),i=n.env.doc.createElement("span");if(i.innerText=e,n.domUtils.css(i,{"margin-right":"8px"}),o.appendChild(i),r){var a=n.env.doc.createElement("i");n.domUtils.addClass(a,"icon-checkmark editor-icon"),t||n.domUtils.addClass(a,"active"),o.appendChild(a)}return o},n._createModeOption=function(e){var t=n.env.doc.createElement("div"),r=n._createNativeSelector(p,e),o=n.env.doc.createElement("span");return o.innerText=e,n.domUtils.css(t,{position:"relative"}),n.domUtils.css(r,{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0}),t.appendChild(o),t.appendChild(r),t.selector=r,t.optionText=o,n.domUtils.addClass(t,d.CLASS.CODE_TOOLS_MODE),t},n._createThemeOption=function(e){var t=n.env.doc.createElement("div"),r=n._createNativeSelector(m,e),o=n.env.doc.createElement("span");return o.innerText=h.THEME[e].name,n.domUtils.css(t,{position:"relative"}),n.domUtils.css(r,{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0}),t.appendChild(o),t.appendChild(r),t.selector=r,t.optionText=o,n.domUtils.addClass(t,d.CLASS.CODE_TOOLS_THEME),t},n._createNativeSelector=function(e,t){for(var r=n.env.doc.createElement("select"),o=0,i=e.length;o<i;o++){var a=e[o],l=a.text,s=a.value,c=n.env.doc.createElement("option");c.textContent=l,n.domUtils.attr(c,{value:s}),s===t&&(r.value=s),r.appendChild(c)}return r},n._fixCodeTextarea=function(e){if(!e)return null;var t=e.querySelector("textarea"),r="";if(t&&t.value)r=t.value;else{for(var o=e.querySelectorAll(".CodeMirror-linenumber"),i=o.length-1;i>=0;i--)n.domUtils.remove(o[i]);r=e.innerText,t||(t=n.env.doc.createElement("textarea"),e.insertBefore(t,e.firstChild))}return n.domUtils.setTextarea(t,r),t},n.canCreateCode=function(){var e=n.rangeUtils.getRange();return!(!e||n.getContainerFromChild(e.startContainer)||n.domUtils.getParentByClass(e.startContainer,d.CLASS.TABLE_CONTAINER,!0))},n.changeLineWrapping=function(e){var t=n.getContainerList();n.env.options.code.lineWrapping=e,n.req.codeStyle.fixScrollStyle(e);for(var r=0;r<t.length;r++){var o=t[r].codeMirror;o.setOption("lineWrapping",e),o.setOption("scrollbarStyle",e?"null":"native")}u.storage.set(d.CODE.StorageKey.Wrap,e?"1":"")},n.changeMode=function(e,t,r){if(e){var o=e.codeMirror;o&&(o.setOption("mode",h.MODE[t].cm),n.domUtils.attr(e,{"data-mode":t}),r||u.storage.set(d.CODE.StorageKey.Mode,t))}},n.changeTheme=function(e,t,r){if(e){t=t||"default";var o=e.codeMirror;o&&(n.req.codeStyle.insertTheme(t),o.setOption("theme",t),n.domUtils.attr(e,{"data-theme":t}),r||u.storage.set(d.CODE.StorageKey.Theme,t))}},n.checkMobile=function(){return n.env.client.type.isPhone||n.env.client.type.isPad||n.env.browser.isMobile||n.env.browser.isAndroid||n.env.browser.isIPad||n.env.browser.isIPhone},n.clearCodeMirror=function(e){for(var t=(e=e||n.getContainerList()).length-1;t>=0;t--){var r=e[t];if(r.codeMirror){var o=r.codeMirror;o&&(o.setOption("readOnly",!0),o.setOption("styleActiveLine",!1),o.getDoc().clearHistory())}}},n.clearCodeForMarkdown=function(e){for(var t=e.querySelectorAll("."+d.CLASS.CODE_CONTAINER),r=n.env.readonly,o=t.length-1;o>=0;o--){var i=t[o],a=i.querySelector("textarea"),l="```"+n.getCmMode(i,r)+","+n.getCmTheme(i,r)+"\n"+a.value+"\n```",s=n.env.doc.createElement("pre");s.appendChild(n.env.doc.createTextNode(l)),n.domUtils.before(s,i),n.domUtils.remove(i)}},n.copyAll=function(e){if(e){var t=e.codeMirror;t&&n.req.clipboardUtils.setTxtData(t.doc.getValue(),(function(){var t=n.getCodeTools(e);clearTimeout(n._codeToolInfoTimer),n.domUtils.addClass(t,"active"),n._codeToolInfoTimer=setTimeout((function(){n.domUtils.removeClass(t,"active")}),800)}))}},n.fixCode=function(e){if(!e)return null;var t=e.parentNode;return n.domUtils.hasClass(t,d.CLASS.CODE_CONTAINER)?null:(t!==n.env.body&&1===t.childNodes.length||(t=n.env.doc.createElement("div"),n.domUtils.before(t,e),t.appendChild(e)),t)},n.fixCodeContainer=function(e){if(n.req.codeCore.hasLoaded)for(var t=(e=e||{}).container?[e.container]:n.getContainerList(e.body),r=t.length-1;r>=0;r--){var o=t[r],i=o.id;n.domUtils.attr(o,{style:null,id:null,class:null}),n.fixCodeContainerParent(o),n.env.options.reader.codeNoIDE?n.initCodeNoIDE(o):(i&&(o.id=i),n.initCodeMirror({container:o,readOnly:!!e.readOnly||n.env.readonly}))}else n.req.codeCore.on({},(function(){n.req.codeCore.hasLoaded&&n.fixCodeContainer(e)}))},n.fixCodeContainerParent=function(e){var t,r;if(!n.domUtils.getParentByTagName(e,["ol","ul"],!0)&&(t=n.domUtils.getParentList(e)).length>0){if(n.domUtils.hasClass(t[0],d.CLASS.WIZ_EIDTOR_PREVIEW_CONTAINER)||n.domUtils.hasClass(t[0],d.CLASS.WIZ_BODY))return;r=n.domUtils.splitDomSingle(t[0],e),n.domUtils.before(e,r),n.domUtils.remove(r)}},n.focusToFirst=function(e){e&&(e.focus(),e.setCursor({line:0,ch:0}))},n.focusToLast=function(e){e&&(e.focus(),e.setCursor({line:e.lastLine(),ch:e.getLineHandle(e.lastLine()).text.length}))},n.getCmMode=function(e,t){var n=(e.getAttribute("data-mode")||"").toLowerCase(),r="";return e.isNew&&!t&&(r=(u.storage.get(d.CODE.StorageKey.Mode)||"").toLowerCase()),g[n]||g[r]||"JavaScript"},n.getCmTheme=function(e,t){var n=(e.getAttribute("data-theme")||"").toLowerCase(),r="";return e.isNew&&!t&&(r=(u.storage.get(d.CODE.StorageKey.Theme)||"").toLowerCase()),v[n]||v[r]||"default"},n.getCmWrapper=function(e){return e.querySelector("."+d.CLASS.CODE_MIRROR)},n.getContainerFromChild=function(e){return n.domUtils.getParentByClass(e,d.CLASS.CODE_CONTAINER,!0)},n.getContainerList=function(e){return(e=e||n.env.body).querySelectorAll("."+d.CLASS.CODE_CONTAINER)},n.getCodeTools=function(e){return e.querySelector("."+d.CLASS.CODE_TOOLS)},n.getToolsFromChild=function(e){return n.domUtils.getParentByClass(e,d.CLASS.CODE_TOOLS,!0)},n.initCodeNoIDE=function(e){if(e){var t=n._fixCodeTextarea(e);n.removeCmWrapper(e);var r,o,i="";t&&(i=t.textContent,r=n.env.doc.createElement("pre"),o=n.env.doc.createElement("code"),r.appendChild(o),o.textContent=i,n.domUtils.before(r,t),n.domUtils.remove(t))}},n.initCodeMirror=function(e){var t=e.container,r=e.readOnly;if(t){var o,i,a,l,s,c,f;if(n.req.codeStyle.insertCommon(),(!t.id||n.env.body.querySelectorAll("#".concat(t.id)).length>1)&&(t.id="wiz_cm_"+(new Date).valueOf()+"_"+Math.floor(1e4*u.math.random())),n.domUtils.addClass(t,d.CLASS.CODE_CONTAINER),n.domUtils.setContenteditable(t,!1),c=n.getCmMode(t,r),f=n.getCmTheme(t,r),t.codeMirror)return a=t.codeMirror,r?(a.setOption("matchBrackets",!1),a.setOption("readOnly",!n.checkMobile()||"nocursor"),a.setOption("styleActiveLine",!1),a.getDoc().clearHistory()):(a.setOption("matchBrackets",!0),a.setOption("readOnly",!1),a.setOption("styleActiveLine",!0)),void n.initTools(t,n.env.readonly);i=n._fixCodeTextarea(t),n.domUtils.setTextarea(i,i.value.replace(/\u21b5/g,"\n")),n.removeCmWrapper(t),t.appendChild(i),o={viewportMargin:1/0,fixedGutter:!1,indentUnit:4,lineWrapping:n.env.options.code.lineWrapping,scrollbarStyle:n.env.options.code.lineWrapping?"null":"native",lineNumbers:!0,matchBrackets:!r,mode:h.MODE[c].cm,extraKeys:{"Ctrl-Z":function(){n.req.historyUtils.undo()},"Cmd-Z":function(){n.req.historyUtils.undo()},"Ctrl-Y":function(){n.req.historyUtils.redo()},"Shift-Cmd-Z":function(){n.req.historyUtils.redo()},"Cmd-Y":function(){n.req.historyUtils.redo()}}},r?(o.readOnly=!n.checkMobile()||"nocursor",o.styleActiveLine=!1):(o.readOnly=!1,o.styleActiveLine=!0),n.req.codeStyle.fixScrollStyle(n.env.options.code.lineWrapping),a=n.env.win.CodeMirror.fromTextArea(i,o),t.codeMirror=a,t.mode=c,n.domUtils.attr(a.display.wrapper,{"data-id":t.id}),l=t.querySelector("."+d.CLASS.CODE_MIRROR),s=n.env.doc.createElement(d.TAG.CODE_MIRROR),n.domUtils.before(s,l),s.appendChild(l),n.changeMode(t,c,r),n.changeTheme(t,f,r),n.initTools(t,n.env.readonly);var p,m="";a.on("keydown",(function(e,t){var n=t.keyCode||t.which;p=37===n||38===n?-1:39===n||40===n?1:0})),a.on("beforeSelectionChange",(function(e,r){var o,i,a=r.ranges[0],l=a.anchor,s=a.head,c=[l.line,l.ch,s.line,s.ch].join(".");if(!n.env.readonly&&"+move"===r.origin&&l.line===s.line&&l.ch===s.ch&&c===m)if(-1===p){for(o=n.domUtils.getPreviousNode(t);o&&!n.domUtils.isTag(o,"br")&&n.domUtils.isEmptyDom(o);)o=n.domUtils.getPreviousNode(o);o&&((i=n.getContainerFromChild(o))?(e=i.codeMirror,n.focusToLast(e)):(n.domUtils.setContenteditable(n.env.body,!0),n.rangeUtils.setRange(o,n.domUtils.getEndOffset(o))))}else if(1===p){for(o=n.domUtils.getNextNode(t);o&&!n.domUtils.isTag(o,"br")&&n.domUtils.isEmptyDom(o);)o=n.domUtils.getNextNode(o);o&&((i=n.getContainerFromChild(o))?(e=i.codeMirror,n.focusToFirst(e)):(n.domUtils.setContenteditable(n.env.body,!0),n.rangeUtils.setRange(o,0)))}if(m=c,n.env.readonly&&n.env.options.reader.autoEdit){var d=t.id;void 0===l.sticky?n._lastFocusCodeForReader&&n._lastFocusCodeForReader.id===d&&(n._lastFocusCodeForReader=null):n._lastFocusCodeForReader={id:d,anchor:l,head:s}}})),a.on("beforeChange",(function(e,r){"redo"!==r.origin&&"undo"!==r.origin&&n.req.historyUtils.saveSnap(!1,{type:d.HISTORY.TYPE.CODE_MIRROR,cmContainerId:t.id})})),a.on("change",(function(e,t){/^(redo|undo|paste)$/i.test(t.origin)&&e.setSize()})),a.on("copy",(function(e,t){n.checkMobile()&&n.env.readonly&&(t.codemirrorIgnore=!0)})),a.on("focus",(function(e,t){e.blurTimer&&clearTimeout(e.blurTimer)})),a.on("blur",(function(e,t){e.blurTimer=setTimeout((function(){var t=n.rangeUtils.getRange(),r=!0;if(t){var o=t.startContainer,i=n.getContainerFromChild(o);r=!(i&&i.codeMirror===e)}r&&e.doc.setSelection({line:0,ch:0},null,{scroll:!1})}),200)}));var g,v=t.querySelector(".CodeMirror-sizer");v&&(g=v.nextElementSibling)&&(g.style.height="13px")}},n.initTools=function(e,t){if(e){var r,o,i,a=n.getCmWrapper(e),l=n.getCodeTools(e),s=n.getCmMode(e,t),c=e.getAttribute("data-theme");if(!l){var u=n._createTextOption(n.lang.Code.Wrap,!n.env.options.code.lineWrapping,!0),f=[{obj:u,beforeShow:function(){var e=u.querySelector(".icon-checkmark");n.env.options.code.lineWrapping?n.domUtils.addClass(e,"active"):n.domUtils.removeClass(e,"active")},value:d.CODE.StorageKey.Wrap},{obj:n._createTextOption(n.lang.Common.Copy,!1,!1),value:"copy"}];l=n.env.doc.createElement(d.TAG.TMP_TAG),t||(n.env.supportTouchEvent?((r=n._createModeOption(s)).selector.onchange=function(){i.hideOptions();var t=r.selector.value;r.optionText.innerText=t,n.changeMode(e,t,!1),e.codeMirror.focus()},(o=n._createThemeOption(c)).selector.onchange=function(){i.hideOptions();var t=o.selector.value;o.optionText.innerText=h.THEME[t].name,n.changeTheme(e,t,!1),e.codeMirror.focus()},f.splice(0,0,{text:n.lang.Code.Language,disabled:!0,style:{"margin-bottom":"2px"}},{obj:r,value:d.CODE.StorageKey.Mode,style:{"margin-top":"2px"},onClick:function(){return!1}},{text:n.lang.Code.Theme,disabled:!0,style:{"margin-bottom":"2px"}},{obj:o,value:d.CODE.StorageKey.Theme,style:{"margin-top":"2px","margin-bottom":"10px"},onClick:function(){return!1}})):(r=n.req.selectPlugin.create({type:d.SELECT_PLUGIN.TYPE.COMMON,optionsData:p,menuClassName:d.CLASS.CODE_TOOLS_MODE,defaultValue:s}),o=n.req.selectPlugin.create({type:d.SELECT_PLUGIN.TYPE.COMMON,optionsData:m,className:d.CLASS.CODE_TOOLS_THEME,defaultValue:c}),l.appendChild(r),l.appendChild(o),n.domUtils.addClass(r,d.CLASS.CODE_TOOLS_MODE),n.domUtils.addClass(o,d.CLASS.CODE_TOOLS_THEME))),i=n.req.selectPlugin.create({type:d.SELECT_PLUGIN.TYPE.ICON,optionsType:d.MENU_PLUGIN.TYPE.MENU,optionsData:f,className:d.CLASS.CODE_TOOLS_MORE}),l.appendChild(i),n.domUtils.addClass(i,d.CLASS.CODE_TOOLS_MORE);var g=n.env.doc.createElement("div");g.innerText=n.lang.Common.Copied,n.domUtils.addClass(g,d.CLASS.CODE_TOOLS_INFO),l.appendChild(g),n.domUtils.addClass(l,d.CLASS.CODE_TOOLS+(n.env.supportTouchEvent?" mobile":"")),a.appendChild(l)}}},n.insertCodeSrc=function(e,t){var n=e.codeMirror;n&&n.replaceSelection(t,"end")},n.onKeyDown=function(e){var t=n.rangeUtils.getRange();if(!t||!t.collapsed)return!0;var r,o,i,a,l,s,c=e.keyCode||e.which,d=n.rangeUtils.getRangeDetail(t.startContainer,t.startOffset),u=!1,f=!1,h=null,p=null,m=null;if(8===c&&0===d.offset&&(i=n.domUtils.getPreviousNode(d.container,!1),m=n.getContainerFromChild(i)),46===c&&(n.domUtils.isTag(d.container,"br")||d.offset===n.domUtils.getEndOffset(d.container))&&(i=n.domUtils.getNextNode(d.container,!1),(m=n.getContainerFromChild(i))&&n.domUtils.isTag(d.container,"br")))return n.domUtils.remove(d.container),n.focusToFirst(m.codeMirror),!1;if(m)return n.req.historyUtils.saveSnap(!1),n.domUtils.remove(m),!1;switch(c){case 37:e.ctrlKey||e.metaKey||(l=!0,n.rangeUtils.modify("move","backward","character")),a={x:-1,y:0};break;case 38:e.ctrlKey||e.metaKey||(l=!0,n.rangeUtils.modify("move","backward","line")),a={x:0,y:-1};break;case 39:e.ctrlKey||e.metaKey||(l=!0,n.rangeUtils.modify("move","forward","character")),a={x:1,y:0};break;case 40:e.ctrlKey||e.metaKey||(l=!0,n.rangeUtils.modify("move","forward","line")),a={x:0,y:1}}if(l){if(t=n.rangeUtils.getRange(),r=n.rangeUtils.getRangeDetail(t.startContainer,t.startOffset),h=d.container,p=r.container,r.container===d.container&&r.offset!==d.offset||(r.container!==d.container?a.x>0||a.y>0?f=!0:u=!0:(a.x>0||a.y>0?f=!0:u=!0,p=n.env.body)),f){for(o=n.domUtils.getNextNode(h,!1,p);o&&o!==p&&!n.domUtils.isTag(o,"br")&&n.domUtils.isEmptyDom(o);)o=n.domUtils.getNextNode(o,!1,p);o&&(o=n.domUtils.getNextBlock(o))}else if(u){for(o=n.domUtils.getPreviousNode(h,!1,p);o&&o!==p&&!n.domUtils.isTag(o,"br")&&n.domUtils.isEmptyDom(o);)o=n.domUtils.getPreviousNode(o,!1,p);o&&(o=n.domUtils.getPrevBlock(o))}o&&((s=(m=n.getContainerFromChild(o))&&m.codeMirror)?(s.focus(),a.x>0||a.y>0?n.focusToFirst(s):n.focusToLast(s)):m=null),m||(a.x<0?n.rangeUtils.modify("move","forward","character"):a.y<0?n.rangeUtils.modify("move","forward","line"):a.x>0?n.rangeUtils.modify("move","backward","character"):a.y>0&&n.rangeUtils.modify("move","backward","line"))}return!m},n.removeCmWrapper=function(e){var t=e.querySelector(d.TAG.CODE_MIRROR);n.domUtils.remove(t),e.id&&(t=n.env.body.querySelector("."+d.CLASS.CODE_MIRROR+"[data-id="+e.id+"]"),n.domUtils.remove(t))},n.saveToText=function(){if(n.req.codeCore.hasLoaded)for(var e=n.getContainerList(),t=e.length-1;t>=0;t--){var r=e[t],o=r.codeMirror;if(o){o.save();var i=r.querySelector("textarea");n.domUtils.setTextarea(i)}}},n.setSelection=function(e,t,r){var o=n.domUtils.getCmById(n.env.body,e);o&&(o.doc.setSelection(t,r),o.focus())},n.highlight={clear:function(e){var t=e.codeMirror;if(t){var n=e.state;n||(n={},e.state=n),t.operation((function(){n.lastQuery=n.query||null,n.query&&(n.query=n.queryText=null,t.removeOverlay(n.overlay))}))}},clearAll:function(){for(var e=n.getContainerList(),t=0;t<e.length;t++){var r=e[t];n.highlight.clear(r)}},overlay:function(e){var t=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gi");return{token:function(e){t.lastIndex=e.pos;var n=t.exec(e.string);if(n&&n.index===e.pos)return e.pos+=n[0].length||1,"searching";n?e.pos=n.index:e.skipToEnd()}}},search:function(e,t){if(n.req.codeCore.hasLoaded&&(!e.state||!e.state.query||e.state.query.toLowerCase()!==t.toLowerCase())){var r=e.codeMirror;if(r){n.highlight.clear(e);var o=e.state;t=t.toLowerCase(),o.query=t,r.removeOverlay(o.overlay),o.overlay=n.highlight.overlay(o.query),r.addOverlay(o.overlay)}}}},n.oldPatch={getOldCodeList:function(e){return(e=e||n.env.body).querySelectorAll("."+d.CLASS.CODE_CONTAINER_OLD)},oldCodeReady:function(){var e,t,r,o=function(e,t){for(var r,o=(r=e.querySelectorAll(t)).length-1;o>=0;o--){var i=r[o];if(u.isEmpty(i.innerText)){var a=n.domUtils.getParentByClass(i,d.CLASS.CODE_CONTAINER_OLD,!1);if(a){var l=n.domUtils.splitDomSingle(a,i),s=n.env.doc.createElement("div");s.appendChild(i),n.domUtils.before(s,l),n.domUtils.remove(l)}}}};for(t=n.env.body.querySelector("."+d.CLASS.CODE_CONTAINER_OLD+" ."+d.CLASS.CODE_CONTAINER_OLD);t;){var i=n.domUtils.getParentByClass(t,d.CLASS.CODE_CONTAINER_OLD,!1);n.domUtils.after(t,i),t=n.env.body.querySelector("."+d.CLASS.CODE_CONTAINER_OLD+" ."+d.CLASS.CODE_CONTAINER_OLD)}for(r=(e=n.env.body.querySelectorAll("."+d.CLASS.CODE_CONTAINER_OLD)).length-1;r>=0;r--)o(t=e[r],"a");for(r=(e=n.env.body.querySelectorAll("."+d.CLASS.CODE_CONTAINER_OLD)).length-1;r>=0;r--)o(t=e[r],"img")},fixOldCode:function(e){var t,r=[];if(n.oldPatch.oldCodeReady(),(t=n.oldPatch.getOldCodeList(e)).length>50)return r;for(var o=t.length-1;o>=0;o--){var i=t[o];if(n.domUtils.isTag(i,"pre")&&i.querySelector("code")){var a=n.fixCode(i),l=n.oldPatch.getSrc(i),s=n.oldPatch.getMode(i);if(a.removeChild(i),l){var c=n.env.doc.createElement("textarea");c.value=l,c.style.display="none",a.appendChild(c),n.domUtils.addClass(a,d.CLASS.CODE_CONTAINER),s&&n.domUtils.attr(a,{"data-mode":s}),r.push(a)}}}return r},getMode:function(e){var t,n,r=e.querySelector("code");return r&&r.className&&(t=r.className.match(/language-([\w]+)/i))?n=t[1]:e.className&&(t=e.className.match(/lang-([\w]+)/i))&&(n=t[1]),n&&(n=g[n.toLowerCase()]),n},getSrc:function(e){if(!e)return"";for(var t=e.querySelectorAll("code"),n=0,r=t.length;n<r;n++){var o=t[n];o.innerHTML=o.innerHTML.replace(/<[^>]*>/gi,""),o.innerText||(o.innerText="\n")}return(e.innerText||e.textContent||"").replace(/\n$/,"")}},n.pastePatch={getPasteCodeList:function(){return n.env.body.querySelectorAll("."+d.CLASS.CODE_CONTAINER_PASTE)},fix:function(){for(var e=n.pastePatch.getPasteCodeList(),t=e.length;t>=0;t--){var r=e[t];n.domUtils.removeClass(r,d.CLASS.CODE_CONTAINER_PASTE),n.fixCodeContainer({container:r})}},ready:function(e,t){for(var r,o,i,a,l,s,c,u,f,h=e.querySelectorAll("."+d.CLASS.CODE_MIRROR),p=h.length-1;p>=0;p--){a=h[p],(i=n.getContainerFromChild(a))||(i=a),u=[],l=a.querySelectorAll("."+d.CLASS.CODE_MIRROR_LINE);for(var m=0;m<l.length;m++){var g=l[m];f=g.innerText||g.textContent,u.push(f.replace(d.FILL_CHAR_REG,""))}r=n.env.doc.createElement("div"),t?r.innerHTML="<br/>"+u.join("<br/>")+"<br/><br/>":(s=i.getAttribute("data-mode"),c=i.getAttribute("data-theme"),(o=n.env.doc.createElement("textarea")).textContent=u.join("\n"),n.domUtils.addClass(r,d.CLASS.CODE_CONTAINER_PASTE),r.appendChild(o),s&&n.domUtils.attr(r,{"data-mode":s}),c&&n.domUtils.attr(r,{"data-theme":c})),n.domUtils.before(r,i),n.domUtils.remove(i)}}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"lastFocusCodeForReader",get:function(){return this._lastFocusCodeForReader}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=b},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(1),f=n(3),h=n(2),p=/bold|italic|underline|strikeThrough/i,m={bold:{key:"font-weight",value:"bold"},italic:{key:"font-style",value:"italic"},underline:{key:"text-decoration",value:"underline"},strikethrough:{key:"text-decoration",value:"line-through"}},g=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=a(this,(e=c(t)).call.apply(e,[this].concat(i))))._commandQueue={},n._lastRange=null,n._clearFontSize=function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];n.domUtils.clearStyle(r,"font-size",!0),n._clearFontSize(r.querySelectorAll("[style]"))}},n._getHBlock=function(e){for(var t=1;t<=6;t++){var n=e.querySelector("h"+t);if(n)return n}return null},n._patchExecForFormatBlock=function(e){if(n.req.editorBridge.isOutline)return n.req.outlineCore.patchExecForFormatBlock(e);var t=n.rangeUtils.getRange(),r=n.req.tableZone.getZone();if(t||r.range){var o,i,a,l;t&&(o=t.startContainer,i=t.startOffset,a=t.endContainer,l=t.endOffset);for(var s=n.req.blockUtils.fixAndGetBlockListFromRange(),c=!1,d=0;d<s.length;d++){var u=s[d];if(c=n.domUtils.isTag(u,["h1","h2","h3","h4","h5","h6"])||!!n._getHBlock(u))break}if(!c&&/^div$/gi.test(e))return!0;for(var f=0;f<s.length;f++){var h=s[f],p=n._getHBlock(h);if(!n.domUtils.isSelfClosingTag(h)&&!h.notFormat)if(p&&!n.domUtils.isTag(p,[e]))s[f]=n.domUtils.replaceTagName(p,e);else if(n.domUtils.isTag(h,["ol","ul"]))for(var m=h.children,g=0;g<m.length;g++){var v=m[g],b=n.domUtils.packageChildNodesByDiv(v);n.domUtils.replaceTagName(b,e)}else n.domUtils.isTag(h,["td","th","li"])?(h=n.domUtils.packageChildNodesByDiv(h),s[f]=n.domUtils.replaceTagName(h,e)):p||(s[f]=n.domUtils.replaceTagName(h,e))}if(n._clearFontSize(s),t){var y=s[s.length-1];o.parentNode&&a.parentNode?n.rangeUtils.setRange(o,i,a,l):o.parentNode?n.rangeUtils.setRange(o,i):a.parentNode?n.rangeUtils.setRange(a,l):n.rangeUtils.setRange(y,n.domUtils.getEndOffset(y))}return!0}},n._patchExecForSubAndSup=function(e){return n._patchQueryForSubAndSup(e)?(n.clearSubSup(),!1):n.env.doc.execCommand(e,!1)},n._patchQueryForSubAndSup=function(e){var t,r="subscript"===e?"sub":"sup",o=n.rangeUtils.getRange();return o&&(t=(t=n.rangeUtils.getRangeDetail(o.startContainer,o.startOffset)).container,t=n.domUtils.getFirstDeepChild(t),t=n.domUtils.getParentByTagName(t,r,!0)),!!t},n._patchExecForJustify=function(e){var t,r;switch(e.toLowerCase()){case"justifycenter":t="center",r=!0;break;case"justifyright":t="right",r=!0;break;default:t="left",r=!1}if(n.req.tableZone.getZone().range)n.req.tableCore.setCellAlign(t,null);else{for(var o=n.req.blockUtils.fixAndGetBlockListFromRange(),i=[],a=0;a<o.length;a++){var l=o[a],s=n.domUtils.getParentByTagName(l,"li",!0);s?i.indexOf(s)<0&&i.push(s):i.push(l)}for(var c=function(e){var o=i[e];if(n.domUtils.eachChild(o,(function(e){return!n.domUtils.isWizDom(e)&&!n.domUtils.hasClass(e,u.CLASS.CODE_CONTAINER)}),(function(e){e!==o&&n.domUtils.css(e,{"text-align":null})})),n.domUtils.isTag(o,"li")){r?n.domUtils.addClass(o,u.CLASS.ORDER_LIST_ALIGN_STYLE):n.domUtils.removeClass(o,u.CLASS.ORDER_LIST_ALIGN_STYLE);var a=o.firstChild;if(n.domUtils.isTag(a,"div")&&!n.domUtils.hasClass(a,u.CLASS.CODE_CONTAINER)&&!n.domUtils.hasClass(a,u.CLASS.TABLE_CONTAINER)){var l=a.getAttribute("style"),s=n.domUtils.replaceTagName(a,"span");l&&s.setAttribute("style",l),s.nextSibling&&n.domUtils.after(n.env.doc.createElement("br"),s)}}n.domUtils.css(o,{"text-align":t})},d=0;d<i.length;d++)c(d)}},n._patchExecForOutdent=function(){for(var e,t,r=n.rangeUtils.getRange(),o={collapsed:r.collapsed,startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},i=n.req.blockUtils.fixAndGetBlockListFromRange(),a=[],l=function(e){if(e){var t=function(e){for(var t=0;t<a.length;t++)if(e===a[t].main)return t;return-1}(e.main);t<0?a.push(e):e.first&&a[t].first?a[t].last=e.last:(a[t].first=null,a[t].last=null)}},s=function(e,t){for(var r=n.domUtils.getIndexList(e),o=e.querySelectorAll(t),i=!1,a=0;a<o.length;a++){var s=o[a],c=n.domUtils.getParentByTagName(s,["ol","ul"],!1);if(c){var d=n.domUtils.getIndexList(c);n.domUtils.compareIndexList(r,d)<0&&(s=null)}s&&(l({main:s,first:null,last:null}),i=!0)}return i},c=0;c<i.length;c++){var d=i[c],u=void 0;if(n.domUtils.isTag(d,["blockquote","ol","ul","li"]))u={main:d,first:null,last:null};else{var f=s(d,"ol"),h=s(d,"ul");f||h?u=null:(u=n.domUtils.getParentByTagName(d,["blockquote","li"],!1))&&(u={main:u,first:d,last:d})}l(u)}if(a.length>0){var p=a[0],m=a[a.length-1];e=n.domUtils.getFirstDeepChild(p.first?p.first:p.main),t=n.domUtils.getLastDeepChild(m.last?m.last:m.main)}for(var g=0;g<a.length;g++){var v=a[g];if(n.domUtils.isTag(v.main,"blockquote"))if(v.first){var b=n.domUtils.splitDomBeforeSub(v.main,v.first);b=n.domUtils.splitDomAfterSub(b,v.last),n.domUtils.peelDom(b)}else n.domUtils.peelDom(v.main);else if(n.domUtils.isTag(v.main,["ol","ul"])){if(!n.domUtils.getParentByTagName(v.main,["ol","ul"],!1))for(var y=v.main.childNodes.length-1;y>=0;y--){var _=v.main.childNodes[y];n.domUtils.isTag(_,"li")&&(n.domUtils.packageChildNodesByDiv(_),n.domUtils.peelDom(_))}n.domUtils.peelDom(v.main)}else{var S=v.main.parentNode;S=n.domUtils.splitDomSingle(S,v.main),n.domUtils.peelDom(S),(S=n.domUtils.getParentByTagName(v.main,["ol","ul"],!1))||(n.domUtils.packageChildNodesByDiv(v.main),n.domUtils.peelDom(v.main))}}return!o.collapsed&&e&&t?n.rangeUtils.setRange(e,0,t,n.domUtils.getEndOffset(t)):o.startContainer.parentNode?n.rangeUtils.setRange(o.startContainer,o.startOffset):n.rangeUtils.setRange(e,0),a.length>0},n._patchExecForFont=function(e){if(!p.test(e))return!0;var t=n.rangeUtils.getRange();return!t||!t.collapsed||(n.setCommandQueue(e),!1)},n._patchExecOverForFont=function(e){p.test(e)&&n.rangeUtils.fixRangeSpan()},n._event={bind:function(){n._event.unbind(),n.env.event.add(u.EVENT.EXEC_COMMEND,n._handler.onExecCommand),n.env.event.add(u.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.add(u.EVENT.ON_TEXT_INPUT,n._handler.onTextInput)},unbind:function(){n.env.event.remove(u.EVENT.EXEC_COMMEND,n._handler.onExecCommand),n.env.event.remove(u.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.remove(u.EVENT.ON_TEXT_INPUT,n._handler.onTextInput)}},n._handler={onExecCommand:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.execCommand.apply(l(n),t)},onSelectionChange:function(e){var t=n.rangeUtils.getRange();n._lastRange&&t&&t.startContainer===n._lastRange.startContainer&&t.startOffset===n._lastRange.startOffset&&t.endContainer===n._lastRange.endContainer&&t.endOffset===n._lastRange.endOffset||(n._lastRange=t,e&&n.clearCommandQueue())},onTextInput:function(e){if(0!==Object.keys(n._commandQueue).length){var t=n.rangeUtils.getRange();if(t.collapsed){var r=n.env.doc.createElement("span");r.innerText=e.data;var o=r.firstChild;t.insertNode(o),n.rangeUtils.setRange(o,0,o,e.data.length),f.stopEvent(e)}n.runCommandQueue()}}},n.on=function(){n._event.bind()},n.off=function(){n._event.unbind()},n.clearSubSup=function(){var e,t,r,o,i,a=n.rangeUtils.getRangeDomList({noSplit:!1});if(a&&0!==a.list.length){var l=n.domUtils.getParentByTagName(a.list[0],["sub","sup"],!0);if(1!==a.list.length){l&&n.domUtils.splitDomBeforeSub(l,a.list[0]);var s=n.domUtils.getParentByTagName(a.list[a.list.length-1],["sub","sup"],!0);s&&n.domUtils.splitDomAfterSub(s,a.list[a.list.length-1]);for(var c=!1,d=0;d<a.list.length;d++){var f=a.list[d];e=n.domUtils.getParentByTagName(f,["sub","sup"],!0),0===d?o=f:d===a.list.length-1&&(i=f),e&&(0===d?o=e.firstChild:d===a.list.length-1&&(i=e.lastChild),n.domUtils.peelDom(e),c=!0)}c?n.rangeUtils.setRange(o,0,i,n.domUtils.getEndOffset(i)):n.rangeUtils.fixRange(a)}else(e=n.domUtils.splitDomSingle(l,a.list[0]))?(o=e.firstChild,i=e.lastChild,n.domUtils.peelDom(e),n.rangeUtils.setRange(o,0,i,n.domUtils.getEndOffset(i))):n.rangeUtils.setRange(a.startDom,a.startOffset,a.endDom,a.endOffset)}else(t=n.rangeUtils.getRange())&&t.collapsed&&((r=n.domUtils.createSpan()).innerHTML=u.FILL_CHAR+u.FILL_CHAR,t.insertNode(r),(e=n.domUtils.getParentByTagName(r,["sub","sup"],!0))?(e=n.domUtils.splitDomSingle(e,r),n.domUtils.peelDom(e),n.rangeUtils.setRange(r,1)):n.domUtils.remove(r))},n.execCommand=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,i,a,l=n.rangeUtils.getRange();l&&l.collapsed&&n.req.todoUtils&&(o=n.req.todoUtils.getMainByCaret(),a=(i=n.req.todoUtils.getCheckbox(o))?i.id:"");var s,c=t[0],d=null;if(l&&/^(insertOrderedList)|(insertUnorderedList)$/i.test(c)){var f=l.startContainer,h=l.startOffset;1===f.nodeType&&h<f.childNodes.length&&(f=f.childNodes[h]),f=n.domUtils.getPreviousNode(f,!0),(d=n.domUtils.getParentByClass(f,u.CLASS.CODE_CONTAINER,!1))&&n.domUtils.setContenteditable(d,!0)}if(/formatblock/i.test(t[0]))s=n._patchExecForFormatBlock(t[2]);else if(/subscript|superscript/i.test(t[0]))s=n._patchExecForSubAndSup(t[0]);else if(/outdent/i.test(t[0]))s=n._patchExecForOutdent(t[0]);else if(/justifyCenter|justifyLeft|justifyRight/i.test(t[0]))s=n._patchExecForJustify(t[0]);else{var g=n.req.tableZone.getZone();if(!l&&g.range){var v=null;n.env.event.setPause(u.EVENT.ON_SELECTION_CHANGE,!0),n.req.tableUtils.eachRange(g.grid,g.range,(function(e){if(!e.fake){var r=e.cell;if(n.domUtils.isEmptyDom(r))return;n.rangeUtils.setRange(r,0,r,n.domUtils.getEndOffset(r));var o=n.queryCommandState(t[0]);return v=!o,!1}})),n.req.tableUtils.eachRange(g.grid,g.range,(function(e){if(!e.fake){var r=e.cell;n.env.event.setPause(u.EVENT.ON_SELECTION_CHANGE,!0),n.rangeUtils.setRange(r,0,r,n.domUtils.getEndOffset(r));var o=t[0],i=n.queryCommandState(o);if(i===v&&(s=n.env.doc.execCommand.apply(n.env.doc,t)),s=n.env.doc.execCommand.apply(n.env.doc,t),p.test(o)&&(n.rangeUtils.setRange(r,0,r,n.domUtils.getEndOffset(r)),(i=n.queryCommandState(o))!==v)){var a=m[o.toLowerCase()],l={};"text-decoration"===a.key?l[a.key]={enable:v,value:a.value}:l[a.key]=v?a.value:"",n.domUtils.css(r,l)}n.rangeUtils.remove()}})),setTimeout((function(){n.env.event.setPause(u.EVENT.ON_SELECTION_CHANGE,!1)}),10)}else n._patchExecForFont(t[0])&&(s=n.env.doc.execCommand.apply(n.env.doc,t),n._patchExecOverForFont(t[0]))}if(d&&n.domUtils.setContenteditable(d,!1),/^(indent)|(outdent)|(insertOrderedList)|(insertUnorderedList)$/i.test(c)&&n.domUtils.fixList(),/^(indent)|(outdent)$/i.test(c)&&n.domUtils.fixBlockquote(),a&&(/^indent$/i.test(c)&&n.env.client.type.isIOS||/^outdent$/i.test(c))&&(/^outdent$/i.test(c)&&n.req.todoUtils&&n.req.todoUtils.fixNewTodo(),i=n.env.body.querySelector("#"+a),(o=n.req.todoUtils&&n.req.todoUtils.getMainFromChild(i))&&n.req.todoUtils&&n.req.todoUtils.isEmptyMain(o))){for(var b=n.req.todoUtils.getCheckbox(o);o.lastChild!==b;)o.removeChild(o.lastChild);var y=n.domUtils.createSpan();n.domUtils.after(y,b),y.innerHTML=u.FILL_CHAR+u.FILL_CHAR,n.rangeUtils.setRange(y,1)}return/^delete$/i.test(c)||n.domUtils.fixFont(),n.env.event.call(u.EVENT.ON_EXEC_COMMAND),n.env.event.call(u.EVENT.ON_SELECTION_CHANGE),s},n.queryCommandState=function(e){var t;return e=e.toLowerCase(),/subscript|superscript/i.test(e)?t=n._patchQueryForSubAndSup(e):(t=n.env.doc.queryCommandState(e),p.test(e)&&n._commandQueue[e]&&(t=!t)),t},n.runCommandQueue=function(){for(var e=0,t=Object.keys(n._commandQueue);e<t.length;e++){var r=t[e];n.execCommand(r)}(n.clearCommandQueue(),env.client.type.isIOS)&&n.rangeUtils.getSelection().collapseToEnd()},n.clearCommandQueue=function(){n.env.compositionStart||(n._commandQueue={})},n.setCommandQueue=function(e){e=e.toLowerCase(),n._commandQueue[e]?delete n._commandQueue[e]:n._commandQueue[e]=!0},n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){s(c(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),h&&i(n,h),t}(h);e.exports=g},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(63),f=n(43),h=n(25),p=n(2),m=new f,g=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._curTouchTarget=null,n._contentResult={},n._checkEmailToWiz=function(){for(var e=n.env.body.querySelectorAll("input[type=hidden]"),t=0;t<e.length;t++){if(0===e[t].value.indexOf("wiz_mail_from"))return!0}return!1},n._event={bind:function(e){e&&(n._event.unbind(e),n.env.supportTouchEvent?(e.body.addEventListener("touchend",n._handler.onTouchEnd),e.body.addEventListener("touchstart",n._handler.onTouchStart)):e.body.addEventListener("click",n._handler.onClick))},unbind:function(e){e&&(e.body.removeEventListener("touchend",n._handler.onTouchEnd),e.body.removeEventListener("touchstart",n._handler.onTouchStart),e.body.removeEventListener("click",n._handler.onClick))}},n._handler={onChanged:function(e,t){if(e.getAttribute(d.ATTR.TODO_CHECK)!==t.getAttribute(d.ATTR.TODO_CHECK)){var r=e.id,o=e.getAttribute(d.ATTR.TODO_CHECK),i="checked"===o,a=n._contentResult.iframeDoc.querySelector("#"+r);if(a){var l=n.domUtils.getParentByClass(a,d.CLASS.TODO_LAYER);i?(n.domUtils.removeClass(l,d.CLASS.TODO_UNCHECKED),n.domUtils.addClass(l,d.CLASS.TODO_CHECKED)):(n.domUtils.removeClass(l,d.CLASS.TODO_CHECKED),n.domUtils.addClass(l,d.CLASS.TODO_UNCHECKED));var s={};s[d.ATTR.TODO_CHECK]=o,n.domUtils.attr(a,s)}}else setTimeout((function(){n._handler.onChanged(e,t)}),200)},onClick:function(e){var t=e.target;if(n.domUtils.hasClass(t,d.CLASS.TODO_CHECKBOX)){var r=t.id,o=n.env.body.querySelector("#"+r);if(o){n._handler.onChanged(o,t);var i=n.env.doc.createEvent("HTMLEvents");i.initEvent("click",!0,!0),i.eventName="click",o.dispatchEvent(i)}}},onTouchEnd:function(e){e.target===n._curTouchTarget&&(n._curTouchTarget=null,n._handler.onClick(e))},onTouchStart:function(e){n._curTouchTarget=e.target}},n._loadDependency=function(e){m.addCallback(n.env.doc,e),m.getLoading(n.env.doc)||(void 0===n.env.win.WizContent?(m.setLoading(n.env.doc,!0),h.loadJs(n.env.doc,h.getDependencyFiles(n.env.dependency,"js","wizContent"),(function(){m.setLoading(n.env.doc,!1),m.callback(n.env.doc)}))):m.callback(n.env.doc))},n.on=function(e,t){var r=n.env.options.pureReadMode.borderColor||(n.env.options.nightMode.enable?"#1F2228":"#F0F2F4"),o=n.env.options.pureReadMode.htmlBgColor||(n.env.options.nightMode.enable?"#282B33":"#E8E8E8"),i=n.env.options.pureReadMode.bodyBgColor||(n.env.options.nightMode.enable?"#1F2228":"#FFFFFF"),a="\n    * {box-sizing: border-box;}\n    html {\n      height:100%; background-color:".concat(o," !important;\n    }\n    body *, .").concat(d.CLASS.WIZ_BODY," * {max-width:100%;}\n    body, .").concat(d.CLASS.WIZ_BODY,", .markdown-body {\n      background-color:").concat(i," !important;\n      border:1px solid ").concat(r," !important;\n      max-width:820px !important;\n      min-height:initial !important;\n      min-height:calc(100% - 80px) !important;\n      margin:0px auto !important;\n      padding:16px !important;\n    }\n    pre {white-space: pre-wrap;}\n\n    @media screen and (min-width: 821px) {\n      body, .").concat(d.CLASS.WIZ_BODY,", .markdown-body {\n        margin:40px auto !important;\n        padding:48px 75px !important;\n      }\n    }\n    "),l="";if(n.env.options.nightMode.enable&&(l="body, .wiz-editor-body, .markdown-body {border: 0px !important;}"+(n.req.nightModeUtils?n.req.nightModeUtils.getBaseStyle("",i):"")),!n.env.options.container||n.env.options.useFrame)if(n.env.readonly&&(e.needContentExtraction||n.env.options.pureReadMode.needContentExtraction)){var s=n._checkEmailToWiz();n._loadDependency((function(){n.env.win.WizContent.init("",!1).on({needContentExtraction:!s,needShow:!n.env.client.type.isIOS,borderColor:i,htmlBgColor:o,bodyBgColor:i,stylePatch:l},(function(e){n._contentResult=e;var r=n.env.doc;if(n.env.doc=n._contentResult.iframeDoc,n.req.wizStyle.insertDefaultStyle(),n.env.doc=r,n._event.bind(n._contentResult.iframeDoc),t&&(t(n._contentResult),n.env.client.type.isIOS))try{var o=n.getContentExtractionHtml();window.webkit?window.webkit.messageHandlers.postPureReadContext.postMessage(o):window.WizNote&&window.WizNote.onContentExtractionEnd(o)}catch(e){console.log(e)}}))}))}else if(n.env.options.pureReadMode.enable&&!e.needContentExtraction&&!n.env.options.pureReadMode.needContentExtraction){var c=a+l;n.req.wizStyle.insertStyle({id:d.ID.PURE_READ_STYLE,name:d.NAME.TMP_STYLE},c),n.env.win.WizContent&&n.env.win.WizContent.off()}},n.off=function(){n._event.unbind(n._contentResult.iframeDoc);n._loadDependency((function(){n.env.win.WizContent.off()})),n.req.wizStyle.removeStyleById(d.ID.PURE_READ_STYLE)},n.getContentExtractionHtml=function(){if(!n._contentResult||!n._contentResult.iframe||!n.domUtils.hasClass(n._contentResult.iframe,d.CLASS.WIZ_CONTENT_IFRAME_ACTIVE))return null;var e=n.env.doc,t=n.env.win,r=n.env.body;n.env.doc=n._contentResult.iframeDoc,n.env.win=n._contentResult.iframeWin,n.env.body=n.env.doc.body,u.run(n.env.win);var o=n.req.editorBridge.getContentHtmlForInside();return n.env.body=r,n.env.doc=e,n.env.win=t,o},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(p);e.exports=g},function(e,t,n){n(91);e.exports=function(){var e,t,n,r=this,o=null,i=null,a=null;this.initCore=function(e){i=(o=e).env,a=o.require.todoCore};var l=function(){e=i.win.external;var t=function(){try{return e.WizDocument.IsPersonalDocument()}catch(e){return console.error(e),!1}};this.getUserAlias=function(){try{return e.UserAlias}catch(e){return console.error(e),""}},this.getUserGuid=function(){try{return e.GetUserGUID()}catch(e){return console.error(e),""}},this.getUserAvatarFileName=function(t){try{return e.GetUserAvatarFileName(t)}catch(e){return console.error(e),""}},this.hasPermission=function(){try{return!i.readonly||e.WizDocument.CanEdit}catch(e){return console.error(e),!1}},this.isPersonalDocument=t,this.checkDocLock=function(n){if(t())a[n](!1,!1);else try{e.ExecuteCommand("OnClickingChecklist","WizReader.todo."+n+"({cancel}, {needCallAgain});","readingnote")}catch(e){console.error(e)}},this.getOriginalDoc=function(){try{return e.WizDocument.GetHtml()}catch(e){return console.error(e),""}},this.saveDoc=function(t,n){try{e.WizDocument.SetHtml2(t,n)}catch(e){console.error(e)}}},s=function(){this.getUserAlias=function(){return i.options.clientRoute.getUserAlias?i.options.clientRoute.getUserAlias():""},this.getUserAvatarFileName=function(){return i.options.clientRoute.getUserAvatarFileName?i.options.clientRoute.getUserAvatarFileName():""},this.getUserGuid=function(){return i.options.clientRoute.getUserGuid?i.options.clientRoute.getUserGuid():""},this.hasPermission=function(){return i.options.clientRoute.hasPermission?!i.readonly||i.options.clientRoute.hasPermission():!i.readonly||!1},this.isPersonalDocument=function(){return!!i.options.clientRoute.isPersonalDocument&&i.options.clientRoute.isPersonalDocument()},this.checkDocLock=function(e){if(i.options.clientRoute.checkDocLock)return i.options.clientRoute.checkDocLock((function(t,n){a[e](t,n)}))},this.getOriginalDoc=function(){return i.options.clientRoute.getOriginalDoc?i.options.clientRoute.getOriginalDoc():i.body.outerHTML},this.saveDoc=function(e,t){if(i.options.clientRoute.saveDoc)return i.options.clientRoute.saveDoc(e,t)}},c=function(){t=i.win.WizQtEditor;this.getUserAlias=function(){return t.userAlias},this.getUserAvatarFileName=function(e){return t.userAvatarFilePath},this.getUserGuid=function(){return t.userGuid},this.hasPermission=function(){return!i.readonly||t.hasEditPermissionOnCurrentNote},this.isPersonalDocument=function(){return t.isPersonalDocument},this.checkDocLock=function(e){return t.clickingTodoCallBack.connect(a[e]),t.checkListClickable()},this.getOriginalDoc=function(){return t.currentNoteHtml},this.saveDoc=function(e,t){}},d=function(){n=i.win.WizNote;this.getUserAlias=function(){return n.getUserAlias()},this.getUserAvatarFileName=function(e){return n.getUserAvatarFileName(e)},this.getUserGuid=function(){return n.getUserGuid()},this.hasPermission=function(){return!i.readonly||n.hasPermission()},this.isPersonalDocument=function(){return n.isPersonalDocument()},this.beforeCloseDoc=function(){n.onWizTodoReadCheckedClose()},this.checkDocLock=function(e){n.checkDocLock()},this.getOriginalDoc=function(){return n.getDocHtml()},this.saveDoc=function(e,t){n.setDocHtml(e,t)}},u=function(){this.getUserAlias=function(){return prompt(JSON.stringify({type:"getUserAlias"}))},this.getUserAvatarFileName=function(e){return prompt(JSON.stringify({type:"getUserAvatarFileName"}))},this.getUserGuid=function(){return prompt(JSON.stringify({type:"getUserGuid"}))},this.hasPermission=function(){return!i.readonly||"true"===prompt(JSON.stringify({type:"hasPermission"}))},this.isPersonalDocument=function(){return"true"===prompt(JSON.stringify({type:"isPersonalDocument"}))},this.checkDocLock=function(e){i.win.webkit.messageHandlers.tryLockDocument.postMessage(e)},this.getOriginalDoc=function(){return prompt(JSON.stringify({type:"getOriginalDoc"}))}};this.bridge=null,this.getBridge=function(){if(r.bridge)return r.bridge;var e=null;return e=i.client.type.isWin?new l:i.client.type.isMac?new c:i.client.type.isIOS?new u:i.client.type.isAndroid?new d:new s,r.bridge=e,e},this.setQtEditor=function(){t=i.win.WizQtEditor}}},function(e,t,n){var r=n(1),o=n(3);e.exports=function(){var e=this,t=null,n=null,i=null,a=null,l=null;this.initCore=function(e){n=(t=e).env,i=t.require.domUtils,a=t.require.commandExtend,l=t.require.rangeUtils};var s=function(){var e=n.doc.createElement(r.TAG.TMP_TAG);return i.css(e,{position:"absolute","z-index":-1,top:"-100px",left:"-100px",width:"1px",height:"1px",color:"transparent",background:"transparent",overflow:"hidden",opacity:0,filter:"alpha(opacity=0)"}),n.body.appendChild(e),e.innerHTML="<br/>",i.setContenteditable(e,!0),e};this.getData=function(e,t){var r={files:null,html:"",text:""};if(n.browser.isIe){var o=window.clipboardData;if(!o)return void t(r);l.caretBackup();var a=o.getData("Text"),c=s();return l.setRange(c,0,c,1),void setTimeout((function(){r.text=a||"",r.html=c.innerHTML||"",l.caretRestore(),i.remove(c),t(r)}),50)}e&&e.clipboardData?(r.files=e.clipboardData&&e.clipboardData.items&&1===e.clipboardData.items.length&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null,r.html=e.clipboardData&&e.clipboardData.getData("text/html")||"",r.text=e.clipboardData&&e.clipboardData.getData("text/plain")||"",t(r)):t(r)},this.setData=function(t,r,a,c){if(n.browser.isIe){var d=window.clipboardData;if(d){l.caretBackup();var u=s();d.setData("Text",a),u.innerHTML=r,l.setRange(u,0,u,u.childNodes.length),setTimeout((function(){l.caretRestore(),i.remove(u),c()}),50)}else c()}else if(t&&t.clipboardData){if(t.clipboardData&&!n.browser.isIe&&(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",a),t.clipboardData.setData("text/html",r)),t.clipboardData.getData("text"))return o.stopEvent(t),void c();e.setTxtData(a,c),o.stopEvent(t)}else c()},this.setTxtData=function(e,t){var r=s(),o=n.doc.createElement("textarea");o.value=e,i.attr(o,{readonly:""}),i.css(o,{position:"absolute",top:"0",left:"0",width:"1000px"}),i.css(r,{position:"absolute",top:"-99999px",left:"-99999px",overflow:"hidden"}),r.appendChild(o),n.body.appendChild(r),l.caretBackup(),o.select(),a.execCommand("copy"),l.caretRestore(),n.body.removeChild(r),o=null,r=null,t()}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h=(n(63),n(43)),p=n(25),m=new h,g=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._afterInsertTimer=null,n._afterInsert=function(e){if(e){n._afterInsertTimer&&clearTimeout(n._afterInsertTimer);var t=30,r=30;n.env.client.type.isPhone&&(t=100,r=300),n._afterInsertTimer=setTimeout((function(){var t,o=e;n.domUtils.isSelfClosingTag(e)?(o=o.parentNode,t=n.domUtils.getIndex(e)+1):t=n.domUtils.getEndOffset(e),n.req.frameViewUtils.onAdjustContainerSize(),n.domUtils.isEmptyDom(o)&&(t=0),n.rangeUtils.setRange(o,t,null,null),1===e.nodeType&&(n._afterInsertTimer=setTimeout((function(){n.req.frameViewUtils.onAdjustContainerSize(),n.rangeUtils.fixScroll()}),r))}),t)}},n._getSelectedTxt=function(){return n.rangeUtils.getSelection().toString()},n._loadWizTemplate=function(e){m.addCallback(n.env.doc,e),m.getLoading(n.env.doc)||(void 0===n.env.win.WizTemplate?(m.setLoading(n.env.doc,!0),p.loadJs(n.env.doc,p.getDependencyFiles(n.env.dependency,"js","wizTemplate"),(function(){m.setLoading(n.env.doc,!1),m.callback(n.env.doc)}))):m.callback(n.env.doc))},n.find=function(e,t,r,o){if(!e)return!1;var i=n.env.win.find(e,t,r);return!i&&o&&(n.rangeUtils.setRange(n.env.body,r?n.env.body.childNodes.length:0),i=n.env.win.find(e,t,r)),i},n.getContentHtml=function(e){var t;if(n.domUtils.fixFont(),n.domUtils.fixList(),!(e&&e.isCreateSvg))for(var r=n.env.body.querySelectorAll("."+d.CLASS.SVG_TEMPLATE),o=r.length-1;o>=0;o--)n.domUtils.remove(r[o]);n.env.event.call(d.EVENT.BEFORE_GET_DOCHTML,null);for(var i=n.env.body.getElementsByTagName("input"),a=0,l=i.length;a<l;a++)t=i[a],n.domUtils.isInWizTmp(t)||/^text$/i.test(t.type||t.getAttribute("type"))&&t.value!==t.getAttribute("value")&&n.domUtils.attr(t,{value:t.value});for(var s=0,c=(i=n.env.body.getElementsByTagName("textarea")).length;s<c;s++)t=i[s],n.domUtils.getParentByClass(t,d.CLASS.CODE_CONTAINER,!1)||n.domUtils.setTextarea(t);for(var u=0,f=(i=n.env.body.querySelectorAll("."+d.CLASS.TABLE_CONTAINER)).length;u<f;u++)n.req.tableUtils.moveOutFromTableContainer(i[u]);var h,p="";if(n.env.options.container&&!n.env.options.useFrame){if(!(n.env.readonly&&n.env.options.reader.type===d.NOTE_EDITOR_TYPE.MARKDOWN||!n.env.readonly&&n.env.options.editor.type===d.NOTE_EDITOR_TYPE.MARKDOWN))throw h="",new Error("普通笔记不适合采用非 iFrame 方式");h=n.env.body.innerHTML}else{var m;p=n.domUtils.getDocType(n.env.doc),n.env.isSetBodyFontSize&&(m=n.env.body.style.fontSize,n.env.body.style.fontSize="",n.env.body.getAttribute("style")||n.env.body.removeAttribute("style"));var g={};g[d.ATTR.WIZ_DOCUMENT_TYPE]=d.DOCUMENT_TYPE.COMMON,n.domUtils.attr(n.env.body,g),h=n.env.doc.documentElement.outerHTML,n.env.isSetBodyFontSize&&(n.env.body.style.fontSize=m)}return h=(h=h.replace(/(<[\w]*[^<>]*[ ]+)contenteditable([ ]*=[ ]*['"][^'"<>]*['"])?/gi,"$1")).replace(/(<div class="CodeMirror-measure">)<pre><span>xxxxxxxxxx<\/span><\/pre>/gi,"$1"),h=n.domUtils.hideTableFromHtml(h),h=n.domUtils.hideCodeFromHtml(h),h=n.req.markerCore.fixSvgFromHtml(h),n.env.win.WizTemplate&&(h=n.env.win.WizTemplate.hideTemplateFormHtml(h)),p+h},n.initWizDocument=function(e){n.env.scrollContainer=n.domUtils.getScrollContainer(),n.env.isWizTemplate=!!n.env.doc.querySelector("#"+d.ID.WIZ_TEMPLATE_INFO),n.req.markdownRender&&n.req.markdownRender.init(),n.req.mathJaxRender&&n.req.mathJaxRender.init();for(var t,r=n.env.body.className.split(" "),o=r.length-1;o>=0;o--)(!(t=r[o])||/^wiz-/gi.test(t)&&!/-template-/gi.test(t))&&r.splice(o,1);n.env.body.className=d.CLASS.WIZ_BODY+(r.length>0?" "+r.join(" "):""),n.env.options.noAmend||(n.req.amendUser.initUser(),n.req.amendUser.setUsersData());var i=function(){n.env.win.WizTemplate&&n.env.win.WizTemplate.init({document:n.env.doc,lang:n.env.options.lang,clientType:n.env.options.clientType}),e()};n.env.isWizTemplate&&n.env.options.wizTemplate.url?n._loadWizTemplate(i):i()},n.insertDom=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=function(e){if(e.parent&&!e.target)for(;e.parent!==n.env.body&&!e.target;)e.target=e.parent.nextSibling,e.parent=e.parent.parentNode},o=function(e){return 1!==e.nodeType?null:n.domUtils.isTag(e,"img")?e:(t=e.querySelectorAll("img")).length>0?t[t.length-1]:null;var t};t.insertStart?n.rangeUtils.setRange(n.env.body,0):t.insertEnd&&n.rangeUtils.setRange(n.env.body,n.env.body.childNodes.length);var i,a,l,s=n.readyForInsert();u.isArray(e)||(e=[e]);for(var c=0,d=e.length;c<d;c++){var f=e[c];n.domUtils.isBlock(f)&&r(f),s.parent.insertBefore(e[c],s.target),(l=o(e[c]))&&(a=l),i=e[c]}n.domUtils.fixList(),n._afterInsert(i),a&&a.addEventListener("load",(function(){n._afterInsert(i)}))}},n.insertHtml=function(e,t){if(e){var r=n.env.doc.createElement("div"),o=[];r.innerHTML=e;for(var i=0,a=r.childNodes.length;i<a;i++)o.push(r.childNodes[i]);n.insertDom(o,t),r=null,n.env.event.call(d.EVENT.AFTER_INSERT_DOM)}},n.modifySelectionBlock=function(e){if(!n.req.tableCore.modifySelectionBlock(e)){var t=n.req.blockUtils.fixAndGetBlockListFromRange();n.domUtils.modifyBlocksStyle(t,e)}},n.modifySelectionDom=function(e,t){n.req.tableCore.modifySelectionDom(e,t)||n.rangeUtils.modifySelectionDom(e,t)},n.readyForInsert=function(){var e,t,r,o,i=n.rangeUtils.getSelection(),a=n.rangeUtils.getRange(),l={parent:null,target:null};a||n.rangeUtils.caretRestore()||n.domUtils.focus(),n.req.amend.isAmendEditing&&(a.collapsed||(n.req.amendUtils.removeSelection(n.req.amendUser.getCurUser()),n.req.amendUtils.removeUserDel(null,n.req.amendUser.getCurUser()),i.collapseToEnd())),(a=n.rangeUtils.getRange()).collapsed&&(e=a.startContainer,t=a.startOffset,(o=n.domUtils.getParentByFilter(e,(function(e){if(1!==e.nodeType)return!1;var t=e.getAttribute("href");return!(!t||!/^wiz:\/*open_attachment\?/i.test(t))}),!0))&&((r=n.domUtils.createSpan()).innerHTML=d.FILL_CHAR,0===t?(n.domUtils.before(r,o),n.rangeUtils.setRange(r,0)):(n.domUtils.after(r,o),n.rangeUtils.setRange(r,1))));var s=n.req.amendUtils.fixedAmendRange(),c=n.req.amend.splitAmendDomByRange(s);return e=(a=n.rangeUtils.getRange()).startContainer,t=a.startOffset,c?(l.target=c,l.parent=c.parentNode):3===e.nodeType&&t>0&&t<e.nodeValue.length?(l.target=n.domUtils.splitRangeText(e,t,null,!1),l.parent=l.target.parentNode):1===e.nodeType&&t>0&&t<e.childNodes.length?(l.target=e.childNodes[t],l.parent=e):e===n.env.body||e===n.env.body.parentNode?(l.target=0===t?n.env.body.childNodes[0]:null,l.parent=n.env.body):0===t?(l.target=e,l.parent=e.parentNode):3===e.nodeType?(l.target=e.nextSibling,l.parent=e.parentNode):(l.target=null,l.parent=e),l.target&&1===l.target.nodeType&&!n.domUtils.isSelfClosingTag(l.target)&&n.domUtils.isEmptyDom(l.target)&&(l.parent=l.target,n.domUtils.isTag(l.parent.childNodes[0],"br")?(l.parent.removeChild(l.parent.childNodes[0]),l.target=l.parent.childNodes.length>0?l.parent.childNodes[0]:null):l.target=l.parent.childNodes[0]),n.domUtils.isWizDom(l.parent)&&(l.target=l.parent,l.parent=l.parent.parentNode),l},n.replace=function(e,t,r){return!!e&&(n._getSelectedTxt()===e&&(t?(i=n.env.doc.createTextNode(t),(o=n.env.doc.createElement("span")).appendChild(i),t=o.innerHTML,o=null,i=null):t="",n.req.commandExtend.execCommand("insertHTML",!1,t)),n.find(e,r));var o,i},n.replaceAll=function(e,t,r){if(!e)return!1;for(n.rangeUtils.setRange(n.env.body,0);n.replace(e,t,r););},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=g},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h=/\{\{WIZ_NEW_LINE_STR\}\}\n/gm,p=/\{\{WIZ_NEW_LINE_STR\}\}/gm,m=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(l)))).addClass=function(e,t){var r,o;if(e)for(e.nodeType&&(e=[e]),r=e.length-1;r>=0;r--)1!==(o=e[r]).nodeType||n.hasClass(o,t)||(o.className=(o.className+" "+t).trim())},n.after=function(e,t){n.before(e,t,!0)},n.appendStyle=function(e,t){if(e){var n,r,o,i=e.split(";");for(n=0,r=i.length;n<r;n++)i[n].indexOf(":")>0&&(t[(o=i[n].split(":"))[0].trim()]=o[1].trim())}},n.attr=function(e,t){var n,r;if(e&&t&&1===e.nodeType)for(n in t)t.hasOwnProperty(n)&&"string"==typeof n&&((r=t[n])||""+r=="0"?e.setAttribute(n,r):e.removeAttribute(n))},n.before=function(e,t,r){if(r=!!r,t&&e){var o,i=t===n.env.body,a=i?t:t.parentNode,l=i?r?null:n.env.body.childNodes[0]:r?t.nextSibling:t;if(u.isArray(e)){o=l;for(var s=e.length-1;s>=0;s--){var c=e[s];a.insertBefore(c,o),o=c}}else a.insertBefore(e,l)}},n.getBodyText=function(){var e=n.env.body;return e?e.innerText?e.innerText:"":" "},n.canEdit=function(e){var t=["script","style"];return e&&(1===e.nodeType||3===e.nodeType)&&(n.isTag(e,"br")||!n.isEmptyDom(e))&&!n.isInWizTmp(e)&&!(1===e.nodeType&&n.isTag(e,t)||3===e.nodeType&&e.parentNode&&n.isTag(e.parentNode,t))},n.childNodesFilter=function(e){e&&1===e.nodeType&&n.eachChild(e,(function(t){return 1===t.nodeType&&/link|style|script|meta/gi.test(t.nodeName)?(e.removeChild(t),!1):1!==t.nodeType&&3!==t.nodeType?(e.removeChild(t),!1):1===t.nodeType}),(function(){}))},n.clearChild=function(e,t,r){if(!e||1!==e.nodeType||n.env.isWizTemplate||/^wiz_/gi.test(e.tagName)||n.isTag(e,["svg"])||n.hasClass(e,d.CLASS.CODE_CONTAINER)||e.id===d.ID.MARKER_ROOT||!n.env.doc.querySelector("#"+d.ID.WIZ_DEFAULT_STYLE))return!1;t||(t=e);var o,i,a=/(^| )wiz[\-_]/i,l=e.childNodes,s=!1,c=(n.isTag(e,["div","p"])&&!e.style.background&&!e.style.backgroundColor||n.isTag(e,["span"]))&&!a.test(e.tagName)&&!a.test(e.id)&&!a.test(e.className),u=e.childNodes.length>2;if(c&&1===l.length)s=n.clearChild(l[0],t,r+1);else{var f=!1,h=null;for(o=l.length-1;o>=0;o--)if(i=l[o],n.clearChild(i,null,0),c&&u&&i.parentNode&&1===i.nodeType&&!n.isSelfClosingTag(i)&&0===i.childNodes.length)f||!n.isTag(i,"div")||/inline/i.test(i.style.display)||(h=n.env.doc.createElement("br"),n.after(h,i),f=!0),n.remove(i);else if(i.parentNode&&n.isTag(i,"div")&&0===i.childNodes.length){n.env.browser.isIe&&"<br>"===i.innerHTML?f=!0:n.remove(i)}else f=!1;c&&1===l.length&&(s=n.clearChild(l[0],t,r+1))}if(c&&r>5&&!s&&t)return n.mergeDomParent(e,t),!0;if(c&&0===l.length&&!n.isBlock(e,{includeBr:!0})&&n.isEmptyDom(e)||n.isTag(e,["ol","ul"])&&0===l.length){if(n.env.browser.isIe&&"<br>"===e.innerHTML)return s;n.remove(e)}else if(c){var p=0,m=0;for(o=0;o<l.length&&(i=l[o],n.isTag(i,["p","div"]));o++)p=o+1;if(p<l.length)for(o=l.length-1;o>=0&&(i=l[o],n.isTag(i,["p","div"]));o--)m=l.length-o;if(p&&p===l.length)n.peelDom(e,(function(t){return n.mergeStyleAToB(e,t),!0}));else{for(o=0;o<p;o++)i=e.firstChild,n.mergeStyleAToB(e,i),n.before(i,e);for(o=0;o<m;o++)i=e.lastChild,n.mergeStyleAToB(e,i),n.after(i,e)}}return s},n.clearChildSpan=function(e,t,r){if(e){var o,i=t.indexOf(e)>=0,a=r||n.isUsableTextNode(e);if(i||3!==e.nodeType||a||n.getParentByTagName(e,"pre",!1)){if(!i&&3===e.nodeType)return o=e.nodeValue.replace(d.FILL_CHAR_REG,""),void(r||o===e.nodeValue||(e.nodeValue=o));if(!i&&1===e.nodeType){var l,s,c=e.childNodes;for(l=c.length-1;l>=0;l--)s=c[l],n.clearChildSpan(s,t,r);n.mergeChildSpan(e,t),t.indexOf(e)<0&&0===e.childNodes.length&&n.isTag(e,"span")&&n.remove(e)}}else n.remove(e)}},n.clearStyle=function(e,t,r){var o=function(e,r){e.style[t]="",n.isTag(e,"font")&&"color"===r&&n.attr(e,{color:null})};if(o(e,t),!r)for(;e&&!n.isBlock(e);)o(e,t),e=e.parentNode},n.clearStyleFromHtml=function(e,t){var r,o;t=t||[];for(var i=0;i<t.length;i++)o=(r=t[i]).indexOf("*"),t[i]=o>=0?r.substr(0,o).escapeRegex():r.escapeRegex()+"$";var a=t.length>0?new RegExp("^("+t.join("|")+")","i"):null;return e=e.replace(/(<[^<>]* style=(['"]))((\r?\n|(?!(\2|[<>])).)*)/gi,(function(e,t,r,o){for(var i,l,s,c,d=[t],u=(o=o.replace(/&quot;/gi,'"')).split(";"),f=0,h=u.length;f<h;f++)s="",c="",(l=(i=u[f]).indexOf(":"))>-1&&(s=i.substr(0,l).trim(),c=i.substr(l+1).trim(),s&&c&&a&&a.test(s)&&(/^font-size$/i.test(s)?c=n.getFontSizeRem(c,{useRootSize:!0}):(/^text-align$/i.test(s)&&!/right|justify/i.test(c)||/^font-style$/i.test(s)&&!/italic/i.test(c))&&(c=null),c&&!/^(inherit|initial|transparent)$/i.test(c)&&d.push(s,":",c.replace(/"/gi,"&quot;"),";")));return d.join("")}))},n.clone=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if(t=e.cloneNode(r),n.attr(t,{id:""}),r)for(var o=t.querySelectorAll("[id]"),i=o.length-1;i>=0;i--)n.attr(o[i],{id:""});return t},n.compareIndexList=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var o=e[r],i=t[r];if(o<i)return-1;if(o>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},n.contains=function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))},n.convertImageToBase64=function(e,t,r,o){var i=n.env.doc.createElement("img");i.onload=function(){var e=n.env.doc.createElement("canvas");e.width=t,e.height=r;var a=e.getContext("2d"),l=t/i.width,s=r/i.height,c=Math.max(l,s);a.scale(c,c),a.drawImage(i,0,0),o(e.toDataURL()),i=null,e=null},i.src=e},n.createSpan=function(){var e=n.env.doc.createElement("span"),t={};return t[d.ATTR.SPAN]=d.ATTR.SPAN,n.attr(e,t),e},n.css=function(e,t){if(e&&3!=e.nodeType&&t&&!n.isTag(e,"br")){var o,i,a={};for(o in t)t.hasOwnProperty(o)&&"string"==typeof o&&((i=t[o])||0===i?a[o]=i:n.clearStyle(e,o,!1));for(o in a)if(a.hasOwnProperty(o)&&"string"==typeof o)if((i=a[o])||0===i)if(i.toString().indexOf("!important")>0)n.clearStyle(e,o,!0),e.style.cssText+=o+":"+i;else if("text-decoration"===o.toLowerCase()&&"object"===r(i)){var l=e.style.textDecoration||"";i.enable&&l.indexOf(i.value)<0?l=(l+" "+i.value).trim():!i.enable&&l.indexOf(i.value)>-1&&(l=l.replace(i.value,"").trim()),n.clearStyle(e,o,!0),e.style[o]=l}else"font-size"===o.toLowerCase()?(n.clearStyle(e,o,!0),(i=n.getFontSizeRem(i))&&(e.style.cssText+=o+":"+i)):e.style[o]!==i&&(e.style[o]=i);else n.clearStyle(e,o,!1)}},n.eachChild=function(e,t,r){if(e&&t(e)){var o=e.childNodes;if(o){for(var i=o.length-1;i>=0;i--){var a=o[i];n.eachChild(a,t,r)}r(e)}}},n.fixBlockquote=function(e){for(var t=[],r=(t=e?[e]:n.env.body.querySelectorAll("blockquote")).length-1;r>=0;r--){var o=t[r];n.css(o,{margin:null,marginTop:null,marginBottom:null,marginLeft:null,marginRight:null,padding:null,paddingTop:null,paddingBottom:null,paddingLeft:null,paddingRight:null,border:null})}},n.fixFont=function(){for(var e=n.env.body.querySelectorAll("[style]"),t=/color\s*:\s*([^;]*)/i,r=/background-color\s*:\s*([^;]*)/i,o=/font-family\s*:\s*([^;]*)/i,i=/font-size\s*:\s*([%.\w]*)/i,a=/line-height\s*:\s*([^;]*)/i,l=n.getComputedStyle(n.env.body,"font-family"),s=0;s<e.length;s++){var c=e[s];if(c.parentNode&&!n.isTag(c,["html"])){var d=c.getAttribute("style");if(d&&c.style){var f=d.match(o);if(f&&(l===f[1]||0===l.indexOf(f[1]+","))){var h=n.getSpanTop(c);for(h=n.splitDomSingle(h,c);h&&1===h.nodeType;)h.style.fontFamily=null,h=h.firstChild}var p=i.exec(d);if(p){var m=p[1];n.getComputedStyle(c,"font-size")===n.getComputedStyle(c.parentNode,"font-size")?c.style.fontSize=null:m.indexOf("rem")<0&&(c.style.fontSize=n.getFontSizeRem(m,{useRootSize:!0}))}a.exec(d)&&n.getComputedStyle(c,"line-height")===n.getComputedStyle(c.parentNode,"line-height")&&(c.style.lineHeight=null);var g=t.exec(d);if(g&&!n.isTag(c,"a")){var v=g[1].trim();(n.env.options.nightMode.enable?u.rgb2Hex(v):n.getComputedStyle(c,"color"))===n.getComputedStyle(c.parentNode,"color")&&(c.style.color=null)}var b=r.exec(d);if(b){var y=b[1].trim();(n.env.options.nightMode.enable?u.rgb2Hex(y):n.getComputedStyle(c,"background-color"))===n.getComputedStyle(c.parentNode,"background-color",!0)&&(c.style.backgroundColor=null)}}}}},n.fixList=function(){for(var e=n.env.body.querySelectorAll("ol"),t=0;t<e.length;t++){for(var r=e[t],o=r,i=0;o;)i++,o=n.getParentByTagName(o,["ul","ol"],!1);n.removeClass(r,d.CLASS.ORDER_LIST_LEVEL),n.addClass(r,d.CLASS.ORDER_LIST_LEVEL[i%3])}var a=function(t){for(var r=(e=n.env.body.querySelectorAll(t)).length-1;r>=0;r--){var o=e[r],i=n.env.doc.createElement("li");n.before(i,o),i.appendChild(o)}};a("ol > div"),a("ol > p"),a("ul > div"),a("ul > p");for(var l=(e=n.env.body.querySelectorAll("li")).length-1;l>=0;l--){var s=e[l];if(!n.isInWizTmp(s)){var c=s.firstChild;n.isTag(c,["div","p"])&&!n.hasClass(c,d.CLASS.CODE_CONTAINER)&&(n.replaceTagName(c,"span"),s.firstChild.nextSibling&&n.after(n.env.doc.createElement("br"),s.firstChild))}}},n.focus=function(){n.env.isWizTemplate&&n.env.win.WizTemplate&&n.env.win.WizTemplate.getTemplate()?n.env.win.WizTemplate.focus():n.env.body.focus()},n.fragmentFilterForCopy=function(e){var t=function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];n.remove(r)}};t(e.querySelectorAll("."+d.CLASS.CODE_CONTAINER+" textarea")),t(e.querySelectorAll("."+d.CLASS.CODE_MIRROR_MEASURE)),t(e.querySelectorAll("."+d.CLASS.CODE_MIRROR_GUTTER)),t(e.querySelectorAll("."+d.CLASS.CODE_TOOLS))},n.getBlockParent=function(e,t){return e?n.getParentByFilter(e,(function(e){return n.isBlock(e)}),t):null},n.getCmById=function(e,t){var n=null,r=e.querySelector("#"+t);return r&&r.codeMirror&&(n=r.codeMirror),n},n.getCmContainerList=function(e){return e.querySelectorAll("."+d.CLASS.CODE_CONTAINER)},n.getComputedStyle=function(e,t,r){if(!e||3===e.nodeType||!t)return"";for(var o;!o;){if(!e)return"";if(1===e.nodeType){var i=n.env.win.getComputedStyle(e,null);if(o=u.rgb2Hex(i[t]||""),e===n.env.body||!r||o)break;e=e.parentNode}else e=e.parentNode}return o},n.getWordCount=function(){for(var e=(n.env.body.innerText?n.env.body.innerText:"").split(/\r|\n/),t=u.getWordCount(e[0]),r=1;r<e.length;r++){var o=u.getWordCount(e[r]);for(var i in o)o.hasOwnProperty(i)&&(t[i]+=o[i])}return t},n.getRenderDocument=function(){n.env.event.call(d.EVENT.BEFORE_GET_DOCHTML,null);var e,t="";return n.env.options.container&&!n.env.options.useFrame?e=n.env.body.innerHTML:(t=n.getDocType(n.env.doc),e=n.env.doc.documentElement.outerHTML),e=n.removeByTagFromHtml(e,d.TAG.TMP_TAG),e=(e=(e=(e=n.peelTagFromHtml(e,d.TAG.TMP_PLUGIN_TAG)).replace(/<!--(.|\n)*?(-->)/g,"")).replace(/<script[^<>]*\/>/gi,"").replace(/<script[^<>]*>(((?!<\/script>).)|(\r?\n))*<\/script>/gi,"")).replace(/(<div class="CodeMirror-measure">)<pre><span>xxxxxxxxxx<\/span><\/pre>/gi,"$1"),e=n.hideTableFromHtml(e),e=n.hideCodeFromHtml(e),n.env.isWizTemplate&&n.env.win.WizTemplate&&(e=n.env.win.WizTemplate.hideTemplateFormHtml(e)),t+(e=n.restoreImgPath(e))},n.getDocType=function(e){var t=e.doctype,n="";return(!t||t.systemId||t.publicId)&&t?(n="<!",n+='DOCTYPE HTML PUBLIC "'+t.publicId+'" "'+t.systemId+'" >'):n="<!DOCTYPE HTML>",n},n.getEndOffset=function(e){return e?3===e.nodeType?e.nodeValue.length:e.childNodes.length:0},n.getFirst=function(e){e||(e=n.env.body);for(var t=n.getFirstDeepChild(e),r=n.canEdit(t);t&&!r;)t=n.getNextNodeCanEdit(t,!1),r=n.canEdit(t);return t},n.getFirstDeepChild=function(e){if(!e)return null;for(var t=e;t&&t.childNodes&&t.childNodes.length>0;){for(t=t.childNodes[0];t&&1===t.nodeType&&/^wiz_/gi.test(t.tagName);)t=t.nextSibling;t&&(e=t)}return e},n.getFontSizeRem=function(e,t){e=e.trim();var r=parseFloat(e);if(e.indexOf("%")>-1)return Math.round(r/100*1e3)/1e3+"rem";if(/^smaller$/i.test(e))return"0.83rem";if(/^small$/i.test(e))return"0.8125rem";if(/^x-small$/i.test(e))return"0.75rem";if(/^xx-small$/i.test(e))return"0.75rem";if(/^larger$/i.test(e))return"1.2rem";if(/^large$/i.test(e))return"1.125rem";if(/^x-large$/i.test(e))return"1.5rem";if(/^xx-large$/i.test(e))return"2rem";if(/^medium$/i.test(e))return"1rem";if(!/pt|px/i.test(e))return isNaN(r)?null:r+"rem";var o=!(!t||!t.useRootSize),i=n.env.win.getComputedStyle(n.env.doc.body.parentNode),a=parseFloat(i.fontSize),l=o?12*n.getRootSizeRate():12;return isNaN(a)||isNaN(r)||0===a?null:(/pt/i.test(e)?r/=l:r/=a,Math.round(1e3*r)/1e3+"rem")},n.getFromIndexList=function(e){if(!e||0===e.length)return null;var t=n.env.body;try{var r,o;for(r=0,o=e.length-1;r<o;r++)t=t.childNodes[e[r]];return{dom:t,offset:e[r]}}catch(e){return null}},n.getImageData=function(e){var t=n.getImageSize(e.src),r=n.env.doc.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,0,0),r.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"")},n.getImageSize=function(e){var t=new Image;return t.src=e,{width:t.width,height:t.height}},n.getIndex=function(e){if(!e||!e.parentNode)return-1;for(var t=0,n=e;n=n.previousSibling;)++t;return t},n.getIndexList=function(e){for(var t=e,r=[];t&&!n.isBody(t);)r.splice(0,0,n.getIndex(t)),t=t.parentNode;return r},n.getInnerText=function(e){var t="",r=function(e,t){if(e.style[t])return e.style[t];var r=e.currentStyle||e.ownerDocument.defaultView.getComputedStyle(e,null);return n.isTag(e,"script")?"none":r[t]?"block"===r[t]&&n.isTag(e,"td")?"feaux-inline":r[t]:n.isTag(e,["li","p","tr"])?"block":e.style[t]},o=e.cloneNode(!0);o.innerHTML=o.innerHTML.replace(/<br[\/]?>/gi,"{{WIZ_NEW_LINE_STR}}");var i=n.env.doc.createElement(d.TAG.TMP_TAG);n.css(i,{opacity:0,width:"1px",height:"1px",position:"absolute",top:"-10px",left:"-10px",overflow:"hidden"}),i.appendChild(o),n.env.body.appendChild(i),function(e){var t=[];n.eachChild(e,(function(e){return!n.getParentByTagName(e,"pre")&&3===e.nodeType&&function(e){return!/[^\t\n\r ]/.test(e.nodeValue)}(e)&&t.push(e),e.hasChildNodes()}),(function(){}));for(var r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r])}(o);var a,l=(a=function e(o){if(/pre/.test(r(o,"whiteSpace"))){var i=o.innerText||o.textContent;return t+=i.replace(/\t/g," ")+"\n",""}if("none"===r(o,"display"))return"";for(var a=function(e){var t=r(e,"display")||"feaux-inline";return"table-row,block,list-item".indexOf(t)>-1}(o),l=a?"\n":"",s=0;s<o.childNodes.length;s++){var c=o.childNodes[s];3===c.nodeType&&(t+=c.nodeValue),!n.isTag(c,"br")||a&&!c.nextSibling||(t+="\n"),c.childNodes.length&&e(c)}return t+=l}(o))?a.replace(/[\t]+/gm,"    ").replace(h,"\n").replace(p,"\n"):"";return n.remove(i),l},n.getLast=function(e){e||(e=n.env.body);for(var t=n.getLastDeepChild(e),r=n.canEdit(t);t&&!r;)t=n.getPreviousNodeCanEdit(t,!1),r=n.canEdit(t);return t},n.getLastDeepChild=function(e){if(!e)return null;for(var t=e;t&&t.childNodes&&t.childNodes.length>0;){for(t=t.childNodes[t.childNodes.length-1];t&&1===t.nodeType&&/^wiz_/gi.test(t.tagName);)t=t.previousSibling;t&&(e=t)}return e},n.getListA2B=function(e){var t=e.startDom,r=e.startOffset,o=e.endDom,i=e.endOffset,a=!!e.noSplit,l=!1,s=!1;1===t.nodeType&&r>0&&r<t.childNodes.length?(t=t.childNodes[r],r=0):!a&&r>=n.getEndOffset(t)&&(t=n.getNextNodeCanEdit(t),r=0),1===o.nodeType&&i>0&&i<o.childNodes.length&&(o=o.childNodes[i],i=0),t!==o&&0===i&&((o=n.getPreviousNode(o,!1,t))||(o=t),i=n.isSelfClosingTag(o)?1:n.getEndOffset(o)),t===o&&r!==i?!(3===t.nodeType)||t.parentNode.getAttribute(d.ATTR.SPAN_DELETE)||a?1===t.nodeType&&t.childNodes.length>0&&!n.isSelfClosingTag(t)&&(t=t.childNodes[r],o=o.childNodes[i-1],l=!0,s=!0):(o=t=n.splitRangeText(t,r,i,!1),l=!0,s=!0):t!==o&&(3!==t.nodeType||t.parentNode.getAttribute(d.ATTR.SPAN_DELETE)||a?1===t.nodeType&&t.childNodes.length>0&&r<t.childNodes.length&&(t=t.childNodes[r],l=!0):(t=n.splitRangeText(t,r,null,!1),l=!0),3===o.nodeType&&i>0&&!o.parentNode.getAttribute(d.ATTR.SPAN_DELETE)&&!a?(o=n.splitRangeText(o,0,i,!0),s=!0):!n.isSelfClosingTag(o)&&1===o.nodeType&&i>0&&(o=n.getLastDeepChild(o.childNodes[i-1]),s=!0)),l&&(r=0),s&&(i=n.getEndOffset(o));var c=t,u=[];for(r===t.length&&(c=n.getNextNode(c,!1,o));c&&(t!==o||r!==i);){if(c===o||c===o.parentNode){p(u,o);break}if(n.isBody(c)){p(u,c);break}p(u,c),c=n.getNextNode(c,!1,o)}var f=n.getPreviousNode(u[0],!1,null),h=n.getNextNode(u[u.length-1],!1,null);f&&1===f.nodeType&&f.firstChild&&(f=f.firstChild),h&&1===h.nodeType&&h.lastChild&&(h=h.lastChild);return{list:u,startDom:t,startOffset:r,endDom:o,endOffset:i,startDomBak:f,startOffsetBak:n.getEndOffset(f),endDomBak:h,endOffsetBak:0};function p(e,t){e.push(t)}},n.getNextBlock=function(e){var t,r=!1;if(n.isBlock(e,{includeBr:!0}))return e;for(;e&&(r&&e.childNodes&&e.childNodes.length>0?(e=e.childNodes[0],r=!1):(t=e.nextSibling)?(e=t,r=!0):(e=e.parentNode,r=!1),!n.isBlock(e,{includeBr:!0})););return e},n.getNextNode=function(e,t,r){var o=e;if(!e||e===r)return null;function i(e){return e?t?e.nextElementSibling:e.nextSibling:null}function a(e){return e?t?e.firstElementChild:e.firstChild:null}if(t=!!t,!i(e)&&!e.parentNode)return null;if(i(e))e=i(e);else for(;e.parentNode;){if(e=e.parentNode,n.isBody(e)){e=null;break}if(e===r)break;if(i(e)){e=i(e);break}}if(e===r)return e;var l=a(e);if(e&&l)for(;l&&(e=l)!==r;)l=a(l);return e===o?null:e},n.getNextNodeCanEdit=function(e,t,r){for(e=n.getNextNode(e,t,r);e&&!n.canEdit(e);)e=n.getNextNode(e,t,r);return e},n.getOffset=function(e){var t={top:0,left:0};if(e.offsetParent)for(;e.offsetParent;)t.top+=e.offsetTop,t.left+=e.offsetLeft,e=e.offsetParent;else t.left+=e.offsetLeft,t.top+=e.offsetTop;return t},n.getPageScroll=function(){var e,t,r={left:0,top:0},o=n.env.scrollContainer;if(o===n.env.doc.body?(e=n.env.win,t=n.env.doc):o===window.document.body&&(e=window,t=window.document),e&&void 0!==e.pageYOffset?(r.left=e.pageXOffset,r.top=e.pageYOffset):t&&void 0!==t.compatMode&&"BackCompat"!==t.compatMode?(r.left=t.documentElement.scrollLeft||t.body.scrollLeft,r.top=t.documentElement.scrollTop||t.body.scrollTop):o&&(r.left=o.scrollLeft,r.top=o.scrollTop),n.env.client.type.isIOS){var i=n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.IosPrompt,{type:"scroll"});r.topOriginal=r.top,r.top=i.scrollTop,r.toolbarHeight=i.toolbarHeight,r.toolbarVisibleHeight=i.toolbarVisibleHeight}return r},n.getParentByClass=function(e,t,r){return n.getParentByFilter(e,(function(e){return n.hasClass(e,t)}),r)},n.getParentByFilter=function(e,t,r){if(e&&!n.isBody(e))for(e=r?e:e.parentNode;e;){if(!t||t(e))return e;if(n.isBody(e))return null;e=e.parentNode}return null},n.getParentByTagName=function(e,t,r,o){return e?(t=u.listToMap(u.isArray(t)?t:[t]),n.getParentByFilter(e,(function(e){return t[e.tagName]&&!(o&&o(e))}),r)):null},n.getParentList=function(e){for(var t=[],r=e.parentNode;r&&r!==n.env.body&&!n.hasClass(r,d.CLASS.WIZ_BODY);)t.splice(0,0,r),r=r.parentNode;return t},n.getParentRoot=function(e){if(!e||0===e.length)return null;var t,r,o=[];for(r=1===e[0].nodeType?e[0]:e[0].parentNode;r&&!n.isBody(r);)o.push(r),r=r.parentNode;for(var i=1,a=e.length;i<a;i++)for(r=e[i];r;){if(n.isBody(r))return n.env.body;if((t=o.indexOf(r))>-1){o.splice(0,t);break}r=r.parentNode}return 0===o.length?n.env.body:o[0]},n.getPosition=function(e){if(!e)return null;if(n.getParentByTagName(e,"svg")){var t=e.getBoundingClientRect();return{top:t.y,left:t.x,height:t.height,width:t.width}}var r=n.getOffset(e);return{top:r.top,left:r.left,height:e.offsetHeight,width:e.offsetWidth}},n.getPrevBlock=function(e){var t,r=!1;if(n.isBlock(e,{includeBr:!0}))return e;for(;e&&(r&&e.childNodes&&e.childNodes.length>0?(e=e.childNodes[e.childNodes.length-1],r=!1):(t=e.previousSibling)?(e=t,r=!0):(e=e.parentNode,r=!1),!n.isBlock(e,{includeBr:!0})););return e},n.getPreviousNode=function(e,t,r){var o,i=e;if(!e||e===r)return null;function a(e){if(t)return e.previousElementSibling;for(var n=e.previousSibling;n&&3===n.nodeType&&u.isEmpty(n.nodeValue);)n=n.previousSibling;return n}function l(e){return t?e.lastElementChild:e.lastChild}if(t=!!t,a(e))e=a(e);else for(;e.parentNode;){if(e=e.parentNode,n.isBody(e)){e=null;break}if(e===r)break;if(a(e)){e=a(e);break}}if(!e)return null;if(e===r&&n.isParent(i,e))return e;if(o=l(e),e&&o)for(;o&&((e=o)!==r||3!==e.nodeType&&(1!==e.nodeType||0!==e.childNodes.length));)o=l(o);return e===i?null:e},n.getPreviousNodeCanEdit=function(e,t,r){for(e=n.getPreviousNode(e,t,r);e&&!n.canEdit(e);)e=n.getPreviousNode(e,t,r);return e},n.getRootSize=function(){var e=n.env.win.getComputedStyle(n.env.body.parentNode);return parseFloat(e.fontSize)},n.getRootSizeRate=function(){return n.env.doc.getElementById(d.ID.WIZ_DEFAULT_STYLE)?n.getRootSize()/n.pt2px()/12:1},n.getScrollContainer=function(){var e=n.env.options.container||n.env.body;if(e===n.env.doc.body)return e;for(var t=e,r=n.env.body;t&&1===t.nodeType;){var o=n.env.win.getComputedStyle(t);if(/auto|scroll/i.test(o.overflowY))return t;n.isTag(t,["body"])&&(r=t),t=t.parentNode}return r},n.getSpanTop=function(e){if(!e)return e;for(var t=e;n.isTag(e,"span");)t=e,e=e.parentNode;return t},n.getTab=function(){var e=n.env.doc.createElement("span");return e.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;",e.childNodes[0]},n.getWindowSize=function(){if(n.env.options.useFrame)return{width:n.env.scrollContainer.clientWidth,height:n.env.scrollContainer.clientHeight};if(n.env.client.type.isIOS){return n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.IosPrompt,{type:"getWindowSize"})}return{width:n.env.doc.documentElement.clientWidth,height:n.env.doc.documentElement.clientHeight}},n.getWizAmendParent=function(e){return n.getParentByFilter(e,(function(e){return e&&1===e.nodeType&&(e.getAttribute(d.ATTR.SPAN_INSERT)||e.getAttribute(d.ATTR.SPAN_DELETE))}),!0)},n.hasClass=function(e,t){return!(!e||1!==e.nodeType)&&(" "+e.className+" ").indexOf(" "+t+" ")>-1},n.hideCodeFromHtml=function(e){return e=(e=e.replace(/(<div [^<>]*)(CodeMirror-activeline-background|CodeMirror-cursors|CodeMirror-selected|CodeMirror-hscrollbar|CodeMirror-vscrollbar)([^<>]*>)/gi,"$1 wiz-hide wiz_$2$3")).replace(/(<span [^<>]*)(CodeMirror-matchingbracket)([^<>]*>)/gi,"$1$3")},n.hideTableFromHtml=function(e){var t=new RegExp(" ("+d.CLASS.SELECTED_CELL+"|"+d.CLASS.SELECTED_CELL_MULTI+")(?= )","ig");return e.replace(/(<[^<> ]*[^<>]* class[ ]*=[ ]*['"])([^'"]*)(['"])/gi,(function(e,n,r,o){var i=r;return n+(i=(" "+i+" ").replace(t,"").trim())+o}))},n.html2Markdown=function(e,t){var r,o,i;if(t=t||{},3===e.nodeType)return i=e.nodeValue,t.isInA&&(i=i.replace(/([\[\]])/g,"\\$1")),void(e.nodeValue=i);if(1===e.nodeType){t.isInA||(t.isInA=n.isTag(e,"a"));for(var a=(o=e.childNodes).length-1;a>=0;a--)n.html2Markdown(o[a],{isInA:t.isInA});if(!n.getParentByTagName(e,"table"))if(n.isTag(e,"a"))i=e.innerText,(r=n.env.doc.createElement("span")).innerText="["+i+"]("+e.href+")",n.before(r,e),n.remove(e);else if(n.isTag(e,"img")&&!n.hasClass(e,d.CLASS.TODO_CHECKBOX))i=e.alt||u.getFileNameByUrl(e.src),(r=n.env.doc.createElement("span")).innerText="!["+i+"]("+e.src+")",n.before(r,e),n.remove(e);else if(n.isTag(e,["h1","h2","h3","h4","h5","h6","li"]))i=e.innerText,(r=n.env.doc.createElement("div")).innerText=i,n.before(r,e),n.remove(e);else if(n.isTag(e,["ol","ul"])){for(;e.lastChild;)n.after(e.lastChild,e);n.remove(e)}}},n.initDocHtml=function(e){var t=/<html[^<>]*>([\s\S]*)<\/html>/im,r=(e.match(t),e.replace(/(<\!DOCTYPE( [^<>]*)?>)/i,"").replace(t,"").replace(/<[^<>]*>/i,"").replace(/\r|\n/g,"").trim());if(r.length>0){var o=e.match(/<head[^<>]*>([\s\S]*)<\/head>/im),i="";o&&(i=o[0]),r=e.replace(/(<html( [^<>]*)?>)/i,"").replace(/(<\/html>)/i,"").replace(/(<body( [^<>]*)?>)/i,"").replace(/(<\/body>)/i,""),e="<!DOCTYPE html><html>"+i+"<body>"+r+"</body></html>"}return n.insertBaseToHtml(e)},n.insertBaseToHtml=function(e){var t=/(<head( [^<>]*)?>)/i,r="";return n.env.client.type.isWeb&&n.env.options.htmlBaseUrl?(r='<base href="'+n.env.options.htmlBaseUrl+'" />',e&&t.test(e)?e.replace(t,"$1"+r.escapeReplace()):e.replace(/(<html( [^<>]*)?>)/i,"$1<head>"+r.escapeReplace()+"</head>")):e},n.isBlock=function(e,t){if(!e)return!1;if(t&&t.includeBr&&n.isTag(e,"br"))return!0;if(n.isWizDom(e))return!0;var r=n.getComputedStyle(e,"display",!1);return!!r&&!/^(inline|inline-block|inline-table|none)$/i.test(r)},n.isBody=function(e){return e&&e===n.env.body},n.isEmptyDom=function(e){if(!e)return!1;if(3===e.nodeType){var t=e.nodeValue;return u.isEmpty(t)}if(1!==e.nodeType)return!0;if(0===e.childNodes.length)return n.isTag(e,"br")||!n.isSelfClosingTag(e);for(var r=0,o=e.childNodes.length;r<o;r++)if(!n.isEmptyDom(e.childNodes[r]))return!1;return!0},n.isFillChar=function(e,t){return 3===e.nodeType&&!e.nodeValue.replace(new RegExp((t?"^":"")+d.FILL_CHAR),"").length},n.isIncludeBr=function(e){return!(!e||1!==e.nodeType)&&(!!e.querySelector("br")||!!(n.env.browser.isIe&&e.innerHTML.indexOf("<br>")>-1))},n.isInWizBody=function(e){return e===n.env.body||!!n.getParentByFilter(e,(function(e){return e===n.env.body}),!0)},n.isInWizTmp=function(e){return!!n.getParentByTagName(e,d.TAG.TMP_TAG,!0)},n.isParent=function(e,t){if(!e||!t||e===t)return!1;for(;e;)if((e=e.parentNode)===t)return!0;return!1},n.isSameAttr=function(e,t){var n=e.attributes,r=t.attributes;if(n.length!==r.length)return!1;for(var o=0,i=n.length;o<i;o++){var a=n[o];if("style"!==a.name)if(a.name===d.ATTR.SPAN_TIMESTAMP){if(!u.isSameAmendTime(a.value,r[a.name].value))return!1}else if(!r[a.name]||r[a.name].value!==a.value)return!1}return!0},n.isSameSpan=function(e,t){return!!e&&!!t&&1===e.nodeType&&1===t.nodeType&&n.isTag(e,"span")&&e.tagName===t.tagName&&e.getAttribute(d.ATTR.SPAN)===d.ATTR.SPAN&&n.isSameStyle(e,t)&&n.isSameAttr(e,t)},n.isSameStyle=function(e,t){var r={},o={};for(var i in n.appendStyle(e.getAttribute("style"),r),n.appendStyle(t.getAttribute("style"),o),r)if(r.hasOwnProperty(i)){if(o[i]!==r[i])return!1;delete r[i],delete o[i]}for(var a in o)if(o.hasOwnProperty(a))return!1;return!0},n.isSelfClosingTag=function(e){return e&&1===e.nodeType&&/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i.test(e.tagName)},n.isTag=function(e,t){if(u.isArray(t)||(t=[t]),!e||1!==e.nodeType)return!1;for(var n=e.tagName.toLowerCase(),r=0,o=t.length;r<o;r++)if(n===t[r].toLowerCase())return!0;return!1},n.isUsableTextNode=function(e){return 3===e.nodeType&&!u.isEmpty(e.nodeValue)},n.isVisible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},n.isWizDom=function(e){return 1===e.nodeType&&/^wiz_/i.test(e.tagName)},n.isWizSpan=function(e){return!!e&&!!e.getAttribute(d.ATTR.SPAN)},n.mergeAtoB=function(e,t,r){n.mergeStyleAToB(e,t,r),n.mergeAttrAtoB(e,t,r)},n.mergeAttrAtoB=function(e,t,r){if(1===e.nodeType&&1===t.nodeType){var o,i,a,l=e.attributes,s=t.attributes;for(o=0,i=l.length;o<i;o++)if("style"!==(a=l[o]).name&&(!s[a.name]||r)){var c={};c[a.name]=a.value,n.attr(t,c)}}},n.mergeChildSpan=function(e,t){if(e&&1===e.nodeType){for(var r=0,o=e.children.length;r<o;r++)n.mergeChildSpan(e.children[r],t);n.mergeSiblingSpan(e,t);var i,a=e.children[0];if(!(a&&t.indexOf(a)<0&&1===e.childNodes.length&&n.isTag(e,"span")&&n.isTag(a,"span"))||e.id||a.id||e.className||a.className)for(;a;)t.indexOf(a)<0&&t.indexOf(e)<0&&n.isSameSpan(e,a)?(i=a.previousElementSibling,n.mergeChildToParent(e,a),a=i?i.nextElementSibling:e.children[0]):a=a.nextElementSibling;else n.mergeChildToParent(e,a)}},n.mergeChildToParent=function(e,t){if(e&&t&&t.parentNode===e){for(;t.childNodes.length>0;)n.before(t.childNodes[0],t);n.mergeAtoB(e,t,!1),n.mergeAtoB(t,e,!0),e.removeChild(t)}},n.mergeDomParent=function(e,t){var r=function(e,t,n){e=e.trim(),(t=t?t.trim():"")&&!n[e]&&(n[e]=t)},o=function(e,t){for(var o=(e.getAttribute("style")||"").split(";"),i=0,a=o.length;i<a;i++)if(o[i].indexOf(":")>0){var l=o[i].split(":");r(l[0],l[1],t)}n.isTag(e,["strong","b"])?r("font-weight","bold",t):n.isTag(e,["i","em"])?r("font-style","italic",t):n.isTag(e,["u","ins"])&&r("text-decoration","underline",t)},i={},a=e;for(o(a,i);a&&(a=a.parentNode)&&a!==t&&a!==n.env.body;)o(a,i);var l=[];for(var s in i)l.push(s+":"+i[s]);t.removeChild(t.firstChild),n.attr(e,{style:l.join(";")}),t.appendChild(e)},n.mergeSiblingSpan=function(e,t){var r,o,i=e.childNodes[0];if(i)for(;i;)if((r=i.nextSibling)&&t.indexOf(r)<0&&t.indexOf(i)<0&&n.isSameSpan(i,r)){for(;r.childNodes.length;)(o=r.childNodes[0])&&(o.innerHTML||n.isTag(o,"br")||o.nodeValue&&o.nodeValue!==d.FILL_CHAR)?i.appendChild(o):r.removeChild(o);n.remove(r)}else i=r},n.mergeStyleAToB=function(e,t,r){if(1===e.nodeType&&1===t.nodeType){var o=e.getAttribute("style"),i=t.getAttribute("style")||"";if(o){var a={};r?(n.appendStyle(i,a),n.appendStyle(o,a)):(n.appendStyle(o,a),n.appendStyle(i,a));var l=[];for(var s in a)a.hasOwnProperty(s)&&"display"!==s&&l.push(s+":"+a[s]);n.attr(t,{style:l.join(";")})}}},n.modifyBlockStyle=function(e,t){if(e&&!n.getParentByClass(e,d.CLASS.CODE_CONTAINER,!0)){var r={};if(t)for(var o=0,i=Object.keys(t);o<i.length;o++){r[i[o]]=null}for(var a=e.querySelectorAll("[style]"),l=a.length-1;l>=0;l--){var s=a[l];n.getParentByTagName(s,d.TAG.TMP_TAG,!0)||n.css(s,r)}n.css(e,t)}},n.modifyBlocksStyle=function(e,t){if(e)for(var r=0;r<e.length;r++){var o=e[r];n.modifyBlockStyle(o,t)}},n.modifyChildNodesStyle=function(e,t,r){if(e)for(var o=e.childNodes,i=!1,a=0;a<o.length;a++){var l=o[a];i||3!==l.nodeType?1===l.nodeType&&n.modifyChildNodesStyle(l,t,r):(i=!0,n.modifyStyle(e,t,r))}},n.modifyNodeStyle=function(e,t,r,o){if(1===e.nodeType)if(n.isTag(e,"br")){var i=n.createSpan();n.before(i,e),i.appendChild(e),n.modifyStyle(i,t,r)}else n.isSelfClosingTag(e)||n.isEmptyDom(e)?n.modifyStyle(e,t,r):n.modifyChildNodesStyle(e,t,r);else 3===e.nodeType&&(e=n.splitRangeText(e,null,null,o),n.modifyStyle(e,t,r));return e},n.modifyNodesStyle=function(e,t,r){if(0!==e.length)for(var o=0,i=e.length;o<i;o++){var a=e[o];e[o]=n.modifyNodeStyle(a,t,r,o===i-1)}},n.modifyNodesStyleAndClear=function(e,t,r,o){n.modifyNodesStyle(e,t,r);for(var i,a,l=[],s=0,c=e.length;s<c;s++)(i=e[s].parentNode)&&l.indexOf(i)<0&&l.push(i);i=n.getParentRoot(l),i=(a=n.getWizAmendParent(i))?a.parentNode:i,n.clearChildSpan(i,o,!0)},n.modifyStyle=function(e,t,r){var o=n.isSelfClosingTag(e);if(!(n.hasClass(e,d.CLASS.TODO_CHECKBOX)||r&&r[d.ATTR.SPAN_INSERT]&&o)){var i=e,a=function(e){if(e){var t=n.createSpan();for(n.attr(t,{style:e.getAttribute("style")||""}),n.attr(e,{style:null});e.firstChild;)t.insertBefore(e.firstChild,null);e.insertBefore(t,null)}};if(r&&(r[d.ATTR.SPAN_INSERT]||r[d.ATTR.SPAN_DELETE])&&((i=n.getWizAmendParent(e))?e=null:i=e),e&&!o&&(!n.isTag(e,"span")||e.getAttribute(d.ATTR.SPAN)!==d.ATTR.SPAN))for(i=n.createSpan(),e.insertBefore(i,null);e.childNodes.length>1;)i.insertBefore(e.childNodes[0],null);var l,s=[];for(l in t)t.hasOwnProperty(l)&&(t[l]||s.push(l));var c,u=i,f=i;if(s.length>0){for(;u&&!n.isBlock(u)&&!n.hasClass(u,d.CLASS.TODO_MAIN);)n.isTag(u,"a")&&(c=u),u=(f=u).parentNode;c?c===f?(a(c),n.splitDomSingle(c.firstChild,i)):(n.splitDomSingle(f,c),a(c),n.splitDomSingle(c.firstChild,i)):n.splitDomSingle(f,i)}n.css(i,t),n.attr(i,r)}},n.packageChildNodesByDiv=function(e){if(1===e.childNodes.length&&n.isBlock(e.firstChild))return e.firstChild;for(var t=n.env.doc.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return e.appendChild(t),t},n.peelDom=function(e,t){if(e&&3!==e.nodeType){var r,o,i,a={start:null,end:null};for(i=(r=e.childNodes).length-1;i>=0;i--)o=r[i],t&&!t(o)||(n.after(o,e),a.start?a.end=o:(a.start=o,a.end=o));return n.remove(e),a}},n.peelTag=function(e){var t,r,o=n.env.body.querySelectorAll(e);for(t=o.length-1;t>=0;t--){for(r=o[t];r.firstChild;)n.before(r.firstChild,r);n.remove(r)}},n.peelTagFromHtml=function(e,t){var n=new RegExp("<"+t+"( [^>]*)?>|</"+t+">","ig");return e.replace(n,"")},n.pt2px=function(){var e,t=document.createElement("span");return t.style.visibility="hidden",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.fontSize="12pt",n.env.body.appendChild(t),e=n.env.win.getComputedStyle(t).fontSize,e=parseInt(e,10)/12,n.env.body.removeChild(t),n.pt2px=function(){return e},e},n.remove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},n.removeClass=function(e,t){if(e){e.nodeType&&(e=[e]),u.isArray(t)||(t=[t]);for(var n=e.length-1;n>=0;n--){var r=e[n];if(1===r.nodeType){r.className=" "+r.className+" ";for(var o=t.length;o>=0;o--){var i=t[o];r.className=r.className.replace(" "+i+" "," ")}var a=r.className.trim();a?r.className=a:r.removeAttribute("class")}}}},n.removeByName=function(e){for(var t=n.env.doc.getElementsByName(e),r=t.length-1;r>=0;r--){var o=t[r];n.remove(o)}},n.removeByTag=function(e){for(var t=n.env.doc.getElementsByTagName(e),r=t.length-1;r>=0;r--){var o=t[r];n.remove(o)}},n.removeClassNameFromHtml=function(e,t){var n=new RegExp("(<\\w+ [^<>]*class=(['\"]))([^'\"]*".concat(t,"[^'\"]*?)(\\2)"),"ig");return e=e.replace(n,(function(e,n,r,o,i){var a=o.split(" ");return n+(a=a.filter((function(e){return!!e&&e!==t}))).join(" ")+i}))},n.removeEmptyParent=function(e){var t;e&&(n.isEmptyDom(e)&&(e===n.env.body?e.innerHTML="<div><br/></div>":n.isTag(e,["td","th"])?e.innerHTML="<br/>":(t=e.parentNode)&&(t.removeChild(e),n.removeEmptyParent(t))))},n.removeLazyLoadFromHtml=function(e){var t=/(('|")[^'"]*[^\s])(\s*wiz-lazyload\s*)([^'"]*\2)/gi,n=/\s*class\s*=\s*('|")\s*\1/gi,r=/\s*data-src\s*=/gi,o=/\s+src\s*=/i;return e.replace(/<img [^>]*data-src\s*=\s*('|")[^>]*>/gi,(function(e){var i=e;return i.indexOf("wiz-lazyload")<0&&o.test(i)?i:i=i.replace(t,"$1$4").replace(n,"").replace(r," src=")}))},n.removeListFilter=function(e,t){var n=[];if(!e||!t)return n;for(var r=e.length-1;r>=0;r--)t(e[r])&&n.unshift(e.splice(r,1)[0]);return n},n.removeStyleByNameFromHtml=function(e,t){var n="("+t.join("|")+")",r=new RegExp("<style( ([^<>])+[ ]+|[ ]+)name *= *(['\"])"+n+"\\3[^<>]*>[^<]*</style>","ig"),o=new RegExp("<link( ([^<>])+[ ]+|[ ]+)name *= *(['\"])"+n+"\\3[^<>]*>","ig");return e.replace(r,"").replace(o,"")},n.removeByTagFromHtml=function(e,t){var n=new RegExp("<"+t+"( [^>]*)?>((?!</"+t+">).|\r|\n)*?</"+t+">","ig");return e.replace(n,"")},n.replaceTagName=function(e,t){if(n.isTag(e,t))return e;var r=n.env.doc.createElement(t);for(n.after(r,e);e.firstChild;)r.appendChild(e.firstChild);e.className&&(r.className=e.className),e.id&&(r.id=e.id);var o=e.getAttribute("style");return o&&r.setAttribute("style",o),n.remove(e),r},n.restoreImgPath=function(e){e=r(e,n.env.indexFilesFullPath,n.env.indexFilesPath);var t=n.env.doc.querySelector("head base");return t&&(e=r(e,t.href+"index_files/","index_files")),e;function r(e,t,n){var r=new RegExp("(<[^<>]*src[ ]*=[ ]*(\"|'))"+t.escapeRegex(),"ig"),o=new RegExp("(!\\[[^[\\]]*\\]\\()"+t.escapeRegex(),"ig");return e.replace(r,"$1"+n+"/").replace(o,"$1"+n+"/")}},n.scrollIntoView=function(e){e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView&&!n.env.browser.isIe&&e.scrollIntoView(!0))},n.search=function(e,t,n){var r,o,i,a=e.querySelectorAll(t);for(n=n||[],r=0,o=a.length;r<o;r++)i=a[r],n.push(i)},n.setContenteditable=function(e,t){if(!e&&n.env.isWizTemplate&&n.env.win.WizTemplate?n.env.win.WizTemplate.setContenteditable(t):(e||(e=n.env.body),n.attr(e,{contenteditable:t?"true":"false"})),e===n.env.body)for(var r=n.env.body.querySelectorAll("."+d.CLASS.TABLE_BODY),o=r.length-1;o>=0;o--){var i=r[o];n.isInWizTmp(i)||n.attr(i,{contenteditable:t?"true":"false"})}},n.setLayout=function(e){var t=e.layerObj,r=e.target,o=e.layout,i=void 0!==e.isFixed&&e.isFixed,a=!!e.isReverse,l=e.space||0,s=e.scrollDom;XisFixed=u.isBoolean(i)?i:i.x,YisFixed=u.isBoolean(i)?i:i.y;var c,f,h,p,m,g=n.getPosition(t),v=r.nodeType?n.getPosition(r):r,b=n.getPageScroll(),y=s?{left:XisFixed?s.scrollLeft:b.left,top:YisFixed?s.scrollTop:b.top}:b,_=n.env.doc.documentElement.clientWidth,S=n.env.doc.documentElement.clientHeight,E=n.env.win.getComputedStyle(n.env.doc.body,null)["margin-top"],C="50%",T="30%",A=0,O=-g.width/2;return E&&(m=parseInt(E),isNaN(m)&&(m=0)),XisFixed?(c=0,f=_-5):(c=0+y.left,f=_+y.left-5),YisFixed?(h=m,p=S):(h=m+(y.top<=m?0:Math.abs(y.top-m)),p=S+y.top),v&&o&&(A=0,O=0,o===d.TYPE.LAYOUT.TOP||o===d.TYPE.LAYOUT.TOP_START||o===d.TYPE.LAYOUT.TOP_END?T=v.top-g.height-l:o===d.TYPE.LAYOUT.BOTTOM||o===d.TYPE.LAYOUT.BOTTOM_START||o===d.TYPE.LAYOUT.BOTTOM_END?T=v.top+v.height+l+(YisFixed?y.top:0):o===d.TYPE.LAYOUT.LEFT_START||o===d.TYPE.LAYOUT.LEFT_END?C=v.left-g.width-l:o!==d.TYPE.LAYOUT.RIGHT_START&&o!==d.TYPE.LAYOUT.RIGHT_END||(C=v.left+v.width+l),o===d.TYPE.LAYOUT.TOP||o===d.TYPE.LAYOUT.BOTTOM?(C=v.left+v.width/2-g.width/2,XisFixed&&(C-=y.left)):o===d.TYPE.LAYOUT.TOP_START||o===d.TYPE.LAYOUT.BOTTOM_START?(C=v.left,XisFixed&&(C-=y.left)):o===d.TYPE.LAYOUT.TOP_END||o===d.TYPE.LAYOUT.BOTTOM_END?(C=v.left+v.width-g.width,XisFixed&&(C-=y.left)):o===d.TYPE.LAYOUT.LEFT_START||o===d.TYPE.LAYOUT.RIGHT_START?(T=v.top,YisFixed&&(T-=y.top)):o!==d.TYPE.LAYOUT.LEFT_END&&o!==d.TYPE.LAYOUT.RIGHT_END||(T=v.top+v.height-g.height,YisFixed&&(T-=y.top)),C+g.width>f&&(C=f-g.width),C<c&&(C=c),a&&T+g.height>p&&(T=v.top-g.height-l),T+g.height>p&&(T=p-g.height),a&&T<h&&(T=v.top+v.height+l),(T<h||T+g.height>p)&&(T=h)),n.css(t,{left:C+"px",top:T+"px",marginTop:A+"px",marginLeft:O+"px"}),{top:T,left:C,width:g.width,height:g.height,targetTop:v.top,targetLeft:v.left,targetWidth:v.width,targetHeight:v.height}},n.setPageScrollLeft=function(e){var t,r=n.env.scrollContainer;r===n.env.doc.body?t=n.env.doc:r===window.document.body&&(t=window.document),t&&void 0!==t.compatMode&&"BackCompat"!==t.compatMode?(t.body.scrollLeft=e,t.documentElement.scrollLeft=e):r&&(r.scrollLeft=e)},n.setPageScrollTop=function(e){var t,r=n.env.scrollContainer;r===n.env.doc.body?t=n.env.doc:r===window.document.body&&(t=window.document),setTimeout((function(){n.env.client.type.isIOS?n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizEditorSetScrollTop,e):t&&void 0!==t.compatMode&&"BackCompat"!==t.compatMode?(t.body.scrollTop=e,t.documentElement.scrollTop=e):r&&(r.scrollTop=e)}),0)},n.setPageScrollTopTimer=null,n.setPageScrollTopAni=function(e){n.setPageScrollTopTimer&&clearTimeout(n.setPageScrollTopTimer);var t=(new Date).valueOf(),r=n.getPageScroll(),o=e-r.top,i=r.top;if(o<10)n.setPageScrollTop(e);else{!function a(){var l=n.getPageScroll();if(!(Math.abs(l.top-i)>30)){var s=(new Date).valueOf()-t;s>250&&(s=250);var c,d,u=(c=s,d=r.top,-o*(c/=250)*(c-2)+d);n.setPageScrollTop(u),(o>0&&u<e||o<0&&u>e)&&(i=u,n.setPageScrollTopTimer=setTimeout(a,20))}}()}},n.setTextarea=function(e,t){var n=void 0===e.textContent?"innerText":"textContent";t?e[n]=u.replaceSpecialChar(t).replace(d.FILL_CHAR_REG,""):e.value!==e[n]&&(e[n]=e.value)},n.splitDomAfterSub=function(e,t){var r,o;if(t.nextSibling)o=t.nextSibling;else for(r=t.parentNode;r&&r!==e&&!(o=r.nextSibling);)r=r.parentNode;return o&&n.splitDomBeforeSub(e,o),e},n.splitDomBeforeSub=function(e,t){if(!e||!t)return e;for(var n=[t],r=t.parentNode,o=r.firstChild===t;r&&(n.push(r),o&&r.parentNode.firstChild!==r&&(o=!1),r!==e);)r=r.parentNode;if(o)return e;if(n[n.length-1]!==e)return e;for(;n.length>1;)n[1]=i(n[1],n[0]),n.splice(0,1);return n[0];function i(e,t){for(var n,r=e.parentNode,o=e.cloneNode(!1);t;)n=t.nextSibling,o.appendChild(t),t=n;return r.insertBefore(o,e.nextSibling),o}},n.splitDomSingle=function(e,t){if(e&&t&&1===e.nodeType&&t===e.firstChild&&1===e.childNodes.length)return e;var r=n.splitDomBeforeSub(e,t);return r=n.splitDomAfterSub(r,t)},n.splitRangeText=function(e,t,r,o){if(3!==e.nodeType)return e;var i,a,l,s=e.nodeValue;return i=e.parentNode,a=n.createSpan(),!t&&!r||0===t&&r===e.nodeValue.length?i.childNodes.length>1||n.isTag(i,["td","th"])?(o?i.insertBefore(a,e):i.insertBefore(a,e.nextSibling),a.appendChild(e)):a=i:0===t?(a.textContent=s.substring(t,r),i.insertBefore(a,e),e.nodeValue=s.substring(r)):r&&r!==e.nodeValue.length?(l=n.env.doc.createTextNode(s.substring(r)),a.textContent=s.substring(t,r),i.insertBefore(a,e.nextSibling),i.insertBefore(l,a.nextSibling),e.nodeValue=s.substring(0,t)):(a.textContent=s.substring(t),i.insertBefore(a,e.nextSibling),e.nodeValue=s.substring(0,t)),a},n.splitSpanFromParent=function(e){var t=function(e){return n.isTag(e,["i","b","strike","u"])},r=function(e){return n.isWizSpan(e)||t(e)};if(!e)return e;var o=e.parentNode;if(!o||!r(o)||!r(e))return e;for(var i=o;r(i);)o=i,i=i.parentNode;for(var a={},l=n.splitDomSingle(o,e);e;)if(i=e.parentNode,t(e)&&(a[e.tagName.toLowerCase()]=1),n.mergeChildToParent(i,e),e=i,i===l){e=null;break}for(var s in t(l)&&(l.removeAttribute(d.ATTR.SPAN),delete a[l.tagName.toLowerCase()]),a)if(a.hasOwnProperty(s)){var c=n.env.doc.createElement(s);n.before(c,l),c.appendChild(l);var u=l.getAttribute("style");u&&(c.setAttribute("style",u),l.removeAttribute("style")),l=c}return l},n}var n,f,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(f=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"getRelativePosition",value:function(e,t,n){if(!e||!t)return{x:0,y:0};if(n){var r=e.getBoundingClientRect(),o=t.getBoundingClientRect();return{x:r.left-o.left,y:r.top-o.top}}return{x:e.offsetLeft-t.offsetLeft,y:e.offsetTop-t.offsetTop}}}])&&i(n.prototype,f),m&&i(n,m),t}(f);e.exports=m},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._bridge=null,n.init=function(){return n._bridge=null,(n.env.body.getAttribute(d.ATTR.WIZ_DOCUMENT_TYPE)===d.DOCUMENT_TYPE.OUTLINE||n.req.outlineUtils.getContainer())&&(n.env.options.reader.type=d.NOTE_READER_TYPE.OUTLINE),n.isOutline&&(n._bridge={editor:n.req.editorOutline,editorEvent:n.req.editorOutlineEvent,editorUtils:n.req.outlineUtils,reader:n.req.readerOutline}),n._bridge||(n._bridge={editor:n.req.editorCommon,editorEvent:n.req.editorCommonEvent,editorUtils:n.req.commonUtils,reader:n.req.readerCommon}),n._bridge},n.checkDocumentEditable=function(){return!(n.documentMinVersion&&u.compareVersion(d.version,n.documentMinVersion)<0)},n.getContentHtml=function(e){return n._bridge.editor.getContentHtml(e)},n.getContentHtmlForInside=function(e){var t=n._bridge.editorUtils.getContentHtml(e),r=[d.NAME.TMP_STYLE,d.NAME.UNSAVE_STYLE];t=n.domUtils.removeStyleByNameFromHtml(t,r),t=n.domUtils.removeByTagFromHtml(t,d.TAG.TMP_TAG),t=n.domUtils.peelTagFromHtml(t,d.TAG.TMP_PLUGIN_TAG);var o=new RegExp("<div( ([^<>])+[ ]+|[ ]+)class *= *(['\"])[^'\"]*".concat(d.CLASS.IMG_TITLE,"[^'\"]*\\3[^<>]*>(<br>)?</div>"),"ig");t=(t=(t=t.replace(o,"")).replace(/<!--(.|\n)*?(-->)/g,"")).replace(/<script[^<>]*\/>/gi,"").replace(/<script[^<>]*>(((?!<\/script>).)|(\r?\n))*<\/script>/gi,"");var i=new RegExp(" *("+d.CLASS.EDITING+"|"+d.CLASS.READONLY+") *","g");t=t.replace(/(<body [^<>]*class=(['"]))(.*?)(\2)/gi,(function(e,t,n,r,o){return t+r.replace(i," ")+o}));return t=(t=n.domUtils.removeLazyLoadFromHtml(t)).replace(/<base\s*[^>]*>/gi,""),t=n.domUtils.restoreImgPath(t),t=u.replaceSpecialChar(t)},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"bridge",get:function(){return this._bridge?this._bridge:this.init()}},{key:"editor",get:function(){return this._bridge?this._bridge.editor:null}},{key:"editorEvent",get:function(){return this._bridge?this._bridge.editorEvent:null}},{key:"editorUtils",get:function(){return this._bridge?this._bridge.editorUtils:null}},{key:"reader",get:function(){return this._bridge?this._bridge.reader:null}},{key:"documentMinVersion",get:function(){return this.env.body.getAttribute(d.ATTR.WIZ_DOCUMENT_MIN_VERSION)||""}},{key:"isOutline",get:function(){return this.env.options.reader.type===d.NOTE_READER_TYPE.OUTLINE&&(this.env.options.editor.type=d.NOTE_EDITOR_TYPE.OUTLINE,!0)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(25),f=(n(3),function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).type=d.DOCUMENT_TYPE.COMMON,n._originalHtml="",n._componentOn=function(e){var t=function(){n.req.amend.startReverse(),n.req.historyUtils.start(n.env.options.editor.maxUndo,n.env.options.editor.callback.undo),n.req.imgCore.setImgFullPath(),n.req.mediaCore.on(),n.env.client.type.isPhone||n.env.client.type.isPad?setTimeout((function(){n.setOriginalHtml()}),500):n.setOriginalHtml(),"function"==typeof e&&e()};n.domUtils.removeClass(n.env.body,d.CLASS.READONLY),n.domUtils.addClass(n.env.body,d.CLASS.EDITING),n.env.options.container&&(n.domUtils.removeClass(n.env.options.container,d.CLASS.READONLY),n.domUtils.addClass(n.env.options.container,d.CLASS.EDITING)),n.env.frame.toolbarContainer&&n.env.options.document!==n.env.doc&&u.loadCss(n.env.options.document,[n.env.dependency.files.css.fonts]),u.loadCss(n.env.doc,[n.env.dependency.files.css.fonts]),n.req.historyUtils.init(),n.domUtils.setContenteditable(null,!0),n.req.frameViewCore.on(),n.req.wizStyle.insertTmpEditorStyle(),n.domUtils.fixList(),n.req.editorCommonEvent.bind(),n.req.rangeCore.on(),n.req.commandExtend.on(),n.req.menuPlugin.on(),n.req.selectPlugin.on(),n.req.imgCore.on(),n.req.tableCore.on(),n.req.tabKey.on(),n.req.todoCore&&n.req.todoCore.on(),n.req.blockCore.on(),n.req.formatPainter.init(),n.env.options.editor.autoCheckLink&&n.req.linkCore.on(),n.req.markerCore.on(),n.req.codeCore?n.req.codeCore.on({},t):t(),n.env.body.style.fontSize?n.env.isSetBodyFontSize=!1:(n.env.body.style.fontSize=n.env.win.getComputedStyle(n.env.body).fontSize,n.env.isSetBodyFontSize=!0)},n.focus=function(){if(n.req.rangeCore.focusFromTmpCaretForMobile())n.domUtils.focus();else{var e=n.req.tableZone.getZone();e.range?n.domUtils.scrollIntoView(e.start.cell):n.domUtils.focus()}},n.off=function(){n.offEvent(),n.env.readonly=!0,n.env.isSetBodyFontSize&&(n.env.body.style.fontSize=null,n.env.isSetBodyFontSize=!1),n.domUtils.setContenteditable(null,!1),n.domUtils.removeByTag(d.TAG.TMP_TAG)},n.offEvent=function(){n.req.historyUtils.stop(),n.req.amend.stopReverse(),n.req.amend.stop(),n.req.formatPainter.off(),n.req.codeCore&&n.req.codeCore.off(),n.req.blockCore.off(),n.req.todoCore&&n.req.todoCore.off(),n.req.tabKey.off(),n.req.tableCore.off(),n.req.imgCore.off(),n.req.menuPlugin.off(),n.req.selectPlugin.off(),n.req.commandExtend.off(),n.req.rangeCore.off(),n.req.editorCommonEvent.unbind(),n.req.frameViewCore.off(),n.env.options.editor.autoCheckLink&&n.req.linkCore.off(),n.req.markerCore.off()},n.on=function(e,t){var r=n.domUtils.getPageScroll().top,o=function(){!0!==n.env.readonly&&(n.env.isWizTemplate&&n.env.win.WizTemplate&&n.env.win.WizTemplate.on(!1),n.env.options.editor.autoFocus&&n.focus(),setTimeout((function(){n.env.client.type.isPhone||n.env.client.type.isPad||(n.env.client.type.isMac&&n.env.options.reader.type!==d.NOTE_READER_TYPE.COMMON?setTimeout((function(){n.domUtils.setPageScrollTop(r)}),100):n.domUtils.setPageScrollTop(r)),n.req.nightModeUtils&&n.req.nightModeUtils.on(),n.req.lazyLoadUtils.init(),"function"==typeof t&&t()}),0))};n._commonUtils.initWizDocument((function(){n.req.amendInfo.off(),n.env.isWizTemplate&&n.env.win.WizTemplate&&n.env.win.WizTemplate.off(),n.env.readonly=!1,n.req.contentCore&&n.req.contentCore.on({}),n._componentOn(o)}))},n.getContentHtml=function(e){n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!0);var t,r,o,i,a,l=[],s=n.rangeUtils.getRange();s&&((t=n.domUtils.getParentRoot([s.startContainer,s.endContainer]))&&(l=[t]),r=s.startContainer,o=s.startOffset,i=s.endContainer,a=s.endOffset),n.domUtils.clearChild(n.env.body,null,0);var c=n.rangeUtils.getRange();s&&n.req.codeUtils&&!n.req.codeUtils.getContainerFromChild(r)&&!n.domUtils.isInWizTmp(r)&&(c&&s.startContainer==c.startContainer&&s.startOffset===c.startOffset&&s.endContainer==c.endContainer&&s.endOffset===c.endOffset||n.rangeUtils.setRange(r,o,i,a)),n.domUtils.clearChildSpan(n.env.body,l),n.req.amend.hideAmendInfo(),n.req.todoCore&&n.req.todoCore.checkTodoStyle();var u=n.req.editorBridge.getContentHtmlForInside(e);return setTimeout((function(){n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!1)}),10),u},n.getOriginalHtml=function(){return n._originalHtml},n.setOriginalHtml=function(e){n._originalHtml=e||n.req.editorBridge.getContentHtmlForInside()},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._commonUtils=e.require.commonUtils}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2)));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(1),s=n(3),c=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,i(t).call(this)))._clipboardDoing=!1,e._fixScrollTimer=null,e._copySelection=function(t,n,r){var o,i,a,c,d,u=e.req.tableZone.getZone(),f=e.rangeUtils.getRange(),h=!1,p=!0,m=[];if(n=!!n,u.range||!f||f.collapsed||(h=!!f.cloneContents().querySelector("."+l.CLASS.CODE_CONTAINER)),f&&(a=e.domUtils.getParentRoot([f.startContainer,f.endContainer]),e.req.amend.isAmendEditing&&a&&a.getAttribute(l.ATTR.SPAN_DELETE)===e.req.amendUser.getCurUser().hash))return alert(n?e.lang.Err.Cut_Null:e.lang.Err.Copy_Null),s.stopEvent(t),void r();if(!(u.range||f&&!f.collapsed&&(h||e.req.amend.isAmendEditing))||u.range&&f&&!f.collapsed)r();else{if(!u.range||f&&!f.collapsed?f&&!f.collapsed&&(o=e.rangeUtils.getFragmentForCopy()):o=e.req.tableZone.getFragmentForCopy(),o){e.req.amend.isAmendEditing&&(i=o.innerHTML.length,e.req.amend.fragmentFilter(o),0===o.innerHTML.length&&i>0&&(alert(e.lang.Err.Copy_Null),p=!1));var g=o.innerHTML.replace(l.FILL_CHAR_REG,""),v=o.innerText.replace(l.FILL_CHAR_REG,"");if(o.innerHTML="",e.domUtils.remove(o),o=null,p){e.req.clipboardUtils.setData(t,g,v,(function(){n&&e.req.historyUtils.saveSnap(!1),n&&e.req.amend.isAmendEditing?(c=e.req.amendUser.getCurUser(),d=e.req.amendUtils.getDeletedStyle(c),!u.range||f&&!f.collapsed?(e.req.amendUtils.removeSelection(c),e.req.amendUtils.removeUserDel(null,c),e.rangeUtils.getSelection().collapseToEnd(),e.rangeUtils.fixScroll()):(m=e.req.tableUtils.getDomsByCellList(e.req.tableZone.getSelectedCells()),e.domUtils.modifyNodesStyleAndClear(m,d.style,d.attr,[]),e.req.amendUtils.removeUserDel(u.table,c))):n&&u.range&&(!f||f.collapsed)?e.req.tableCore.clearCellValue():n&&f.deleteContents(),r()}))}}e.env.browser.isIe||s.stopEvent(t)}},e._handler={onClick:function(t){e.req.linkUtils.onClickLink(t),e.env.options.editor.callback.onClick&&!e.env.options.editor.callback.onClick(t)||e.env.event.call(l.EVENT.ON_CLICK,t)},onCompositionend:function(t){e.env.compositionStart=!1,e.env.compositionStartRange=null,setTimeout((function(){e.req.historyUtils.saveSnap(!0)}),0)},onCompositionstart:function(t){e.env.compositionStart=!0,e.env.compositionStartRange=e.rangeUtils.getRange()},onCopy:function(t){e.req.codeUtils&&e.req.codeUtils.getContainerFromChild(t.target)?e.env.client.sendCmdToWizClient(l.CLIENT_EVENT.WizEditorAfterCopied):(e._clipboardDoing=!0,e._copySelection(t,!1,(function(){e._clipboardDoing=!1,e.env.client.sendCmdToWizClient(l.CLIENT_EVENT.WizEditorAfterCopied)})))},onCut:function(t){e.req.codeUtils&&e.req.codeUtils.getContainerFromChild(t.target)||(e.req.historyUtils.saveSnap(!1),e._clipboardDoing=!0,e._copySelection(t,!0,(function(){e.env.event.call(l.EVENT.ON_CUT,t),e.req.frameViewUtils.onAdjustContainerSize(),e._clipboardDoing=!1,e.env.client.sendCmdToWizClient(l.CLIENT_EVENT.WizEditorAfterCopied)})))},onDOMSubtreeModified:function(t){if(e.domUtils.isTag(e.env.body.firstElementChild,"br")){var n=e.env.body.firstElementChild,r=e.env.doc.createElement("div");e.domUtils.before(r,n),r.appendChild(n)}e.env.event.call(l.EVENT.ON_DOM_SUBTREE_MODIFIED,t)},onDragStart:function(t){e.env.event.call(l.EVENT.ON_DRAG_START,t)},onDragEnter:function(t){e.env.event.call(l.EVENT.ON_DRAG_ENTER,t)},onDrop:function(t){var n=t.dataTransfer&&t.dataTransfer.files?t.dataTransfer.files:null;if(n&&e.env.options.editor.callback.onDropFile)return e.env.options.editor.callback.onDropFile(n,t),void s.stopEvent(t);e.env.event.call(l.EVENT.ON_DROP,t)},onKeydown:function(t){var n=!e.env.browser.isMac&&t.ctrlKey||e.env.browser.isMac&&t.metaKey;if(e.env.browser.isIe&&"c"===t.key&&n)e._handler.onCopy(t);else if(e.env.browser.isIe&&"x"===t.key&&n)e._handler.onCut(t);else if(!e.env.options.editor.callback.onKeyDown||e.env.options.editor.callback.onKeyDown(t)){var r,o=e.rangeUtils.getRange();o&&o.collapsed&&e.env.body&&0===e.env.body.childNodes.length&&((r=e.env.doc.createElement("div")).appendChild(e.env.doc.createElement("br")),e.env.body.appendChild(r),e.rangeUtils.setRange(r,1));var i=t.keyCode||t.which;if(e.env.win.WizQtEditor&&e.env.client.type.isMac&&83===i&&n&&e.env.win.WizQtEditor.saveCurrentNote(),!e.req.codeUtils||!e.req.codeUtils.getContainerFromChild(t.target)){var a,s,c,d=e.req.tableZone.getZone();if(e.env.browser.isMac&&!d.range&&(a=t.shiftKey?"extend":"move",t.metaKey&&37===i||t.ctrlKey&&65===i?(s="backward",c="lineboundary"):t.metaKey&&39===i||t.ctrlKey&&69===i?(s="forward",c="lineboundary"):t.metaKey&&38===i?(s="backward",c="documentboundary"):t.metaKey&&40===i?(s="forward",c="documentboundary"):t.ctrlKey&&80===i?(s="backward",c="line"):t.ctrlKey&&78===i?(s="forward",c="line"):t.ctrlKey&&70===i?(s="forward",c="character"):t.ctrlKey&&66===i&&(s="backward",c="character")),s){if(e.rangeUtils.modify(a,s,c),"documentboundary"===c)if("forward"===s){var u=e.domUtils.getLast(),f=e.req.tableUtils.getContainer(u);if(f)e.rangeUtils.setRange(f,f.childNodes.length);else{var h=e.req.codeUtils.getContainerFromChild(u);h&&e.req.codeUtils.focusToLast(h.codeMirror)}}else{var p=e.domUtils.getFirst(),m=e.req.tableUtils.getContainer(p);if(m)e.rangeUtils.setRange(m,0);else{var g=e.req.codeUtils.getContainerFromChild(p);g&&e.req.codeUtils.focusToFirst(g.codeMirror)}}e.rangeUtils.fixScroll()}else e.env.event.call(l.EVENT.ON_KEY_DOWN,t),e.req.frameViewUtils.onAdjustContainerSize()}}},onKeyup:function(t){e.env.event.call(l.EVENT.ON_KEY_UP,t),e.rangeUtils.fixScroll()},onMousedown:function(t){e.env.isShowPreview||(e.domUtils.isInWizBody(t.target)?(e.env.event.call(l.EVENT.ON_MOUSE_DOWN,t),e.req.frameViewUtils.onAdjustContainerSize()):e.req.tableZone.clear())},onMousemove:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_MOUSE_MOVE,t)},onMouseover:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_MOUSE_OVER,t)},onMouseup:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_MOUSE_UP,t)},onOrientationchange:function(t){e.env.event.call(l.EVENT.ON_ORIENTATION_CHANGE,t),e.env.client.type.isIOS&&e.rangeUtils.fixScroll()},onPaste:function(t){if(!e.env.isShowPreview){e._clipboardDoing=!0,e.req.pasteUtils.pasteFromClipBoard(t,(function(n){n&&e.env.event.call(l.EVENT.ON_PASTE,t),e.req.frameViewUtils.onAdjustContainerSize(),e._clipboardDoing=!1}))}},onResize:function(t){e.env.event.call(l.EVENT.ON_RESIZE,t)},onScroll:function(t){e.env.event.call(l.EVENT.ON_SCROLL,t)},onSelectionStart:function(t){e.env.event.call(l.EVENT.ON_SELECT_START,t)},onSelectionChange:function(t){if(!e.env.isShowPreview&&!e._clipboardDoing){var n=e.rangeUtils.getRange(),r=e.req.tableZone.getZone();if(n||r.range){if(e.env.event.call(l.EVENT.ON_SELECTION_CHANGE,t),n=e.rangeUtils.getRange(),r=e.req.tableZone.getZone(),e.env.client.type.isMac&&r.range&&n){var o=e.rangeUtils.getRangeDetail(n.startContainer,n.startOffset),i=e.rangeUtils.getRangeDetail(n.endContainer,n.endOffset),a=r.start.cell;if(!e.domUtils.isTag(a.firstChild,"div")){var s=e.domUtils.packageChildNodesByDiv(a);0===s.childNodes.length?(s.innerHTML="<br/>",e.rangeUtils.setRange(s,0)):e.rangeUtils.setRange(o.container,o.offset,i.container,i.offset)}}e.env.client.type.isPhone&&(clearTimeout(e._fixScrollTimer),e._fixScrollTimer=setTimeout((function(){e.rangeUtils.fixScroll()}),100)),e.req.frameViewUtils.onAdjustContainerSize()}}},onTextInput:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_TEXT_INPUT,t)},onTouchEnd:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_TOUCH_END,t)},onTouchStart:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_TOUCH_START,t)}},e.bind=function(){if(e.unbind(),e.env.body.addEventListener("click",e._handler.onClick),e.env.body.addEventListener("compositionstart",e._handler.onCompositionstart),e.env.body.addEventListener("compositionend",e._handler.onCompositionend),e.env.body.addEventListener("DOMSubtreeModified",e._handler.onDOMSubtreeModified),e.env.body.addEventListener("dragstart",e._handler.onDragStart),e.env.body.addEventListener("dragenter",e._handler.onDragEnter),e.env.body.addEventListener("drop",e._handler.onDrop),e.env.body.addEventListener("keydown",e._handler.onKeydown),e.env.body.addEventListener("keyup",e._handler.onKeyup),e.env.body.addEventListener("mousemove",e._handler.onMousemove),e.env.body.addEventListener("mouseover",e._handler.onMouseover),e.env.body.addEventListener("mouseup",e._handler.onMouseup),e.env.body.addEventListener("paste",e._handler.onPaste),e.env.body.addEventListener("selectstart",e._handler.onSelectionStart),e.env.body.addEventListener("textInput",e._handler.onTextInput),e.env.doc.addEventListener("copy",e._handler.onCopy),e.env.doc.addEventListener("cut",e._handler.onCut),e.env.doc.addEventListener("mousedown",e._handler.onMousedown),e.env.doc.addEventListener("orientationchange",e._handler.onOrientationchange),e.env.doc.addEventListener("selectionchange",e._handler.onSelectionChange),e.env.supportTouchEvent&&(e.env.body.addEventListener("touchend",e._handler.onTouchEnd),e.env.body.addEventListener("touchstart",e._handler.onTouchStart)),e.env.options.container?e.domUtils.isTag(e.env.scrollContainer,"body")?e.env.scrollContainer.ownerDocument.addEventListener("scroll",e._handler.onScroll):e.env.scrollContainer.addEventListener("scroll",e._handler.onScroll):e.env.doc.addEventListener("scroll",e._handler.onScroll),e.env.win.addEventListener("resize",e._handler.onResize),e.env.client.type.isWeb&&e.env.win.top!==e.env.win)try{e.env.win.top.addEventListener("resize",e._handler.onResize)}catch(e){}e.req.frameViewUtils.onAdjustContainerSize()},e.unbind=function(){if(e.env.body.removeEventListener("click",e._handler.onClick),e.env.body.removeEventListener("compositionstart",e._handler.onCompositionstart),e.env.body.removeEventListener("compositionend",e._handler.onCompositionend),e.env.body.removeEventListener("DOMSubtreeModified",e._handler.onDOMSubtreeModified),e.env.body.removeEventListener("dragstart",e._handler.onDragStart),e.env.body.removeEventListener("dragenter",e._handler.onDragEnter),e.env.body.removeEventListener("drop",e._handler.onDrop),e.env.body.removeEventListener("keydown",e._handler.onKeydown),e.env.body.removeEventListener("keyup",e._handler.onKeyup),e.env.body.removeEventListener("mousemove",e._handler.onMousemove),e.env.body.removeEventListener("mouseover",e._handler.onMouseover),e.env.body.removeEventListener("mouseup",e._handler.onMouseup),e.env.body.removeEventListener("paste",e._handler.onPaste),e.env.body.removeEventListener("selectstart",e._handler.onSelectionStart),e.env.body.removeEventListener("textInput",e._handler.onTextInput),e.env.body.removeEventListener("touchend",e._handler.onTouchEnd),e.env.body.removeEventListener("touchstart",e._handler.onTouchStart),e.env.doc.removeEventListener("copy",e._handler.onCopy),e.env.doc.removeEventListener("cut",e._handler.onCut),e.env.doc.removeEventListener("mousedown",e._handler.onMousedown),e.env.doc.removeEventListener("orientationchange",e._handler.onOrientationchange),e.env.doc.removeEventListener("selectionchange",e._handler.onSelectionChange),e.env.doc.removeEventListener("scroll",e._handler.onScroll),e.env.scrollContainer&&e.env.scrollContainer.removeEventListener("scroll",e._handler.onScroll),e.env.win.removeEventListener("resize",e._handler.onResize),e.env.client.type.isWeb&&e.env.win.top!==e.env.win)try{e.env.win.top.removeEventListener("resize",e._handler.onResize)}catch(e){}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),t}(n(140));e.exports=c},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(25),f=(n(3),function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).type=d.DOCUMENT_TYPE.OUTLINE,n._originalHtml="",n._componentOn=function(){n.domUtils.removeClass(n.env.body,d.CLASS.READONLY),n.domUtils.addClass(n.env.body,d.CLASS.EDITING),n.env.options.container&&(n.domUtils.removeClass(n.env.options.container,d.CLASS.READONLY),n.domUtils.addClass(n.env.options.container,d.CLASS.EDITING)),u.loadCss(n.env.doc,[n.env.dependency.files.css.fonts]),n.req.historyUtils.init(),n.req.frameViewCore.on(),n._outlineCore.on(),n._outlineStyle.initCommon(),n.req.wizStyle.insertTmpEditorStyle(),n.req.editorOutlineEvent.bind(),n.req.rangeCore.on(),n.req.commandExtend.on(),n.req.menuPlugin.on(),n.req.selectPlugin.on(),n.req.imgCore.on(),n.env.options.editor.autoCheckLink&&n.req.linkCore.on(),n.req.imgCore.setImgFullPath(),n._outlineUtils.fixOutline(),n._outlineUtils.setNodeEditable(),n.req.historyUtils.start(n.env.options.editor.maxUndo,n.env.options.editor.callback.undo),n.env.client.type.isPhone||n.env.client.type.isPad?setTimeout((function(){n.setOriginalHtml()}),500):n.setOriginalHtml()},n.focus=function(){n.req.rangeCore.focusFromTmpCaretForMobile()||n._outlineCore.focus()},n.off=function(){n.offEvent(),n.env.readonly=!0,n.env.isSetBodyFontSize&&(n.env.body.style.fontSize=null,n.env.isSetBodyFontSize=!1),n._outlineUtils.setNodeEditable(),n.domUtils.removeByTag(d.TAG.TMP_TAG)},n.offEvent=function(){n.req.historyUtils.stop(),n.req.linkCore.off(),n.req.imgCore.off(),n.req.selectPlugin.off(),n.req.menuPlugin.off(),n.req.commandExtend.off(),n.req.rangeCore.off(),n.req.editorOutlineEvent.unbind(),n._outlineCore.off(),n.req.frameViewCore.off()},n.on=function(e,t){var r=n.domUtils.getPageScroll().top;n._outlineUtils.initWizDocument((function(){n.env.readonly=!1,n._componentOn(),!0!==n.env.readonly&&(n.env.options.editor.autoFocus&&n.focus(),setTimeout((function(){n.env.client.type.isPhone||n.env.client.type.isPad||(n.env.client.type.isMac&&n.env.options.reader.type!==d.NOTE_READER_TYPE.COMMON?setTimeout((function(){n.domUtils.setPageScrollTop(r)}),100):n.domUtils.setPageScrollTop(r)),n.req.nightModeUtils&&n.req.nightModeUtils.on(),n.req.lazyLoadUtils.init(),"function"==typeof t&&t()}),0))}))},n.getContentHtml=function(e){n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!0);var t=n.req.editorBridge.getContentHtmlForInside(e);return setTimeout((function(){n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!1)}),10),t},n.getOriginalHtml=function(){return n._originalHtml},n.setOriginalHtml=function(e){n._originalHtml=e||n.req.editorBridge.getContentHtmlForInside()},n.addNotes=function(){n._outlineCore.addNotes()},n.addImg=function(e){return n._outlineCore.addImg(e)},n.setCompleted=function(e){n._outlineCore.setCompleted(e)},n.deleteNodes=function(){n._outlineCore.deleteNodes()},n.indent=function(){n._outlineCore.indent()},n.insert=function(e){e&&n._outlineCore.insert(e)},n.outdent=function(){n._outlineCore.outdent()},n.hideMinder=function(){n._outlineCore.hideMinder()},n.hideMinderTools=function(){n._outlineCore.hideMinderTools()},n.hideMinderToolsMenu=function(){n._outlineCore.hideMinderToolsMenu()},n.getMinderThemeData=function(e){return n._outlineCore.getMinderThemeData(e)},n.minderThemeRegister=function(e){n._outlineCore.minderThemeRegister(e)},n.showMinder=function(e){n._outlineCore.showMinder(e)},n.showMinderTools=function(){n._outlineCore.showMinderTools()},n.showMinderToolsMenu=function(){n._outlineCore.showMinderToolsMenu()},n.userMinderTheme=function(e){n._outlineCore.userMinderTheme(e)},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._outlineCore=e.require.outlineCore,this._outlineStyle=e.require.outlineStyle,this._outlineUtils=e.require.outlineUtils}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2)));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(1),s=(n(3),function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,i(t).call(this)))._handler={onClick:function(t){e.env.event.call(l.EVENT.ON_CLICK,t),e.req.frameViewUtils.onAdjustContainerSize()},onCompositionend:function(t){e.env.compositionStart=!1,e.env.compositionStartRange=null,setTimeout((function(){e.req.historyUtils.saveSnap(!0)}),0)},onCompositionstart:function(t){e.env.compositionStart=!0,e.env.compositionStartRange=e.rangeUtils.getRange()},onCopy:function(t){e._clipboardDoing=!0,e.req.outlineCore.copySelection(t,!1,(function(){e._clipboardDoing=!1,e.env.client.sendCmdToWizClient(l.CLIENT_EVENT.WizEditorAfterCopied),e.rangeUtils.fixScroll()}))},onCut:function(t){e.req.historyUtils.saveSnap(!1),e._clipboardDoing=!0,e.req.outlineCore.copySelection(t,!0,(function(){e.env.event.call(l.EVENT.ON_CUT,t),e.req.frameViewUtils.onAdjustContainerSize(),e._clipboardDoing=!1,e.env.client.sendCmdToWizClient(l.CLIENT_EVENT.WizEditorAfterCopied)})),e.env.event.call(l.EVENT.ON_CUT,t)},onInput:function(t){e.env.event.call(l.EVENT.ON_INPUT,t)},onKeydown:function(t){e.env.event.call(l.EVENT.ON_KEY_DOWN,t),e.req.frameViewUtils.onAdjustContainerSize(),e.rangeUtils.fixScroll()},onMousedown:function(t){e.env.event.call(l.EVENT.ON_MOUSE_DOWN,t)},onMousemove:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_MOUSE_MOVE,t)},onMouseover:function(t){e.env.event.call(l.EVENT.ON_MOUSE_OVER,t)},onMouseup:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_MOUSE_UP,t)},onResize:function(t){e.env.event.call(l.EVENT.ON_RESIZE,t)},onPaste:function(t){if(!e.env.isShowPreview){e._clipboardDoing=!0,e.req.pasteUtils.pasteFromClipBoard(t,(function(t){e.req.frameViewUtils.onAdjustContainerSize(),e._clipboardDoing=!1}))}},onSelectionChange:function(t){e.env.isShowPreview||e._clipboardDoing||(e.env.client.type.isPhone&&(clearTimeout(e._fixScrollTimer),e._fixScrollTimer=setTimeout((function(){e.rangeUtils.fixScroll()}),100)),e.env.event.call(l.EVENT.ON_SELECTION_CHANGE,t))},onTextInput:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_TEXT_INPUT,t)},onTouchEnd:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_TOUCH_END,t)},onTouchStart:function(t){e.env.isShowPreview||e.env.event.call(l.EVENT.ON_TOUCH_START,t)}},e.bind=function(){if(e.unbind(),e.env.body.addEventListener("click",e._handler.onClick),e.env.body.addEventListener("compositionstart",e._handler.onCompositionstart),e.env.body.addEventListener("compositionend",e._handler.onCompositionend),e.env.body.addEventListener("input",e._handler.onInput),e.env.body.addEventListener("keydown",e._handler.onKeydown),e.env.body.addEventListener("mousedown",e._handler.onMousedown),e.env.body.addEventListener("mousemove",e._handler.onMousemove),e.env.body.addEventListener("mouseover",e._handler.onMouseover),e.env.body.addEventListener("mouseup",e._handler.onMouseup),e.env.body.addEventListener("paste",e._handler.onPaste),e.env.body.addEventListener("textInput",e._handler.onTextInput),e.env.supportTouchEvent&&(e.env.body.addEventListener("touchend",e._handler.onTouchEnd),e.env.body.addEventListener("touchstart",e._handler.onTouchStart)),e.env.doc.addEventListener("copy",e._handler.onCopy),e.env.doc.addEventListener("cut",e._handler.onCut),e.env.doc.addEventListener("selectionchange",e._handler.onSelectionChange),e.env.win.addEventListener("resize",e._handler.onResize),e.env.client.type.isWeb&&e.env.win.top!==e.env.win)try{e.env.win.top.addEventListener("resize",e._handler.onResize)}catch(e){}e.req.frameViewUtils.onAdjustContainerSize()},e.unbind=function(){if(e.env.body.removeEventListener("click",e._handler.onClick),e.env.body.removeEventListener("input",e._handler.onInput),e.env.body.removeEventListener("keydown",e._handler.onKeydown),e.env.body.removeEventListener("mousedown",e._handler.onMousedown),e.env.body.removeEventListener("mousemove",e._handler.onMousemove),e.env.body.removeEventListener("mouseover",e._handler.onMouseover),e.env.body.removeEventListener("mouseup",e._handler.onMouseup),e.env.body.removeEventListener("paste",e._handler.onPaste),e.env.body.removeEventListener("textInput",e._handler.onTextInput),e.env.body.removeEventListener("touchend",e._handler.onTouchEnd),e.env.body.removeEventListener("touchstart",e._handler.onTouchStart),e.env.doc.removeEventListener("copy",e._handler.onCopy),e.env.doc.removeEventListener("cut",e._handler.onCut),e.env.doc.removeEventListener("selectionchange",e._handler.onSelectionChange),e.env.win.removeEventListener("resize",e._handler.onResize),e.env.client.type.isWeb&&e.env.win.top!==e.env.win)try{e.env.win.top.removeEventListener("resize",e._handler.onResize)}catch(e){}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),t}(n(140)));e.exports=s},function(e,t,n){var r=n(1),o=(n(3),["background","background-color","color","font-family","font-size","font-weight","font-style","text-decoration","text-align"]),i=["h1","h2","h3","h4","h5","h6"],a=["sub","sup"],l=["b","i","u","strike"],s={b:"bold",div:"formatBlock",h1:"formatBlock",h2:"formatBlock",h3:"formatBlock",h4:"formatBlock",h5:"formatBlock",h6:"formatBlock",i:"italic",strike:"strikeThrough",sub:"subscript",sup:"superscript",u:"underline","text-align-center":"justifyCenter","text-align-justify":"justifyFull","text-align-left":"JustifyLeft","text-align-right":"JustifyRight"};e.exports=function(){var e=this,t=null,n=null,c=null,d=null,u=null,f=null,h=null,p=null,m=null,g=null;this.initCore=function(e){n=(t=e).env,c=t.require.codeUtils,d=t.require.commandExtend,u=t.require.domUtils,f=t.require.historyUtils,h=t.require.rangeUtils,p=t.require.tableCore,m=t.require.tableZone,g=t.require.wizStyle};var v,b=!1,y=function(e,t,r,o){for(var i=n.win.getComputedStyle(e),a=r.length-1;a>=0;a--){var l=r[a],s=t.style[l];!s&&"color"===l&&u.isTag(t,"font")&&(s=t.getAttribute(l)),s&&u.getFontSizeRem(s)===u.getFontSizeRem(i[l])&&(r.splice(a,1),o[l]=s)}},_=function(e){return"h"===e.charAt(0)||"div"===e},S=function(e){return/sub|sup/i.test(e)},E=function(){v={style:null,tagList:[]}},C={bind:function(){C.unbind(),n.event.add(r.EVENT.ON_KEY_DOWN,C.handler.onKeyDown),n.event.add(r.EVENT.ON_MOUSE_UP,C.handler.onMouseUp)},unbind:function(){n.event.remove(r.EVENT.ON_KEY_DOWN,C.handler.onKeyDown),n.event.remove(r.EVENT.ON_MOUSE_UP,C.handler.onMouseUp)},handler:{onKeyDown:function(t){27===(t.keyCode||t.which)&&e.off()},onMouseUp:function(){if(v.style){var t,n,r;f.saveSnap(!1),m.getZone().range&&(delete v.tagList["text-align-left"],delete v.tagList["text-align-right"]);for(var o=0;o<v.tagList.length;o++){var i=v.tagList[o],a=s[i.name];if(_(i.name))d.execCommand(a,!1,i.name);else if(S(i.name))i.enabled?d.execCommand(a,!1):d.clearSubSup();else{var l=d.queryCommandState(a);i.enabled&&!l?d.execCommand(a,!1):!i.enabled&&l?d.execCommand(a,!1):(d.execCommand(a,!1),(t=h.getRange())&&(n=h.getRangeDetail(t.startContainer,t.startOffset),r=h.getRangeDetail(t.endContainer,t.endOffset)),d.execCommand(a,!1),t&&h.setRange(n.container,n.offset,r.container,r.offset))}}p.modifySelectionDom(v.style,null)||h.modifySelectionDom(v.style,null),b||e.init()}}}};this.init=function(){e.off()},this.on=function(t){if(E(),b=!!t,0===e.status())return 0;var s,c=h.getRange(),d=m.getZone();return c?((s=h.getRangeDetail(c.startContainer,c.startOffset)).offset,s=s.container):s=d.start.cell,function(e){for(var t,r,s=o.concat(),c={},d=i.concat(a,l),f={},h=!1,p=!1,g=1===e.nodeType?e:e.parentNode,b=g;b&&b!==n.body;)y(g,b,s,c),b=b.parentNode;for(var E=s.length-1;E>=0;E--)c[s[E]]=null;for(v.style=c,b=e;b;)(b=u.getParentByTagName(b,d,!0))&&(r={name:t=b.tagName.toLowerCase(),enabled:!0},_(t)?(v.tagList.splice(0,0,r),h=!0):S(t)?(v.tagList.push(r),p=!0):(v.tagList.push(r),/^i$/i.test(t)?!0:/^b$/i.test(t)&&!0),f[t]=1,b=b.parentNode);h||v.tagList.splice(0,0,{name:"div",enabled:!0}),p||v.tagList.push({name:"sub",enabled:!1});for(var C=0;C<d.length;C++)t=d[C],_(t)||S(t)||f[t]||v.tagList.push({name:t,enabled:!1});m.getZone().range?delete v.style["text-align"]:(t=v.style["text-align"]?"text-align-"+v.style["text-align"]:"text-align-left",delete v.style["text-align"],v.tagList.push({name:t,enabled:!0}))}(s=u.getFirstDeepChild(s)),C.bind(),g.insertStyle({id:r.ID.FORMAT_PAINTER_STYLE,name:r.NAME.TMP_STYLE},'body {cursor:url("'+n.dependency.files.cursor.formatPainter+'"), auto;}'),2},this.off=function(){return E(),g.removeStyleById(r.ID.FORMAT_PAINTER_STYLE),C.unbind(),e.status()},this.status=function(){if(n.readonly||n.client.type.isPhone||n.client.type.isPad)return 0;var e=h.getRange(),t=m.getZone();return!e&&!t.range||t.active?0:e&&c&&c.getContainerFromChild(e.startContainer)?0:v&&v.style?2:1}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).init=function(){},n.off=function(){n.req.frameViewStyle.removeFrameStyle(),n.req.frameViewUtils.off(),n.req.toolbarMarkdown&&n.req.toolbarMarkdown.off()},n.on=function(){n.env.options.container&&n.env.options.useFrame&&n.req.frameViewStyle.insertFrameStyle(),n.env.readonly||n.env.options.editor.type!==d.NOTE_EDITOR_TYPE.MARKDOWN||!n.env.frame.toolbarContainer?n.req.frameViewUtils.on():n.req.toolbarMarkdown&&n.req.toolbarMarkdown.on()},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(n(2));e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(2),f={toolbar:"."+d.CLASS.EDITING+"."+d.CLASS.EDITOR_CONTAINER+" {border: 1px solid silver;padding-top: 5px;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" {display:flex;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_MAIN+" {flex:1;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_MAIN+" .toolbar-split {width: 0;border-left: 1px solid #d9d9d9;border-right: 1px solid #fff;color: transparent;text-indent: -10px;margin: 0 6px;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-button {display:inline-block;position:relative;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-button .editor-submenu {position: absolute;display: none;width: 195px;padding: 5px 0;background: #fff;border-radius: 3px;border: 1px solid #E0E0E0;top:28px;left:-9px;box-shadow: 1px 1px 5px #d0d0d0;z-index:100;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-button.active .editor-submenu {display:block;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-button .editor-submenu-label{padding: 0 6px; font-size: 14px;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-button .editor-submenu table{border: 0;border-collapse: initial;border-spacing: 3px;background-color: white;margin: 0 auto;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-button .editor-submenu table td{border-collapse: collapse;border: 1px solid #bbbbbb;box-sizing: border-box;position: relative;padding: 3px;width: 16px;height: 16px;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-button .editor-submenu table td.selected{border-color: #448aff;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-icon {font-size:16px;padding:4px;border:1px solid transparent;border-radius: 3px;cursor: pointer;color:#2c3e50}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-icon.hover {background:#fcfcfc;border-color:#95a5a6;}."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-icon.disabled,."+d.CLASS.WIZ_EIDTOR_TOOlBAR_CONTAINER+" .editor-icon.disabled.hover {background:#fcfcfc;border-color:transparent;color:#94a0ad;}",preview:"."+d.CLASS.WIZ_EIDTOR_PREVIEW_CONTAINER+"{position:absolute;top:2px;bottom:0;left:0;right:0;background:#FFF;display:none;z-index:999;overflow:auto;}."+d.CLASS.WIZ_EIDTOR_PREVIEW_CONTAINER+"."+d.CLASS.EDITOR_PREVIEW_SHOW+"{display:block;}",frame:"body {overflow-y: hidden;}",frameForIos:"iframe."+d.CLASS.WIZ_EIDTOR_IFRAME+" {min-width: 100%; width: 100px; *width: 100%;}"},h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).insertFrameStyle=function(){n.req.wizStyle.insertStyle({id:d.ID.WIZ_EIDTOR_FRAME_BODY_STYLE,name:d.NAME.TMP_STYLE},f.frame),(n.env.browser.isIPhone||n.env.browser.isIPad)&&n.req.wizStyle.insertStyle({id:d.ID.WIZ_EIDTOR_FRAME_STYLE},f.frameForIos,n.env.frame.toolbarDoc)},n.insertPreviewStyle=function(){n.req.wizStyle.insertStyle({id:d.ID.WIZ_EIDTOR_PREVIEW_STYLE,name:d.NAME.TMP_STYLE},f.preview)},n.insertToolbarStyle=function(){n.req.wizStyle.insertStyle({id:d.ID.WIZ_EIDTOR_TOOlBAR_STYLE},f.toolbar,n.env.frame.toolbarDoc)},n.removeFrameStyle=function(){n.req.wizStyle.removeStyleById(d.ID.WIZ_EIDTOR_FRAME_BODY_STYLE),n.req.wizStyle.removeStyleById(d.ID.WIZ_EIDTOR_FRAME_STYLE,n.env.frame.toolbarDoc)},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(u);e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._adjustContainerTimer=void 0,n._adjustScrollTimer=void 0,n._adjustPause=!1,n._lastChildBottomY=-1,n._lastHeight=-1,n._lastBodyMinHeight=-1,n._handler={onAdjustContainerSize:function(){var e=n.env.readonly?n.env.options.reader.minHeight:n.env.options.editor.minHeight;if(n.env.options.container&&n.env.options.useFrame){if(clearTimeout(n._adjustContainerTimer),!n._adjustPause){e-=25,n._adjustContainerTimer=setTimeout((function(){if(!n._adjustPause){for(var t=n.domUtils.isTag(n.env.body,"frameset"),r=t?null:n.env.body.lastChild;r;){if(3===r.nodeType&&!n.domUtils.isEmptyDom(r)){var o=n.env.doc.createElement("span");n.domUtils.before(o,r),o.appendChild(r),r=o}if(1!==r.nodeType||n.domUtils.isInWizTmp(r)||"none"===n.domUtils.getComputedStyle(r,"display")||0===r.clientHeight&&0===r.offsetHeight)r=r.previousSibling;else{var i=/^(absolute|fixed)/gi.test(n.domUtils.getComputedStyle(r,"position"));if(!r.previousSibling||!i)break;r=r.previousSibling}}var a=n.env.doc.documentElement;n.env.body!==n.env.doc.body&&(a=n.env.body);var l=0;if(r){var s=parseInt(n.domUtils.getComputedStyle(r,"margin-bottom"),10)||0,c=parseInt(n.domUtils.getComputedStyle(n.env.body,"margin-top"),10)||0,d=parseInt(n.domUtils.getComputedStyle(n.env.body,"margin-bottom"),10)||0,u=parseInt(n.domUtils.getComputedStyle(n.env.body,"padding-bottom"),10)||0,f=r.offsetTop+r.offsetHeight,h=a.scrollHeight-c-d;l=Math.max(h,e),(n._lastBodyMinHeight!==e||n._lastHeight<=l&&f<n._lastChildBottomY)&&(l=Math.max(f+s+u,e)),n._lastChildBottomY=f,n._lastBodyMinHeight=e}else if(n.env.isWizTemplate){var p=a.scrollHeight;l=Math.max(p,e)}else l=t?.5*n.env.win.document.documentElement.clientHeight:e;if(Math.abs(l-n.env.body.parentElement.clientHeight)>1){var m=l;n.env.readonly||(m+=25),n.env.frame.bodyContainer.style.height=m+"px",n.rangeUtils.fixScroll()}n._lastHeight=l,n.env.doc.documentElement.scrollTop&&(clearTimeout(n._adjustScrollTimer),n._adjustScrollTimer=setTimeout((function(){n.env.doc.documentElement.scrollTop=0}),300))}}),50)}}else n.env.options.container&&!n.env.options.useFrame&&e&&(n.env.body.style.minHeight=e+"px")}},n._event={bind:function(){(n._event.unbind(),n.env.readonly&&n.env.options.container&&n.env.options.useFrame&&n.env.doc.addEventListener("DOMSubtreeModified",n.onAdjustContainerSize),n.env.options.container&&n.env.options.useFrame)&&(0===parseInt(n.domUtils.getComputedStyle(n.env.body,"padding-top"),10)&&n.req.wizStyle.insertStyle({name:d.NAME.TMP_STYLE},"body {padding-top: 1px !important;}"),n.env.event.add(d.EVENT.ON_RESIZE,n.onAdjustContainerSize))},unbind:function(){n.env.doc.removeEventListener("DOMSubtreeModified",n.onAdjustContainerSize),n.env.event.remove(d.EVENT.ON_RESIZE,n.onAdjustContainerSize)}},n.init=function(){},n.off=function(){n._event.unbind()},n.on=function(){n._event.bind()},n.onAdjustContainerSize=n._handler.onAdjustContainerSize,n.getFrameElement=function(){return n.env.frame.dom},n.setAdjustPause=function(e){n._adjustPause=!!e},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(n(2));e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._hasHighlight=!1,n._curTarget=null,n._curIndex=-1,n._targetList=[],n._class={searching:"cm-searching"},n._highlightAll=function(e,t){t&&(n._curIndex=-1,n._curTarget=null,n._targetList=[]),n._hasHighlight=!1,t&&n.env.win.find(e,!1,!1,!0)&&(n._curTarget=n._highlightTarget(e)),n.rangeUtils.setRange(n.env.body,n.env.body.childNodes.length);for(var r=1;r++<101&&n.env.win.find(e,!1,!0);)n._highlightTarget(e);n._hasHighlight=!!n.env.body.querySelector(d.TAG.TMP_HIGHLIGHT_TAG)||!!n.env.body.querySelector(d.TAG.CODE_MIRROR+" ."+n._class.searching),n._hasHighlight&&!t&&n.rangeUtils.setRange(n.env.doc.body,0)},n._highlightTarget=function(e){var t,r,o;if(t=n.rangeUtils.getRange()){if(t&&n.domUtils.getParentByTagName(t.startContainer,d.TAG.TMP_HIGHLIGHT_TAG))return t.collapse(!0),null;var i=n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(t.startContainer);if(i)i.state&&i.state.query===e||(n.req.codeUtils.highlight.search(i,e),n._curTarget||(r=i.querySelector("."+n._class.searching)));else{for(r=n.env.doc.createElement(d.TAG.TMP_HIGHLIGHT_TAG),n.domUtils.addClass(r,n._class.searching),r.style.backgroundColor="yellow",o=t.extractContents();o.firstChild;)r.appendChild(o.firstChild);n.domUtils.isEmptyDom(r)||t.insertNode(r)}return r}},n._initTargetList=function(){if(n._targetList=n.env.body.querySelectorAll("."+n._class.searching),0!==n._targetList.length){for(var e=n._targetList.length-1;e>=0;e--){if(n._targetList[e]===n._curTarget)return void(n._curIndex=e)}n._curIndex=0,n._curTarget=n._targetList[0]}},n._setTargetFocus=function(e){var t=n._curIndex;if(0!==n._targetList.length){if(e>=n._targetList.length?e=0:e<0&&(e=n._targetList.length-1),e===t&&n._curTarget)return n._curTarget.style.backgroundColor="#FF9632",void n.domUtils.scrollIntoView(n._curTarget);n._targetList[t].style.backgroundColor="yellow",n._curIndex=e,n._curTarget=n._targetList[n._curIndex],n._curTarget.style.backgroundColor="#FF9632",n.domUtils.scrollIntoView(n._curTarget)}},n._highlightSingle=function(e,t,r){var o,i,a,l=n.rangeUtils.getSelection();if(-1===r?n.rangeUtils.setRange(n.env.body,0):1===r&&n.rangeUtils.setRange(n.env.body,n.env.body.childNodes.length),n.env.win.find(e,!1,t,!0)){for((i=n.env.doc.createElement(d.TAG.TMP_HIGHLIGHT_TAG)).style.backgroundColor="yellow",a=(o=n.rangeUtils.getRange()).extractContents();a.firstChild;)i.appendChild(a.firstChild);return n.domUtils.isEmptyDom(i)?t?l.collapseToStart():l.collapseToEnd():(o.insertNode(i),t||n.rangeUtils.setRange(i,i.childNodes.length),n.domUtils.scrollIntoView(i)),!0}return!1},n.on=function(e,t){if(n.off(),!e)return!1;u.isArray(e)||(e=[e]),e.length>1&&(t=!1);for(var r=n.domUtils.getPageScroll(),o=0,i=e.length;o<i;o++)n._highlightAll(e[o],t);return n._initTargetList(),t?n._setTargetFocus(n._curIndex):!n.req.readerCommonEvent.isScrolled&&n._targetList.length>0&&(n.env.client.type.isWin||n.env.client.type.isMac||n.env.client.type.isLinux)?n.domUtils.scrollIntoView(n._targetList[0]):n.domUtils.setPageScrollTop(r.top),n._hasHighlight},n.off=function(){n.domUtils.peelTag(d.TAG.TMP_HIGHLIGHT_TAG),n.req.codeUtils&&n.req.codeUtils.highlight.clearAll()},n.next=function(){n._setTargetFocus(n._curIndex+1)},n.previous=function(){n._setTargetFocus(n._curIndex-1)},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._MaxUndo=100,n._codeMirrorDocList={},n._enable=!1,n.callback=[],n.stack=[],n.stackIndex=0,n._saveCmDocList=function(){var e,t,r,o=n.domUtils.getCmContainerList(n.env.body);for(r=o.length-1;r>=0;r--)(t=(e=o[r]).codeMirror)&&(n._codeMirrorDocList[e.id]=t.getDoc().copy(!0))},n._historyEvent={bind:function(){n._historyEvent.unbind(),n.env.event.add(d.EVENT.ON_KEY_DOWN,n._historyEvent.onKeyDown)},unbind:function(){n.env.event.remove(d.EVENT.ON_KEY_DOWN,n._historyEvent.onKeyDown)},onKeyDown:function(e){var t=e.keyCode||e.which;if(e.ctrlKey&&90===t||e.metaKey&&90===t&&!e.shiftKey)return n.undo(),void u.stopEvent(e);(e.ctrlKey&&89===t||e.metaKey&&89===t||e.metaKey&&90===t&&e.shiftKey)&&(n.redo(),u.stopEvent(e))}},n.init=function(){n.callback=[],n.stack=[],n.stackIndex=0},n.addCallback=function(e){if(e&&"function"==typeof e){for(var t=0,r=n.callback.length;t<r;t++)if(n.callback[t]===e)return;n.callback.push(e)}},n.applyCallback=function(){for(var e=n.getUndoState(),t=0,r=n.callback.length;t<r;t++)n.callback[t](e)},n.canSave=function(e,t){var n=function(e,t){var n,r,o=1;for(n=0,r=e.length-1;n<r;n++)if(e[n]!==t[n]){o=0;break}return o&&e[r]<t[r]&&(o=-1),o},r={add:!1,replace:!1,direct:0};return(e.content.length!==t.content.length||e.content.localeCompare(t.content))&&(r.direct=function(e,t){if(e.isCollapsed!==t.isCollapsed)return 0;if(e.start.length!==t.start.length||e.end.length!==t.end.length)return 0;var r=n(e.start,t.start);return r<1?r:r=n(e.end,t.end)}(e.focus,t.focus),0===r.direct||r.direct!==t.direct||!/^\s*$/g.test(e.focus.lastChar+t.focus.lastChar)&&/\s/.test(t.focus.lastChar)||Math.abs(e.focus.startOffset-t.focus.startOffset)>20?r.add=!0:r.replace=!0),r},n.getCodeMirrorDoc=function(e){var t=n._codeMirrorDocList[e]||null;return t&&(t=t.copy(!0)),t},n.getUndoState=function(){return{undoCount:n.stack.length,undoIndex:n.stackIndex}},n.redo=function(){if(n._enable&&!(n.stackIndex>=n.stack.length-1)){var e=n.stack[++n.stackIndex];e.type===d.HISTORY.TYPE.CODE_MIRROR?n.restoreCodeMirror("redo",e):(n._saveCmDocList(),n.restoreSnap(e.snap)),n.env.event.call(d.EVENT.AFTER_RESTORE_HISTORY,{type:e.type}),n.applyCallback(),e.type===d.HISTORY.TYPE.COMMON&&n.domUtils.focus()}},n.removeCallback=function(e){for(var t=0,r=n.callback.length;t<r;t++)if(n.callback[t]===e)return void n.callback.splice(t,1)},n.restoreCodeMirror=function(e,t){var r,o;n._enable&&t&&(r="undo"===e?t.nextChange.cmContainerId:t.cmContainerId,(o=n.domUtils.getCmById(n.env.body,r))&&("redo"===e?o.redo():o.undo()))},n.restoreSnap=function(e){if(n._enable&&e){var t,r;n.env.body.innerHTML=e.content;try{t=n.domUtils.getFromIndexList(e.focus.start),n.rangeUtils.setRange(t.dom,t.offset),e.focus.isCollapsed?n.rangeUtils.setRange(t.dom,t.offset,t.dom,t.offset):(r=n.domUtils.getFromIndexList(e.focus.end),n.rangeUtils.setRange(t.dom,t.offset,r.dom,r.offset)),n.rangeUtils.fixScroll()}catch(e){console.error(e)}}},n.saveSnap=function(e,t){if(n._enable&&(!n.env.compositionStart||t&&t.type!==d.HISTORY.TYPE.COMMON)){n.env.event.call(d.EVENT.BEFORE_SAVESNAP);var r={type:d.HISTORY.TYPE.COMMON};t&&t.type===d.HISTORY.TYPE.CODE_MIRROR&&(r.type=d.HISTORY.TYPE.CODE_MIRROR,r.cmContainerId=t.cmContainerId);var o,i,a,l,s,c,u,f={nextChange:r};if((s=n.stackIndex>0?n.stack[n.stackIndex-1]:null)&&s.nextChange.type===d.HISTORY.TYPE.CODE_MIRROR){if(l=s.cmContainerId,a=s.nextChange.cmContainerId,f.type=d.HISTORY.TYPE.CODE_MIRROR,f.cmContainerId=a,i=n.domUtils.getCmById(n.env.body,a)){if(n.stackIndex>=0&&n.stack.splice(n.stackIndex,n.stack.length-n.stackIndex),f.nextChange.type===d.HISTORY.TYPE.COMMON&&(f.snap=n.snapshot()),f.cmHistory=i.historySize(),l===a&&s.cmHistory.undo===f.cmHistory.undo&&s.cmHistory.redo===f.cmHistory.redo)return s.nextChange=f.nextChange,f.snap&&(s.snap=f.snap),void(e&&n.stackIndex--);n.stack.push(f),e||n.stackIndex++}}else f.type=d.HISTORY.TYPE.COMMON,o={add:!0,replace:!1,direct:0},c=n.snapshot(),!e&&s&&s.type===d.HISTORY.TYPE.COMMON&&(o=n.canSave(c,s.snap)),(o.add||o.replace)&&(c.direct=o.direct,n.stackIndex>=0&&n.stack.splice(n.stackIndex,n.stack.length-n.stackIndex),o.add?(f.snap=c,n.stack.push(f),e||n.stackIndex++):o.replace&&(u=s.snap,c.focus.startOffset=u.focus.startOffset,s.snap=c));n.stack.length>n._MaxUndo&&(n.stack.shift(),n.stackIndex--),n.applyCallback()}},n.snapshot=function(){var e=n.rangeUtils.getRange(),t={isCollapsed:!0,start:[],end:[],lastChar:null,startOffset:-1},r={content:n.env.body.innerHTML,focus:t};return e?(t.start=n.domUtils.getIndexList(e.startContainer),t.start.push(e.startOffset),t.isCollapsed=e.collapsed,e.collapsed?3===e.startContainer.nodeType&&e.startOffset>0&&(t.lastChar=e.startContainer.nodeValue.charAt(e.startOffset-1),t.startOffset=e.startOffset):(t.end=n.domUtils.getIndexList(e.endContainer),t.end.push(e.endOffset)),r):(t.start.push(0),r)},n.start=function(e,t){e&&e>0&&(n._MaxUndo=e),n._enable=!0,n._historyEvent.bind(),n.addCallback(t),n.applyCallback()},n.stop=function(){n._enable=!1,n.init(),n._historyEvent.unbind()},n.undo=function(){if(!n._enable||n.stackIndex<=0||0===n.stack.length)n.stackIndex=0;else{n.stackIndex>=n.stack.length&&n.saveSnap(!0);var e=n.stack[--n.stackIndex];e.nextChange.type===d.HISTORY.TYPE.CODE_MIRROR?n.restoreCodeMirror("undo",e):(n._saveCmDocList(),n.restoreSnap(e.snap)),n.env.event.call(d.EVENT.AFTER_RESTORE_HISTORY,{type:e.nextChange.type}),n.applyCallback()}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._imgCheck=function(e){var t=new RegExp("("+d.CLASS.IMG_NOT_DRAG+")|("+d.CLASS.IMG_ATTACHMENT+")","i"),r=!(!e||!n.domUtils.isTag(e,"img")||t.test(e.className)||!e.src);return r?!n.domUtils.isInWizTmp(e)&&(n.env.readonly?!n.domUtils.getParentByFilter(e,(function(e){if(!e)return!1;var t=e.getAttribute("href");return n.domUtils.isTag(e,"a")&&u.isCommonProtocol(t)}),!0):!n.domUtils.getParentByFilter(e,(function(e){return e&&n.domUtils.isTag(e,"a")&&u.isWizProtocol(e.getAttribute("href"))}),!0)):r},n._clickImgForRead=function(e){var t=e.target;return!!n.isImg(t)&&(n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizReaderClickImg,{src:t.src,imgList:n.env.client.type.isIOS?null:n.req.imgUtils.getAll(!0,!1)}),u.stopEvent(e),!0)},n._clickImgForEdit=function(e){var t=e.target;if(!n.isImg(t))return!1;n.env.client.type.isAndroid&&(n.rangeUtils.caretBackup(),n.rangeUtils.remove(),u.stopEvent(e));var r=n.env.body.querySelectorAll("img["+d.ATTR.IMG_EDITING+"]"),o={};o[d.ATTR.IMG_EDITING]="";for(var i=r.length-1;i>=0;i--)n.domUtils.attr(r[i],o);return o[d.ATTR.IMG_EDITING]=1,n.domUtils.attr(t,o),n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizEditorClickImg,{src:t.src}),!0},n._event={bind:function(){if(n._event.unbind(),!n.env.readonly||n.env.client.type.isIOS||n.env.client.type.isAndroid)n.env.event.add(d.EVENT.ON_CLICK,n._handler.onClick);else if(n.env.readonly&&(n.env.client.type.isWin||n.env.client.type.isMac||n.env.client.type.isLinux)){var e="click"===n.env.options.reader.clickImageEvent?d.EVENT.ON_CLICK:d.EVENT.ON_DBLCLICK;n.env.event.add(e,n._handler.onClick)}},unbind:function(){n.env.event.remove(d.EVENT.ON_CLICK,n._handler.onClick),n.env.event.remove(d.EVENT.ON_DBLCLICK,n._handler.onClick)}},n._handler={onClick:function(e){if(n.env.readonly)return n._clickImgForRead(e);if(n.env.client.type.isAndroid)return n._clickImgForEdit(e);if(n.isImg(e.target)){if(n.env.supportTouchEvent&&!n.req.editorBridge.isOutline)return;return n.env.supportTouchEvent||n.req.imgResize.initImageDragResize(e.target),n.req.imgResize.showMenuButton(e.target),!0}return!1}},n.init=function(){},n.bind=n._event.bind,n.unbind=n._event.unbind,n.isImg=function(e){return n._imgCheck(e)},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(2),u=n(1),f=(n(3),function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._event={bind:function(){n._event.unbind(),n.env.event.add(u.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.readonly||(n.req.imgResize.init(),n.req.imgResize.bind()),n.req.imgClick.init(),n.req.imgClick.bind(),n.req.svgClick.init(),n.req.svgClick.bind()},unbind:function(){n.env.event.remove(u.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.req.imgResize.unbind(),n.req.imgClick.unbind(),n.req.svgClick.unbind()}},n._handler={onSelectionChange:function(e){var t=n.req.editorBridge.isOutline;if(!n.env.readonly&&!t){var r=null,o=n.rangeUtils.getRange();o&&(r=n.domUtils.getParentByClass(o.startContainer,u.CLASS.IMG_TITLE,!0));for(var i=n.env.body.querySelectorAll(".".concat(u.CLASS.IMG_TITLE)),a=i.length-1;a>=0;a--){var l=i[a];l!==r&&n.domUtils.isEmptyDom(l)&&n.domUtils.remove(l)}}}},n.on=function(){n._event.bind(),n.req.imgUtils.initImgContainer()},n.off=function(){n._event.unbind()},n.isImg=function(e){return n.req.imgClick.isImg(e)},n.setImgFullPath=function(){for(var e=n.env.body.querySelectorAll("img"),t=new RegExp("^(\\.\\/)?"+n.env.indexFilesPath.escapeRegex()+"\\/","i"),r=e.length-1;r>=0;r--){var o=e[r],i=o.getAttribute("src");t.test(i)&&n.domUtils.attr(o,{src:i.replace(t,n.env.indexFilesFullPath)})}},n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"_createdTitleNode",value:function(){var e=this.env.doc.createElement("div");return e.appendChild(this.env.doc.createElement("br")),this.domUtils.addClass(e,u.CLASS.IMG_TITLE),this.domUtils.setContenteditable(e,!0),e}},{key:"rotationLeft",value:function(e){var t=this.req.imgResize.getSelectImgDom();this.req.imgUtils.rotatingImg(t,this.req.imgUtils.getImgRotate(t)+e)}},{key:"rotationRight",value:function(e){this.rotationLeft(0-e)}},{key:"deleteImg",value:function(){var e=this.req.imgResize.getSelectImgDom();this.req.imgResize.hide(),this.req.editorBridge.isOutline?this.req.outlineUtils.removeNodeImage(e):this.domUtils.remove(this.req.imgUtils.hasTitle(e)?e.parentNode:e)}},{key:"addTitle",value:function(){var e=this.req.imgResize.getSelectImgDom(),t=null;if(this.req.imgUtils.hasTitle(e))(t=e.parentNode.querySelector(".".concat(u.CLASS.IMG_TITLE)))||(t=this._createdTitleNode(),e.parentNode.appendChild(t));else{var n=this.env.doc.createElement("div");this.domUtils.addClass(n,u.CLASS.IMG_CONTAINER),t=this._createdTitleNode(),e.parentNode.replaceChild(n,e),n.appendChild(e),n.appendChild(t),this.domUtils.setContenteditable(n,!1)}this.rangeUtils.setRange(t,this.domUtils.getEndOffset(t))}}])&&i(n.prototype,r),d&&i(n,d),t}(d));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(2),u=n(1),f="img-click-event",h="addTitle",p="restoreZoom",m="deleteImage",g="showSubMenu",v="rotationRight",b=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._menuContainerDom=null,n._subMenuDom=null,n._curImg=null,n._event={bind:function(){n._event.unbind(),n.env.event.add(u.EVENT.ON_CLICK,n._handler.menuClick),n.env.event.add(u.EVENT.ON_RESIZE,n._handler.onResize)},unbind:function(){n.env.event.remove(u.EVENT.ON_CLICK,n._handler.menuClick),n.env.event.remove(u.EVENT.ON_RESIZE,n._handler.onResize)}},n._handler={menuClick:function(e){var t=n.domUtils.getParentByFilter(e.target,(function(e){return n.domUtils.hasClass(e,f)}),!0);if(null!==t){var r=!0;switch(t.getAttribute("data-type")){case h:n.req.imgCore.addTitle(),n.req.imgResize.resetHandlesSize(n._curImg);break;case m:n.req.imgCore.deleteImg();break;case p:n.req.imgResize.restoreZoom();break;case v:n.req.imgCore.rotationRight(90);break;case g:n._subMenuDom&&"block"===n._subMenuDom.style.display?n._hideSubMenu():n._showSubMenu(),r=!1}r&&n._hideSubMenu()}else n._hideSubMenu()},onResize:function(e){n._fixMenuPosition()}},n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"_createdMenu",value:function(e){if(null===this._menuContainerDom||!this.env.body.querySelector("#".concat(u.ID.IMAGE_MENU_CONTAINER))){var t=(this.req.editorBridge.isOutline?[]:[{name:this.lang.Img.AddTitle,type:h}]).concat([{name:this.lang.Img.RestoreZoom,type:p},{name:this.lang.Img.DeleteImage,type:m}]);this._menuContainerDom=this.env.doc.createElement(u.TAG.TMP_TAG),this._menuContainerDom.id=u.ID.IMAGE_MENU_CONTAINER,this._menuContainerDom.innerHTML='<div class="'.concat(u.CLASS.IMG_MENU," ").concat(u.CLASS.FLOAT_LAYER,'">')+'<div class="'.concat(u.CLASS.IMG_SUB_MENU_CONTAINER,'">')+'<button type="button" class="icon-button '.concat(f,'" data-type="').concat(g,'"><i class="editor-icon icon-image"></i><i class="editor-icon icon-down_arrow_small"></i></button>')+'<ul class="'.concat(u.CLASS.IMG_SUB_MENU," ").concat(u.CLASS.FLOAT_LAYER,'">')+t.reduce((function(e,t){return e+'<li class="'.concat(u.CLASS.IMG_SUB_MENU_ITEM," ").concat(f).concat(t.type===m?" is-del":"",'" data-type="').concat(t.type,'">').concat(t.name,"</li>")}),"")+"</ul></div></div>",this.domUtils.setContenteditable(this._menuContainerDom,!1),this.env.body.appendChild(this._menuContainerDom),this._event.bind()}this._curImg=e,this._fixMenuPosition()}},{key:"_fixMenuPosition",value:function(){var e=this._curImg;if(e){var t=this.domUtils.getOffset(e);this.domUtils.css(this._menuContainerDom,{display:"block",visibility:"hidden"}),this.domUtils.css(this._menuContainerDom,{top:"".concat(t.top+8,"px"),left:"".concat(t.left+e.clientWidth-this._menuContainerDom.clientWidth-6,"px"),display:"block",visibility:null})}}},{key:"_showSubMenu",value:function(){this._subMenuDom=this._menuContainerDom.querySelector(".".concat(u.CLASS.IMG_SUB_MENU));var e=this._subMenuDom.querySelector("[data-type=".concat(p,"]"));this.req.imgUtils.isResetSize(this._curImg)?e.style.display="block":e.style.display="none",this._subMenuDom.style.display="block"}},{key:"_hideSubMenu",value:function(){null===this._subMenuDom&&(this._subMenuDom=this._menuContainerDom.querySelector(".".concat(u.CLASS.IMG_SUB_MENU))),this._subMenuDom.style.display="none"}},{key:"hide",value:function(){this._menuContainerDom&&(this._menuContainerDom.style.display="none",this._hideSubMenu(),this._curImg=null)}},{key:"show",value:function(e){this._createdMenu(e)}}])&&i(n.prototype,r),d&&i(n,d),t}(d);e.exports=b},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._resizingHandle="",n._startOffsetX=null,n._startOffsetY=null,n._lastMouseX=null,n._lastMouseY=null,n._oppCornerX=null,n._oppCornerY=null,n._dragImgStart=!1,n._dragImg=null,n._curImg=void 0,n._cursorOri=void 0,n._cursor=void 0,n._canDragResize=function(e){if(!e)return!1;var t=e.getAttribute("class");return!t||-1===t.indexOf(d.CLASS.IMG_NOT_DRAG)},n._clearHandles=function(){n._removeImgAttributes(),n._removeHandles(),n._curImg=null,n.req.imgMenu.hide(),n.env.body.style.cursor=n._cursorOri},n._createHandles=function(){var e=n._getHandleContainer();if(e)return e;e=n.env.doc.createElement(d.TAG.TMP_TAG),n.domUtils.addClass(e,d.CLASS.IMG_RESIZE_CONTAINER),n.domUtils.setContenteditable(e,!1);var t={wiz_style:"unsave"};n.domUtils.attr(e,t);var r=n.env.doc.createElement("div");return n.domUtils.addClass(r,d.CLASS.IMG_RESIZE_HANDLE),n.domUtils.addClass(r,"rb"),n.domUtils.addClass(r,"editor-icon"),n.domUtils.addClass(r,"icon-zoom"),n.domUtils.attr(r,{"data-type":"rb"}),e.appendChild(r),n.env.body.appendChild(e),e},n._getHandleContainer=function(){var e=n.env.body.querySelector("."+d.CLASS.IMG_RESIZE_CONTAINER);return!e||e.length<1?null:e},n._initImage=function(e){if(e){n._removeImgAttributes(),n.domUtils.addClass(e,d.CLASS.IMG_RESIZE_ACTIVE),e.attributes[d.ATTR.IMG_RATE]=e.width/e.height,n._curImg=e;var t=n.domUtils.getIndex(e);n.rangeUtils.setRange(e.parentNode,t,e.parentNode,t+1)}},n._initImageDragResize=function(e){if(e&&e.tagName&&"img"===e.tagName.toLowerCase()&&n._canDragResize(e)){var t=n._createHandles();t&&(n.resetHandlesSize(e),n._initImage(e),n._event.bindContainer(t))}},n._removeHandles=function(){var e=n._getHandleContainer();e&&(n._event.unbindContainer(e),n.domUtils.remove(e))},n._removeImgAttributes=function(){var e=n.env.body.querySelectorAll("."+d.CLASS.IMG_RESIZE_ACTIVE);if(e&&0!==e.length)for(var t=e.length-1;t>=0;t--)n.domUtils.removeClass(e[t],d.CLASS.IMG_RESIZE_ACTIVE)},n.resetHandlesSize=function(e){if(e){var t=n._getHandleContainer();if(t){for(var r=t.querySelectorAll("."+d.CLASS.IMG_RESIZE_HANDLE),o={offset:n.domUtils.getOffset(e),width:e.width,height:e.height},i=n.domUtils.getOffset(n.env.body),a=0;a<r.length;a++){var l=r[a];n._setHandleSize(l,o,i),l.style.visibility="inherit"}n._curImg&&n.req.imgMenu.show(n._curImg)}}},n._scaleImgSize=function(e,t,r,o){if(o){var i=r*e,a=t/e;i<t?i=t:a=r,n.req.imgUtils.setImgWidth(o,i),o.height=a}},n._setHandleSize=function(e,t,r){if(t&&e){var o=t.offset,i=o.left-r.left,a=o.top-r.top,l=t.width,s=t.height,c=0,d=0;switch(e.getAttribute("data-type")){case"lt":c=i-7,d=a-7;break;case"tm":c=i+(l-7)/2,d=a-7;break;case"rt":c=i+l,d=a-7;break;case"rm":c=i+l,d=a+(s-7)/2;break;case"rb":c=i+l,d=a+s;break;case"bm":c=i+(l-7)/2,d=a+s;break;case"lb":c=i-7,d=a+s;break;case"lm":c=i-7,d=a+(s-7)/2}n.domUtils.css(e,{left:c+"px",top:d+"px"})}},n._showHandles=function(e){var t=n._getHandleContainer();t&&(t.style.display=e?"block":"none"),e||n._clearHandles()},n._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml),n.env.event.add(d.EVENT.ON_CUT,n._handler.onCut),n.env.supportTouchEvent?n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown):(n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.add(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown),n.env.event.add(d.EVENT.ON_RESIZE,n._handler.onResize))},bindContainer:function(e){n._event.unbindContainer(e),e.addEventListener("mousedown",n._handler.onContainerMouseDown)},bindResize:function(){n._event.unbindResize(),n.env.event.add(d.EVENT.ON_MOUSE_MOVE,n._handler.onMouseMove),n.env.event.add(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp)},unbind:function(){n.env.event.remove(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml),n.env.event.remove(d.EVENT.ON_CUT,n._handler.onCut),n.env.event.remove(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_MOUSE_MOVE,n._handler.onMouseMove),n.env.event.remove(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp),n.env.event.remove(d.EVENT.ON_RESIZE,n._handler.onResize),n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown)},unbindContainer:function(e){e.removeEventListener("mousedown",n._handler.onContainerMouseDown)},unbindResize:function(){n.env.event.remove(d.EVENT.ON_MOUSE_MOVE,n._handler.onMouseMove),n.env.event.remove(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp)}},n._handler={beforeGetDocHtml:function(){n._clearHandles()},onContainerMouseDown:function(e){var t=e.target||e.srcElement;n._resizingHandle=t.getAttribute("data-type");var r,o,i,a=n.env.body.querySelector("."+d.CLASS.IMG_RESIZE_ACTIVE);if(a){switch(r=e.pageX,o=e.pageY,i=n.domUtils.getOffset(a),n._resizingHandle){case"lt":n._startOffsetX=i.left-r,n._startOffsetY=i.top-o,n._oppCornerX=i.left+a.width,oppCornerY=i.top+a.height,n._cursor="nw-resize";break;case"tm":n._startOffsetX=void 0,n._startOffsetY=i.top-o,n._cursor="n-resize";break;case"rt":n._startOffsetX=r-a.width-i.left,n._startOffsetY=i.top-o,n._oppCornerX=i.left,oppCornerY=i.top+a.height,n._cursor="ne-resize";break;case"rm":n._startOffsetX=r-a.width-i.left,n._startOffsetY=void 0,n._cursor="e-resize";break;case"rb":n._startOffsetX=r-a.width-i.left,n._startOffsetY=o-a.height-i.top,n._cursor="se-resize";break;case"bm":n._startOffsetX=void 0,n._startOffsetY=o-a.height-i.top,n._oppCornerX=i.left/2,oppCornerY=i.top,n._cursor="s-resize";break;case"lb":n._startOffsetX=i.left-r,n._startOffsetY=o-a.height-i.top,n._oppCornerX=i.left+a.width,oppCornerY=i.top,n._cursor="sw-resize";break;case"lm":n._startOffsetX=i.left-r,n._startOffsetY=void 0,n._cursor="w-resize"}n._event.bindResize(),u.stopEvent(e)}},onCut:function(e){n._showHandles(!1)},onDrop:function(e){n.env.doc.removeEventListener("drop",n._handler.onDrop),n._curImg===n._dragImg&&n._clearHandles(),n._dragImgStart=!1,n._dragImg=null},onKeyDown:function(e){var t,r,o=e.keyCode||e.which;!n._curImg||8!==o&&46!==o||(t=n._curImg.parentNode)&&(r=n.domUtils.getIndex(n._curImg),n.rangeUtils.setRange(t,r,t,r+1)),n._showHandles(!1)},onMouseDown:function(e){var t=e.target||e.srcElement;n.req.imgUtils.checkMenu(t)||(n.domUtils.isTag(t,"img")&&!n.env.supportTouchEvent?(n._dragImgStart=!0,n._dragImg=t,n.env.doc.addEventListener("drop",n._handler.onDrop)):(n._dragImgStart=!1,n._dragImg=null),e.target!==n._curImg&&n.hide())},onMouseMove:function(e){var t,r,o,i,a,l=e.target||e.srcElement;if(l&&l===n._dragImg&&(i=n.domUtils.getIndex(e.target),a=l,n.rangeUtils.setRange(a.parentNode,i,a.parentNode,i+1)),(a=n.env.body.querySelector("."+d.CLASS.IMG_RESIZE_ACTIVE))&&(t=n.domUtils.getOffset(a),n._resizingHandle)){var s,c,u,f,h;switch(r=e.pageX,o=e.pageY,n.env.body.style.cursor=n._cursor,n._lastMouseX&&n._lastMouseY||(n._lastMouseX=r,n._lastMouseY=o),n._resizingHandle){case"tm":n.req.imgUtils.setImgWidth(a,a.width),o<t.top?a.height+=n._lastMouseY-o:(h=a.height-(o-n._lastMouseY)-n._startOffsetY,a.height=h<0?0:h);break;case"rm":f=r-t.left-n._startOffsetX,n.req.imgUtils.setImgWidth(a,f<0?0:f),a.height=a.height,a.attributes[d.ATTR.IMG_RATE]=a.width/a.height;break;case"bm":n.req.imgUtils.setImgWidth(a,a.width),a.height=h<0?0:h,a.attributes[d.ATTR.IMG_RATE]=a.width/a.height;break;case"lm":a.height=a.height,r<t.left?n.req.imgUtils.setImgWidth(a,a.width+n._lastMouseX-r):(f=a.width-(r-n._lastMouseX)-n._startOffsetX,n.req.imgUtils.setImgWidth(a,f<0?0:f));break;case"lt":s=Number(a.attributes[d.ATTR.IMG_RATE]),c=n._oppCornerX-r,u=oppCornerY-o,c=(c-=n._startOffsetX)<0?0:c,u=(u-=n._startOffsetY)<0?0:u,n._scaleImgSize(s,c,u,a);break;case"rt":s=Number(a.attributes[d.ATTR.IMG_RATE]),c=r-n._oppCornerX,u=oppCornerY-o,c=(c-=n._startOffsetX)<0?0:c,u=(u-=n._startOffsetY)<0?0:u,n._scaleImgSize(s,c,u,a);break;case"lb":s=Number(a.attributes[d.ATTR.IMG_RATE]),c=n._oppCornerX-r,u=o-oppCornerY,c=(c-=n._startOffsetX)<0?0:c,u=(u-=n._startOffsetY)<0?0:u,n._scaleImgSize(s,c,u,a);break;case"rb":s=Number(a.attributes[d.ATTR.IMG_RATE]),c=r-t.left,u=o-t.top,c=(c-=n._startOffsetX)<0?0:c,u=(u-=n._startOffsetY)<0?0:u,n._scaleImgSize(s,c,u,a)}if(a.style.cssText){var p=a.style.cssText;p=p.replace(/width:\s*\d+.?\d+px;?/gi,"width: "+a.width+"px").replace(/height:\s*\d+.?\d+px;?/gi,"height: "+a.height+"px"),a.style.cssText=p}n._lastMouseX=r,n._lastMouseY=o,n.resetHandlesSize(a)}},onMouseUp:function(e){n.env.doc.removeEventListener("drop",n._handler.onDrop),n._dragImgStart=!1,n._dragImg=null;e.target||e.srcElement;n._resizingHandle="",n._lastMouseX=void 0,n._lastMouseY=void 0,n._oppCornerX=void 0,oppCornerY=void 0,n._startOffsetX=void 0,n._startOffsetY=void 0,n.env.body.style.cursor=n._cursorOri},onResize:function(e){n.resetHandlesSize(n._curImg)}},n.init=function(){n._cursorOri=n.env.body.style.cursor||"",n.env.win.WizImgResizeOnGetHTML=function(){}},n.bind=n._event.bind,n.unbind=n._event.unbind,n.initImageDragResize=n._initImageDragResize,n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"getSelectImgDom",value:function(){return this._curImg}},{key:"hide",value:function(){this._showHandles(!1),this._removeImgAttributes()}},{key:"restoreZoom",value:function(){this.req.imgUtils.restoreSize(this._curImg),this.resetHandlesSize(this._curImg)}},{key:"showMenuButton",value:function(e){this._curImg=e,this.req.imgMenu.show(this._curImg)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(2),u=n(1),f="cancelUpload",h="reUpload",p=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._uploadDomMap=new Map,n._event={bind:function(){n._event.unbind(),n.env.event.add(u.EVENT.ON_CLICK,n._handler.clickHander)},unbind:function(){n.env.event.remove(u.EVENT.ON_CLICK,n._handler.clickHander)}},n._handler={clickHander:function(e){var t=e.target;if(void 0!==t.idKey&&n._uploadDomMap.has(t.idKey))switch(t.getAttribute("data-event-type")){case f:n.req.editorBridge.isOutline?n.req.outlineUtils.removeNodeImage(n._uploadDomMap.get(t.idKey)):n.domUtils.remove(n._uploadDomMap.get(t.idKey)),n._uploadDomMap.delete(t.idKey);var r=n.env.options.editor.callback.onCancelUploadImage;r&&r(t.idKey);break;case h:var o=n.domUtils.getParentByFilter(t,(function(e){return n.domUtils.hasClass(e,"wiz-img-upload-container")}));o.querySelector(".wiz-img-upload-progress").innerHTML="0%",n.domUtils.removeClass(o,"error"),t.innerHTML=n.lang.Img.cancelUpload,t.setAttribute("data-event-type",f);var i=n.env.options.editor.callback.onReuploadImage;i&&i(t.idKey)}}},n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._event.bind()}},{key:"createdUploadNode",value:function(e){var t=this.env.doc.createElement(u.TAG.TMP_TAG);e=void 0===e?Symbol():e,this._uploadDomMap.set(e,t),this.domUtils.addClass(t,"wiz-img-upload-container"),t.innerHTML='<div class="wiz-img-upload-progress">0%</div>';var n=this.env.doc.createElement("button");return n.type="button",n.innerHTML=this.lang.Img.cancelUpload,n.idKey=e,this.domUtils.addClass(n,"wiz-img-cancel-upload-btn"),n.setAttribute("data-event-type",f),t.appendChild(n),this.domUtils.setContenteditable(t,!1),this.req.frameViewUtils.onAdjustContainerSize(),{key:e,dom:t}}},{key:"onImgUploadProgress",value:function(e,t){var n=this;if(this._uploadDomMap.has(e)){var r=this._uploadDomMap.get(e);this.domUtils.getParentByFilter(r,(function(e){return n.domUtils.hasClass(e,u.CLASS.WIZ_BODY)}))&&(r.querySelector(".wiz-img-upload-progress").innerHTML="".concat(t,"%"))}}},{key:"onImgUploadComplete",value:function(e,t){var n=this;if(this._uploadDomMap.has(e)){var r=this._uploadDomMap.get(e);if(this.domUtils.getParentByFilter(r,(function(e){return n.domUtils.hasClass(e,u.CLASS.WIZ_BODY)}))){var o=this.env.doc.createElement("img");o.addEventListener("load",this.req.lazyLoadUtils._onImgLoad),o.src=t,r.parentNode.replaceChild(o,r)}this._uploadDomMap.delete(e)}}},{key:"onImgUploadError",value:function(e){var t=this;if(this._uploadDomMap.has(e)){var n=this._uploadDomMap.get(e);if(this.domUtils.getParentByFilter(n,(function(e){return t.domUtils.hasClass(e,u.CLASS.WIZ_BODY)}))){this.domUtils.addClass(n,"error"),n.querySelector(".wiz-img-upload-progress").innerHTML=this.lang.Img.uploadError;var r=n.querySelector(".wiz-img-cancel-upload-btn");r.innerHTML=this.lang.Img.reupload,r.setAttribute("data-event-type",h)}else this._uploadDomMap.delete(e);this.req.frameViewUtils.onAdjustContainerSize()}}},{key:"getUploadDom",value:function(e){return this._uploadDomMap.get(e)}}])&&i(n.prototype,r),d&&i(n,d),t}(d);e.exports=p},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._imgFilter=function(e,t,r){if(!e||n.domUtils.isInWizTmp(e)||e.className&&e.className.indexOf("wiz-todo")>-1)return!1;if(!r){var o=n.domUtils.getParentByTagName(e,"a",!1);if(o&&u.isWizProtocol(o.getAttribute("href")))return!1}var i=e.src;if(!i)return!1;var a;return(a=!/^(data):/.test(i))&&t?!/^(http|https|ftp):/.test(i):a},n.checkImgListCompleted=function(e){for(var t=!1,n=0;n<e.length;n++){if(!e[n].complete){t=!0;break}}return!t},n.getAll=function(e,t){var r=n.env.doc.images,o=[],i={};for(var a in r)if(r.hasOwnProperty(a)){var l=r[a],s=decodeURIComponent(l.src);n._imgFilter(l,e,t)&&!i[s]&&(o.push(s),i[s]=!0)}return o},n.getImageData=function(e){var t=n.getImageSize(e.src),r=n.env.doc.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,0,0),r.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"")},n.getImageSize=function(e){var t=new Image;t.src=e;var n=t.height;return{width:t.width,height:n}},n.initImgContainer=function(){var e=n.env.body.querySelectorAll("."+d.CLASS.IMG_CONTAINER);u.forEach(e,(function(e){n.domUtils.setContenteditable(e,!1)}));var t=n.env.body.querySelectorAll("."+d.CLASS.IMG_TITLE);u.forEach(t,(function(e){n.domUtils.setContenteditable(e,!n.env.readonly)}))},n.makeAttachmentDom=function(e,t){var r,o,i,a=[];return(r=n.env.doc.createElement("div")).style.margin="10px auto",(o=n.env.doc.createElement("a")).href="wiz://open_attachment?guid="+e,(i=n.env.doc.createElement("img")).src=t,i.style.verticalAlign="bottom",i.style.maxWidth="280px",n.domUtils.addClass(i,d.CLASS.IMG_ATTACHMENT),o.appendChild(i),r.appendChild(o),a.push(r),(r=n.env.doc.createElement("div")).appendChild(n.env.doc.createElement("br")),a.push(r),a},n.makeDomByPath=function(e){var t=[],r=[];if(e.indexOf("*")?r=e.split("*"):r.push(e),n.req.editorBridge.isOutline&&r.length>0){var o=n.env.doc.createElement("img");return o.src=r[0],t.push(o),t}for(var i=0,a=r.length;i<a;i++){var l=n.env.doc.createElement("div");t.push(l);var s=n.env.doc.createElement("img");s.src=r[i],l.insertBefore(s,null),(l=n.env.doc.createElement("div")).insertBefore(n.env.doc.createElement("br"),null),t.push(l)}return t},n.remove=function(e){for(var t=n.env.body.querySelectorAll(e),r=t.length-1;r>=0;r--){var o=t[r];o.parentElement.removeChild(o)}},n.replaceSrc=function(e,t){var r=n.env.body.querySelectorAll(e),o={};o[d.ATTR.IMG_EDITING]="";for(var i=r.length-1;i>=0;i--){var a=r[i];a.src=t,n.domUtils.attr(a,o)}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"getImgRotate",value:function(e){var t=e.style.transform.match(/rotate\((-?\d+)deg\)/);return t&&t[1]?parseFloat(t[1]):0}},{key:"rotatingImg",value:function(e,t){e.style.transform?e.style.transform=e.style.transform.replace(/rotate\((-?\d+)deg\)/,"rotate(".concat(t,"deg)")):e.style.transform="rotate(".concat(t,"deg)")}},{key:"checkMenu",value:function(e){return!!this.domUtils.getParentByFilter(e,(function(e){return e.id===d.ID.IMAGE_MENU_CONTAINER}))}},{key:"isResetSize",value:function(e){return e.getAttribute("width")||e.getAttribute("height")}},{key:"restoreSize",value:function(e){this.domUtils.attr(e,{width:"",height:""})}},{key:"hasTitle",value:function(e){return this.domUtils.hasClass(e.parentNode,d.CLASS.IMG_CONTAINER)}},{key:"setImgWidth",value:function(e,t){e.width=t}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1),n(3);var d=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(l)))).init=function(e){var t,o,i,a,l,s,c,d,u,f,h,p,m,g,v,b,y=n.env.win.requestAnimationFrame||n.env.win.setTimeout,_=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},S=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},E=function(e,t,n){n?(_(e,"load",t),_(e,"error",t)):(S(e,"load",t),S(e,"error",t))},C=function(e,n){return t.callback[e]?t.callback[e](n):null};return(u=0,f=function e(t){var n;u--,t&&(n=t.target||t.srcElement)&&(E(n,e),C("onLoad",[t])),(!t||u<0||!n)&&(u=0),0===u&&(clearTimeout(i),i=setTimeout((function(){b.onScroll()}),100))},h=function(){for(var e=t.imgContainer.querySelectorAll("."+t.imgClass),n=[],r=0;r<e.length;r++)n.push(e[r]);return n},p=function(e){var n,r=0,o=window.Date,i=function(){n=!1,r=+new o,e()},a=function(){setTimeout(i)},l=function(){y(a)};return function(e){if(!n){var i=t.delay-(+new o-r);n=!0,i<4&&(i=4),!0===e?l():setTimeout(l,i)}}}((function(){var e,n,r,o,i=h(),a=C("getAdjustRect",[]);if(a=a||{top:0,bottom:0},t.loadMode&&u<8&&(n=i.length))for(r=0;r<n;r++)i[r]&&(o=i[r].getBoundingClientRect(),e=v(t.scrollContainer)?t.scrollContainer.innerHeight||t.scrollContainer.document.documentElement.clientHeight:t.scrollContainer.clientHeight,o.top+a.top<=e+.5*t.expand&&o.bottom+a.top>=l&&g(i[r],!1))})),c=[],d=function(){for(;c.length;)c.shift()();s=!1},m=function(e){c.push(e),s||(s=!0,y(d))},g=function(e,r){var i,a;m((function(){i=e.getAttribute(t.srcAttr),a=e.getAttribute("data-style"),i&&(u++,E(e,f,!0),clearTimeout(o),o=setTimeout(f,2500),n.domUtils.removeClass(e,t.imgClass),C("setImg",[e])||e.setAttribute("src",i),e.removeAttribute(t.srcAttr),a&&(e.setAttribute("style",a),e.removeAttribute("data-style")))}))},v=function(e){return e&&"object"===r(e)&&"setInterval"in e},b={scrollTimer:null,afterScroll:function(){t.loadMode=3,p()},onload:function(){t.loadMode=3,S(t.scrollContainer,"scroll",b.onScroll),_(t.scrollContainer,"scroll",b.onScroll),setTimeout((function(){b.onScroll()}),100)},onScroll:function(){3===t.loadMode&&(t.loadMode=2),clearTimeout(b.scrollTimer),b.scrollTimer=setTimeout(b.afterScroll,150)}},{init:function(e){var n={imgWin:window.document,imgContainer:null,scrollContainer:null,imgClass:"lazyload",srcAttr:"data-src",expand:359,delay:99,callback:{setImg:null,onLoad:null,getAdjustRect:null}};t=function(e,t){if("string"==typeof e)return t;var n,r;for(n in e)r=e[n],e.hasOwnProperty(n)&&void 0!==r&&(t[n]=r);return t}(e,n),a=t.imgWin,h().length&&(l=-t.expand,/d%|^c/.test(a.document.readyState)?b.onload():(S(a,"load",b.onload),_(a,"load",b.onload),S(a,"DOMContentLoaded",p),_(a,"DOMContentLoaded",p)),p(!0))}}).init(e)},n}var n,d,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(d=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,d),u&&i(n,u),t}(n(2));e.exports=d},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=(n(3),function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._imgLoadTimerForIe=null,n._onImgLoad=function(){n.req.frameViewUtils.onAdjustContainerSize(),n.env.browser.isIe&&(clearTimeout(n._imgLoadTimerForIe),n._imgLoadTimerForIe=setTimeout((function(){n.req.frameViewUtils.onAdjustContainerSize()}),2e3))},n.imgPreprocess=function(e){if(n.env.options.lazyLoad.enable){e=e.replace(/(<img[^>]*)(\s+src\s*=)\s*['"]([^>'"]*)['"]([^>]*>)/gi,'$1 data-src="$3"$4')}return e},n.init=function(){if(n.env.options.lazyLoad.enable){for(var e=n.env.body.querySelectorAll("img[data-src]"),t=e.length-1;t>=0;t--){var r=e[t],o=r.getAttribute("data-src");if(!o)return void r.removeAttribute("data-src");n.domUtils.hasClass(r,"no-lazyload")||n.domUtils.hasClass(r,d.CLASS.TODO_CHECKBOX)||n.domUtils.hasClass(r,d.CLASS.TODO_AVATAR)?(r.addEventListener("load",n._onImgLoad),r.setAttribute("src",o),r.removeAttribute("data-src")):n.domUtils.addClass(r,"wiz-lazyload")}var i={imgWin:n.env.win,imgContainer:n.env.body,scrollContainer:n.env.scrollContainer,imgClass:"wiz-lazyload",srcAttr:"data-src",callback:{onLoad:n._onImgLoad,getAdjustRect:function(){return n.env.frame.dom?n.env.frame.dom.getBoundingClientRect():null}}};n.req.lazyLoadCore.init(i)}},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(n(2)));e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=(n(3),function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown)},unbind:function(){n.env.event.remove(d.EVENT.ON_KEY_DOWN,n._handler.onKeyDown)}},n._handler={onKeyDown:function(e){var t,r,o,i,a,l,s=e.keyCode||e.which;if(/^space$/i.test(e.code)&&(s=32),(32===s||13===s)&&(i=n.rangeUtils.getRange())){for(t=(i=i.cloneRange()).startContainer;1===t.nodeType&&i.startOffset>0&&(t=i.startContainer.childNodes[i.startOffset-1]);)i.setStart(t,n.domUtils.getEndOffset(t)),i.collapse(!0),t=i.startContainer;do{if(0===i.startOffset){for(t=i.startContainer.previousSibling;t&&1===t.nodeType;)t=t.lastChild;if(!t||n.domUtils.isFillChar(t,!1))break;a=t.nodeValue.length}else t=i.startContainer,a=i.startOffset;i.setStart(t,a-1),l=i.toString().charAt(0)}while(!/\[|\)/.test(l));var c=i.toString();if(c.replace(d.FILL_CHAR_REG,"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){if(/\[\s*(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(c)||/\[[^\]]*]\(\s*(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(c))return;if(!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(c)&&!/\s+(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(c))return;for(;i.toString().length&&(c=i.toString(),!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(c));)try{i.setStart(i.startContainer,i.startOffset+1)}catch(e){for(t=i.startContainer;!(r=t.nextSibling);){if(n.domUtils.isBody(t))return;t=t.parentNode}i.setStart(r,0)}if(n.domUtils.getParentByTagName(i.startContainer,"a",!0,null))return;n.req.historyUtils.saveSnap(!1);var u,f=n.env.doc.createElement("a"),h=n.env.doc.createTextNode(" "),p=i.extractContents();f.href=p.textContent,f.appendChild(n.env.doc.createTextNode(p.textContent)),u=f.getAttribute("href").replace(d.FILL_CHAR_REG,""),u=/^(?:https?:\/\/)/gi.test(u)?u:"http://"+u,f.href=u,i.insertNode(f),f.parentNode.insertBefore(h,f.nextSibling),i.setStart(h,0),i.collapse(!0),o=n.rangeUtils.getSelection(),n.rangeUtils.remove(),o.addRange(i)}}}},n.off=function(){n._event.unbind(),n.req.linkMenu.off()},n.on=function(){n.env.options.reader.type!==d.NOTE_READER_TYPE.MARKDOWN&&(n.env.readonly||n.env.client.type.isPhone||n.env.client.type.isPad||n.req.linkMenu.on(),n._event.bind())},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(n(2)));e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._changeTimer=null,n._hideTimer=null,n._showTimer=null,n._tooltipObj=null,n._hrefInput=null,n._hrefInputIsFocus=!1,n._cancelBtn=null,n._tooltipId="wiz-link-toolbar",n._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.ON_MOUSE_OVER,n._handler.onMouseOver),n.env.event.add(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory),n.env.event.add(d.EVENT.ON_COMPOSITION_END,n._handler.onCompositionEnd),n.env.event.add(d.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange)},unbind:function(){n.env.event.remove(d.EVENT.ON_MOUSE_OVER,n._handler.onMouseOver),n.env.event.remove(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory),n.env.event.remove(d.EVENT.ON_COMPOSITION_END,n._handler.onCompositionEnd),n.env.event.remove(d.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange)}},n._handler={afterRestoreHistory:function(){var e=n.env.body.querySelector("#"+n._tooltipId);e&&n.domUtils.remove(e)},onBlur:function(){n._hrefInputIsFocus=!1},onCancel:function(){n._hideMenu(),n.req.linkUtils.setLinkRange(n._tooltipObj.link),n.req.linkUtils.removeSelectedLink()},onChange:function(){n.env.compositionStart||(clearTimeout(n._changeTimer),n._changeTimer=setTimeout((function(){n._changeHref()}),200))},onCompositionEnd:function(){n._changeHref()},onFocus:function(){n._hrefInputIsFocus=!0},onKeydown:function(e){n.env.compositionStart||(13===(e.keyCode||e.which)?(n._hideMenu(),n.req.linkUtils.setLinkRange(n._tooltipObj.link),u.stopEvent(e)):u.stopEventBubble(e))},onMouseOver:function(e){if(!n._hrefInputIsFocus){var t=e.target,r=n.domUtils.getParentByTagName(t,["a"],!0);if(clearTimeout(n._showTimer),!r||u.isWizProtocol(r.getAttribute("href"))||n.domUtils.isInWizTmp(r)){if(clearTimeout(n._hideTimer),n._tooltipObj&&(t===n._tooltipObj.container||n.domUtils.isParent(t,n._tooltipObj.container)))return;n._tooltipObj&&n._tooltipObj.isShow()&&(n._hideTimer=setTimeout((function(){n._changeHref(),n._hideMenu()}),200))}else clearTimeout(n._hideTimer),n._showTimer=setTimeout((function(){n._showMenu(r)}),200)}},onSelectionChange:function(){if(n._tooltipObj&&n._tooltipObj.isShow()){var e=n.rangeUtils.getRange();e.startContainer===n._tooltipObj.container||n.domUtils.isParent(e.startContainer,n._tooltipObj.container)||n._hideMenu()}}},n._changeHref=function(){if(clearTimeout(n._changeTimer),n._tooltipObj&&n._tooltipObj.isShow()){var e=n._tooltipObj.link;if(n._hrefInput.value!==e.getAttribute("href")){n.req.historyUtils.saveSnap(!1);var t=n._hrefInput.value,r=e.innerHTML;u.isCommonProtocol(t)&&u.isCommonProtocol(r)&&(e.innerText=t),n.domUtils.attr(e,{href:t}),n.req.linkUtils.setLinkRange(n._tooltipObj.link),n._tooltipObj&&n._tooltipObj.isShow()&&n._hrefInput.focus()}}},n._createMenu=function(){n._tooltipObj=n.req.tooltip.create(n._tooltipId);var e=n.env.doc.createElement("div");n._hrefInput=n.env.doc.createElement("input"),n._cancelBtn=n.env.doc.createElement("div"),n._cancelBtn.innerHTML='<svg style="fill:currentColor;width:100%;height:100%;" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"></path></svg>',n.domUtils.css(e,{display:"flex","white-space":"nowrap","align-items":"center",padding:"0 16px 0 0",height:"100%"}),n.domUtils.attr(n._hrefInput,{spellcheck:"false"}),n.domUtils.css(n._hrefInput,{padding:"0 16px",border:0,"background-color":"transparent",color:"#FFFFFF",outline:"none","font-size":"14px",height:"30px"}),n.domUtils.css(n._cancelBtn,{width:"16px",height:"16px",display:"inline-block",color:"#FFFFFF","line-height":"1",cursor:"pointer"}),n.domUtils.css(n._tooltipObj.container,{"background-color":"rgba(0,0,0, 0.8)",border:"none",height:"32px",padding:"0"}),n.domUtils.css(n._tooltipObj.arrow,{display:"none"}),n.domUtils.css(n._tooltipObj.arrowBg,{"border-bottom-color":"rgba(0,0,0, 0.8)"}),e.appendChild(n._hrefInput),e.appendChild(n._cancelBtn),n._tooltipObj.container.appendChild(e),n._hrefInput.addEventListener("propertychange",n._handler.onChange),n._hrefInput.addEventListener("input",n._handler.onChange),n._hrefInput.addEventListener("keydown",n._handler.onKeydown),n._hrefInput.addEventListener("focus",n._handler.onFocus),n._hrefInput.addEventListener("blur",n._handler.onBlur),n._cancelBtn.addEventListener("click",n._handler.onCancel)},n._hideMenu=function(){n._tooltipObj&&(n._handler.onBlur(),n._tooltipObj.hide())},n._showMenu=function(e){if(n._tooltipObj&&n._tooltipObj.isShow()){if(n._tooltipObj.link===e)return;n._changeHref()}n._tooltipObj||n._createMenu(),n._tooltipObj.link=e,n._hrefInput.value=e.getAttribute("href"),n.env.body.appendChild(n._tooltipObj.container,d.TYPE.LAYOUT.TOP),n._tooltipObj.show(e)},n.off=function(){n._event.unbind(),n._tooltipObj&&n._tooltipObj.hide()},n.on=function(){n._event.bind()},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1);var d=n(3),u=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._fixARange=function(){var e,t,r,o,i=n.rangeUtils.getRange();i&&((e=n._getA(i.startContainer,i.startOffset))?t=0:(e=i.startContainer,t=i.startOffset),i.collapsed?(r=e,o=n.domUtils.getEndOffset(e)):(r=n._getA(i.endContainer,i.endOffset))?o=n.domUtils.getEndOffset(r):(r=i.endContainer,o=i.endOffset),n.rangeUtils.setRange(e,t,r,o))},n._getA=function(e,t){return 1===e.nodeType&&e.childNodes.length>t&&(e=e.childNodes[t]),n.domUtils.getParentByTagName(e,"a",!0)},n.getCurrentLink=function(){var e=n.rangeUtils.getRange();if(!e)return"";var t=n.domUtils.getParentByTagName(e.startContainer,"a",!0);return t?t.href:""},n.hasLinkFromRange=function(){var e,t=n.rangeUtils.getRange();if(!t)return!1;t.collapsed?e=n.domUtils.getParentByTagName(t.startContainer,["a"],!0):e=t.cloneContents().querySelector("a");return!!e},n.onClickLink=function(e){if(!n.env.readonly&&(n.env.client.type.isPhone||n.env.client.type.isPad))return!1;var t=e.target,r=n.domUtils.getParentByTagName(t,["a"],!0),o=r&&r.getAttribute("href")||"";if(!o)return d.stopEventDefault(e),!1;if(o.indexOf("javascript:")>-1)return d.stopEventDefault(e),!1;if(/^#/.test(o)){if(!n.env.client.type.isWeb)return!0;var i=n.env.doc.getElementById(o.substr(1));return i&&i.scrollIntoView(!0),d.stopEventDefault(e),!0}return location.origin||(location.origin=location.protocol+"//"+location.host),0===o.indexOf("/")?o=location.origin+o:d.isCommonProtocol(o)||(o=location.origin+location.pathname+"/"+o),!!d.isCommonProtocol(o)&&(n.env.options.callback.onClickLink&&!n.env.options.callback.onClickLink(e,o,n.env.readonly)||(n.env.win.open(o),d.stopEventDefault(e)),!0)},n.removeSelectedLink=function(){n._fixARange(),n.req.historyUtils.saveSnap(!1),n.req.commandExtend.execCommand("unlink",!1,!1),n.rangeUtils.collapse(!1)},n.setCurrentLink=function(e){e&&(n._fixARange(),n.req.historyUtils.saveSnap(!1),n.req.commandExtend.execCommand("createLink",!1,e),n.rangeUtils.collapse(!1))},n.setLinkRange=function(e){n.rangeUtils.setRange(e,e.childNodes.length)},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(n(2));e.exports=u},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;o="object"===r(t)?t:{},function(){function e(e){return e}function t(e){return!1}function n(){}function r(){}n.prototype={chain:function(t,n){var r=this[t];if(!r)throw new Error("unknown hook "+t);this[t]=r===e?n:function(e){var t=Array.prototype.slice.call(arguments,0);return t[0]=r.apply(null,t),n.apply(null,t)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(t){this[t]=e},addFalse:function(e){this[e]=t}},o.HookCollection=n,r.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},o.Converter=function(t){var o,i,a,l,s=this.hooks=new n;s.addNoop("plainLinkText"),s.addNoop("preConversion"),s.addNoop("postNormalization"),s.addNoop("preBlockGamut"),s.addNoop("postBlockGamut"),s.addNoop("preSpanGamut"),s.addNoop("postSpanGamut"),s.addNoop("postConversion");var c,d,u,f,h,p=e,m=e;(t=t||{}).nonAsciiLetters&&(c=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,d="Q".charCodeAt(0),u="A".charCodeAt(0),f="Z".charCodeAt(0),h="a".charCodeAt(0)-f-1,p=function(e){return e.replace(c,(function(e){for(var t,n=e.charCodeAt(0),r="";n>0;)(t=n%51+u)>=d&&t++,t>f&&(t+=h),r=String.fromCharCode(t)+r,n=n/51|0;return"Q"+r+"Q"}))},m=function(e){return e.replace(/Q([A-PR-Za-z]{1,3})Q/g,(function(e,t){for(var n,r=0,o=0;o<t.length;o++)(n=t.charCodeAt(o))>f&&(n-=h),n>d&&n--,r=51*r+(n-=u);return String.fromCharCode(r)}))});var g=t.asteriskIntraWordEmphasis?function(e){return-1===e.indexOf("*")&&-1===e.indexOf("_")?e:(e=(e=(e=p(e)).replace(/(?=[^\r][*_]|[*_])(^|(?=\W__|(?!\*)[\w\W_]\*\*|\w\*\*\w)[^\r])(\*\*|__)(?!\2)(?=\S)((?:|[^\r]*?(?!\2)[^\r])(?=\S_|\w|.\*\*(?:[\w\W_]|$)).)(?=__(?:\W|$)|\*\*(?:[^*]|$))\2/g,"$1<strong>$3</strong>")).replace(/(?=[^\r][*_]|[*_])(^|(?=\W_|(?!\*)(?:[\w\W_]\*|\D\*(?=\w)\D))[^\r])(\*|_)(?!\2\2\2)(?=\S)((?:(?!\2)[^\r])*?(?=[^\s_]_|(?=[\w\W])\D\*\D|[^\s*]\*(?:[\w\W_]|$)).)(?=_(?:\W|$)|\*(?:[^*]|$))\2/g,"$1<em>$3</em>"),m(e))}:function(e){return-1===e.indexOf("*")&&-1===e.indexOf("_")?e:(e=(e=(e=p(e)).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>")).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),m(e))};function v(e){return e=(e=(e=(e=(e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n*<\/\2>[ \t]*(?=\n+))/gm,y)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,y)).replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,y)).replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,y)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,y)}function b(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(a.push(e)-1)+"K\n\n"}function y(e,t){return b(t)}this.makeHtml=function(e){if(o)throw new Error("Recursive call to converter.makeHtml");return o=new r,i=new r,a=[],l=0,e=(e=x(e="\n\n"+(e=(e=(e=(e=(e=s.preConversion(e)).replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n")).replace(/^[ \t]+$/gm,""),e=(e=(e=function(e){return e=e.replace(/~E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)}))}(e=S(e=function(e){return e=e.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(\n+)/gm,(function(e,t,n,r,a,l,s){return t=t.toLowerCase(),o.set(t,L(n)),a?r+s:(l&&i.set(t,l.replace(/"/g,"&quot;")),"")}))}(e=v(e=s.postNormalization(e)))))).replace(/~D/g,"$$")).replace(/~T/g,"~"),e=s.postConversion(e),a=i=o=null,e};var _=function(e){return S(e)};function S(e,n,r){return e=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(e,t){var n=t;return b("<blockquote>\n"+(n=(n=(n=S(n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""))).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")})))+"\n</blockquote>")}))}(e=function(e){return e=(e=(e+="~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(e,t,n){var r=t,o=n;return"\n\n"+(r="<pre><code>"+(r=(r=(r=x(r=N(D(r)))).replace(/^\n+/g,"")).replace(/\n+$/g,""))+"\n</code></pre>")+"\n\n"+o}))).replace(/~0/,"")}(e=function(e,t){e+="~0";var n,r=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]*?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;l?e=e.replace(r,(function(e,r,o){var i=w(r,n=O(o),t),a=i.list_str.replace(/\s+$/,"");return a="<"+n+">"+a+"</"+i.list_type+">\n\n",n=i.list_type,a})):(r=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,e=e.replace(r,(function(e,t,r,o){var i=t,a=w(r=r.replace(/<br\/?>/g," \n"),n=O(o)),l=i+("<"+n)+">\n"+a.list_str+"</"+a.list_type+">\n\n";return n=a.list_type,l})));return e=e.replace(/~0/,"")}(e=(e=(e=(e=function(e){return e=(e=(e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,(function(e,t){return"<h1>"+E(t)+"</h1>\n\n"}))).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,(function(e,t){return"<h2>"+E(t)+"</h2>\n\n"}))).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,(function(e,t,n){var r=t.length;return"<h"+r+">"+E(n)+"</h"+r+">\n\n"}))}(e=s.preBlockGamut(e,_))).replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,"<hr />\n")))),e=s.postBlockGamut(e,_),t.customBlockGamut&&(e=t.customBlockGamut(e)),e=function(e,t,n){for(var r=(e=(e=e.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],i=/~K(\d+)K/,l=r.length,s=0;s<l;s++){var c=r[s];i.test(c)?o.push(c):/\S/.test(c)&&(c=(c=E(c)).replace(/^([ \t]*)/g,n?"":"<p>"),n||(c+="</p>"),o.push(c))}if(!t){l=o.length;for(s=0;s<l;s++)for(var d=!0;d;)d=!1,o[s]=o[s].replace(/~K(\d+)K/g,(function(e,t){return d=!0,a[t]}))}return o.join("\n\n")}(e=v(e),n,r)}function E(e){return e=L(e=(e=function(e){e=e.replace(I,M);return e=e.replace(/<((https?|ftp):[^'">\s]+)>/gi,(function(e,t){return'<a href="'+R(t)+'">'+s.plainLinkText(t)+"</a>"}))}(e=function(e){return-1===e.indexOf("[")?e:e=(e=(e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,C)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,C)).replace(/(\[([^\[\]]+)\])()()()()()/g,C)}(e=function(e){return-1===e.indexOf("![")?e:e=(e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,A)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,A)}(e=function(e){return e=(e=e.replace(/\\(\\)/g,P)).replace(/\\([`*_{}\[\]()>#+-.!])/g,P)}(e=function(e){return e=e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,(function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=k(t,"!"==e.charAt(1)?"\\`*_/":"\\`*_")}))}(e=function(e){return e=e.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,(function(e,t,n,r,o){var i=r;return t+"<code>"+(i=(i=N(i=(i=i.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""))).replace(/:\/\//g,"~P"))+"</code>"}))}(e=s.preSpanGamut(e)))))))).replace(/~P/g,"://")),e=(e=g(e)).replace(/  +\n/g," <br>\n"),e=s.postSpanGamut(e)}function C(e,t,n,r,a,l,s,c){null==c&&(c="");var d=t,u=n.replace(/:\/\//g,"~P"),f=r.toLowerCase(),h=a,p=c;if(""==h)if(""==f&&(f=u.toLowerCase().replace(/ ?\n/g," ")),h="#"+f,null!=o.get(f))h=o.get(f),null!=i.get(f)&&(p=i.get(f));else{if(!(d.search(/\(\s*\)$/m)>-1))return d;h=""}var m='<a href="'+(h=R(h))+'"';return""!=p&&(m+=' title="'+(p=k(p=T(p),"*_"))+'"'),m+=">"+u+"</a>"}function T(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function A(e,n,r,a,l,s,c,d){var u=n,f=r,h=a.toLowerCase(),p=l,m=d;if(m||(m=""),""==p){if(""==h&&(h=f.toLowerCase().replace(/ ?\n/g," ")),p="#"+h,null==o.get(h))return u;p=o.get(h),null!=i.get(h)&&(m=i.get(h))}else t.imgSrcFilter&&(p=t.imgSrcFilter(p));f=k(T(f),"*_[]()");var g='<img src="'+(p=k(p,"*_"))+'" alt="'+f+'"';return g+=' title="'+(m=k(m=T(m),"*_"))+'"',g+=" />"}function O(e){return e.search(/[*+-]/g)>-1?"ul":"ol"}function w(e,t,n){l++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var r=new RegExp("(^[ \\t]*)([*+-]|\\d+[.])[ \\t]+([^\\r]*?(\\n+))(?=(~0|\\1([*+-]|\\d+[.])[ \\t]+))","gm"),o=!1;return e=(e=e.replace(r,(function(e,n,r,i){var a=i,l=O(r),s=/\n\n$/.test(a),c=s||a.search(/\n{2,}/)>-1,d=/^\[( |x)\]/.test(a),u=c||o;a=S(D(a),!0,!u);var f="";return l!=t&&(f="</"+t+">\n<"+l+">\n",t=l),f+=d?"<li class='wiz-md-todo-list-item'>":"<li>",o=s,f+=a+"</li>\n"}))).replace(/~0/g,""),l--,{list_str:e,list_type:t}}function N(e){return e=k(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),"*_{}[]\\",!1)}function L(e){return e=(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?!([a-z\/?!][^<>]*>)|~D)/gi,"&lt;")}var I=new RegExp('(="|<)?\\b(https?|ftp)(://[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]*[-A-Z0-9+&@#/%=~_|[\\])])(?=$|\\W)',"gi"),U=new RegExp("[-A-Z0-9+&@#/%=~_|[\\])]","i");function M(e,t,n,r,o,i){if(/^<[^<>]*(https?|ftp)/.test(i))return e;if(t)return e;if(")"!==r.charAt(r.length-1))return"<"+n+r+">";for(var a=r.match(/[()]/g),l=0,s=0;s<a.length;s++)"("===a[s]?l<=0?l=1:l++:l--;var c="";if(l<0){var d=new RegExp("\\){1,"+-l+"}$");r=r.replace(d,(function(e){return c=e,""}))}if(c){var u=r.charAt(r.length-1);U.test(u)||(c=u+c,r=r.substr(0,r.length-1))}return"<"+n+r+">"+c}function D(e){return e=(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}function x(e){if(!/\t/.test(e))return e;var t,n=["    ","   ","  "," "],r=0;return e.replace(/[\n\t]/g,(function(e,o){return"\n"===e?(r=o+1,e):(t=(o-r)%4,r=o+1,n[t])}))}function R(e){return e=k(e=T(e),"*_:()[]")}function k(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var o=new RegExp(r,"g");return e=e.replace(o,P)}function P(e,t){return"~E"+t.charCodeAt(0)+"E"}}}(),e.exports=o},function(e,t){var n={};!function(){var e=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr|ul|ol|li)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");function t(e){return e.replace(/^\s+|\s+$/g,"")}function r(e){return e.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function o(e,t){return-1!=e.indexOf(t)}function i(e){return""!=e.charAt(0)&&(e=""+e),""!=e.charAt(e.length-1)&&(e+=""),e}function a(e){return""==e.charAt(0)&&(e=e.substr(1)),""==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}function l(t,n){return r=s(t,n),o=e,r.replace(/<[^>]*>?/gi,(function(e){return e.match(o)?e:""}));var r,o}function s(e,t){var n=t.blockGamutHookCallback(e);return n=(n=function(e){return e=e.replace(/~E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)}))}(n)).replace(/~D/g,"$$").replace(/~T/g,"~"),n=t.previousPostConversion(n)}function c(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),n.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.codeMirror=!1,this.tableClass="",this.tabWidth=4},n.Extra.init=function(e,t){var r=new n.Extra,i=[],a=[],l=[],s=["unHashExtraBlocks"];return(t=t||{}).extensions=t.extensions||["all"],o(t.extensions,"all")&&(t.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","todo_list","strikethrough","newlines"]),a.push("wrapHeaders"),o(t.extensions,"todo_list")&&a.push("todo_list"),o(t.extensions,"attr_list")&&(i.push("hashFcbAttributeBlocks"),a.push("hashHeaderAttributeBlocks"),s.push("applyAttributeBlocks"),r.attributeBlocks=!0),o(t.extensions,"fenced_code_gfm")&&(a.push("fencedCodeBlocks"),i.push("fencedCodeBlocks")),o(t.extensions,"tables")&&a.push("tables"),o(t.extensions,"def_list")&&a.push("definitionLists"),o(t.extensions,"footnotes")&&(i.push("stripFootnoteDefinitions"),a.push("doFootnotes"),s.push("printFootnotes")),o(t.extensions,"smartypants")&&s.push("runSmartyPants"),o(t.extensions,"strikethrough")&&l.push("strikethrough"),o(t.extensions,"newlines")&&l.push("newlines"),e.hooks.chain("postNormalization",(function(e){return r.doTransform(i,e)+"\n"})),e.hooks.chain("preBlockGamut",(function(e,t){return r.blockGamutHookCallback=t,e=function(e){return e.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}(e),e=function(e){return e.replace(/~I/g,"|").replace(/~i/g,":")}(e=r.doTransform(a,e)+"\n")})),e.hooks.chain("postSpanGamut",(function(e){return r.doTransform(l,e)})),r.previousPostConversion=e.hooks.postConversion,e.hooks.chain("postConversion",(function(e){return e=r.doTransform(s,e),r.hashBlocks=[],r.footnotes={},r.usedFootnotes=[],e})),"highlighter"in t&&(r.googleCodePrettify="prettify"===t.highlighter,r.highlightJs="highlight"===t.highlighter,r.codeMirror="codeMirror"===t.highlighter),"table_class"in t&&(r.tableClass=t.table_class),r.converter=e,r},n.Extra.prototype.doTransform=function(e,t){for(var n=0;n<e.length;n++)t=this[e[n]](t);return t},n.Extra.prototype.hashExtraBlock=function(e){return"\n<p>~X"+(this.hashBlocks.push(e)-1)+"X</p>\n"},n.Extra.prototype.hashExtraInline=function(e){return"~X"+(this.hashBlocks.push(e)-1)+"X"},n.Extra.prototype.unHashExtraBlocks=function(e){var t=this;return function n(){var r=!1;e=e.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,(function(e,n){r=!0;var o=parseInt(n,10);return t.hashBlocks[o]})),!0===r&&n()}(),e},n.Extra.prototype.wrapHeaders=function(e){function t(e){return"\n"+e+"\n"}return e=(e=(e=e.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,t)).replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,t)).replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,t)};var d="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",u=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+d+"[ \\t]*(?:\\n|0x03)","gm"),f=new RegExp("^(.*)[ \\t]+"+d+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),h=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+d+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");function p(e,t){var n=t;return n=(n=(n=(n=(n=(n=(n=n.replace(/&\#8220;/g,'"')).replace(/&\#8221;/g,'"')).replace(/&\#8216;/g,"'")).replace(/&\#8217;/g,"'")).replace(/&\#8212;/g,"---")).replace(/&\#8211;/g,"--")).replace(/&\#8230;/g,"...")}n.Extra.prototype.hashHeaderAttributeBlocks=function(e){var t=this;function n(e,n,r){return"<p>~XX"+(t.hashBlocks.push(r)-1)+"XX</p>\n"+n+"\n"}return e=(e=e.replace(u,n)).replace(f,n)},n.Extra.prototype.hashFcbAttributeBlocks=function(e){var t=this;return e.replace(h,(function(e,n,r){return"<p>~XX"+(t.hashBlocks.push(r)-1)+"XX</p>\n"+n+"\n"}))},n.Extra.prototype.applyAttributeBlocks=function(e){var t=this,n=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return e=e.replace(n,(function(e,n,r,o,i){if(!r)return"";for(var a=parseInt(n,10),l=t.hashBlocks[a],s=l.match(/#[^\s#.]+/g)||[],c=s[0]?' id="'+s[0].substr(1,s[0].length-1)+'"':"",d=l.match(/\.[^\s#.]+/g)||[],u=0;u<d.length;u++)d[u]=d[u].substr(1,d[u].length-1);var f="";return o&&(d=function(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=e[r];for(r=0;r<t.length;r++)n[t[r]]=t[r];var o=[];for(var i in n)n.hasOwnProperty(i)&&o.push(n[i]);return o}(d,[o])),d.length>0&&(f=' class="'+d.join(" ")+'"'),"<"+r+c+f+i}))},n.Extra.prototype.tables=function(e){var n=this,r=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),o=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");function i(e,r,o,i,a,s){r=r.replace(/^ *[|]/m,""),o=o.replace(/^ *[|]/m,""),i=i.replace(/^ *[|]/gm,""),r=r.replace(/[|] *$/m,""),o=o.replace(/[|] *$/m,""),i=i.replace(/[|] *$/gm,"");for(var c=o.split(/ *[|] */),d=[],u=0;u<c.length;u++){var f=c[u];f.match(/^ *-+: *$/m)?d[u]=' align="right"':f.match(/^ *:-+: *$/m)?d[u]=' align="center"':f.match(/^ *:-+ *$/m)?d[u]=' align="left"':d[u]=""}var h=r.split(/ *[|] */),p=h.length,m=["<table",n.tableClass?' class="'+n.tableClass+'"':"",">\n","<thead>\n","<tr>\n"].join("");for(u=0;u<p;u++){var g=l(t(h[u]),n);m+=["  <th",d[u],">",g,"</th>\n"].join("")}m+="</tr>\n</thead>\n";var v=i.split("\n");for(u=0;u<v.length;u++)if(!v[u].match(/^\s*$/)){for(var b=v[u].split(/ *[|] */),y=p-b.length,_=0;_<y;_++)b.push("");for(m+="<tr>\n",_=0;_<p;_++){var S=l(t(b[_]),n);m+=["  <td",d[_],">",S,"</td>\n"].join("")}m+="</tr>\n"}return m+="</table>\n",n.hashExtraBlock(m)}return e=(e=e.replace(r,i)).replace(o,i)},n.Extra.prototype.stripFootnoteDefinitions=function(e){var t=this;return e=e.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,(function(e,n,r){return n=c(n),r=(r+="\n").replace(/^[ ]{0,3}/g,""),t.footnotes[n]=r,"\n"}))},n.Extra.prototype.doFootnotes=function(e){var t=this;if(!0===t.isConvertingFootnote)return e;var n=0;return e=e.replace(/\[\^(.+?)\]/g,(function(e,r){var o=c(r);if(void 0===t.footnotes[o])return e;n++,t.usedFootnotes.push(o);var i='<a href="#fn_'+o+'" id="fnref_'+o+'" title="See footnote" class="footnote">'+n+"</a>";return t.hashExtraInline(i)}))},n.Extra.prototype.printFootnotes=function(e){if(0===this.usedFootnotes.length)return e;e+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var t=0;t<this.usedFootnotes.length;t++){var n=this.usedFootnotes[t],r=this.footnotes[n];this.isConvertingFootnote=!0;var o=l(r,this);delete this.isConvertingFootnote,e+='<li id="fn_'+n+'">'+o+' <a href="#fnref_'+n+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return e+="</ol>\n</div>"},n.Extra.prototype.fencedCodeBlocks=function(e){function t(e){return e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/~D/g,"$$")).replace(/~T/g,"~")}var n=this;return e=e.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,(function(e,r,o){var i,a,l,s,c=r.replace(";",",").split(","),d=o,u=c[0].trim();return c.length>1&&(i=c[1].trim()),"flow"===u||"seq"===u||"sequence"===u?s=['<pre><textarea readonly style="display:none;"',l=' class="language-'+u+'"',">",t(d),"</textarea></pre>"].join(""):n.codeMirror?s=['<div class="wiz-code-container" contenteditable="false"',' data-mode="',u,'" data-theme="',i,'"><textarea readonly style="display:none;">',t(d),"</textarea></div>"].join(""):(a=n.googleCodePrettify?' class="prettyprint linenums"':"",l="",u&&(l=n.codeMirror||n.googleCodePrettify||n.highlightJs?' class="language-'+u+'"':' class="'+u+'"'),s=["<pre",a,"><code",l,">",t(d),"</code></pre>"].join("")),n.hashExtraBlock(s)}))},n.Extra.prototype.educatePants=function(e){var t=this,n="",r=0;e.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,(function(o,i,a,l,s,c,d){var u=e.substring(r,d);n+=t.applyPants(u),t.smartyPantsLastChar=n.substring(n.length-1),r=d+o.length,i?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(a)?t.smartyPantsLastChar=s.substring(s.length-1):s=t.educatePants(s),n+=i+a+l+s+c):n+=o}));var o=e.substring(r);return n+=t.applyPants(o),t.smartyPantsLastChar=n.substring(n.length-1),n},n.Extra.prototype.applyPants=function(e){return e},n.Extra.prototype.runSmartyPants=function(e){return this.smartyPantsLastChar="",e=(e=this.educatePants(e)).replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,p)},n.Extra.prototype.definitionLists=function(e){var n=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),r=this;return a(e=(e=i(e)).replace(n,(function(e,n,o){var i=t(r.processDefListItems(o));return i="<dl>\n"+i+"\n</dl>",n+r.hashExtraBlock(i)+"\n\n"})))},n.Extra.prototype.processDefListItems=function(e){var n=this,o=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),c=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return a(e=(e=(e=(e=i(e)).replace(/\n{2,}(?=\\x03)/,"\n")).replace(o,(function(e,r,o){for(var i=t(o).split("\n"),a="",s=0;s<i.length;s++){var c=i[s];a+="\n<dt>"+(c=l(t(c),n))+"</dt>"}return a+"\n"}))).replace(c,(function(e,t,o,i){return"\n<dd>"+(i=t||i.match(/\n{2,}/)?"\n"+s(i=r(i=Array(o.length+1).join(" ")+i)+"\n\n",n)+"\n":l(r(i=i.replace(/\s+$/g,"")),n))+"</dd>\n"})))},n.Extra.prototype.todo_list=function(e){return e.replace(/^([ ]*)\[ \]/g,"$1<input type='checkbox' disabled class='wiz-md-todo-checkbox'>").replace(/^([ ]*)\[x\]/g,"$1<input type='checkbox' disabled checked class='wiz-md-todo-checkbox'>")},n.Extra.prototype.strikethrough=function(e){return e.replace(/~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T/g,"<del>$1</del>")},n.Extra.prototype.newlines=function(e){return e.replace(/(<(?:br|\/li)>)?\n/g,(function(e,t){return t?e:" <br>\n"}))}}(),e.exports=n.Extra},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(43),f=n(25),h=n(2),p=new u,m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._markerOriginalHtml="",n._loadDependency=function(e){p.addCallback(n.env.doc,e),p.getLoading(n.env.doc)||(void 0===n.env.win.WizSvgPainter?(p.setLoading(n.env.doc,!0),f.loadJs(n.env.doc,f.getDependencyFiles(n.env.dependency,"js","wizPainter"),(function(){p.setLoading(n.env.doc,!1),p.callback(n.env.doc)}))):p.callback(n.env.doc))},n._abandonAllModified=function(){var e,t,r=n._getMarkerRoot();if(r?(e=r.parentNode,t=r.nextSibling,n.domUtils.remove(r)):(e=n.env.body,t=null),n._markerOriginalHtml){var o=n.env.doc.createElement("div");o.innerHTML=n._markerOriginalHtml,e.insertBefore(o.firstChild,t)}n._fixStyleForSave()},n._createDiv=function(){var e=n.env.doc.createElement("div");return e.appendChild(n.env.doc.createElement("br")),e},n._fixTextArea=function(e){if(!n.env.readonly){var t=n.domUtils.getLast();if(t){for(;t.parentNode!==n.env.body;)t=t.parentNode;if(1!==t.nodeType){var r=n.env.doc.createElement("div");n.domUtils.before(r,t),r.appendChild(t),t=r}}var o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),a=i.top+i.height+40-(o.top+o.height);if(a<0)return null;var l=n._createDiv();n.domUtils.after(l,t),t=l;var s=n.domUtils.getComputedStyle(l,"margin-bottom",!1);s=parseInt(s),o=t.getBoundingClientRect();for(var c=Math.floor(a/(o.height+s)+.5);c>0;){var d=n._createDiv();n.domUtils.after(d,t),t=d,c--}return t}},n._fixSvgSize=function(){var e=n._getMarkerRoot();if(e){var t,r=e.querySelector("svg"),o=n._getSvgSize(r);n.wizSvgPainter?(n.wizSvgPainter.page.setSvgSize(o.width,Math.max(n.env.body.offsetHeight,o.height)),t=(o=n._getSvgSize(r)).height+"px"):t="100%",n.req.markerStyle.insertBodyStyle(o.width+"px",t)}},n._fixStyleForSave=function(){n._getMarkerRoot()&&n.wizSvgPainter?(n.minArea=n.wizSvgPainter.editorTools.getMinAreaFromPath(),n.req.markerStyle.insertBodyStyle(n.minArea.width+"px",n.minArea.maxHeight+"px")):(n.minArea=null,n._fixSvgSize()),n.req.markerStyle.fixStyle()},n._getMarkerRoot=function(){return n.env.doc.querySelector("#"+d.ID.MARKER_ROOT)},n._getToolsData=function(){var e=n.wizSvgPainter.editorTools,t=e.cur(),r=e.ToolType,o={curType:t.type,stylusMode:e.getStylusMode(),tools:[]};for(var i in r)if(r.hasOwnProperty(i)){var a=e.getToolByType(i),l={type:a.type,color:a.color,lineWidth:a.lineWidth,highlighterOnly:a.highlighterOnly,clearFullPath:a.clearFullPath};o.tools.push(l)}return o},n._getSvgSize=function(e){return{width:e.viewBox.baseVal.width,height:e.viewBox.baseVal.height}},n._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml)},unbind:function(){n.env.event.remove(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml)}},n._handler={beforeGetDocHtml:function(){n._fixStyleForSave()}},n.hasLoaded=!1,n.on=function(){n.show()},n.off=function(){n.show(),n._event.unbind(),n.req.markerStyle.removeEditActiveStyle(),n.wizSvgPainter&&n.quit(),n.hasLoaded=!1},n.checkMarker=function(){return!!n._getMarkerRoot()},n.start=function(){n._markerOriginalHtml="";var e=function(){n.env.event.call(d.EVENT.ON_MARKER_INITIATED,n.wizSvgPainter),n.env.options.editor.callback.markerInitiated&&n.env.options.editor.callback.markerInitiated(JSON.stringify(n._getToolsData()))};n._loadDependency((function(){if(n.wizSvgPainter)e();else{if(n.req.markerStyle.insertCommon(),n.env.readonly||n.req.markerStyle.insertTemp(),n.hasLoaded=!0,n._event.bind(),n.wizSvgPainter=new n.env.win.WizSvgPainter({clientType:"web",lang:n.env.options.lang,maxUndo:200,callback:{undo:function(e){n.env.options.editor.callback.markerUndo&&n.env.options.editor.callback.markerUndo(JSON.stringify(e))}}},{isCreateNote:!0,isNoteMarker:!0},(function(){})),n.env.readonly)n.wizSvgPainter.reader.on();else n.rangeUtils.getSelection().empty(),n.domUtils.setContenteditable(null,!1),n.wizSvgPainter.editor.on();var t=n._getMarkerRoot();t&&(n.env.readonly||(n._markerOriginalHtml=t.outerHTML),n.domUtils.setContenteditable(t,!1)),n._fixSvgSize(),e()}}))},n.quit=function(e){e||n._fixStyleForSave(),n.wizSvgPainter&&(n.wizSvgPainter.destroy(),n.wizSvgPainter=null),e&&n._abandonAllModified(),n.env.readonly||n.domUtils.setContenteditable(null,!0);var t=n._getMarkerRoot();if(t){var r=t.querySelector("svg");if(0===r.children.length||1===r.children.length&&n.domUtils.isTag(r.firstElementChild,d.TAG.TMP_TAG))return n.domUtils.remove(t),void n.req.markerStyle.fixStyle();var o=null;e||(o=n._fixTextArea(r)),n.req.markerStyle.insertTempByType("quit"),!n.env.readonly&&o&&(n.rangeUtils.setRange(o,0),n.env.client.type.isPhone||n.env.client.type.isPad?setTimeout((function(){n.domUtils.scrollIntoView(o)}),300):n.domUtils.scrollIntoView(o))}},n.hide=function(){var e=n._getMarkerRoot();e&&(n.domUtils.css(e,{display:"none"}),n.req.markerStyle.insertTempByType("hide"))},n.show=function(){n.req.markerStyle.fixStyle();var e=n._getMarkerRoot();if(e){n.domUtils.css(e,{display:null}),n.req.markerStyle.removeTempByType("hide");var t=e.querySelector("svg");if(t&&n.env.browser.isIe&&!t.style.height){var r=n._getSvgSize(t);t.style.width=r.width+"px",t.style.height=r.height+"px"}}},n.fixSvgFromHtml=function(e){return n.wizSvgPainter&&n.minArea&&(e=e.replace(/<wiz_marker [^>]*>.*<\/wiz_marker>/i,(function(e){return n.wizSvgPainter.editorTools.fixSvgHtmlViewBox(e,0,0,n.minArea.width,n.minArea.maxHeight)}))),e},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(h);e.exports=m},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(2),f={tmp:{editor:"."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+" .hide {display: none !important;}",editorActive:"."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+" {pointer-events:all;}."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-svg-container {cursor: default;}."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-svg-container .wiz-svg-mask-container {position: absolute;top: 0;left: 0;right: 0;bottom: 0;z-index: 80;}."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-shape-asst-button svg {width: 100%;height: auto;}."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-shape-asst-container {position: absolute;display: flex;align-items: center;z-index: 90;}."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-shape-asst-button {padding: 5px;opacity: .85;background: silver;color: white;margin-right: 4px;width: 20px;height: 20px;text-align: center;border-radius: 100%;cursor: pointer;}."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+" .wiz-painter-info {padding: 12px;border-radius: 5px;background: rgba(0, 0, 0, 0.5);color: #FFFFFF;position: absolute;top: 50%;left: 50%;-webkit-transform: translate(-50%, -50%);transform: translate(-50%, -50%);z-index: 0;opacity: 0;transition: opacity 0.6s, z-index 0.2s 0.8s;}."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+" .wiz-painter-info.active {opacity: 1;z-index: 50;transition: opacity 0.6s 0.5s, z-index 0.2s;}",quit:"."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+" {pointer-events: none;}",hide:"."+d.CLASS.WIZ_BODY+" {width: auto !important; min-height: 100% !important;}"},common:"."+d.CLASS.WIZ_BODY+" {-webkit-text-size-adjust: 100%;box-sizing:border-box;}."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+", #"+d.ID.MARKER_ROOT+" div {margin:0;}."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+" {pointer-events: none; position: absolute;top: 0;left: 0;right: 0;bottom: 0;z-index:1000;-moz-user-select:none;-webkit-user-select:none;user-select:none;}."+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+':before {border-left:1px dotted #d6d9dd;content: " ";position: absolute;top:0;bottom:0;left:0;width:0px;z-index:0;}.'+d.CLASS.WIZ_BODY+" #"+d.ID.MARKER_ROOT+':after {border-right:1px dotted #d6d9dd;content: " ";position: absolute;top:0;bottom:0;right:0;width:0px;z-index:0;}.'+d.CLASS.WIZ_BODY+" #sketchpad {position: absolute;top: 0;left: 0;right: 0;bottom: 0;z-index: 50;white-space: nowrap;margin: 0;padding: 0;}."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-svg-page {width: 100%;height: 100%;display: none;position: relative;margin: 0;}."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-svg-page-container.active .wiz-svg-page {display: block;}."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-svg-container {padding: 0;position: relative;}."+d.CLASS.WIZ_BODY+" #sketchpad .wiz-svg-container svg {width: 100%;height: auto;margin: 0;display: block;vertical-align: bottom;}"},h=d.ID.MARKER_STYLE+"-edit-active",p=d.ID.MARKER_STYLE+"-body",m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).fixStyle=function(){n.env.doc.getElementById(d.ID.MARKER_ROOT)?n.insertCommon():(n.req.wizStyle.removeStyleById(d.ID.MARKER_STYLE),n.req.wizStyle.removeStyleById(p))},n.insertCommon=function(){n.req.wizStyle.replaceStyleById(d.ID.MARKER_STYLE,f.common,!1)},n.insertBodyStyle=function(e,t){n.req.wizStyle.insertStyle({id:p},"."+d.CLASS.WIZ_BODY+" {width: "+e+"; min-height:"+t+";}")},n.insertTemp=function(){n.req.wizStyle.insertStyle({name:d.NAME.TMP_STYLE},f.tmp.editor),n.req.wizStyle.insertStyle({id:h,name:d.NAME.TMP_STYLE},f.tmp.editorActive),n.removeTempByType("quit"),n.req.wizStyle.removeStyleById(d.ID.BODY_TMP_BOTTOM_STYLE)},n.insertTempByType=function(e){n.req.wizStyle.insertStyle({id:d.ID.MARKER_STYLE+"-"+e,name:d.NAME.TMP_STYLE},f.tmp[e])},n.removeEditActiveStyle=function(){n.req.wizStyle.removeStyleById(h)},n.removeTempByType=function(e){n.req.wizStyle.removeStyleById(d.ID.MARKER_STYLE+"-"+e)},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(u);e.exports=m},function(e,t,n){var r=n(25),o=n(216),i=new(n(43));e.exports=function(e){var t=this;e=e||{};var n,a,l,s,c=null,d=null,u=null;this.initCore=function(e){d=(c=e).env,u=c.require.domUtils,t.init()};this.do=function(e,t){e.container&&(l=e.container);!function(e){if(i.addCallback(a,e),!i.getLoading(a)){i.setLoading(a,!0),o.appendJsCode(a,"MathJax = null","text/javascript"),o.appendJsCode(a,'MathJax.Hub.Config({\n  skipStartupTypeset: true,\n  "HTML-CSS": {\n      preferredFont: "TeX",\n      availableFonts: [\n          "STIX",\n          "TeX"\n      ],\n      linebreaks: {\n          automatic: true\n      },\n      EqnChunk: 10,\n      imageFont: null\n  },\n  SVG: { linebreaks: { automatic: true } },\n  tex2jax: {\n      inlineMath: [["$","$"],["\\\\\\\\(","\\\\\\\\)"]],\n      displayMath: [["$$","$$"],["\\\\[","\\\\]"]],\n      processEscapes: true },\n  TeX: {\n      equationNumbers: {\n          autoNumber: "AMS"\n      },\n      noUndefined: {\n          attributes: {\n              mathcolor: "red",\n              mathbackground: "#FFEEEE",\n              mathsize: "90%"\n          }\n      },\n      Safe: {\n          allow: {\n              URLs: "safe",\n              classes: "safe",\n              cssIDs: "safe",\n              styles: "safe",\n              fontsize: "all"\n          }\n      }\n  },\n  messageStyle: "none"\n});',"text/x-mathjax-config");for(var t=r.getDependencyFiles(d.dependency,"js","mathJax"),n=0;n<t.length;n++)for(var l=t[n],s=0;s<l.length;s++){var c=l[s];if(c.indexOf("MathJax.js")>-1){var f=d.doc.getElementById("wiz_"+c);f&&u.remove(f)}}r.loadJs(a,t,(function(){i.setLoading(a,!1),i.callback(a)}))}}((function(){var e=d.options.reader.timeout.mathJax;t=t||s;var r,o=!1,i=function(){t&&!o&&(t(),o=!0)};setTimeout(i,e),r=function(){d.options.reader.callback.mathJax&&d.options.reader.callback.mathJax(),i()},n.MathJax.Hub.Queue(["Typeset",n.MathJax.Hub,l,function(){r()}])}))},this.init=function(){n=e.win||d.win,a=e.doc||d.doc,l=e.container||d.body,s=e.callback}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._curMedia=null,n._event={bindPlay:function(e){e.forEach((function(e){n._event.bindItemPlay(e)}))},unbindPlay:function(e){e.forEach((function(e){n._event.unbindItemPlay(e)}))},bindItemPlay:function(e){n._event.unbindItemPlay(e),e.addEventListener("play",n._handler.onPlay)},unbindItemPlay:function(e){e.removeEventListener("play",n._handler.onPlay)}},n._handler={onPlay:function(e){var t=e.target;n._curMedia&&n._curMedia!==t&&n._curMedia.pause(),n._curMedia=t}},n.on=function(){if(n.req.mediaUtils.getContainerList().length>0){n.req.mediaStyle.initCommon();var e=n.req.mediaUtils.render();n._event.bindPlay(e)}},n.off=function(){},n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),d&&i(n,d),t}(n(2));e.exports=d},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=(n(37),n(2)),f={common:""+".".concat(d.CLASS.WIZ_BODY," ").concat(d.TAG.MEDIA," .").concat(d.CLASS.MEDIA_DATA," {display:none;}"),tmp:{common:""}},h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).initCommon=function(){n.req.wizStyle.replaceStyleById(d.ID.MEDIA_STYLE,f.common,!1),n.insertTemp()},n.insertTemp=function(){},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(u);e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h="audio",p="video",m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).fixMediaContainer=function(e){n.domUtils.setContenteditable(e,!1)},n.getContainerList=function(){var e=n.env.body.querySelectorAll(d.TAG.MEDIA),t=[];return u.forEach(e,(function(e){t.push(e)})),t},n.getMediaData=function(e){var t=null;if(!e)return t;var n=e.querySelector(".".concat(d.CLASS.MEDIA_DATA));if(!n)return t;try{t=JSON.parse(n.value)}catch(e){console.error(e)}return t},n.render=function(){var e=n.getContainerList(),t=[];return e.forEach((function(e){var r=n.getMediaData(e);r&&(r.type===h?t.push(n.renderAudio(e,r)):r.type===p&&t.push(n.renderVideo(e,r)))})),t},n.renderAudio=function(e,t){if(e){var r=e.querySelector(h);return r||(r=n.env.doc.createElement(h),e.appendChild(r)),n.domUtils.attr(r,{controls:"true",preload:"metadata",src:t.src}),r}},n.renderVideo=function(e,t){if(e){var r=e.querySelector(p);return r||(r=n.env.doc.createElement(p),e.appendChild(r)),n.domUtils.attr(r,{controls:"true",preload:"metadata",src:t.src,poster:t.poster}),r}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=m},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h="active",p="selected",m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory),n.req.editorBridge.isOutline?n.env.event.add(d.EVENT.ON_CLICK,n._handler.onMouseDown):n.env.supportTouchEvent?n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown):n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown)},unbind:function(){n.env.event.remove(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory),n.env.event.remove(d.EVENT.ON_CLICK,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown)}},n._handler={afterRestoreHistory:function(){for(var e=n.env.body.querySelectorAll(".".concat(d.CLASS.MENU_PLUGIN_CONTAINER)),t=e.length-1;t>=0;t--){var r=e[t];r.target&&r.optionsData||n.domUtils.remove(r)}},onMouseDown:function(e){var t=e.target,r=n._menuUtils.getOptionFromDom(t);r&&n._menuUtils.selectOption(r),n._menuUtils.getContainerFromDom(t)?"click"!==e.type&&(n.domUtils.isTag(e.target,"select")||u.stopEvent(e)):n._menuUtils.hideAll(e,!0)}},n._menuUtils={fixPosition:function(e){if(e){var t=e.target,r=e.layout||d.TYPE.LAYOUT.BOTTOM_END,o=e.space||0,i=n._menuUtils.getOptions(e);n.domUtils.css(i,{display:"block",visibility:"hidden"});n.domUtils.setLayout({layerObj:i,target:t,layout:r,isFixed:!1,isReverse:!0,space:o});n.domUtils.css(i,{display:null,visibility:null})}},getContainerFromDom:function(e){return n.domUtils.getParentByClass(e,d.CLASS.MENU_PLUGIN_CONTAINER,!0)},getOptions:function(e){return e.querySelector("."+d.CLASS.MENU_PLUGIN_OPTIONS)},getOptionFromDom:function(e){return n.domUtils.getParentByClass(e,d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,!0)},hideAll:function(e,t){var r;r=n.env.body.querySelectorAll("."+d.CLASS.MENU_PLUGIN_CONTAINER+"."+h);for(var o=e&&e.target,i=r.length-1;i>=0;i--){var a=r[i];t&&!a.autoHide||(o===a.target||n.domUtils.isParent(o,a.target)||n._menuUtils.hideMenu(a))}},hideMenu:function(e){e&&(n.env.event.call(d.EVENT.ON_MENU_PLUGIN_HIDE,e),n.domUtils.removeClass(e,h),e.onHidden&&e.onHidden())},isShow:function(e){return n.domUtils.hasClass(e,h)},selectOption:function(e){var t=n._menuUtils.getContainerFromDom(e);if(t&&!e.disabled&&(!e.data.onClick||e.data.onClick())){if(t.type===d.MENU_PLUGIN.TYPE.SELECT){var r=t.querySelector("."+d.CLASS.MENU_PLUGIN_OPTIONS_ITEM+"."+p);r!==e&&(n.domUtils.removeClass(r,p),n.domUtils.addClass(e,p))}t.value=e.data.value,t.onSelected(t.target,e.data),n._menuUtils.hideMenu(t),n.env.event.call(d.EVENT.ON_SELECT_PLUGIN_CHANGE,t)}},showMenu:function(e,t,r){if(e&&!e.parentNode&&n.env.body.appendChild(e),!e.autoHide||t&&e.target!==t||!n.domUtils.hasClass(e,h)){n._menuUtils.hideAll(),t&&(e.target=t),n._menuUtils.updateOptions(e,r),n._menuUtils.fixPosition(e),n.domUtils.addClass(e,h);var o=e.querySelector(".".concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,".").concat(p));o&&n.domUtils.scrollIntoView(o)}else n._menuUtils.hideMenu(e)},createOptions:function(e,t){var r=e.querySelector(".".concat(d.CLASS.MENU_PLUGIN_OPTIONS));r?r.innerHTML="":(r=n.env.doc.createElement("ul"),n.domUtils.addClass(r,d.CLASS.MENU_PLUGIN_OPTIONS),n.domUtils.addClass(r,d.CLASS.FLOAT_LAYER),e.appendChild(r));for(var o=0,i=t.length;o<i;o++){var a=t[o],l=a.obj,s=a.text,c=a.value,u=a.beforeShow;u&&u();var f=n.env.doc.createElement("li");f.data=a,l?f.appendChild(l):f.textContent=s,n.domUtils.attr(f,{value:c,"data-index":o}),c===e.defaultValue&&(e.value=c,e.type===d.MENU_PLUGIN.TYPE.SELECT&&n.domUtils.addClass(f,p)),n.domUtils.addClass(f,d.CLASS.MENU_PLUGIN_OPTIONS_ITEM),a.disabled&&(n.domUtils.addClass(f,"disabled"),f.disabled=!0),a.style&&n.domUtils.css(f,a.style),r.appendChild(f)}e.optionsData=t},updateOptions:function(e,t){if(t)n._menuUtils.createOptions(e,t);else for(var r=0,o=e.optionsData.length;r<o;r++){var i=e.optionsData[r].beforeShow;i&&i()}}},n.on=function(){n._event.bind()},n.off=function(){n._event.unbind()},n.getContainerFromDom=n._menuUtils.getContainerFromDom,n.show=function(e){var t=e.type||d.MENU_PLUGIN.TYPE.MENU,r=e.className,o=e.data,i=e.defaultValue,a=e.target,l=e.onSelected,s=e.onHidden,c=void 0===e.autoHide||!!e.autoHide,u=e.layout,f=e.space,h=n.env.doc.createElement(d.TAG.TMP_TAG);return h.target=a,h.type=t,h.layout=u,h.space=f,h.defaultValue=i,h.autoHide=c,h.onSelected=l,h.onHidden=s,h.hide=function(){n._menuUtils.hideMenu(h)},h.isShow=function(){return n._menuUtils.isShow(h)},h.show=function(e,t){n._menuUtils.showMenu(h,e,t)},n._menuUtils.createOptions(h,o),n.domUtils.addClass(h,d.CLASS.MENU_PLUGIN_CONTAINER),n.domUtils.addClass(h,r),n.domUtils.attr(h,{onselectstart:"return false;"}),n.domUtils.setContenteditable(h,!1),n._menuUtils.showMenu(h),h},n.destory=function(){},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=m},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(1),d=n(37),u=n(3),f=n(43),h=n(25),p=n(2),m=new f,g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,l(t).call(this)))._tooltipForMinderNote=null,e._kityminder=null,e._minderTemplate=u.storage.get(d.STORAGE_KEY.MINDER_TEMPLATE)||d.MINDER_TEMPLATE_TYPE.RIGHT,e._minderTheme=u.storage.get(d.STORAGE_KEY.MINDER_THEME)||d.MINDER_THEME_TYPE.THEME1,e._minderThemeData=null,e._loadDependency=function(t){m.addCallback(e.env.doc,t),m.getLoading(e.env.doc)||(void 0===e.env.win.CodeMirror?(m.setLoading(e.env.doc,!0),h.loadJs(e.env.doc,h.getDependencyFiles(e.env.dependency,"js","minder"),(function(){m.setLoading(e.env.doc,!1),m.callback(e.env.doc)}))):m.callback(e.env.doc))},e._event={bind:function(){e._event.unbind(),e.env.event.add(c.EVENT.AFTER_RESTORE_HISTORY,e._handler.afterRestoreHistory),e.env.event.add(c.EVENT.ON_CLICK,e._handler.onClick),e.env.event.add(c.EVENT.ON_KEY_DOWN,e._handler.onKeydown),e.env.event.add(c.EVENT.ON_MOUSE_DOWN,e._handler.onMousedown),e.env.event.add(c.EVENT.ON_SELECTION_CHANGE,e._handler.onSelectionChange)},unbind:function(){e.env.event.remove(c.EVENT.AFTER_RESTORE_HISTORY,e._handler.afterRestoreHistory),e.env.event.remove(c.EVENT.ON_CLICK,e._handler.onClick),e.env.event.remove(c.EVENT.ON_KEY_DOWN,e._handler.onKeydown),e.env.event.remove(c.EVENT.ON_MOUSE_DOWN,e._handler.onMousedown),e.env.event.remove(c.EVENT.ON_SELECTION_CHANGE,e._handler.onSelectionChange)},bindController:function(){if(e._event.unbindController(),e._kityminder){var t=e._kityminder._renderTarget;t.addEventListener("mousedown",e._handler.onMousedown),e.env.supportTouchEvent&&t.addEventListener("touchstart",e._handler.onTouchstart)}},unbindController:function(){var t=e._kityminder._renderTarget;t.removeEventListener("mousedown",e._handler.onMousedown),t.removeEventListener("touchstart",e._handler.onTouchstart)},bindZoom:function(){if(e._event.unbindZoom(),e._kityminder){e._kityminder._viewDragger.setEnabled(!1);var t=e._kityminder._renderTarget;t.addEventListener("touchmove",e._handler.onTouchmove),t.addEventListener("touchend",e._handler.onTouchend)}},unbindZoom:function(){if(e._kityminder){e._kityminder._viewDragger.setEnabled(!0);var t=e._kityminder._renderTarget;t.removeEventListener("touchmove",e._handler.onTouchmove),t.removeEventListener("touchend",e._handler.onTouchend)}}},e._handler={onClickNode:function(t){t.node.parent&&0!==t.node.children.length&&(t.node.isExpanded()?t.node.collapse():t.node.expand(),t.node.renderTree(),e._kityminder.layout(100))},onLayoutFinishForChangeTT:function(){e._kityminder.off("layoutfinish",e._handler.onLayoutFinishForChangeTT),e.setMinderToCenter()},onLayoutAllFinish:function(){e.req.minderMenu.create({onChangeTheme:function(t){e._kityminder&&(e._minderTheme=t,u.storage.set(d.STORAGE_KEY.MINDER_THEME,t),e._kityminder.useTheme(e._outlineUtils.minderThemeFilter(t)),e._kityminder.on("layoutfinish",e._handler.onLayoutFinishForChangeTT))},onChangeTemplate:function(t){e._kityminder&&(e._minderTemplate=t,u.storage.set(d.STORAGE_KEY.MINDER_TEMPLATE,t),e._kityminder.useTemplate(t),e._kityminder.on("layoutfinish",e._handler.onLayoutFinishForChangeTT))},initTheme:e._minderTheme,initTemplate:e._minderTemplate}),e._event.bindController(),e.setMinderToCenter(),e._outlineStyle.insertAfterShowMinder(),e._kityminder.off("layoutallfinish",e._handler.onLayoutAllFinish)},onHideNote:function(){},onMoveTo:function(t){e.hideMinderNote()},onMoveEndAtFirst:function(t){if(e.env.supportTouchEvent){var n=e._kityminder.getRenderContainer(),r=n.container.node,o=n.node.getBBox(),i=Math.min(r.clientWidth/o.width,r.clientHeight/o.height),a=Math.floor(95*i);a=Math.min(100,a),e.setZoom(a)}e._kityminder.off("layoutfinish",e._handler.onMoveEndAtFirst),e._kityminder.off("moveEnd",e._handler.onMoveEndAtFirst)},onMousedown:function(t){e._tooltipForMinderNote&&(!t.minder&&e.domUtils.isParent(t.target,e._tooltipForMinderNote.target)||e.hideMinderNote())},onShowNote:function(t){var n=[{disabled:!0,text:t.node.data.note,value:""}];e._tooltipForMinderNote?e._tooltipForMinderNote.show(t.icon.node,n):e._tooltipForMinderNote=e.req.menuPlugin.show({className:d.CLASS.MINDER_NOTE,data:n,target:t.icon.node,layout:c.TYPE.LAYOUT.BOTTOM,space:8,autoHide:!0,onHidden:e._handler.onHideNote})},onTouchend:function(t){e._event.unbindZoom(),u.stopEventDefault(t)},onTouchmove:function(t){if(t.touches&&2===t.touches.length){var n=t.touches[0]||t.changedTouches[0],r=t.touches[1]||t.changedTouches[1],o=u.math.getDistance({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY});e.setZoom(e._zoomData.startZoom*o/e._zoomData.startDistance),u.stopEventDefault(t)}else e._event.unbindZoom()},onTouchstart:function(t){if(t.touches&&2===t.touches.length){var n=t.touches[0]||t.changedTouches[0],r=t.touches[1]||t.changedTouches[1],o=u.math.getDistance({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY});e._zoomData={startDistance:o,startZoom:e._kityminder.getZoomValue()},e._event.bindZoom()}}},e.setMinderToCenter=function(){var t=e._kityminder.getRenderContainer(),n=t.container.node,r=t.node.getBBox(),o={},i=!1;e.env.supportTouchEvent||r.width<n.clientWidth-40?(i=!0,o.x=(n.clientWidth-r.width)/2-r.x):e.env.supportTouchEvent||e._minderTemplate!==d.MINDER_TEMPLATE_TYPE.RIGHT&&e._minderTemplate!==d.MINDER_TEMPLATE_TYPE.FISH_BONE||(i=!0,o.x=40);var a=r.height<n.clientHeight-40;if((e._minderTemplate===d.MINDER_TEMPLATE_TYPE.STRUCTURE||a)&&(i=!0,e.env.supportTouchEvent||a?o.y=(n.clientHeight-r.height)/2-r.y:o.y=40-r.y),i){var l=e._kityminder.getMovement(),s={x:0,y:0};void 0!==o.x&&(s.x=o.x-l.x),void 0!==o.y&&(s.y=o.y-l.y),e._kityminder.on("layoutfinish",e._handler.onMoveEndAtFirst),e._kityminder.on("MoveEnd",e._handler.onMoveEndAtFirst),e._kityminder.execCommand("Move",s)}},e.hideMinder=function(){if(e.req.minderMenu.hide(),!!e._kityminder){var t=e._kityminder._renderTarget;e._event.unbindController(),e._kityminder.destroy(),e._kityminder=null,e.domUtils.remove(t)}e.env.options.useFrame&&e.domUtils.css(e.env.frame.bodyContainer,{height:null}),e._outlineStyle.removeShowMinder(),e.req.frameViewUtils.setAdjustPause(!1),e.req.frameViewUtils.onAdjustContainerSize()},e.hideMinderNote=function(){e._tooltipForMinderNote&&e._tooltipForMinderNote.hide()},e.getMinderThemeData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wiz";return e._kityminder?e._kityminder.getThemeData(t):""},e.minderThemeRegister=function(t){e._minderThemeData=t,e.setMinderThemeData()},e.setMinderThemeData=function(){if(e._kityminder)if(e._minderThemeData)e._kityminder.themeRegister("wiz",e._minderThemeData),e.userMinderTheme("wiz");else if(e.env.options.nightMode.enable){var t="";e.env.client.type.isWin?t="wiz-windows-night":e.env.client.type.isMac?t="wiz-mac-night":e.env.client.type.isIOS?t="wiz-ios-night":e.env.client.type.isAndroid&&(t="wiz-android-night"),t&&e.userMinderTheme(t)}},e.setZoom=function(t){t=Math.max(20,t),t=Math.min(200,t),e._kityminder.execCommand("Zoom",t)},e.showMinder=function(t){e.req.imgResize.hide(),e._outlineStyle.insertShowMinder(),e.env.options.useFrame&&e.domUtils.css(e.env.frame.bodyContainer,{height:e.env.scrollContainer.clientHeight+"px"}),e.req.frameViewUtils.setAdjustPause(!0),h.loadCss(e.env.doc,h.getDependencyFiles(e.env.dependency,"css","minder"));e._loadDependency((function(){var n=e.env.doc.createElement(c.TAG.TMP_TAG);e.domUtils.attr(n,{id:d.ID.MINDER_CONTAINER,type:"application/kityminder","minder-data-type":"json"}),n.innerText=JSON.stringify(t),e.env.body.appendChild(n);var r={enableKeyReceiver:!e.env.supportTouchEvent,defaultTheme:"wiz"};e._kityminder=new e.env.win.kityminder.Minder(r),e._kityminder.on("layoutallfinish",e._handler.onLayoutAllFinish),e._kityminder.on("editnoterequest",e._handler.onShowNote),e._kityminder.on("contentchange",e._handler.onMousedown),e._kityminder.on("viewchange",e._handler.onMoveTo),e._kityminder.on("nodeClick",e._handler.onClickNode),e._kityminder.setup("#"+d.ID.MINDER_CONTAINER),e._kityminder.execCommand("hand")}))},e.userMinderTheme=function(t){e._kityminder&&e._kityminder.execCommand("Theme",t)},e}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){a(l(t.prototype),"initCore",this).call(this,e),this._outlineUtils=e.require.outlineUtils,this._outlineStyle=e.require.outlineStyle}},{key:"template",get:function(){return this._minderTemplate}},{key:"theme",get:function(){return this._minderTheme}}])&&o(n.prototype,r),f&&o(n,f),t}(p);e.exports=g},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(2),u=n(37),f=n(1),h=n(540),p=n(3),m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._container=null,n._menuTimer=null,n._event={bind:function(){n._event.unbind(),n.env.event.add(f.EVENT.ON_CLICK,n._handler.menuClick),n._isHoverMode()&&n.env.event.add(f.EVENT.ON_MOUSE_OVER,n._handler.hoverMenu)},unbind:function(){n.env.event.remove(f.EVENT.ON_CLICK,n._handler.menuClick),n._isHoverMode()&&n.env.event.remove(f.EVENT.ON_MOUSE_OVER,n._handler.hoverMenu)}},n._handler={menuClick:function(e){var r=n.domUtils.getParentByClass(e.target,t.EventClass.CLICK,!0),o=!!n.domUtils.getParentByClass(e.target,"subMenu",!0);if(null!==r){var i=!1,a=n._getSubMenu();switch(r.getAttribute("data-event")){case t.EVENT_TYPE.OPEN_SUB_MENU:n._isHoverMode()||(n.domUtils.hasClass(a,"active")?i=!0:n.showSubMenu());break;case t.EVENT_TYPE.CHANGE_THEME:var l=n._getThemeMenu(),s=n._themeList[parseInt(r.getAttribute("data-index"))];n._handler.onChangeTheme&&n._handler.onChangeTheme(s.id),n.domUtils.hasClass(r,"active")||(n.domUtils.removeClass(l.querySelector(".active"),"active"),n.domUtils.addClass(r,"active"));break;case t.EVENT_TYPE.CHANGE_ORG:var c=n._getTemplateMenu(),d=n._orgList[parseInt(r.getAttribute("data-index"))];n._handler.onChangeTemplate&&n._handler.onChangeTemplate(d.id),n.domUtils.hasClass(r,"active")||(n.domUtils.removeClass(c.querySelector(".active"),"active"),n.domUtils.addClass(r,"active"))}i&&n.hideSubMenu()}else o||n.hideSubMenu()},hoverMenu:function(e){var t=n.domUtils.getParentByFilter(e.target,(function(e){return n.domUtils.hasClass(e,u.CLASS.MINDER_MENU)}),!0);n._getSubMenu();n._clearMenuTimer(),t?n._openSubMenuForHover():n._hideSubMenuForHover()},onChangeTheme:null,onChangeTemplate:null},n}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"initMenuData",value:function(){this._themeList=[{id:u.MINDER_THEME_TYPE.THEME1,name:this.lang.Outline.MinderTheme.Theme1},{id:u.MINDER_THEME_TYPE.THEME2,name:this.lang.Outline.MinderTheme.Theme2},{id:u.MINDER_THEME_TYPE.THEME3,name:this.lang.Outline.MinderTheme.Theme3},{id:u.MINDER_THEME_TYPE.THEME4,name:this.lang.Outline.MinderTheme.Theme4},{id:u.MINDER_THEME_TYPE.THEME5,name:this.lang.Outline.MinderTheme.Theme5},{id:u.MINDER_THEME_TYPE.THEME6,name:this.lang.Outline.MinderTheme.Theme6},{id:u.MINDER_THEME_TYPE.THEME7,name:this.lang.Outline.MinderTheme.Theme7},{id:u.MINDER_THEME_TYPE.THEME8,name:this.lang.Outline.MinderTheme.Theme8},{id:u.MINDER_THEME_TYPE.THEME9,name:this.lang.Outline.MinderTheme.Theme9},{id:u.MINDER_THEME_TYPE.THEME10,name:this.lang.Outline.MinderTheme.Theme10}],this._orgList=[{id:u.MINDER_TEMPLATE_TYPE.RIGHT,name:this.lang.Outline.MinderTemplate.Right},{id:u.MINDER_TEMPLATE_TYPE.DEFAULT,name:this.lang.Outline.MinderTemplate.Default},{id:u.MINDER_TEMPLATE_TYPE.STRUCTURE,name:this.lang.Outline.MinderTemplate.Structure},{id:u.MINDER_TEMPLATE_TYPE.FISH_BONE,name:this.lang.Outline.MinderTemplate.FishBone}]}},{key:"_changeSubMenuStatusCallback",value:function(e){this.env.options.callback.onChangeMinderToolsMenuStatus&&this.env.options.callback.onChangeMinderToolsMenuStatus(e)}},{key:"_clearMenuTimer",value:function(){clearTimeout(this._menuTimer)}},{key:"_createdMenu",value:function(e,n){var r=this;if(!this._container){this.initMenuData();var o=[{type:t.EVENT_TYPE.OPEN_SUB_MENU,icon:"icon-theme",render:function(){return'<div class="'.concat(u.CLASS.MINDER_SUB_MENU,'">')+'<div class="'.concat(f.CLASS.FLOAT_LAYER,' subMenu">')+'<div class="submenu-group">'+'<div class="group-title">'.concat(r.lang.Outline.OrganizationMenu,"</div>")+'<div class="content-container organization-menu">'+r._orgList.reduce((function(e,r,o){var i=h.getMinderTemplateIcon(r.id);return e+'<div class="submenu-item '.concat(t.EventClass.CLICK).concat(n===r.id?" active":"",'" title="').concat(r.name,'" data-event="').concat(t.EVENT_TYPE.CHANGE_ORG,'" data-index="').concat(o,'">')+i+"</div>"}),"")+'</div></div><div class="submenu-group">'+'<div class="group-title">'.concat(r.lang.Outline.ThemeMenu,"</div>")+'<div class="content-container theme-menu">'+r._themeList.reduce((function(n,o,i){var a=u.MINDER_THEME_TYPE_IMAGE["THEME".concat(i+1)];r.env.options.nightMode.enable&&(a=u.MINDER_THEME_TYPE_IMAGE["THEME".concat(i+1,"_NIGHT")]),"en"===r.lang.version&&(a=a.replace(/(\.[^.]*)$/g,"-en$1"));var l="".concat(r.env.options.dependencyUrl).concat("/minder/themeImg/").concat(a);return n+'<div class="submenu-item '.concat(t.EventClass.CLICK).concat(e===o.id?" active":"",'" data-event="').concat(t.EVENT_TYPE.CHANGE_THEME,'" data-index="').concat(i,'">')+'<img src="'.concat(l,'" title="').concat(o.name,'" class="theme-img" />')+"</div>"}),"")+"</div></div></div></div>"}}];this._container=this.env.doc.createElement(f.TAG.TMP_TAG),this.domUtils.addClass(this._container,u.CLASS.MINDER_MENU),this._container.innerHTML=o.reduce((function(e,n){return e+'<div class="menu-item '.concat(t.EventClass.CLICK,'" data-event="').concat(n.type,'">')+(n.icon?'<i class="editor-icon '.concat(n.icon,'"></i>'):"")+(n.name?'<div class="menu-name">'.concat(n.name,"</div>"):"")+"</div>"+n.render()}),""),this.domUtils.setContenteditable(this._container,!1)}this.env.body.appendChild(this._container),this.show()}},{key:"_firstOpen",value:function(){p.storage.get(u.STORAGE_KEY.FIRST_MINDER)||(this.showSubMenu(),p.storage.set(u.STORAGE_KEY.FIRST_MINDER,!0))}},{key:"_getTemplateMenu",value:function(){return this._container.querySelector(".".concat(u.CLASS.MINDER_MENU," .organization-menu"))}},{key:"_getThemeMenu",value:function(){return this._container.querySelector(".".concat(u.CLASS.MINDER_MENU," .theme-menu"))}},{key:"_getSubMenu",value:function(){return this._container.querySelector(".".concat(u.CLASS.MINDER_SUB_MENU))}},{key:"_isHoverMode",value:function(){return"hover"===this.env.options.outline.minderMenuShowMethod&&!this.env.supportTouchEvent}},{key:"_hideSubMenuForHover",value:function(){var e=this;this._clearMenuTimer(),this._menuTimer=setTimeout((function(){e.hideSubMenu()}),200)}},{key:"_openSubMenuForHover",value:function(){var e=this;this._menuTimer=setTimeout((function(){e.showSubMenu()}),200)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._handler.onChangeTemplate=e.onChangeTemplate,this._handler.onChangeTheme=e.onChangeTheme,this._createdMenu(e.initTheme,e.initTemplate),this._firstOpen(),this._event.bind()}},{key:"hide",value:function(){this._container&&(this.domUtils.removeClass(this._container,"active"),this.hideSubMenu())}},{key:"show",value:function(){if(this._container){if(this.env.options.outline.hideMinderMenu){this.domUtils.css(this._container,{width:0,height:0,top:"8px",marginTop:"constant(safe-area-inset-top)"});var e=this._container.querySelector(".menu-item");this.domUtils.remove(e);var t=this._getSubMenu();this.domUtils.css(t,{top:0})}this.domUtils.addClass(this._container,"active")}}},{key:"hideSubMenu",value:function(){var e=this._getSubMenu();this.domUtils.removeClass(e,"active"),this._changeSubMenuStatusCallback(!1)}},{key:"showSubMenu",value:function(){var e=this._getSubMenu();this.domUtils.addClass(e,"active"),this._changeSubMenuStatusCallback(!0)}}])&&i(n.prototype,r),d&&i(n,d),t}(d);m.EVENT_TYPE={THEME:"theme",ORGANIZATION:"organization",OPEN_SUB_MENU:"openSubMenu",CHANGE_THEME:"changeTheme",CHANGE_ORG:"changeOrg"},m.EventClass={CLICK:"minder-menu-click"},e.exports=m},function(e,t,n){var r=n(37),o={getMinderTemplateIcon:function(e){var t=r.CLASS.MINDER_MENU_SVG_ICON,n=r.CLASS.MINDER_MENU_SVG_ICON_LIGHT;switch(e){case r.MINDER_TEMPLATE_TYPE.DEFAULT:return'\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          viewBox="0 0 1024 1024" style="enable-background:new 0 0 1024 1024;" xml:space="preserve">\n          <g class="'.concat(n,'">\n            <path class="').concat(t,'" d="M274.5,249.5h-100c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h100c27.6,0,50-22.4,50-50v-25\n              C324.5,271.9,302.1,249.5,274.5,249.5z M274.5,649.5h-100c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h100\n              c27.6,0,50-22.4,50-50v-25C324.5,671.9,302.1,649.5,274.5,649.5z M849.5,249.5h-100c-27.6,0-50,22.4-50,50v25\n              c0,27.6,22.4,50,50,50h100c27.6,0,50-22.4,50-50v-25C899.5,271.9,877.1,249.5,849.5,249.5z M849.5,649.5h-100\n              c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h100c27.6,0,50-22.4,50-50v-25C899.5,671.9,877.1,649.5,849.5,649.5z"/>\n          </g>\n          <path class="').concat(t,'" d="M324.8,699.5c96.6,0,175-83.9,175-187.5s-78.4-187.5-175-187.5v-25c110.5,0,200,95.1,200,212.5\n            s-89.5,212.5-200,212.5V699.5z"/>\n          <path class="').concat(t,'" d="M449.5,449.5h125c27.6,0,50,22.4,50,50v25c0,27.6-22.4,50-50,50h-125c-27.6,0-50-22.4-50-50v-25\n            C399.5,471.9,421.9,449.5,449.5,449.5z"/>\n          <path class="').concat(t,'" d="M699.8,699.5c-96.7,0-175-83.9-175-187.5s78.3-187.5,175-187.5v-25c-110.5,0-200,95.1-200,212.5\n            s89.5,212.5,200,212.5V699.5z"/>\n        </svg>');case r.MINDER_TEMPLATE_TYPE.FISH_BONE:return'\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          viewBox="0 0 1024 1024" style="enable-background:new 0 0 1024 1024;" xml:space="preserve">\n          <path class="'.concat(t,'" d="M212,449.5H87c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h125c27.6,0,50-22.4,50-50v-25\n            C262,471.9,239.6,449.5,212,449.5z M780,499.5l-35.5-0.1l0.1,0.1h-64.6l100.3-100.3l-35.3,0l-25.4,25.4l-74.9,74.9H465.5l-21-0.1\n            l0.1,0.1h-64.6l100.3-100.3l-35.3,0l-25.4,25.4l-74.9,74.9h-82.3v25h207.3l99.7,99.7l35.4,0l-99.7-99.7h264.6l99.7,99.7l35.4,0\n            L780,499.5z"/>\n          <g class="').concat(n,'">\n            <path class="').concat(t,'" d="M412,274.5h100c27.6,0,50,22.4,50,50v25c0,27.6-22.4,50-50,50H412c-27.6,0-50-22.4-50-50v-25\n              C362,296.9,384.4,274.5,412,274.5z"/>\n            <path class="').concat(t,'" d="M712,274.5h100c27.6,0,50,22.4,50,50v25c0,27.6-22.4,50-50,50H712c-27.6,0-50-22.4-50-50v-25\n              C662,296.9,684.4,274.5,712,274.5z"/>\n            <path class="').concat(t,'" d="M537,624.5h100c27.6,0,50,22.4,50,50v25c0,27.6-22.4,50-50,50H537c-27.6,0-50-22.4-50-50v-25\n              C487,646.9,509.4,624.5,537,624.5z"/>\n            <path class="').concat(t,'" d="M837,624.5h100c27.6,0,50,22.4,50,50v25c0,27.6-22.4,50-50,50H837c-27.6,0-50-22.4-50-50v-25\n              C787,646.9,809.4,624.5,837,624.5z"/>\n          </g>\n        </svg>');case r.MINDER_TEMPLATE_TYPE.RIGHT:return'\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          viewBox="0 0 1024 1024" style="enable-background:new 0 0 1024 1024;" xml:space="preserve">\n          <g class="'.concat(n,'">\n            <path class="').concat(t,'" d="M812,149.5H712c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h100c27.6,0,50-22.4,50-50v-25\n                C862,171.9,839.6,149.5,812,149.5z M812,349.5H712c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h100c27.6,0,50-22.4,50-50v-25\n                C862,371.9,839.6,349.5,812,349.5z M812,549.5H712c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h100c27.6,0,50-22.4,50-50v-25\n                C862,571.9,839.6,549.5,812,549.5z M811.2,749.5h-100c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h100c27.6,0,50-22.4,50-50\n                v-25C861.2,771.9,838.8,749.5,811.2,749.5z"/>\n          </g>\n          <path class="').concat(t,'" d="M662,224.5c-207.1,0-375,128.7-375,287.5c0,158.8,167.9,287.5,375,287.5v25c-220.9,0-400-139.9-400-312.5\n            c0-172.6,179.1-312.5,400-312.5V224.5"/>\n          <path class="').concat(t,'" d="M662,399.5c-234.7,0-425,50.4-425,112.5s190.3,112.5,425,112.5 M662,599.5c-220.9,0-400-39.2-400-87.5\n            s179.1-87.5,400-87.5"/>\n          <path class="').concat(t,'" d="M212,449.5h125c27.6,0,50,22.4,50,50v25c0,27.6-22.4,50-50,50H212c-27.6,0-50-22.4-50-50v-25\n            C162,471.9,184.4,449.5,212,449.5z"/>\n        </svg>');case r.MINDER_TEMPLATE_TYPE.STRUCTURE:return'\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          viewBox="0 0 1024 1024" style="enable-background:new 0 0 1024 1024;" xml:space="preserve">\n          <path class="'.concat(t,'" d="M624.5,624.5v-50h-25v50h-200v75h25v-50h375v50h25v-75H624.5z M599.5,474.5h25v-75h-200v-50h50\n            c27.6,0,50-22.4,50-50v-25c0-27.6-22.4-50-50-50h-125c-27.6,0-50,22.4-50,50v25c0,27.6,22.4,50,50,50h50v50h-200v75h25v-50h375\n            V474.5z"/>\n          <g class="').concat(n,'">\n            <path class="').concat(t,'" d="M149.5,474.5h125c27.6,0,50,22.4,50,50s-22.4,50-50,50h-125c-27.6,0-50-22.4-50-50S121.9,474.5,149.5,474.5z"/>\n            <path class="').concat(t,'" d="M549.5,474.5h125c27.6,0,50,22.4,50,50s-22.4,50-50,50h-125c-27.6,0-50-22.4-50-50S521.9,474.5,549.5,474.5z"/>\n            <path class="').concat(t,'" d="M349.5,699.5h125c27.6,0,50,22.4,50,50s-22.4,50-50,50h-125c-27.6,0-50-22.4-50-50S321.9,699.5,349.5,699.5z"/>\n            <path class="').concat(t,'" d="M749.5,699.5h125c27.6,0,50,22.4,50,50s-22.4,50-50,50h-125c-27.6,0-50-22.4-50-50S721.9,699.5,749.5,699.5z"/>\n          </g>\n        </svg>');default:return""}}};e.exports=o},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(37),f=n(2),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._styleId="wiz_night_mode_style",n._addKeyToMap=function(e,t){t[e]||/^[.|#]?[\d]+/i.test(e)||!/^[.|#]?[. \w-]+$/i.test(e)||(t[e=e.replace(/[.\-]/g,(function(e,t){return t>0?"\\"+e:e}))]="")},n._addItemAttrToMap=function(e,t,r){if(t){var o=t.tagName.toLowerCase();if(!/^(style|script|link|meta|img)$/gi.test(o)&&!n.domUtils.hasClass(t,d.CLASS.TODO_CHECKBOX)&&!n.domUtils.hasClass(t,d.CLASS.TODO_AVATAR)){var i=t.className;if(i&&i.length>0)for(var a=i.split(" "),l=0;l<a.length;l++){var s=a[l];0!==s.length&&n._addKeyToMap("."+n._keyFilter(s),r)}var c=t.id;c&&c.length>0&&n._addKeyToMap("#"+n._keyFilter(c),r),e&&!/wiz[\-_]/i.test(e)?n._addKeyToMap("#"+n._keyFilter(e)+" "+o,r):n._addKeyToMap(n._keyFilter(o),r)}}},n._checkElement=function(e,t,r){if(!(n.domUtils.hasClass(t,d.CLASS.TABLE_TOOLS)||n.domUtils.hasClass(t,d.CLASS.TABLE_COL_BAR)||n.domUtils.hasClass(t,d.CLASS.TABLE_DELETE_ZONE)||n.domUtils.hasClass(t,d.CLASS.TABLE_BAR)||n.domUtils.hasClass(t,d.CLASS.TABLE_MAIN_MENU)||e===d.ID.TABLE_RANGE_BORDER||t.id===d.ID.TABLE_RANGE_BORDER||e===d.ID.IMAGE_MENU_CONTAINER||t.id===d.ID.IMAGE_MENU_CONTAINER||t.id===d.ID.MARKER_ROOT||n.domUtils.hasClass(t,d.CLASS.CODE_CONTAINER))){n._addItemAttrToMap(e,t,r);for(var o=t.children,i=0;i<o.length;i++){var a=o[i];n._checkElement(t.id?t.id:e,a,r)}}},n._keyFilter=function(e){return e.replace(/ /g,"")},n.getBaseStyle=function(e,t){var r={div:"",p:""},o=[];n._checkElement("",n.env.body,r);var i="{color:"+e+" !important; background-color:"+t+" !important; background-image: none !important; box-shadow: none !important; border-color:"+e+" !important; }";for(var a in r)r.hasOwnProperty(a)&&o.push(a);var l=o.join(", ");return l+=i},n.on=function(){if(n.env.options.nightMode.enable){var e=n.env.options.nightMode.color||"#7990b6",t=n.env.options.nightMode.bgColor||"#1f2126",r={hotkey:"#627088",outline:{border:"#404959",completed:"#627088",dot:e,dotHover:"rgba(151, 163, 184, 0.15)",nodeShowMenu:"#2b2f38",nodeSelected:"#2b2f38",notes:"#627088",switchHover:"#448aff"},toc:{bg:"#2b2f38"}};n.env.client.type.isMac&&(r.toc.bg="#2e2e2e",r.outline={border:"#474747",completed:"#5c5c5c",dot:e,dotHover:"rgba(132, 132, 132, 0.15)",nodeShowMenu:"#333333",nodeSelected:"#333333",notes:"#5c5c5c",switchHover:"#448aff"}),n.env.client.type.isAndroid&&(r.outline={border:"#273d62",completed:"#536178",dot:e,dotHover:"rgba(100, 115, 141, 0.15)",nodeShowMenu:"#353c47",nodeSelected:"#353c47",notes:"#536178",switchHover:"#448aff"}),n.env.client.type.isIOS&&(r.outline={completed:"rgba(68, 138, 255, 0.2)",dot:e,dotHover:"rgba(121, 144, 182, 0.15)",nodeShowMenu:"#32353e",nodeSelected:"#32353e",notes:"#536178",switchHover:"#448aff"}),n.off();var o=n.getBaseStyle(e,t);o+="iframe#.wiz-content-iframe-viewer {filter:none;-webkit-filter:none;}"+"".concat(d.TAG.TMP_HIGHLIGHT_TAG," {background-color: #50a9fb !important;  color: black !important;}")+"a, a:visited, a:active {color: #448aff !important;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.FLOAT_LAYER,", ")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,",")+".".concat(d.CLASS.WIZ_BODY," .wiz-select-plugin-header-text")+"{background-color: #22272F !important;color: #97A3B8 !important; border-color: #3E495B !important; box-shadow: none;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," .").concat(d.CLASS.TOOL_TIP_ARROW_BG)+" {border-color: transparent !important;border-bottom-color: #3E495B !important;background-color: transparent !important;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," .").concat(d.CLASS.TOOL_TIP_ARROW," {display: none !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," input, ")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM," {color: #97A3B8 !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM," {background-color: #22272F !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,":hover {background-color: #2E353F !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".disabled {color: #484E5C !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".split {border-top-color: #3E495B !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".disabled:hover,")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_LINE_POINT,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ROW," {background-color: transparent !important;}")+".".concat(d.CLASS.TABLE_TOOLS," {background-color:#22272F !important; border-color: #3E495B !important;}")+".".concat(d.CLASS.TABLE_TOOLS," i.editor-icon {color: #97A3B8;}")+"#wiz-table-col-line, #wiz-table-row-line,#wiz-table-range-border_start_top, #wiz-table-range-border_range_top,#wiz-table-range-border_start_right, #wiz-table-range-border_range_right,#wiz-table-range-border_start_bottom, #wiz-table-range-border_range_bottom,#wiz-table-range-border_start_left, #wiz-table-range-border_range_left,#wiz-table-range-border_start_dot, #wiz-table-range-border_range_dot {background-color: #448aff !important;}"+".".concat(d.CLASS.TABLE_LINE_BOX," {background-color: #404959 !important;}")+".".concat(d.CLASS.TABLE_LINE_BOX,":hover {background-color: #627088 !important;}")+".".concat(d.CLASS.TABLE_LINE_BOX,".active {background-color: #448aff !important;}")+".".concat(d.CLASS.TABLE_LINE_POINT,"::after {background-color: #404959 !important;}")+".".concat(d.CLASS.WIZ_BODY," .wiz-select-plugin-header {color: #97A3B8 !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,".selected,")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,":hover")+" {background-color: #2E353F !important;}"+".".concat(d.CLASS.WIZ_BODY," #").concat(d.ID.IMAGE_MENU_CONTAINER," {background-color: transparent !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.IMG_SUB_MENU," .").concat(d.CLASS.IMG_SUB_MENU_ITEM," {color: #97A3B8 !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.IMG_SUB_MENU," .").concat(d.CLASS.IMG_SUB_MENU_ITEM,":hover {background-color: #2E353F !important;}")+".".concat(d.CLASS.WIZ_BODY," .wiz-select-plugin-header {background-color: transparent !important;}")+".".concat(d.CLASS.WIZ_BODY," .wiz-select-plugin-header i {border-left-color: #3E495B !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," div,")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," span")+" {background-color: transparent !important;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,":hover div")+" {color: #FFFFFF !important;}.wiz-content-outer {border-color: transparent !important;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," .").concat(d.CLASS.HOTKEY_LAYER," .").concat(d.CLASS.HOTKEY," {color:").concat(r.hotkey," !important;}"),n.req.editorBridge.isOutline?o+=""+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.CONTENT,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.CHILD,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.OPERATOR_CONTAINER,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.OPERATOR_BAR,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW," .").concat(u.CLASS.SWITCH,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW," .").concat(u.CLASS.SWITCH," i.editor-icon,")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE,".").concat(u.CLASS.NODE_SHOW_MENU," .").concat(u.CLASS.NODE)+" {background-color:transparent !important;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW,":hover .").concat(u.CLASS.SWITCH,".active i {color:").concat(r.outline.switchHover," !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT_ICON," {background-color:").concat(r.outline.dot," !important;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.EDITING," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT,":hover {background-color:").concat(r.outline.dotHover," !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.CHILD," {border-color:").concat(r.outline.border," !important;;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE,".").concat(u.CLASS.COMPLETE," > .").concat(u.CLASS.ROW," .").concat(u.CLASS.CONTENT," {color:").concat(r.outline.completed," !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE," .").concat(u.CLASS.NOTES," {color:").concat(r.outline.notes," !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE,".").concat(u.CLASS.NODE_SHOW_MENU," {background-color:").concat(r.outline.nodeShowMenu," !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE,".").concat(u.CLASS.NODE_SELECTED," {background-color:").concat(r.outline.nodeSelected," !important;}"):o+="div.wiz-code-container .CodeMirror {border: 1px solid rgba(255, 255, 255, 0.2) !important; box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2) !important;}div.CodeMirror-selected {background-color: #49483E !important;}"+".".concat(d.CLASS.WIZ_BODY," .wiz_toc_layer {background-color:").concat(r.toc.bg," !important;}")+".".concat(d.CLASS.WIZ_BODY," .wiz_toc_layer a,")+".".concat(d.CLASS.WIZ_BODY," .wiz_toc_layer a:visited,")+".".concat(d.CLASS.WIZ_BODY," .wiz_toc_layer a:active {background-color:").concat(r.toc.bg," !important; color: #448aff !important;}")+".".concat(d.CLASS.MARKDOWN_BODY," table tr {background-color:transparent !important;}")+".".concat(d.CLASS.MARKDOWN_BODY," code,")+".".concat(d.CLASS.MARKDOWN_BODY," tt {background-color:#4c3d40 !important; color:#cf506f !important;}")+".".concat(d.CLASS.WIZ_BODY," .CodeMirror-activeline .CodeMirror-activeline-gutter, ")+".".concat(d.CLASS.WIZ_BODY," #").concat(d.ID.MARKER_ROOT,", ")+".".concat(d.CLASS.WIZ_BODY," #").concat(d.ID.MARKER_ROOT," div {background-color: transparent !important;}")+".".concat(d.CLASS.WIZ_BODY," #").concat(d.ID.MARKER_ROOT,' svg *[stroke="#333333"] {stroke:#a6a6a6;}'),n.req.wizStyle.insertStyle({id:n._styleId,name:d.NAME.TMP_STYLE},o)}},n.off=function(){var e=n.env.doc.getElementById(n._styleId);e&&e.remove()},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(1),d=n(37),u=n(3),f=n(43),h=(n(25),n(2)),p=(new f,function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,l(t).call(this)))._menuForDot=null,e._menuForSelected=null,e._curNotes=null,e._selectStartNode=null,e._selectEndNode=null,e._positionFlag=null,e._selectCurNodes=null,e._dragData={},e._dragTimerForParent=null,e.hasLoaded=!1,e._autoHideSelectMenu=function(){return 0===e._outlineUtils.getSelectedNodes().length&&(e._hideSelectMenu(),!0)},e._clearPositionFlag=function(){e._positionFlag&&e.domUtils.remove(e._positionFlag)},e._createOptionItem=function(t,n){var r,o,i=e.env.doc.createElement("div");return(r=e.env.doc.createElement("span")).innerText=t,i.appendChild(r),e.env.browser.isMobile||e.env.browser.isAndroid||e.env.browser.isIPad||e.env.browser.isIPhone||((o=e.env.doc.createElement("span")).innerText=n,i.appendChild(o),e.domUtils.addClass(o,c.CLASS.HOTKEY)),e.domUtils.addClass(i,c.CLASS.HOTKEY_LAYER),i},e._createPositionFlag=function(t,n){e._positionFlag||(e._positionFlag=e.env.doc.createElement(c.TAG.TMP_TAG)),e.env.body.appendChild(e._positionFlag);var r=e.domUtils.getOffset(t),o=n?r.top+t.clientHeight-1:r.top-1,i=r.left+6;return e.domUtils.addClass(e._positionFlag,d.CLASS.DRAG_FLAG),e.domUtils.css(e._positionFlag,{top:o+"px",left:i+"px"}),e._positionFlag},e._getCurNodes=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e._outlineUtils.getCurNodes(),r=[];return t.excludeSelected||(r=t.getAllSelected?n.selectedAllNodes:n.selectedRootNodes),n.focusNode?r.push(n.focusNode):n.showMenuNode&&(r.push(n.showMenuNode),t.includeShowMenuNodeChildren&&(r=r.concat(e._outlineUtils.getNodeAllChildNodes(n.showMenuNode)))),r},e._getMenuOptionsDataForDot=function(t){var n=e.env.browser.isMac?"MAC":"WIN",r=e._createOptionItem(e.lang.Outline.AddNotes,d.HOTKEY_MAP[n].ADD_NOTES),o=e._createOptionItem(e.lang.Outline.AddImage,d.HOTKEY_MAP[n].ADD_IMAGE),i=e._createOptionItem(e.lang.Common.Complete,d.HOTKEY_MAP[n].COMPLETE),a=e._createOptionItem(e.lang.Common.Delete,d.HOTKEY_MAP[n].DELETE),l=e._createOptionItem(e.lang.Outline.Duplicate,d.HOTKEY_MAP[n].DUPLICATE),s=e._createOptionItem(e.lang.Common.Indent,d.HOTKEY_MAP[n].INDENT),c=e._createOptionItem(e.lang.Common.Outdent,d.HOTKEY_MAP[n].OUTDENT),u=e._createOptionItem(e.lang.Common.UnComplete,d.HOTKEY_MAP[n].UNCOMPLETE),f=[];return e._outlineUtils.isNodeCompleted(t)?f.push({obj:u,value:d.MENU.UNCOMPLETE}):f.push({obj:i,value:d.MENU.COMPLETE}),f.push({obj:r,value:d.MENU.ADD_NOTES}),e.env.options.editor.callback.onUploadImage&&f.push({obj:o,value:d.MENU.ADD_IMAGE}),f.push({obj:s,value:d.MENU.INDENT}),f.push({obj:c,value:d.MENU.OUTDENT}),f.push({obj:l,value:d.MENU.DUPLICATE}),f.push({obj:a,value:d.MENU.DELETE}),f},e._getMenuOptionsDataForSelect=function(t){var n=e.env.browser.isMac?"MAC":"WIN",r=e._createOptionItem(e.lang.Common.Complete,d.HOTKEY_MAP[n].COMPLETE),o=e._createOptionItem(e.lang.Common.Delete,d.HOTKEY_MAP[n].DELETE),i=e._createOptionItem(e.lang.Common.UnComplete,d.HOTKEY_MAP[n].UNCOMPLETE),a=[{obj:o,value:d.MENU.DELETE}];return e._outlineUtils.isNodeCompleted(t)?a.splice(0,0,{obj:i,value:d.MENU.UNCOMPLETE}):a.splice(0,0,{obj:r,value:d.MENU.COMPLETE}),a},e._hideAllMenu=function(){e.req.minderCore.hideMinderNote(),e._menuForDot&&e._menuForDot.hide(),e._outlineUtils.cancelSelected(),e._autoHideSelectMenu()},e._hideSelectMenu=function(){e._menuForSelected&&e._menuForSelected.hide(),e._selectStartNode=null,e._selectStartNodeTarget={},e._selectEndNode=null},e._initDragData=function(t,n,r){e._dragData={start:!1,startX:n,startY:r,startNode:t,startIsCollapsed:!0,dragContainer:null,target:null,moveX:n,moveY:r}},e._showNodeMenu=function(t){if(t){var n=e._outlineUtils.getNodeDotButton(t);e.domUtils.addClass(t,d.CLASS.NODE_SHOW_MENU);var r=e._getMenuOptionsDataForDot(t);if(e._menuForDot&&e._menuForDot.parentNode){if(e._menuForDot.show(n,r),!e._menuForDot.isShow())return void e._outlineUtils.focusNode(t)}else e._menuForDot=e.req.menuPlugin.show({data:r,target:n,layout:c.TYPE.LAYOUT.BOTTOM_START,space:8,onSelected:e._handler.onSelectedMenuForDot,onHidden:e._handler.onHiddenMenuForDot});e.rangeUtils.remove()}},e._showSelectedNodesMenu=function(){if(!e._autoHideSelectMenu())if(e.env.readonly)e.rangeUtils.remove();else{var t=e._outlineUtils.getSelectedNodes()[0],n=e._outlineUtils.getNodeRow(t),r=e._getMenuOptionsDataForSelect(t);e._menuForSelected?e._menuForSelected.show(n,r):e._menuForSelected=e.req.menuPlugin.show({data:r,target:n,autoHide:!1,onSelected:e._handler.onSelectedMenuForSelect,onHidden:e._handler.onHiddenMenuForSelect}),e.rangeUtils.remove()}},e._event={bind:function(){e._event.unbind(),e.env.event.add(c.EVENT.AFTER_RESTORE_HISTORY,e._handler.afterRestoreHistory),e.env.event.add(c.EVENT.ON_CLICK,e._handler.onClick),e.env.event.add(c.EVENT.ON_CUT,e._handler.onCut),e.env.event.add(c.EVENT.ON_INPUT,e._handler.onInput),e.env.event.add(c.EVENT.ON_KEY_DOWN,e._handler.onKeydown),e.env.event.add(c.EVENT.ON_MOUSE_DOWN,e._handler.onMousedown),e.env.event.add(c.EVENT.ON_SELECTION_CHANGE,e._handler.onSelectionChange)},unbind:function(){e.env.event.remove(c.EVENT.AFTER_RESTORE_HISTORY,e._handler.afterRestoreHistory),e.env.event.remove(c.EVENT.ON_CLICK,e._handler.onClick),e.env.event.remove(c.EVENT.ON_INPUT,e._handler.onInput),e.env.event.remove(c.EVENT.ON_KEY_DOWN,e._handler.onKeydown),e.env.event.remove(c.EVENT.ON_MOUSE_DOWN,e._handler.onMousedown),e.env.event.remove(c.EVENT.ON_SELECTION_CHANGE,e._handler.onSelectionChange)},bindDragNode:function(){e._event.unbindDragNode(),e.env.doc.addEventListener("mousemove",e._handler.onMousemoveForDrag),e.env.doc.addEventListener("mouseup",e._handler.onMouseupForDrag)},unbindDragNode:function(){e.env.doc.removeEventListener("mousemove",e._handler.onMousemoveForDrag),e.env.doc.removeEventListener("mouseup",e._handler.onMouseupForDrag)},bindSelectNodes:function(){e._event.unbindSelectNodes(),e.env.doc.addEventListener("mousemove",e._handler.onMousemoveForSelect),e.env.doc.addEventListener("mouseup",e._handler.onMouseupForSelect)},unbindSelectNodes:function(){e.env.doc.removeEventListener("mousemove",e._handler.onMousemoveForSelect),e.env.doc.removeEventListener("mouseup",e._handler.onMouseupForSelect)}},e._restoreMenu=function(){if(clearTimeout(e._restoreTimer),e.req.imgUtils.checkImgListCompleted(e.env.body.querySelectorAll("img"))){if(e._outlineUtils.getSelectedNodes(!0).length>0)e._showSelectedNodesMenu();else{var t=e._outlineUtils.getShowMenuNode();t&&e._showNodeMenu(t)}}else e._restoreTimer=setTimeout((function(){e._restoreMenu()}),50)},e._handler={afterRestoreHistory:function(){e._menuForDot=null,e._menuForSelected=null,e._curNotes=null,e._selectStartNode=null,e._selectEndNode=null,e._selectCurNodes=null,e._positionFlag=null,e._restoreMenu()},onClick:function(t){var n=t.target,r=e._outlineUtils.getNode(n);if(e.domUtils.getParentByClass(n,d.CLASS.SWITCH,!0))e._outlineUtils.switchNode(r,!0);else if(!e.env.readonly)if(e.domUtils.getParentByClass(n,d.CLASS.DOT,!0))e._showNodeMenu(r);else if(n===e.env.body){if(e._outlineUtils.getSelectedNodes(!0).length>0)return;var o=e._outlineUtils.getContainer(),i=e.domUtils.getPageScroll();t.clientY+i.top>o.clientHeight&&e._outlineUtils.focusLastNode()}},onCut:function(t){e.env.browser.isIe&&setTimeout((function(){e._handler.onInput(t)}),50)},onInput:function(t){var n=t.target;if(e._outlineUtils.isInContent(t.target)){var r=e._outlineUtils.getNode(n);if(!r)return;var o=e._outlineUtils.getNodeContent(r);!o.querySelector("br")&&e.domUtils.isEmptyDom(o)&&(o.innerHTML="<br/>",e.rangeUtils.setRange(o,0))}},onKeydown:function(t){var n=t.keyCode||t.which,r=e.rangeUtils.getRange();if(r){var o=e._outlineUtils.getNode(),i=e._outlineUtils.getNodeContent(o),a=e._outlineUtils.getNodeNotes(o);if(o){var l=t.target,s=e._outlineUtils.isInContent(l),c=!s&&e._outlineUtils.isInNotes(l);if(!e.env.browser.isIe||8!==n&&46!==n||setTimeout((function(){e._handler.onInput(t)}),50),68===n&&t.shiftKey&&(t.metaKey&&e.env.browser.isMac||t.ctrlKey&&!e.env.browser.isMac))e.req.historyUtils.saveSnap(!1),e._outlineUtils.cloneNodeToNext(o,!0);else if(46===n&&t.shiftKey)e.req.historyUtils.saveSnap(!1),e.deleteNodes([o]);else if(46===n&&s){if(e.req.historyUtils.saveSnap(!1),!r.collapsed||!e._outlineUtils.isCaretInLast(i))return;e._outlineUtils.mergeNext()}else if(8===n){e.req.historyUtils.saveSnap(!1);var d=!1;if(r.collapsed&&(s&&e._outlineUtils.isCaretInFirst(i)?d=!0:c&&e.domUtils.isEmptyDom(a)&&(d=!0)),!d)return;if(c)e._outlineUtils.removeNotes(o),e._outlineUtils.focusNode(o,!0);else if(s)if(e._outlineUtils.isEmptyNode(o)){e.deleteNodes([o],!0)}else e._outlineUtils.mergePrevious()}else if(13===n&&(t.metaKey&&e.env.browser.isMac||t.ctrlKey&&!e.env.browser.isMac))e.req.historyUtils.saveSnap(!1),e.setCompleted(void 0,[o]);else if(13===n)if(e.req.historyUtils.saveSnap(!1),t.shiftKey){if(c)return;e.addNotes()}else if(c)e._outlineUtils.createNextNode();else{if(!o)return;var f=e._outlineUtils.getNodeContent(o);e.domUtils.isEmptyDom(f)&&e._outlineUtils.outdent()||e._outlineUtils.splitNodeFromRange()}else{if(37===n&&t.shiftKey)return;if(37===n&&r.collapsed)if(s&&e._outlineUtils.isCaretInFirst(i))e._outlineUtils.focusPreviousNode(null,!0);else{if(!c||!e._outlineUtils.isCaretInFirst(a))return;e._outlineUtils.focusNode(o,!0)}else{if(39===n&&t.shiftKey)return;if(39===n&&r.collapsed){if(!(s&&e._outlineUtils.isCaretInLast(i)||c&&e._outlineUtils.isCaretInLast(a)))return;e._outlineUtils.focusNextNode(null,!1)}else if(38===n&&t.shiftKey){if(!s||!e._outlineUtils.isCaretInFirst(i,r.startContainer,r.startOffset))return;e._selectStartNode=o,e._selectEndNode=o,e._outlineUtils.selectNodeA2B(e._selectStartNode,e._selectEndNode),e._showSelectedNodesMenu()}else if(38===n&&c){if(!e._outlineUtils.isCaretInFirst(a))return;e._outlineUtils.focusNode(o,!0)}else if(38===n&&s){if(!e._outlineUtils.focusPreviousNode(null,!1))return}else if(40===n&&t.shiftKey){if(!s||!e._outlineUtils.isCaretInLast(i,r.endContainer,r.endOffset))return;e._selectStartNode=o,e._selectEndNode=o,e._outlineUtils.selectNodeA2B(e._selectStartNode,e._selectEndNode),e._showSelectedNodesMenu()}else if(40===n&&c){if(!e._outlineUtils.isCaretInLast(a))return;e._outlineUtils.focusNextNode(o,!1)}else if(40===n&&s){if(!e._outlineUtils.focusNextNode(null,!1))return}else{if(9!==n){if(u.checkNonTxtKey(t))return;return void e.req.historyUtils.saveSnap(!1)}if(e.req.historyUtils.saveSnap(!1),c){var h=String.fromCharCode(160),p=e.env.doc.createTextNode(h+" "+h+h);r.insertNode(p),r.collapse()}else t.shiftKey?e.outdent():e.indent()}}}u.stopEvent(t)}}else e._handler.onKeydownForMultiNotes(t)},onKeydownForMultiNotes:function(t){var n=t.keyCode||t.which,r=e._outlineUtils.getShowMenuNode(),o=r?[r]:e._outlineUtils.getSelectedNodes(!0),i=r?[r]:e._outlineUtils.getSelectedNodes();if(r||0!==o.length){var a=o[0],l=o[o.length-1];if(68===n&&t.shiftKey&&r&&(t.metaKey&&e.env.browser.isMac||t.ctrlKey&&!e.env.browser.isMac))e.req.historyUtils.saveSnap(!1),e._outlineUtils.cloneNodeToNext(r,!0),e._hideAllMenu();else if(46===n&&t.shiftKey)e.req.historyUtils.saveSnap(!1),e.deleteNodes(o),e._hideAllMenu();else if(13===n&&(t.metaKey&&e.env.browser.isMac||t.ctrlKey&&!e.env.browser.isMac)){e.req.historyUtils.saveSnap(!1);var s=!e._outlineUtils.isNodeCompleted(a);e.setCompleted(s,i),e._hideAllMenu()}else if(13===n&&t.shiftKey&&r)e.addNotes([r]),e._hideAllMenu();else{if(37===n&&t.shiftKey)return;if(37===n)e._outlineUtils.focusNode(a),e._hideAllMenu();else{if(39===n&&t.shiftKey)return;if(39===n)e._outlineUtils.focusNode(l,!0),e._hideAllMenu();else if(38===n&&t.shiftKey){e._selectStartNode||(e._selectStartNode=a,e._selectEndNode=a);var c=e._outlineUtils.compareNodeIndex(e._selectStartNode,e._selectEndNode),d={includeChildren:c>0,ignoreCollapsed:!0},f=e._outlineUtils.getPreviousNode(e._selectEndNode,d),h=e._outlineUtils.compareNodeIndex(e._selectStartNode,f),p=!1;c<0&&h>0&&(p=!0,f=e._outlineUtils.getLastChildNode(f,{ignoreCollapsed:!0})),f&&(e._outlineUtils.selectNodeA2B(e._selectStartNode,f),p?(o=e._outlineUtils.getSelectedNodes(!0),e._selectEndNode=o[o.length-1]):e._selectEndNode=f,e._showSelectedNodesMenu())}else if(38===n){var m=e._outlineUtils.getPreviousNode(a,{includeChildren:!0,ignoreCollapsed:!0})||a;e._outlineUtils.focusNode(m),e._hideAllMenu()}else if(40===n&&t.shiftKey){e._selectStartNode||(e._selectStartNode=a,e._selectEndNode=a);var g={includeChildren:e._outlineUtils.compareNodeIndex(e._selectStartNode,e._selectEndNode)>0>0,ignoreCollapsed:!0},v=e._outlineUtils.getNextNode(e._selectEndNode,g);v&&(e._selectEndNode=v,e._outlineUtils.selectNodeA2B(e._selectStartNode,e._selectEndNode),e._showSelectedNodesMenu())}else if(40===n){var b=e._outlineUtils.getNextNode(l,{ignoreCollapsed:!0});b?e._outlineUtils.focusNode(b):(b=e._outlineUtils.getLastChildNode(l,{ignoreCollapsed:!0})||l,e._outlineUtils.focusNode(b,!0)),e._hideAllMenu()}else if(9===n)e.req.historyUtils.saveSnap(!1),t.shiftKey?e.outdent():e.indent();else if(u.checkNonTxtKey(t))return}}u.stopEvent(t)}},onHiddenMenuForDot:function(){if(e._menuForDot){var t=e._outlineUtils.getNode(e._menuForDot.target);e.domUtils.removeClass(t,d.CLASS.NODE_SHOW_MENU)}},onHiddenMenuForSelect:function(){},onMousedown:function(t){var n=t.target;e._menuForSelected&&e.domUtils.isParent(n,e._menuForSelected)||(e._outlineUtils.cancelSelected(),e._menuForSelected&&e._autoHideSelectMenu());var r=e._outlineUtils.getNode(n),o=e._outlineUtils.isInContent(n);return e.env.readonly&&r||o?(e._selectStartNode=r,void e._event.bindSelectNodes()):e.env.readonly?void 0:e.domUtils.getParentByClass(n,d.CLASS.DOT,!0)?(e._initDragData(r,t.clientX,t.clientY),void e._event.bindDragNode()):void 0},onMousemoveForDrag:function(t){clearTimeout(e._dragTimerForParent);var n=t.clientX,r=t.clientY;if(u.stopEvent(t),!(!e._dragData.start&&Math.abs(n-e._dragData.startX)<9&&Math.abs(r-e._dragData.startY)<9)){var o=e._dragData.startNode,i=e._dragData.dragContainer;if(!e._dragData.start){e._dragData.start=!0,e._outlineStyle.insertDragNode(),e._hideAllMenu(),e._outlineUtils.getNodeChildrenContainer(o)&&!e._outlineUtils.isCollapsed(o)&&(e._dragData.startIsCollapsed=!1,e._outlineUtils.switchNode(o,!1));var a=e._outlineUtils.cloneNode(o,!1),l=e._outlineUtils.getNodeNotes(a),s=e._outlineUtils.getNodeChildrenContainer(a);e.domUtils.remove(l),e.domUtils.remove(s),i=e._dragData.dragContainer=e.env.doc.createElement(c.TAG.TMP_TAG),e.domUtils.addClass(e._dragData.dragContainer,d.CLASS.DRAG_CONTAINER),i.appendChild(a),e.env.body.appendChild(i)}e.domUtils.css(i,{top:r+10+"px",left:n+10+"px"}),e.domUtils.isInWizTmp(t.target)||(e._dragData.target=t.target),e._dragData.moveX=t.clientX,e._dragData.moveY=t.clientY;var f=e._outlineUtils.checkDragPosition(e._dragData);f.toNode?(e._outlineUtils.isCollapsed(f.toNode)&&(e._dragTimerForParent=setTimeout((function(){e._outlineUtils.switchNode(f.toNode,!1)}),1e3)),e._createPositionFlag(f.toNode,f.isNext)):e._clearPositionFlag()}},onMousemoveForSelect:function(t){var n=t.target,r=e._outlineUtils.getNode(n),o=!0;if(e.env.readonly&&r===e._selectStartNode){var i=e.rangeUtils.getRange();if(i&&!i.collapsed){var a=i.startContainer,l=i.endContainer,s=e._outlineUtils.isInContent(a),c=!s&&e._outlineUtils.isInNotes(a);(s&&!e._outlineUtils.isInContent(l)||c&&!e._outlineUtils.isInNotes(l))&&(o=!1)}}else o=e._outlineUtils.isInContent(n);if(r===e._selectStartNode&&o)e._outlineUtils.cancelSelected();else{var d=e._outlineUtils.getContainer(),u=t.pageY;if(u<5&&(u=5),u>d.clientHeight&&(u=d.clientHeight-5),e.env.doc.elementFromPoint){var f=e.env.body.clientWidth,h=e.env.doc.elementFromPoint(f/2,u),p=e._outlineUtils.getNode(h);p&&(e._selectEndNode=p,e._outlineUtils.selectNodeA2B(e._selectStartNode,p))}}},onMouseupForDrag:function(t){clearTimeout(e._dragTimerForParent),e._clearPositionFlag(),e._dragData.dragContainer&&e.domUtils.remove(e._dragData.dragContainer);var n=e._outlineUtils.checkDragPosition(e._dragData);if(n.toNode){e.req.historyUtils.saveSnap(!1);var r=e._outlineUtils.getParentNode(e._dragData.startNode);n.isPrevious?e.domUtils.before(e._dragData.startNode,n.toNode):n.isNext&&e.domUtils.after(e._dragData.startNode,n.toNode),e._outlineUtils.clearNodeEmptyChildren(r)}var o=e._dragData.startNode;o&&!e._dragData.startIsCollapsed&&e._outlineUtils.switchNode(o,!1),e._outlineStyle.removeDragNode(),e._dragData.start=!1,e._event.unbindDragNode(),e._outlineUtils.focusNode(o)},onMouseupForSelect:function(t){e._event.unbindSelectNodes(),e._showSelectedNodesMenu()},onSelectedMenuForDot:function(t,n){e.req.historyUtils.saveSnap(!1);var r=e._outlineUtils.getNode(t);n.value!==d.MENU.ADD_NOTES?n.value!==d.MENU.ADD_IMAGE?n.value!==d.MENU.DUPLICATE?n.value!==d.MENU.DELETE?(n.value===d.MENU.UNCOMPLETE?e.setCompleted(!1,[r]):n.value===d.MENU.COMPLETE?e.setCompleted(!0,[r]):n.value===d.MENU.INDENT?e.indent([r]):n.value===d.MENU.OUTDENT&&e.outdent([r]),e._outlineUtils.focusNode(r)):e.deleteNodes([r]):e._outlineUtils.cloneNodeToNext(r,!0):e.readyAddImage(r):e.addNotes([r])},onSelectedMenuForSelect:function(t,n){e.req.historyUtils.saveSnap(!1);var r=e._outlineUtils.getSelectedNodes(!0),o=e._outlineUtils.getSelectedNodes();n.value===d.MENU.DELETE?e.deleteNodes(r):n.value===d.MENU.UNCOMPLETE?e.setCompleted(!1,o):n.value===d.MENU.COMPLETE&&e.setCompleted(!0,o),e._autoHideSelectMenu()},onSelectionChange:function(){var t=e.rangeUtils.getRange();if(t){var n=t.startContainer,r=e._outlineUtils.getNodeNotesFromDom(n);if(e._curNotes&&e._curNotes!==r&&e.domUtils.isEmptyDom(e._curNotes)){var o=e._outlineUtils.getNode(e._curNotes);e._outlineUtils.removeNotes(o)}e._curNotes=r}}},e.copySelection=function(t,n,r){var o=function(){r()};if(e.rangeUtils.getRange())o();else{var i=e._getCurNodes({getAllSelected:!1});if(0!==i.length){for(var a="",l="",s=0;s<i.length;s++){var c=i[s];s>0&&(l+="\n"),a+=e._outlineUtils.exportHtml(c),l+=e._outlineUtils.exportText(c)}n&&e.deleteNodes(i),e.req.clipboardUtils.setData(t,a,l,(function(){o()})),e.env.browser.isIe||u.stopEvent(t)}else o()}},e.insert=function(t){if(!e.env.readonly&&t){e.req.historyUtils.saveSnap(!1);var n=e._outlineUtils.insertNodeFromText(t,null);n.length>0&&e._outlineUtils.focusNode(n[n.length-1],!0)}},e.on=function(){e._event.bind()},e.off=function(){e._event.unbindSelectNodes(),e._event.unbind(),e._hideAllMenu(),e.hideMinder()},e.addNotes=function(t){e.env.readonly||(t||(t=e._getCurNodes({getAllSelected:!1})),t.length>0&&(e.req.historyUtils.saveSnap(!1),e._outlineUtils.createNotes(t[0]),e._hideAllMenu()))},e.addImg=function(t){e.env.readonly||(e._selectCurNodes&&0!==e._selectCurNodes.length||(e._selectCurNodes=e._getCurNodes({excludeSelected:!0})),e._selectCurNodes.length>0&&(e.req.historyUtils.saveSnap(!1),e._outlineUtils.getNodeImgContainer(e._selectCurNodes[0],!0).appendChild(t),e._hideAllMenu(),e.req.frameViewUtils.onAdjustContainerSize(),e._selectCurNodes=[]))},e.deleteNodes=function(t,n){e.env.readonly||(t||(t=e._getCurNodes({getAllSelected:!1})),e.req.historyUtils.saveSnap(!1),e._outlineUtils.deleteNodes(t,n),e._hideAllMenu())},e.exportJson=function(t){var n={template:e.req.minderCore.template,theme:e._outlineUtils.minderThemeFilter(e.req.minderCore.theme),root:{data:{text:u.splitByByteLength(t,d.MINDER_NODE_TEXT_MAX_LENGTH).join("\n")}}},r=e._outlineUtils.getRootNodes();if(r.length>0){n.root.children=[];for(var o=0;o<r.length;o++)n.root.children.push(e._outlineUtils.exportJson(r[o],0))}return n},e.focus=function(){var t=e._outlineUtils.getCurNodes();if(!(t.focusNode||t.showMenuNode||t.selectedRootNodes.length>0)){var n=e._outlineUtils.getFirstNode();e._outlineUtils.focusNode(n)}},e.getContentFormatBlock=function(){var t=e._getCurNodes({getAllSelected:!1});return 0===t.length?"":e._outlineUtils.getNodeContent(t[0]).tagName.toLowerCase()},e.hideMinder=function(){e._hideAllMenu(),e.req.minderCore.hideMinder()},e.indent=function(t){if(!e.env.readonly&&(t||(t=e._getCurNodes({getAllSelected:!1})),t.length>0)){var n=t[0];e.req.historyUtils.saveSnap(!1),e._outlineUtils.indentNodes(t),e._hideAllMenu(),e.rangeUtils.getRange()||e._outlineUtils.focusNode(n)}},e.getMinderThemeData=function(t){return e.req.minderCore.getMinderThemeData(t)},e.minderThemeRegister=function(t){e.req.minderCore.minderThemeRegister(t)},e.outdent=function(t){e.env.readonly||(t||(t=e._getCurNodes({getAllSelected:!1})),t.length>0&&(e.req.historyUtils.saveSnap(!1),e._outlineUtils.outdentNodes(t),e.rangeUtils.getRange()||e._outlineUtils.focusNode(t[0]),e._hideAllMenu()))},e.patchExecForFormatBlock=function(t){if(!e.env.readonly){var n=e.rangeUtils.getRange();if(n){var r=n.startContainer;if(e._outlineUtils.isInNotes(r))return}return e._getCurNodes({getAllSelected:!0,includeShowMenuNodeChildren:!0}).forEach((function(n){e._outlineUtils.setNodeFormatBlock(n,t)})),!0}},e.readyAddImage=function(t){e._selectCurNodes=t?[t]:e._getCurNodes({excludeSelected:!0}),e.env.options.editor.callback.onUploadImage&&e.env.options.editor.callback.onUploadImage()},e.setCompleted=function(t,n){if(!e.env.readonly){if(n||(n=e._getCurNodes({getAllSelected:!t})),n.length>0){void 0===t&&(t=!e._outlineUtils.isNodeCompleted(n[0])),e.req.historyUtils.saveSnap(!1),e._outlineUtils.setNodesCompleted(n,t,!0)}e._hideAllMenu()}},e.setMinderThemeData=function(){e.req.minderCore.setMinderThemeData()},e.showMinder=function(t){e._hideAllMenu();var n=e.exportJson(t);e.req.minderCore.showMinder(n)},e.hideMinderTools=function(){e.req.minderMenu.hide()},e.showMinderTools=function(){e.req.minderMenu.show()},e.hideMinderToolsMenu=function(){e.req.minderMenu.hideSubMenu()},e.showMinderToolsMenu=function(){e.req.minderMenu.showSubMenu()},e.userMinderTheme=function(t){e.req.minderCore.userMinderTheme(t)},e}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){a(l(t.prototype),"initCore",this).call(this,e),this._outlineUtils=e.require.outlineUtils,this._outlineStyle=e.require.outlineStyle}}])&&o(n.prototype,r),f&&o(n,f),t}(h));e.exports=p},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(37),f=n(2),h="#E6E9ED",p="#A7AFBC",m="#505F79",g="rgba(80, 95, 121, .15)",v="rgba(80, 95, 121, .40)",b="#A7AFBC",y="#F0F2F4",_="#D1E6FF",S="#d3d7dd",E={common:""+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," {padding-right:0; padding-left:0;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," {margin:0; padding:0; line-height:1.5;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," div {margin:0;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," {margin:0; padding: 0;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," > .").concat(u.CLASS.NODE," {margin-right:24px; margin-left:30px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE,".").concat(u.CLASS.COLLAPSED," .").concat(u.CLASS.CHILDREN," {display:none;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW," {position:relative; padding-left:26px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.OPERATOR_CONTAINER," {width:36px;position:absolute; top:4px; left:-18px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.OPERATOR_BAR," {position:absolute; top:0; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.SWITCH," {width:18px; height:18px;display:flex;flex-direction: column;align-items: center;overflow: hidden;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.SWITCH," i {font-size:20px;position:relative;left:-1px;top:-1px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.SWITCH,".active {cursor:pointer;color:transparent; transition:transform 200ms ease 0s;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE,".").concat(u.CLASS.COLLAPSED," .").concat(u.CLASS.SWITCH,".active {transform:rotateZ(-90deg);}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW,":hover .").concat(u.CLASS.SWITCH,".active {color:").concat(m,"}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT," {display:flex; align-items:center; justify-content:center; border-radius:100%; width:18px; height:18px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE,".").concat(u.CLASS.COLLAPSED," .").concat(u.CLASS.DOT," {background-color:").concat(g,";}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT_ICON," {background-color:").concat(m,"; border-radius:100%; width:6px; height:6px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.CHILD," {margin-left:8px; border-left:1px solid ").concat(h,"; padding-left:17px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.CONTENT," {flex:1;outline:none; padding:4px 0;word-break: break-word;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," div.").concat(u.CLASS.CONTENT," {font-size:1rem;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE,".").concat(u.CLASS.COMPLETE," > .").concat(u.CLASS.ROW," .").concat(u.CLASS.CONTENT," {text-decoration:line-through;color:").concat(p,";}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.NOTES," {outline:none; font-size:.8rem; color:").concat(b,";word-break: break-word;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.IMAGE," {outline:none; padding-top:4px; padding-bottom:4px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," h1,")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," h2,")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," h3,")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," h4,")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," h5,")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," h6 {margin:0;}"),tmp:{afterShowMinder:".".concat(d.CLASS.WIZ_BODY," #").concat(u.ID.MINDER_CONTAINER," {opacity:1;}"),common:""+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.EDITING," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT," {cursor:pointer;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.EDITING," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT,":hover {background-color:").concat(v,";}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE,".").concat(u.CLASS.NODE_SHOW_MENU," {background:").concat(y,";}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.NODE,".").concat(u.CLASS.NODE_SELECTED," {background:").concat(_,";}")+".".concat(d.CLASS.WIZ_BODY," #").concat(u.ID.MINDER_CONTAINER," {position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_CONTAINER,".").concat(u.CLASS.MINDER_NOTE," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," {max-width: 500px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_CONTAINER,".").concat(u.CLASS.MINDER_NOTE," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," {white-space: normal;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.MINDER_MENU_SVG_ICON," {fill-rule:evenodd;clip-rule:evenodd;fill:currentcolor;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.MINDER_MENU_SVG_ICON_LIGHT," {opacity:0.5;}")+".".concat(d.CLASS.WIZ_BODY,"  .").concat(u.CLASS.MINDER_MENU," div {margin: 0;}")+".".concat(u.CLASS.MINDER_MENU," {display:none;z-index:1100;position: absolute;width: 35px;height: 32px;background-color: #fff;box-shadow: 0px 3px 8px 0px rgba(0, 0, 0, 0.2);border-radius: 4px;opacity: 0.98;top: 24px;right: 32px;}")+".".concat(u.CLASS.MINDER_MENU,".active {display: flex;}")+".".concat(u.CLASS.MINDER_MENU," .menu-item {display: flex;align-items: center;justify-content: center;flex: 1;cursor: pointer;color: #505f79;}")+".".concat(u.CLASS.MINDER_MENU," .menu-item .menu-name {margin-left: 12px; font-size: 14px}")+".".concat(u.CLASS.MINDER_MENU," .").concat(u.CLASS.MINDER_SUB_MENU," {position:absolute;top: 32px; padding-top: 8px;display:none;box-sizing: border-box;right: 0px;width: 232px;}")+".".concat(u.CLASS.MINDER_MENU," .").concat(u.CLASS.MINDER_SUB_MENU,".active {display: block;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu {padding: 16px;box-sizing: border-box;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group:not(:nth-last-child(1)) {margin-bottom: 20px;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .group-title {font-size: 14px;line-height: 25px;color: #505f79;letter-spacing: 0px;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .content-container  {display: flex;justify-content: space-between;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .organization-menu .submenu-item {width: 32px; cursor: pointer;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .organization-menu .submenu-item.active {color: #448aff;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .theme-menu {flex-wrap: wrap;align-items: center;justify-content: space-between;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .theme-menu .submenu-item{width: 96px; height: 60px;cursor: pointer;margin-bottom: 8px;box-sizing: border-box;border: 1px solid transparent;overflow: hidden;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .theme-menu .submenu-item:nth-child(2n){marger-left: 8px;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .theme-menu .submenu-item .theme-img{border: 1px solid #d6d9dd;width: 100%;height: 100% !important;box-sizing: border-box;margin: 0;padding: 0;display: block;object-fit: cover;}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .theme-menu .submenu-item.active{border: 2px solid #448aff}")+".".concat(u.CLASS.MINDER_MENU," .subMenu .submenu-group .theme-menu .submenu-item.active .theme-img{border: none;}"),dragNode:"body {cursor: pointer}"+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_CONTAINER," div {margin:0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_CONTAINER," {position:absolute;top:0;left:0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_CONTAINER," .").concat(u.CLASS.NODE," {border-radius: 4px;padding:0 8px;background-color:rgba(255,255,255, 0.95);box-shadow:0px 3px 8px 0px rgba(0, 0, 0, 0.2);}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_CONTAINER," .").concat(u.CLASS.NODE," .").concat(u.CLASS.SWITCH,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_CONTAINER," .").concat(u.CLASS.NODE," .").concat(u.CLASS.IMAGE," {display:none;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_CONTAINER," .").concat(u.CLASS.NODE," .").concat(u.CLASS.CONTENT," {white-space:nowrap;max-width: 150px;overflow:hidden;text-overflow: ellipsis;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_FLAG," {background:#448aff;height:2px;width:80%;position:absolute;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.DRAG_FLAG,":before {content:'';background:#448aff;border-radius:100%;width:6px;height:6px;position:absolute;top:-2px;left:0;}"),showMinder:""+".".concat(d.CLASS.WIZ_BODY," {overflow: auto !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(u.CLASS.CONTAINER," {display:none;}")+".".concat(d.CLASS.WIZ_BODY," #").concat(u.ID.MINDER_CONTAINER," {opacity:0;transition: opacity 100ms;}")}},C=""+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," {padding-right:16px; padding-left:16px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.CONTAINER," > .").concat(u.CLASS.NODE," {margin-left:0;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW," {display:flex;padding-left: 0;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.OPERATOR_CONTAINER," {width:18px;position:static;left:0px;font-size: 0;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.OPERATOR_BAR," {position:static;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.SWITCH," {display:none;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.SWITCH," i {font-size:24px;left:0;top:0;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.SWITCH,".active {display:block;color:").concat(S,";position: absolute;left: 100%;padding:0;margin-top:3px;width:24px;height:24px;}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.ROW,":hover .").concat(u.CLASS.SWITCH,".active {color:").concat(S,";}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE,".").concat(u.CLASS.COLLAPSED," .").concat(u.CLASS.SWITCH,".active {transform:rotateZ(-180deg);}")+".".concat(d.CLASS.WIZ_BODY,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.DOT," {position:relative;margin-top:6px;}"),T=""+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.NOTES," {overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;}")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_OUTLINE," .").concat(u.CLASS.NODE," .").concat(u.CLASS.NOTES,":focus {overflow: visible;display:block;}"),A=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._removeById=function(e){n.req.wizStyle.removeStyleById(d.ID.TMP_STYLE_PRE+e)},n.getOutlineDefaultCss=function(){var e=E.common;return n.env.supportTouchEvent&&(e+=C),e},n.initCommon=function(){n.domUtils.addClass(n.env.body,d.CLASS.WIZ_OUTLINE),n.insertTemp()},n.insertTemp=function(){var e=E.tmp.common;n.env.supportTouchEvent&&(e+=T),n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"outline_common",name:d.NAME.TMP_STYLE},e)},n.insertDragNode=function(){n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"drag_node",name:d.NAME.TMP_STYLE},E.tmp.dragNode)},n.insertShowMinder=function(){n.env.options.useFrame&&n.domUtils.attr(n.env.frame.dom,{scrolling:"yes"}),n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"show_minder",name:d.NAME.TMP_STYLE},E.tmp.showMinder)},n.insertAfterShowMinder=function(){n.req.wizStyle.insertStyle({id:d.ID.TMP_STYLE_PRE+"after_show_minder",name:d.NAME.TMP_STYLE},E.tmp.afterShowMinder)},n.removeShowMinder=function(){n.env.options.useFrame&&n.domUtils.attr(n.env.frame.dom,{scrolling:"no"}),n._removeById("after_show_minder"),n._removeById("show_minder")},n.removeDragNode=function(){n._removeById("drag_node")},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(f);e.exports=A},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(37),f=n(3),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._checkDomInNode=function(e,t){return!(!e||!t)&&n.getNodeFromDom(e)===t},n._checkNonNode=function(){var e=n.getFirstNode();return!e&&(e=n.createNode(""),n.getContainer().appendChild(e),n.focusNode(e),!0)},n._checkTextType=function(e){var t=/^\s*- /,n=/^\s*\((.*)\)$/;return t.test(e)?{type:u.NODE_ITEM_TYPE.CONTENT,text:e.replace(t,"").trim()}:n.test(e)?{type:u.NODE_ITEM_TYPE.NOTES,text:e.replace(n,"$1").trim()}:{type:u.NODE_ITEM_TYPE.CONTENT,text:e.trim()||""}},n._createSwitch=function(e){if(e){var t=e.querySelector("."+u.CLASS.SWITCH);if(t&&!t.firstChild){n.domUtils.addClass(t,"active");var r=n.env.doc.createElement("i");n.domUtils.addClass(r,"icon-down_arrow_small editor-icon"),t.appendChild(r)}}},n._getImgSize=function(e){var t=e.width,n=e.height;if(t>400||n>400){var r=400/t;t=400,(n*=r)>400&&(r=400/n,n=400,t*=r)}return{width:t,height:n}},n._getLevelFormLevelList=function(e,t){if(0===t.length)return t.push(e),0;for(var n=0;n<t.length;n++){if(e<=t[n])return t.splice(n),t.push(e),n}return t.push(e),t.length-1},n._getRowsFromText=function(e){return(e=e.replace(/\r\n/g,"\n").replace(/(^\n)|(\n$)/g,"")).split("\n")},n._getSpaceCountFromText=function(e){e=e.replace(/\s/g," ");for(var t=0;;){if(" "!==e.charAt(t))break;t++}return t},n._getText=function(e){var t="";return 3===e.nodeType?t=e.nodeValue:1!==e.nodeType||n.domUtils.isTag(e,["script","style",d.TAG.TMP_TAG,d.TAG.TMP_PLUGIN_TAG])||(t=e.innerText),f.isEmpty(t)&&(t=""),t},n._getTextPre=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="",n=0;n<4*e;n++)t+=" ";return t},n.canMerge=function(e){var t=n.getNodeNotes(e,!1),r=n.getNodeImg(e),o=n.getNodeChildNodes(e);return!(t||r||o.length>0)},n.cancelSelected=function(){for(var e=n.getSelectedNodes(),t=e.length-1;t>=0;t--){var r=e[t];n.domUtils.removeClass(r,u.CLASS.NODE_SELECTED)}},n.checkDragPosition=function(e){var t={toNode:null,isNext:!1,isPrevious:!1};if(!e||!e.start)return t;var r=n.getNodeFromDom(e.target);if(!r||r===e.startNode){if(!r&&e.target===n.env.body)if(n.getContainer().clientHeight<e.moveY){var o=n.getLastNode({deep:!1});o!==e.startNode&&(t.toNode=o,t.isNext=!0)}return t}t.toNode=r;var i,a=n.getNodeRow(r),l=n.domUtils.getOffset(a).top,s=(a.clientHeight,a.clientHeight/2);if(e.moveY-l>s){var c=n.getFirstChildNode(r,{ignoreCollapsed:!0,notDeep:!0});if(c&&c===e.startNode)return t.toNode=null,t;c?(t.toNode=c,t.isPrevious=!0,t.isNext=!1):t.isNext=!0}else t.isPrevious=!0;return t.isNext?i=n.getNextNode(t.toNode,{includeChildren:!1,onlySibling:!0}):t.isPrevious&&(i=n.getPreviousNode(t.toNode,{includeChildren:!1,onlySibling:!0})),i===e.startNode&&(t.toNode=null,t.isNext=!1,t.isPrevious=!1),t},n.clearNodeEmptyChildren=function(e){if(e){var t=n.getNodeChildrenContainer(e,!1),r=n.getNodeChildNodes(e);if(!t||0===r.length){var o=n.getNodeSwitch(e);o.innerHTML="",n.domUtils.removeClass(o,"active"),n.domUtils.remove(t)}}},n.cloneNode=function(e){if(e){var t=n.domUtils.clone(e,!0);return n.domUtils.removeClass(t,u.CLASS.NODE_SELECTED),n.domUtils.removeClass(t,u.CLASS.NODE_SHOW_MENU),t}},n.cloneNodeToNext=function(e,t){if(e){var r=n.cloneNode(e);return n.domUtils.after(r,e),t&&n.focusNode(r),r}},n.compareNodeIndex=function(e,t){var r=n.domUtils.getIndexList(e),o=n.domUtils.getIndexList(t);return n.domUtils.compareIndexList(r,o)},n.createNode=function(e){var t=n.env.doc.createElement("div"),r=n.env.doc.createElement("div"),o=n.env.doc.createElement("div"),i=n.env.doc.createElement("div"),a=n.env.doc.createElement("div"),l=n.env.doc.createElement("div"),s=n.env.doc.createElement("div"),c=n.env.doc.createElement("div");return n.domUtils.addClass(t,u.CLASS.NODE),n.domUtils.addClass(r,u.CLASS.ROW),n.domUtils.addClass(o,u.CLASS.OPERATOR_CONTAINER),n.domUtils.addClass(i,u.CLASS.OPERATOR_BAR),n.domUtils.addClass(a,u.CLASS.SWITCH),n.domUtils.addClass(l,u.CLASS.DOT),n.domUtils.addClass(s,u.CLASS.DOT_ICON),n.domUtils.addClass(c,u.CLASS.CONTENT),e?c.innerText=e:c.appendChild(n.env.doc.createElement("br")),l.appendChild(s),o.innerText=d.SPACE_CHAR,o.appendChild(i),i.appendChild(a),i.appendChild(l),r.appendChild(o),r.appendChild(c),t.appendChild(r),n.setNodeEditable(t),t},n.createNextNode=function(e){if(e=n.getNode()){var t=n.createNode("");return n.domUtils.after(t,e),n.focusNode(t),t}},n.createNotes=function(e){if(e=n.getNode(e)){var t=n.getNodeNotes(e,!0);n.focusNotes(t)}},n.deleteNodes=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.length>0?e[0]:null,o=e[e.length-1],i=n.getParentNode(r),a=n.getNextNode(o),l=(!a||t)&&n.getPreviousNode(r,{includeChildren:!0,ignoreCollapsed:!0}),s=e.length-1;s>=0;s--){var c=e[s];n.removeNode(c,!1)}n.clearNodeEmptyChildren(i),t&&l?n.focusNode(l,!0):a&&n.focusNode(a)},n.exportHtml=function(e){if(e){var t=e.outerHTML;return t=t.replace(/(<div [^>]*class=")([^"]*)(")/gi,(function(e,t,n,r){return n.indexOf("selected")>-1?t+(n=n.replace(/selected/gi,"").trim())+r:e}))}},n.exportJson=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e){var r=n.getNodeContent(e),o={};o.data={text:f.splitByByteLength(r.innerText,u.MINDER_NODE_TEXT_MAX_LENGTH).join("\n")},n.isCollapsed(e)&&(o.data.expandState="collapse");var i=n.getNodeImg(e);if(i){o.data.image=i.src;var a=n._getImgSize(i);o.data.imageSize=a}var l=n.getNodeNotes(e);l&&(o.data.note=l.innerText);var s=n.getNodeChildNodes(e);if(s.length>0){o.children=[];for(var c=0;c<s.length;c++)o.children.push(n.exportJson(s[c],t+1))}return o}},n.exportText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e){var r=n.getNodeContent(e),o=n._getTextPre(t),i=o+"- "+r.innerText,a=n.getNodeNotes(e);if(a){var l=a.innerText.replace(/(^)/gm,"$1".concat(o,"(")).replace(/($)/gm,")$1");i+="\n".concat(l)}for(var s=n.getNodeChildNodes(e),c=0;c<s.length;c++){var d=s[c];i+="\n"+n.exportText(d,t+1)}return i}},n.find=function(e,t,n,r){},n.fixOutline=function(){var e=null,t=n.getContainer();if(t){for(var r="",o=t.previousSibling;o;){var i=n._getText(o);i&&(r=i+"\n"+r),o=o.previousSibling}for(o=t.nextSibling;o;){var a=n._getText(o);a&&(r+="\n"+a),o=o.nextSibling}r&&(e=r)}else e=n.domUtils.getBodyText(),t=n.env.doc.createElement("div"),n.domUtils.addClass(t,u.CLASS.CONTAINER);n.env.browser.isIe?n.env.body.innerHTML=t.outerHTML:(n.env.body.innerHTML="",n.env.body.appendChild(t)),null!==e&&n.insertNodeFromText(e,null)},n.focusNode=function(e,t){if(e){var r=n.getNodeContent(e);if(r)return n.rangeUtils.setRange(r,t?n.domUtils.getEndOffset(r):0),n.rangeUtils.fixScroll(),r.focus(),!0}return!1},n.focusNotes=function(e){e&&(n.rangeUtils.setRange(e,n.domUtils.getEndOffset(e)),e.focus())},n.focusLastNode=function(){var e=n.getLastNode({ignoreCollapsed:!0,deep:!0});n.focusNode(e,!0)},n.focusNextNode=function(e,t){return n.focusNode(n.getNextNode(e,{ignoreCollapsed:!0,includeChildren:!0}),t)},n.focusPreviousNode=function(e,t){var r=n.getPreviousNode(e,{includeChildren:!0,ignoreCollapsed:!0});return n.focusNode(r,t)},n.getContainer=function(){return n.env.doc.querySelector("."+u.CLASS.CONTAINER)},n.getContentHtml=function(e){n.env.event.call(d.EVENT.BEFORE_GET_DOCHTML,null);var t,r="";if(n.env.options.container&&!n.env.options.useFrame)t=n.env.body.innerHTML;else{r=n.domUtils.getDocType(n.env.doc);var o={},i=n.env.body.getAttribute(d.ATTR.WIZ_DOCUMENT_MIN_VERSION);i&&f.compareVersion(d.version,i)<0||(o[d.ATTR.WIZ_DOCUMENT_MIN_VERSION]=d.WIZ_DOCUMENT_MIN_VERSION.OUTLINE),o[d.ATTR.WIZ_DOCUMENT_TYPE]=d.DOCUMENT_TYPE.OUTLINE,n.domUtils.attr(n.env.body,o),t=n.env.doc.documentElement.outerHTML}return t=t.replace(/(<div [^>]*)(contenteditable=(['"])[^'"]*\3)([^>]*>)/gi,'$1contenteditable="false"$4'),t=n.domUtils.removeClassNameFromHtml(t,u.CLASS.NODE_SHOW_MENU),r+(t=n.domUtils.removeClassNameFromHtml(t,u.CLASS.NODE_SELECTED))},n.getCurNodes=function(){var e=n.rangeUtils.getRange(),t={focusNode:null,showMenuNode:null,selectedRootNodes:[],selectedAllNodes:[]};t.showMenuNode=n.getShowMenuNode();return t.selectedRootNodes=n.getSelectedNodes(!0),t.selectedAllNodes=n.getSelectedNodes(),!t.selectedAllNodes.length&&e&&(t.focusNode=n.getNode()),t},n.getFirstChildNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=n.getNode(e)))return null;if(t.ignoreCollapsed&&n.isCollapsed(e))return null;var r=n.getNodeChildNodes(e);return 0===r.length?null:(e=r[0],t.notDeep?e:n.getFirstChildNode(e,t)||e)},n.getFirstNode=function(){return n.getContainer().querySelector(".".concat(u.CLASS.NODE))},n.getLastChildNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=n.getNode(e)))return null;if(t.ignoreCollapsed&&n.isCollapsed(e))return null;var r=n.getNodeChildNodes(e);return 0===r.length?null:(e=r[r.length-1],t.notDeep?e:n.getLastChildNode(e,t)||e)},n.getLastNode=function(e){var t=n.getRootNodes();if(0!==t.length){var r=t[t.length-1];return e.deep&&n.getLastChildNode(r,{ignoreCollapsed:e.ignoreCollapsed})||r}},n.getNextNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=n.getNode(e)))return null;var r=null;if(!t.includeChildren||t.ignoreCollapsed&&n.isCollapsed(e)||(r=n.getFirstChildNode(e,{notDeep:!0})),!r&&((r=e.nextElementSibling)&&!n.domUtils.hasClass(r,u.CLASS.NODE)&&(r=null),!r&&!t.onlySibling))for(var o=n.getParentNode(e);o&&!r;)(r=n.getNextNode(o,{ignoreCollapsed:t.ignoreCollapsed,includeChildren:!1,onlySibling:!0}))||(o=n.getParentNode(o));return r},n.getNode=function(e){if(n.domUtils.hasClass(e,u.CLASS.NODE))return e;var t=n.getNodeFromDom(e);return t||(t=n.getNodeFromRange()),t},n.getNodeAllChildNodes=function(e){var t=[],n=e.querySelectorAll("."+u.CLASS.NODE);return f.forEach(n,(function(e){t.push(e)})),t},n.getNodeFromDom=function(e){return n.domUtils.getParentByClass(e,u.CLASS.NODE,!0)},n.getNodeFromRange=function(){var e=n.rangeUtils.getRange();return e?n.getNodeFromDom(e.startContainer):null},n.getNodeChildNodes=function(e){var t=[],r=n.getNodeChildrenContainer(e);if(!r)return t;for(var o=r.firstElementChild;o;)n.domUtils.hasClass(o,u.CLASS.NODE)&&t.push(o),o=o.nextElementSibling;return t},n.getNodeChildrenContainer=function(e,t){if(!e)return null;var r=e.querySelector("."+u.CLASS.CHILDREN);return n._checkDomInNode(r,e)||(r=null),t&&!r&&(r=n.env.doc.createElement("div"),n.domUtils.addClass(r,u.CLASS.CHILD),n.domUtils.addClass(r,u.CLASS.CHILDREN),e.appendChild(r)),t&&n._createSwitch(e),r},n.getNodeContent=function(e){return e?e.querySelector(".".concat(u.CLASS.CONTENT)):null},n.getNodeContentFromDom=function(e){return n.domUtils.getParentByClass(e,u.CLASS.CONTENT,!0)},n.getNodeDotButton=function(e){return e.querySelector(".".concat(u.CLASS.DOT))},n.getNodeImg=function(e){var t=n.getNodeImgContainer(e);return t?t.querySelector("img"):null},n.getNodeImgContainer=function(e,t){if(!e)return null;var r=e.querySelector(".".concat(u.CLASS.IMAGE));return n._checkDomInNode(r,e)||(r=null),t&&(r?r.innerHTML="":(r=n.env.doc.createElement("div"),n.domUtils.addClass(r,u.CLASS.CHILD),n.domUtils.addClass(r,u.CLASS.IMAGE),n._insertNodeImgContainer(e,r)),n.setNodeEditable(e)),r},n.getNodeNotes=function(e,t){if(!e)return null;var r=e.querySelector(".".concat(u.CLASS.NOTES));if(n._checkDomInNode(r,e)||(r=null),t&&!r){r=n.env.doc.createElement("div"),n.domUtils.addClass(r,u.CLASS.CHILD),n.domUtils.addClass(r,u.CLASS.NOTES);var o=n.getNodeRow(e);n.domUtils.after(r,o),n.setNodeEditable(e)}return r},n.getNodeNotesFromDom=function(e){return n.domUtils.getParentByClass(e,u.CLASS.NOTES,!0)},n.getNodeRow=function(e){return e?e.querySelector("."+u.CLASS.ROW):null},n.getNodeSwitch=function(e){if(!e)return null;var t=e.querySelector("."+u.CLASS.SWITCH);return n._checkDomInNode(t,e)||(t=null),t},n.getParentNode=function(e){return(e=n.getNode(e))?n.getNodeFromDom(e.parentNode):null},n.getPreviousNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=n.getNode(e)))return null;var r=e.previousElementSibling;if(r&&!n.domUtils.hasClass(r,u.CLASS.NODE)&&(r=null),r&&t.includeChildren){var o=n.getLastChildNode(r,{ignoreCollapsed:t.ignoreCollapsed});o&&(r=o)}return r||t.onlySibling||(r=n.getParentNode(e)),r},n.getRootNodes=function(){return n.env.body.querySelectorAll("."+u.CLASS.CONTAINER+" > ."+u.CLASS.NODE)},n.getShowMenuNode=function(){return n.env.body.querySelector(".".concat(u.CLASS.NODE,".").concat(u.CLASS.NODE_SHOW_MENU))},n.getSelectedNodes=function(e){for(var t=n.env.body.querySelectorAll(".".concat(u.CLASS.NODE,".").concat(u.CLASS.NODE_SELECTED)),r=[],o={},i=0;i<t.length;i++){var a=t[i],l=n.domUtils.getIndexList(a).join(".");if(e){o[l]=1;var s=n.getParentNode(a);if(s)if(o[n.domUtils.getIndexList(s).join(".")])continue}r.push(a)}return r},n.indent=function(e){e=n.getNode(e);var t=n.getPreviousNode(e);return!(!t||t===n.getParentNode(e))&&(n.rangeUtils.caretBackup(),n.isCollapsed(t)&&n.switchNode(t,!1),n.getNodeChildrenContainer(t,!0).appendChild(e),n.rangeUtils.caretRestore(),n.rangeUtils.fixScroll(),!0)},n.indentNodes=function(e){for(var t=null,r=!0,o=0;o<e.length;o++){var i=e[o],a=n.getParentNode(i);if(r||a!==t){var l=n.indent(i);l||(t=a),r=l}}},n.initWizDocument=function(e){n.env.scrollContainer=n.domUtils.getScrollContainer(),n.env.isWizTemplate=!1,n.domUtils.addClass(n.env.body,d.CLASS.WIZ_BODY),e()},n.insertChildNode=function(e,t){e&&t&&n.getNodeChildrenContainer(t,!0).appendChild(e)},n.insertNodeFromText=function(e,t){e||(e="");var r=n._getRowsFromText(e);0===r.length&&r.push("");var o=[],i=[],a=[],l=n.getContainer(),s=n.getNode(t),c=s,d=null,f=n.rangeUtils.getRange();if(f){s=n.getNodeFromDom(f.startContainer);var h=n.isInContent(f.startContainer),p=!h&&n.isInNotes(f.startContainer),m=!1;if(f.deleteContents(),p)m=!0,r.forEach((function(e,t){f.insertNode(n.env.doc.createTextNode(e)),t>0&&f.insertNode(n.env.doc.createElement("br")),f.collapse()}));else if(h&&1===r.length&&r[0].length>0){m=!0,target=n.getNodeContent(s);for(var g=target.children,v=g.length-1;v>=0;v--){var b=g[v];n.domUtils.isTag(b,"br")&&n.domUtils.remove(b)}e=n._checkTextType(e).text,f.insertNode(n.env.doc.createTextNode(e)),f.collapse()}if(m)return a}for(var y=0;y<r.length;y++){var _=r[y],S=n._getSpaceCountFromText(_),E=n._getLevelFormLevelList(S,o),C=n._checkTextType(_);if(d&&C.type===u.NODE_ITEM_TYPE.NOTES){var T=n.getNodeNotes(d,!0);T.childNodes.length>0&&T.appendChild(n.env.doc.createElement("br")),T.appendChild(n.env.doc.createTextNode(C.text))}else{var A=n.createNode(C.text);if(0===E)c?n.domUtils.after(A,c):l.appendChild(A),c=A,i=[A];else if(E>i.length-1)n.insertChildNode(A,i[i.length-1]),i.push(A);else{var O=i[E];i.splice(E),i.push(A),n.domUtils.after(A,O)}d=A,a.push(A)}}return n.isEmptyNode(s)&&n.removeNode(s,!1),a},n.insertDom=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},n.insertHtml=function(e,t){},n.isCaretInFirst=function(e,t,r){if(!e)return!1;var o=t,i=r;if(!t){var a=n.rangeUtils.getRange();if(!a.collapsed)return!1;o=a.startContainer,i=a.startOffset}if(n.domUtils.isEmptyDom(e))return!0;if(i>0)return!1;var l=n.domUtils.getPreviousNode(o,!1,e);return!l||l===e},n.isCaretInLast=function(e,t,r){if(!e)return!1;var o=t,i=r;if(!t){var a=n.rangeUtils.getRange();if(!a.collapsed)return!1;o=a.startContainer,i=a.startOffset}if(n.domUtils.isEmptyDom(e))return!0;if(i<n.domUtils.getEndOffset(o))return!1;var l=n.domUtils.getNextNode(o,!1,e);return!l||l===e},n.isCollapsed=function(e){return n.domUtils.hasClass(e,u.CLASS.COLLAPSED)},n.isEmptyNode=function(e){if(!e)return!1;var t=n.getNodeContent(e),r=n.getNodeNotes(e,!1),o=n.getNodeImg(e),i=n.getNodeChildNodes(e);return n.domUtils.isEmptyDom(t)&&!r&&!o&&0===i.length},n.isInContent=function(e){return!!n.getNodeContentFromDom(e)},n.isInNotes=function(e){return!!n.getNodeNotesFromDom(e)},n.isNodeCompleted=function(e){return n.domUtils.hasClass(e,u.CLASS.COMPLETE)},n.mergeNext=function(e){if((e=n.getNode(e))&&(n.clearNodeEmptyChildren(e),n.canMerge(e))){var t=n.getNextNode(e,{onlySibling:!0});if(t){var r=n.getNodeContent(e);if(n.isEmptyNode(e))return n.domUtils.remove(e),void n.focusNode(t,!1);for(var o=n.getNodeSwitch(e),i=n.getNodeSwitch(t),a=n.getNodeContent(t),l=n.getNodeNotes(t,!1),s=n.getNodeImg(t),c=n.getNodeChildrenContainer(t),d=n.domUtils.getLastDeepChild(r);a.firstChild;)r.appendChild(a.firstChild);if(n.domUtils.before(i,o),n.domUtils.remove(o),l&&e.appendChild(l),s){var u=n.getNodeImgContainer(t,!1);e.appendChild(u)}c&&e.appendChild(c),d?n.rangeUtils.setRange(d,n.domUtils.getEndOffset(d)):n.focusNode(t,!1),n.domUtils.remove(t)}}},n.mergePrevious=function(e){if(e=n.getNode(e)){var t=n.getPreviousNode(e,{onlySibling:!0});t&&n.mergeNext(t)}},n.modifySelectionDom=function(e,t){var r=n.getCurNodes();if(r.focusNode)n.rangeUtils.modifySelectionDom(e,t);else{var o=[];r.showMenuNode?(o=n.getNodeAllChildNodes(r.showMenuNode)).push(r.showMenuNode):r.selectedAllNodes&&(o=r.selectedAllNodes);var i=[];o.forEach((function(e){var t=n.getNodeContent(e);i.push(t)})),n.domUtils.modifyNodesStyleAndClear(i,e,t,[])}},n.outdent=function(e){e=n.getNode(e);var t=n.getParentNode(e);return!!t&&(n.rangeUtils.caretBackup(),n.domUtils.after(e,t),n.rangeUtils.caretRestore(),n.clearNodeEmptyChildren(t),n.rangeUtils.fixScroll(),!0)},n.outdentNodes=function(e){for(var t=e.length-1;t>=0;t--)n.outdent(e[t])},n.removeNode=function(e,t){var r,o,i;e&&(r=n.getParentNode(e),t&&(i=!(o=n.getNextNode(e))&&n.getPreviousNode(e,{includeChildren:!0,ignoreCollapsed:!0})),n.domUtils.remove(e),n.clearNodeEmptyChildren(r),!n._checkNonNode()&&t&&(o?n.focusNode(o):i&&n.focusNode(i,!0)))},n.removeNotes=function(e){var t=n.getNodeNotes(e,!1);t&&n.domUtils.remove(t)},n.selectNode=function(e){n.domUtils.addClass(e,u.CLASS.NODE_SELECTED)},n.selectNodeA2B=function(e,t){if(n.cancelSelected(),e&&t){var r=n.domUtils.getIndexList(e),o=n.domUtils.getIndexList(t);if(n.domUtils.compareIndexList(r,o)>0){var i=t;t=e,e=i}n.domUtils.isParent(t,e)&&(t=e);var a=n.getLastChildNode(t,!1);a&&(t=a);for(var l=e;l&&(n.selectNode(l),l!==t);)l=n.getNextNode(l,{includeChildren:!0,ignoreCollapsed:!1})}},n.setNodeChildrenCompleted=function(e,t){for(var r=e.querySelectorAll(".".concat(u.CLASS.NODE)),o=r.length-1;o>=0;o--){var i=r[o];n.setNodeCompleted(i,t)}},n.setNodeCompleted=function(e,t){t?n.domUtils.addClass(e,u.CLASS.COMPLETE):n.domUtils.removeClass(e,u.CLASS.COMPLETE)},n.setNodeEditable=function(e){var t=!n.env.readonly,r=n.getContainer();n.domUtils.setContenteditable(n.env.body,!1),n.domUtils.setContenteditable(r,!1);var o=e||n.env.body,i=o.querySelectorAll("."+u.CLASS.CONTENT);f.forEach(i,(function(e){n.domUtils.setContenteditable(e,t)}));var a=o.querySelectorAll("."+u.CLASS.NOTES);f.forEach(a,(function(e){n.domUtils.setContenteditable(e,t)}))},n.setNodeFormatBlock=function(e,t){if(e&&t){var r=n.getNodeContent(e);if(!n.domUtils.isTag(r,t)){var o,i,a,l,s=n.rangeUtils.getRange();s&&(o=s.startContainer,i=s.startOffset,a=s.endContainer,l=s.endOffset);var c=n.domUtils.replaceTagName(r,t);n.setNodeEditable(e),s&&(o===r&&(o=c),a===r&&(a=c),n.rangeUtils.setRange(o,i,a,l))}}},n.setNodesCompleted=function(e,t,r){for(var o=e.length>0?e[0]:null,i=e.length-1;i>=0;i--){var a=e[i];n.setNodeCompleted(a,t),t&&n.setNodeChildrenCompleted(a,t)}r&&n.focusNode(o)},n.splitNodeFromRange=function(){var e=n.rangeUtils.getRange();if(e){e.collapsed||(e.deleteContents(),e=n.rangeUtils.getRange());var t=n.getNode();if(t){var r=e.startContainer,o=null,i=e.startOffset,a=n.getNodeContent(t);if(n.isEmptyNode(t)){var l=n.createNode("");n.domUtils.before(l,t)}else{if(r===a&&0===i)o=a.firstChild;else if(3===r.nodeType)if(i>0&&i<r.nodeValue.length){var s=r.nodeValue.substr(0,i),c=r.nodeValue.substr(i);o=n.env.doc.createTextNode(c),r.nodeValue=s,n.domUtils.after(o,r)}else 0===i?o=r:(o=n.domUtils.getNextNode(r,!1,a))===a&&(o=null);var d=n.createNode("");if(o){var u=n.domUtils.splitDomBeforeSub(a,o);if(u!==a){var f=n.getNodeContent(d);n.domUtils.after(u,f),n.domUtils.remove(f),n.domUtils.after(d,t);var h=n.getNodeNotes(t,!1);if(h){var p=n.getNodeNotes(d,!0);n.domUtils.before(h,p),n.domUtils.remove(p)}if(n.getNodeImg(t)){var m=n.getNodeImgContainer(t,!1),g=n.getNodeImgContainer(d,!0);n.domUtils.before(m,g),n.domUtils.remove(g)}var v=n.getNodeChildrenContainer(t,!1);if(v){var b=n.getNodeChildrenContainer(d,!0);n.domUtils.before(v,b),n.domUtils.remove(b),n.clearNodeEmptyChildren(t)}}}else n.domUtils.after(d,t);n.isNodeCompleted(t)&&n.isEmptyNode(t)&&n.setNodeCompleted(t,!1),n.focusNode(d)}}}},n.switchNode=function(e,t){e&&(n.isCollapsed(e)?n.domUtils.removeClass(e,u.CLASS.COLLAPSED):n.domUtils.addClass(e,u.CLASS.COLLAPSED),t&&n.focusNode(e))},n.removeNodeImage=function(e){var t=n.domUtils.getParentByFilter(e,(function(e){return n.domUtils.hasClass(e,u.CLASS.IMAGE)}),!0);n.domUtils.remove(t)},n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"_insertNodeImgContainer",value:function(e,t){var n=e.querySelector("."+u.CLASS.NOTES);this._checkDomInNode(n,e)||(n=null),this.domUtils.after(t,n||this.getNodeRow(e))}},{key:"minderThemeFilter",value:function(e){return e===u.MINDER_THEME_TYPE.THEME1&&this.env.options.nightMode.enable?this.env.client.type.isWin?"wiz-windows-night":this.env.client.type.isMac?"wiz-mac-night":this.env.client.type.isIOS?"wiz-ios-night":this.env.client.type.isAndroid?"wiz-android-night":e:e}}])&&i(n.prototype,r),h&&i(n,h),t}(n(2));e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(137),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._clearClipHtml=function(e){var t,r,o,i=/<style[^>]*>[^<>]*<\/style>/gi;e=(e=(e=(e=e.replace(/<!--.*?(-->)/gi,"")).replace(/<meta [^>]*>/gi,"")).replace(/<iframe[^>]*>[\s\S]*?<\/iframe>/gi,"")).replace(/<iframe[^>]*\/>/gi,""),n.env.options.editor.type===d.NOTE_EDITOR_TYPE.MARKDOWN&&(e=(e=(e=e.replace(i,"")).replace(/(<[^>]*)(class[ ]*=[ ]*(['"])[^>]*\3)([^>]*>)/gi,"$1$4")).replace(/(<[^>]*)(id[ ]*=[ ]*(['"])[^>]*\3)([^>]*>)/gi,"$1$4"));try{t=/<body[^>]*>([\s\S]*)<\/body>/gi.exec(e)}catch(e){console.error(e)}if(t){if(r=/<head[^>]*>([\s\S]*)<\/head>/i.exec(e),e="",r)for(r=r[1];null!==(o=i.exec(r));)o.index===i.lastIndex&&i.lastIndex++,e+=o[0];e+=t[1]}else{for(var a=[/<body( [^<>]*)?>/i,/<html( [^<>]*)?>/i],l=[/<\/body>/i,/<\/html>/i],s=0,c=a.length;s<c;s++){var u=a[s],h=e.match(u);if(h){e=e.substr(h.index+h[0].length);break}}for(var p=0,m=l.length;p<m;p++){var g=l[p],v=e.match(g);v&&(e=e.substr(0,v.index))}}e=(e=e.replace(/(^(\r?\n)*)|((\r?\n)*$)/g,"")).replace(d.SPACE_CHAR_REG,"&nbsp;");var b=[];return n.env.options.editor.type===d.NOTE_EDITOR_TYPE.MARKDOWN||(b=["color","width","font-family","font-size","font-style","text-align","background*","text-decoration*"]),e=n.domUtils.clearStyleFromHtml(e,b),e=f.xssFilter(e),/^<tr/.test(e)&&(e="<table>"+e+"</table>"),e},n._insertTxt=function(e){var t=n.rangeUtils.getSelection(),r=e.match(/\n/g);if(r&&r.length>400){var o=u.txt2HTML(e,{wizTableSaveDom:!1});n.req.commandExtend.execCommand("insertparagraph");var i=n.rangeUtils.getRange(),a=n.env.doc.createElement("div");i.insertNode(a),a.innerHTML=o,n.rangeUtils.setRangeToEnd(a)}else e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e=u.space2HTML(e),n.req.commandExtend.execCommand("insertText",!1,e);t.collapseToEnd()},n._pasteWithStandard=function(e,t){var r,o=n.env.doc.createElement("div");n.req.amend.isAmendEditing?n.req.amend.readyForPaste():(r=n.req.amendUtils.fixedAmendRange(),n.req.amend.splitAmendDomByRange(r));var i,a,l,s,c,u,f=n.rangeUtils.getRange(),h=null;if(e){if(o.innerHTML=e,n.env.options.editor.type===d.NOTE_EDITOR_TYPE.MARKDOWN)n.domUtils.html2Markdown(o,{});else for(var p=o.querySelectorAll("br"),m=p.length-1;m>=0;m--){var g=p[m];g.removeAttribute("class"),g.removeAttribute("id"),g.removeAttribute("style")}n.req.codeUtils&&n.req.codeUtils.pastePatch.ready(o),n.req.todoUtils.pastePatch.fix(o),n._clearWidth(o),f.deleteContents(),f=n.rangeUtils.getRange(),i=n.rangeUtils.getRangeDetail(f.startContainer,f.startOffset),a=n.domUtils.getParentByTagName(i.container,["li","td","th"],!0);var v=null;for(n.domUtils.isTag(i.container,"br")&&n.domUtils.isBlock(i.container.parentNode)&&!i.container.nextSibling&&(v=i.container),n.domUtils.isEmptyDom(a)?(n.rangeUtils.setRange(a,0,a,n.domUtils.getEndOffset(a)),f=n.rangeUtils.getRange()):n.domUtils.isTag(i.container,"br")&&(n.rangeUtils.setRange(i.container.parentNode,n.domUtils.getIndex(i.container)),f=n.rangeUtils.getRange()),n.domUtils.isTag(a,"li")&&1===o.childNodes.length&&n.domUtils.isTag(o.firstChild,["ul","ol"])&&(o=o.firstChild);o.firstChild;){if(f=n.rangeUtils.getRange(),i=n.rangeUtils.getRangeDetail(f.startContainer,f.startOffset),u=n.domUtils.getBlockParent(i.container,!0),(l=n.domUtils.getParentByTagName(u,["pre"],!0))&&(u=l),c=o.firstChild,/^h[1-6]$/i.test(u.tagName)&&(c.tagName===u.tagName||3===c.nodeType||n.domUtils.isTag(c,["span"])))(s=n.env.doc.createElement("span")).appendChild(n.env.doc.createTextNode(3===c.nodeType?c.nodeValue:c.innerText)),f.insertNode(s),o.removeChild(c),c=s;else if(/^h[1-6]$/i.test(u.tagName)||/^h[1-6]$/i.test(c.tagName)&&u!==n.env.body&&!n.domUtils.isParent(u,h))s=n.env.doc.createElement("span"),f.insertNode(s),u=n.domUtils.splitDomBeforeSub(u,s),n.domUtils.after(c,u),n.domUtils.isEmptyDom(u)?n.domUtils.remove(u):n.domUtils.remove(s);else if(h)n.domUtils.after(c,h);else if(n.domUtils.isTag(u,"li")&&n.domUtils.isTag(c,"li")){var b=void 0;if(n.domUtils.isEmptyDom(u))(b=u).innerHTML="";else{var y=n.env.doc.createElement("br");f.insertNode(y),b=n.domUtils.splitDomSingle(u,y),n.domUtils.remove(y)}for(;c.firstChild;)b.appendChild(c.firstChild);n.domUtils.remove(c),c=b}else f.insertNode(c);n.env.options.editor.type===d.NOTE_EDITOR_TYPE.MARKDOWN&&(n._clearTable(c),c=n._transformDomToSpan(c)),n.rangeUtils.setRangeToEnd(c),h=c}v&&n.domUtils.remove(v)}else n._insertTxt(t)},n._clearTable=function(e){if(1===e.nodeType){var t=function(e){for(var t=0;t<e.length;t++){var n=e[t];r(n)}},r=function(e){for(var t={},n={},r=e.querySelectorAll("img"),a=0,l=r.length-1;l>=0;l--)o(a++,r[l],n);for(var s=e.querySelectorAll("a"),c=s.length-1;c>=0;c--)o(a++,s[c],t);e.innerText=e.innerText.trim();var d=e.innerHTML;e.innerHTML=i(i(d,t),n)},o=function(e,t,r){r[e="$$_WIZ_"+(new Date).valueOf()+"_"+e+"_$$"]=t.outerHTML;var o=n.env.doc.createTextNode(e);n.domUtils.after(o,t),n.domUtils.remove(t)},i=function(e,t){for(var n in t)e=e.replace(n,t[n]);return e};t(e.querySelectorAll("td")),t(e.querySelectorAll("th"))}},n._clearWidth=function(e){for(var t=e.querySelectorAll("[style]"),r=t.length-1;r>=0;r--){var o=t[r];if(!o.getAttribute(d.ATTR.SPAN)&&!n.domUtils.isTag(o,["td","table"]))o.style.width&&(o.style.width=null)}},n._transformDomToSpan=function(e){if(1!==e.nodeType)return e;var t=function(e){for(var t=[],r=e.length-1;r>=0;r--){for(var o=e[r],i=n.env.doc.createElement("span");o.firstChild;)i.appendChild(o.firstChild);n.domUtils.before(i,o),n.domUtils.remove(o),t.push(i)}return t};return t(e.querySelectorAll("strong")),t(e.querySelectorAll("u")),t(e.querySelectorAll("i")),t(e.querySelectorAll("b")),n.domUtils.isTag(e,["u","i","b","strong"])&&(e=t([e])[0]),e},n._pasteWithTable=function(e,t){var r,o,i,a,l,s,c,d,u,f,h,p,m,g=n.rangeUtils.getRange(),v=n.req.tableZone.getZone();if(e?((r=n.req.tableUtils.getTemplateByHtmlForPaste(e)).isHtml=!0,n.req.codeUtils&&n.req.codeUtils.pastePatch.ready(r.pasteDom,!0)):t&&!n.req.tableZone.isSingleCell()?(r=n.req.tableUtils.getTemplateByTxtForPaste(t)).isHtml=!0:r={isTable:!1,isHtml:!1,pasteDom:n.env.doc.createElement("div")},r.isTable){for(n._clearWidth(r.pasteDom),i=n.req.tableUtils.getTableGrid(r.pasteDom),s=i.length,l=i[0]?i[0].length:0,d=v.grid.length-v.range.minY-s,c=v.grid[0].length-v.range.minX-l,p=d;p<0;p++)n.req.tableCore.insertRow(!1);for(h=c;h<0;h++)n.req.tableCore.insertCol(!1);v=n.req.tableZone.getZone(),e?(f=Math.max(v.range.minY+s-1,v.range.maxY),u=Math.max(v.range.minX+l-1,v.range.maxX)):(f=v.range.minY+s-1,u=v.range.minX+l-1),n.req.tableUtils.eachRange(v.grid,{minY:v.range.minY,maxY:f,minX:v.range.minX,maxX:u},(function(e){if(!e.fake)if(m=e.cell,a=i[(e.y-v.range.minY)%s][(e.x-v.range.minX)%l],n.req.amend.isAmendEditing){if(n.rangeUtils.setRange(m,0,m.lastChild,n.domUtils.getEndOffset(m.lastChild)),n.req.amendUtils.removeSelection(n.req.amendUser.getCurUser()),n.req.amendUtils.removeUserDel(m,n.req.amendUser.getCurUser()),a.fake)return;if(n.domUtils.isEmptyDom(m))m.innerHTML=a.cell.innerHTML;else for(;a.cell.firstChild;)m.appendChild(a.cell.firstChild);n.req.amend.fixPaste(m.firstChild,m.lastChild,n.req.amendUser.getCurUser())}else m.innerHTML=a.fake?"":a.cell.innerHTML})),n.req.tableZone.setStart(v.grid[v.range.minY][v.range.minX].cell).setEnd(v.grid[f][u].cell)}else!g&&v.range&&(o=v.grid[v.range.minY][v.range.minX].cell,n.req.tableZone.setStart(o).setEnd(o),n.rangeUtils.setRange(o,0,o.lastChild,n.domUtils.getEndOffset(o.lastChild))),n._pasteWithStandard(e,t)},n.paste=function(e,t){var r=n.req.editorBridge;if(r.isOutline)r.bridge.editor.insert(t);else{e=n._clearClipHtml(e),e=u.replaceSpecialChar(e),t=u.replaceSpecialChar(t);var o=n.rangeUtils.getRange(),i=n.req.tableZone.getZone();if((o||i.table||i.range)&&(e||t)){if(o){var a=n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(o.startContainer);if(a)return void n.req.codeUtils.insertCodeSrc(a,t);if(n.domUtils.isInWizTmp(o.startContainer)){var l=o.startContainer;if(1===l.nodeType&&o.startOffset<l.childNodes.length){l=l.childNodes[o.startOffset];var s=!1;n.domUtils.isTag(l,"textarea")?(n.domUtils.setTextarea(l,t),s=!0):n.domUtils.isTag(l,"input")&&(l.value=t,s=!0),s&&l.dispatchEvent(new Event("input"))}return}}n.req.historyUtils.saveSnap(!1),i.table||i.range?n._pasteWithTable(e,t):n._pasteWithStandard(e,t),n.domUtils.fixList(),n.req.svgClick.fixSvgId(),n.req.todoUtils.oldPatch.fixOldTodo(),n.req.todoUtils.fixNewTodo();var c=function(){n.req.codeUtils&&(n.rangeUtils.caretBackup(),n.req.codeUtils.pastePatch.fix(),n.rangeUtils.caretRestore())};if(n.req.codeCore&&!n.req.codeCore.hasLoaded)n.req.codeCore.on({},c);else{for(var d=n.req.codeUtils?n.req.codeUtils.oldPatch.fixOldCode():[],f=0;f<d.length;f++){var h=d[f];n.req.codeUtils.fixCodeContainer({container:h})}c()}}}},n.pasteForIOS=function(e){e&&u.stopEvent(e),n.rangeUtils.caretBackup(),n.rangeUtils.remove(),setTimeout((function(){n.rangeUtils.caretRestore(),e&&n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizEditorPaste)}),0)},n.pasteFromClient=function(e,t){n.paste(e,t)},n.pasteFromClipBoard=function(e,t){if(n.domUtils.isInWizTmp(e.target))t(!1);else if(n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(e.target))t(!1);else{if(n.env.client.type.isIOS)return n.pasteForIOS(e),void t(!1);n.req.clipboardUtils.getData(e,(function(r){return r.files&&n.env.options.editor.callback.onPasteFile?(n.env.options.editor.callback.onPasteFile(r.files),u.stopEvent(e),void t(!0)):r.html||r.text?(n.paste(r.html,r.text),u.stopEvent(e),void t(!0)):(n.env.client.type.isMac&&n.env.win.WizQtEditor&&n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizEditorPaste),void t(!1))}))}},n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),h&&i(n,h),t}(n(2));e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._curMedia=null,n._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml)},unbind:function(){n.env.event.remove(d.EVENT.BEFORE_GET_DOCHTML,n._handler.beforeGetDocHtml)}},n._handler={beforeGetDocHtml:function(){var e=n.rangeUtils.getRange();if(e&&!(n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(e.startContainer))){n.clearTmpCaret();var t=(e=n.rangeUtils.getRange()).collapsed,r=e.startContainer,o=e.startOffset,i=e.endContainer,a=e.endOffset;if(n.env.client.type.isPhone||n.env.client.type.isPad){var l=null;t||(l=n._createTmpCaret("_end"),c=n.rangeUtils.getRangeDetail(i,a),n._insertTmpCaret(c,l));var s=n._createTmpCaret("_start"),c=n.rangeUtils.getRangeDetail(r,o);n._insertTmpCaret(c,s),s.nextSibling?(o=0,s=s.nextSibling):(o=n.domUtils.getIndex(s),s=s.parentNode),n.rangeUtils.setRange(s,o,l,0)}}}},n._fixTmpCaret=function(){for(var e=n.env.body.querySelectorAll(d.TAG.TMP_CARET),t=e.length-1;t>=0;t--)n.domUtils.setContenteditable(e[t],!1)},n.clearTmpCaret=function(){for(var e=n.env.body.querySelectorAll(d.TAG.TMP_CARET),t=e.length-1;t>=0;t--)n.domUtils.remove(e[t])},n.focusFromTmpCaretForMobile=function(){var e=!1;if(n.env.isAutoReaderToEditor)return n.clearTmpCaret(),e;if(n.env.client.type.isPhone||n.env.client.type.isPad){var t=n.env.body.querySelector(".".concat(d.TAG.TMP_CARET,"_start")),r=n.env.body.querySelector(".".concat(d.TAG.TMP_CARET,"_end"));t&&(n.rangeUtils.setRange(t,0,r,0),n.rangeUtils.fixScroll({force:!0}),e=!0)}return n.clearTmpCaret(),e},n.on=function(){n._event.bind(),n._fixTmpCaret()},n.off=function(){n._event.unbind()},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"_createTmpCaret",value:function(e){var t=this.env.doc.createElement(d.TAG.TMP_CARET);return this.domUtils.setContenteditable(t,!1),t.className=d.TAG.TMP_CARET+e,t.style.display="none",t}},{key:"_insertTmpCaret",value:function(e,t){if(e.isEnd)this.domUtils.after(t,e.container);else if(0===e.offset)this.domUtils.before(t,e.container);else if(3===e.container.nodeType){var n=this.domUtils.splitRangeText(e.container,e.offset);this.domUtils.before(t,n),this.domUtils.peelDom(n)}}}])&&i(n.prototype,r),u&&i(n,u),t}(n(2));e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._fixScrollTimer=null,n._rangeBackup=null,n.caretBackup=function(){var e=n.getRange(),t=n.req.tableZone.getZone();if(!e&&t.range)return n._rangeBackup=null,!1;if(!e&&!t.range){if(n._rangeBackup)return!0;if(n.domUtils.focus(),!(e=n.getRange()))return!1}return e=n.getRange(),n._rangeBackup=e?{startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset}:null,!0},n.scrollTimer=null,n.clearScrollTimer=function(){n.scrollTimer&&clearTimeout(n.scrollTimer),n.scrollTimer=null},n.caretRestore=function(){return!!n._rangeBackup&&(0===n.getSelection().rangeCount&&n.domUtils.focus(),n.setRange(n._rangeBackup.startContainer,n._rangeBackup.startOffset,n._rangeBackup.endContainer,n._rangeBackup.endOffset),n._rangeBackup=null,!0)},n.clearFillCharByCollapsed=function(){var e,t,r,o=n.getRange();if(o&&o.collapsed&&3===o.startContainer.nodeType){var i=(e=o.startContainer).nodeValue;!u.isEmpty(i)&&i.indexOf(d.FILL_CHAR)>-1&&(t=i.substr(0,o.startOffset),r=i.substr(o.startOffset),t=t.replace(d.FILL_CHAR_REG,""),r=r.replace(d.FILL_CHAR_REG,""),e.nodeValue=t+r,n.setRange(e,t.length))}},n.collapse=function(e){var t=n.getRange();t&&!t.collapsed&&(e?n.setRange(t.startContainer,t.startOffset):n.setRange(t.endContainer,t.endOffset))},n.compare=function(e,t){return!(!e||!t)&&(e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset)},n.fixRange=function(e){var t=!e.startDom.parentNode,r=!e.endDom.parentNode,o=n.domUtils.isSelfClosingTag(e.endDom);t&&n.domUtils.isSelfClosingTag(e.startDomBak)&&(e.startDomBak=n.domUtils.getNextNode(e.startDomBak,!1,e.endDomBak),e.startOffsetBak=0),r&&n.domUtils.isSelfClosingTag(e.endDomBak)&&(e.endDomBak=n.domUtils.getPreviousNode(e.endDomBak,!1,e.startDomBak),e.endOffsetBak=n.domUtils.getEndOffset(e.endDomBak)),n.setRange(t?e.startDomBak:e.startDom,t?e.startOffsetBak:e.startOffset,r||o?e.endDomBak:e.endDom,r||o?e.endOffsetBak:e.endOffset)},n.fixRangeSpan=function(){var e=n.getRange();if(e&&!e.collapsed){for(var t=n.getRangeDomList({noSplit:!0}),r=0;r<t.list.length;r++){var o=t.list[r];3===o.nodeType&&(o=o.parentNode),n.domUtils.splitSpanFromParent(o)}n.fixRange(t)}},n.fixScroll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n._fixScrollTimer&&clearTimeout(n._fixScrollTimer);var t=function(){var t,r,o,i,a=n.getRange();if(a&&(e.force||a.collapsed)&&(t=n.getRangeClientRect())){r=n.domUtils.getWindowSize();var l=n.domUtils.getPageScroll(),s=0;n.env.client.type.isIOS&&l.toolbarVisibleHeight>0&&(t.top=t.top+l.topOriginal),o=l.top,i=l.left,n.env.options.useFrame&&(s=n.env.body.parentElement.scrollTop,t.top-=o);var c=(parseInt(n.domUtils.getComputedStyle(n.env.doc.body,"line-height"),10)||27)+8,u=n.env.client.type.isPhone?1.5:3,f=0,h=!1,p=null,m=null;if(t.top<0)p=o+t.top-30;else if(t.top+t.height+s>r.height-c*(u-.5)-n.env.options.editor.customFixScrollBodyBottom){f=c*u+n.env.options.editor.customFixScrollBodyBottom,p=o+t.top+t.height+s-r.height+f;var g="."+d.CLASS.EDITING+"."+d.CLASS.WIZ_BODY+" {margin-bottom: "+f+"px;}";n.env.client.type.isWeb||n.env.client.type.isIOS||n.req.wizStyle.getStyleById(d.ID.BODY_TMP_BOTTOM_STYLE,n.env.doc)||(h=!0,n.req.wizStyle.insertCustomStyle(d.ID.BODY_TMP_BOTTOM_STYLE,g,!0))}t.left<i?m=i+t.left:t.left+t.width>r.width&&(m=i+t.left+t.width-r.width);var v=function(){n.env.client.type.isWeb||n.env.client.type.isIOS?n.domUtils.setPageScrollTop(p):n.domUtils.setPageScrollTopAni(p)};if(null!==p&&(n.env.client.type.isIOS&&(p-=l.toolbarVisibleHeight),n.clearScrollTimer(),h?n.scrollTimer=setTimeout((function(){v()}),200):v()),null!==m&&n.domUtils.setPageScrollLeft(m),!n.env.compositionStart&&n.env.doc.querySelector("#"+d.ID.BODY_TMP_BOTTOM_STYLE)){n.domUtils.css(n.env.doc.body,{minHeight:"0"});var b=n.env.doc.body.clientHeight;n.domUtils.css(n.env.doc.body,{minHeight:null}),n.env.doc.body.clientHeight-b>3*c&&n.req.wizStyle.removeStyleById(d.ID.BODY_TMP_BOTTOM_STYLE)}}};n._fixScrollTimer=setTimeout(t,30)},n.getFragmentForCopy=function(){var e=n.getRange(),t=null;return!e||e.collapsed?t:((t=n.env.doc.createElement("div")).appendChild(e.cloneContents()),n.domUtils.fragmentFilterForCopy(t),n.domUtils.css(t,{position:"absolute",top:"-99999px",left:"-99999px",overflow:"hidden"}),n.env.body.appendChild(t),t)},n.getRange=function(){var e=n.getSelection();try{if(!e||0===e.rangeCount)return null}catch(e){return null}var t,r=e.getRangeAt(0);r.startContainer!==n.env.body||0!==r.startOffset||!r.collapsed||n.env.body.firstChild&&!n.domUtils.isInWizTmp(n.env.body.firstChild)||((t=n.env.doc.createElement("div")).appendChild(n.env.doc.createElement("br")),n.env.body.insertBefore(t,n.env.body.firstChild),n.setRange(t,0));var o=n.getRangeDetail(r.startContainer,r.startOffset);return n.domUtils.isInWizBody(o.container)||(r=null),r},n.getRangeAnchor=function(e){var t=n.getRange();if(!t)return null;var r=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;return t.collapsed||e?3===r.nodeType&&o<r.nodeValue.length?r:3===r.nodeType?n.domUtils.getNextNode(r,!1,null):0===r.childNodes.length?r:o===r.childNodes.length?n.domUtils.getNextNode(r.childNodes[o-1],!1,null):n.domUtils.getFirstDeepChild(r.childNodes[o]):3===r.nodeType&&o>0?r:3===r.nodeType?n.domUtils.getPreviousNode(r,!1,null):o>0?n.domUtils.getLastDeepChild(r.childNodes[o-1]):n.domUtils.getPreviousNode(r,!1,null)},n.getRangeClientRect=function(){var e,t,r,o=n.getRange();if(!o)return null;if(1===o.startContainer.nodeType&&o.startOffset<o.startContainer.childNodes.length&&(r=o.startContainer.childNodes[o.startOffset]),0===(t=r&&1===r.nodeType?r.getBoundingClientRect():o.getBoundingClientRect()).width&&0===t.height&&((e=n.getRange().getClientRects()).length>0&&(t=e[0]),0===t.width&&0===t.height&&o.collapsed)){var i=o.startContainer;i.getClientRects||(i=i.parentNode),(e=i.getClientRects()).length>0&&(t=e[0])}0===(t={bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}).width&&0===t.height&&((r=n.getRangeDetail(o.startContainer,o.startOffset).container).getBoundingClientRect&&(t={bottom:(t=r.getBoundingClientRect()).bottom,height:t.height,left:t.left+t.width,right:t.right,top:t.top,width:0}));return 0===t.top&&0===t.left&&0===t.width&&0===t.height?null:t},n.getRangeDetail=function(e,t){var r=!1;return t>0&&t===n.domUtils.getEndOffset(e)?(1===e.nodeType&&(e=n.domUtils.getLastDeepChild(e.childNodes[t-1]),t=n.domUtils.getEndOffset(e)),r=!0):1===e.nodeType&&(0===e.childNodes.length||t<e.childNodes.length&&(e=e.childNodes[t],t=0)),{container:e,offset:t,isEnd:r}},n.getRangeDomList=function(e){var t=n.getRange();if(!t)return null;var r=t.startContainer,o=t.startOffset,i=t.endContainer,a=t.endOffset;return n.domUtils.getListA2B({startDom:r,startOffset:o,endDom:i,endOffset:a,noSplit:!!e.noSplit})},n.getRangeParentRoot=function(){var e,t,r=n.getRange();return r?(e=r.startContainer,t=r.endContainer,n.domUtils.getParentRoot([e,t])):null},n.getSelection=function(){return n.env.doc.getSelection()},n.insertNode=function(e){var t=n.getRange();if(!t)return null;if(t.collapsed&&n.domUtils.isTag(t.startContainer,"br")){var r=t.startContainer.parentNode,o=n.domUtils.getIndex(t.startContainer);n.setRange(r,o,r,o+1),t=n.getRange()}t.insertNode(e)},n.isRangeEdge=function(e){var t,r,o={isStart:!1,isEnd:!1},i=n.getRange();if(i)return o.isCollapsed=i.collapsed,o.startDom=i.startContainer,o.startOffset=i.startOffset,o.endDom=i.endContainer,o.endOffset=i.endOffset,1===o.startDom.nodeType&&o.startOffset<o.startDom.childNodes.length?t=n.domUtils.getFirstDeepChild(o.startDom.childNodes[o.startOffset]):1===o.startDom.nodeType&&(t=n.domUtils.getNextNode(o.startDom.childNodes[o.startOffset-1],!1,null)),1===o.endDom.nodeType&&o.endOffset>0?r=n.domUtils.getLastDeepChild(o.endDom.childNodes[o.endOffset-1]):1===o.endDom.nodeType&&(r=n.domUtils.getPreviousNode(o.endDom,!1,null)),o.isStart=o.startDom===e||o.startDom===t,o.isEnd=o.endDom===e||o.endDom===r,o},n.modifyCaretStyle=function(e,t){var r,o,i,a,l=n.getSelection(),s=l.focusNode,c=!0;for(o in 3===s.nodeType&&(s=s.parentNode),e)e.hasOwnProperty(o)&&"string"==typeof o&&(i=e[o],s.style[o]!==i&&(c=!1));if(!c){var u=s;if(n.domUtils.isTag(s,"span")&&n.domUtils.isEmptyDom(s)){if(n.domUtils.modifyStyle(s,e,t),a=s,r=l.getRangeAt(0)){var f=(u=r.startContainer).childNodes.length;1===u.nodeType&&r.startOffset<f&&(u=u.childNodes[r.startOffset],n.domUtils.isTag(u,"br")&&(u=r.startContainer))}}else(r=l.getRangeAt(0)).deleteContents(),(a=n.domUtils.createSpan()).innerHTML=d.FILL_CHAR,r.insertNode(a),n.domUtils.modifyStyle(a,e,t),u=a.firstChild;a=n.domUtils.splitSpanFromParent(a);var h=s.parentNode?s.parentNode:s;n.domUtils.clearChildSpan(h,[a]),n.setRange(u,n.domUtils.getEndOffset(u))}},n.modifyRangeStyle=function(e,t){var r,o;if(r=n.getRangeDomList({noSplit:!1})){o=[];var i=!0,a=!1,l=void 0;try{for(var s,c=r.list[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var d=s.value;n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(d)||o.push(d)}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}0!==o.length&&(n.domUtils.modifyNodesStyleAndClear(o,e,t,[r.startDomBak,r.endDomBak]),n.fixRangeSpan(),n.fixRange(r))}},n.modifySelectionDom=function(e,t){var r=n.getRange();return!!r&&(r.collapsed?n.modifyCaretStyle(e,t):n.modifyRangeStyle(e,t),!0)},n.moveToPoint=function(e,t){var r,o,i;n.env.doc.caretPositionFromPoint?(o=(r=n.env.doc.caretPositionFromPoint(e,t)).offsetNode,i=r.offset):n.env.doc.caretRangeFromPoint&&(o=(r=n.env.doc.caretRangeFromPoint(e,t)).startContainer,i=r.startOffset),n.setRange(o,i)},n.modify=function(e,t,r){var o=n.getSelection();o.modify&&o.modify(e,t,r)},n.remove=function(){n.getSelection().removeAllRanges()},n.selectCharIncludeFillChar=function(e){var t,r,o,i,a=n.getRange(),l=e?"backward":"forward";if(1===a.startContainer.nodeType){if(t=n.getRangeAnchor(!1),a.startContainer===t&&n.domUtils.isTag(t,"br")&&n.domUtils.isEmptyDom(t.parentNode))return void(t.parentNode.nextSibling?n.setRange(t.parentNode,0,t.parentNode.nextSibling,0):(n.modify("move","forward","character"),n.modify("extend","backward","character"),t.nextSibling&&n.modify("extend","backward","character")));n.domUtils.isTag(t,"br")&&n.modify("extend",l,"character")}n.modify("extend",l,"character"),i=(a=n.getRange()).toString(),(t=n.getRangeAnchor(e))&&(r=e&&t===a.startContainer?a.startOffset:e||t!==a.endContainer?-1:a.endOffset,o=3===t.nodeType&&r>0&&r<t.nodeValue.length?t:e?n.domUtils.getPreviousNode(t,!1,null):n.domUtils.getNextNode(t,!1,null),0===i.length?t&&!n.domUtils.isSelfClosingTag(t)&&o&&(1!==o.nodeType||1===o.nodeType&&n.domUtils.isSelfClosingTag(o))&&n.modify("extend",l,"character"):i.indexOf(d.FILL_CHAR)>-1&&""===i.replace(d.FILL_CHAR_REG,"")&&n.modify("extend",l,"character"))},n.setRange=function(e,t,r,o){if(e||r){var i=n.domUtils.getEndOffset(e),a=n.domUtils.getEndOffset(r);t<0?t=0:t>i&&(t=i),o<0?o=n.domUtils.getEndOffset(r):o>a&&(o=a);var l,s=n.getSelection();if(e||(e=n.env.body,t=0),n.env.browser.isIe&&n.remove(),0===s.rangeCount){(l=n.env.doc.createRange()).selectNode(e);try{s.addRange(l)}catch(e){return void console.error(e)}}try{s.collapse(e,t),!r||r===e&&o===t||s.extend(r,o)}catch(e){console.log(e)}}},n.setRangeToEnd=function(e){var t=n.domUtils.getLastDeepChild(e),r=n.domUtils.getEndOffset(t);n.domUtils.isSelfClosingTag(t)&&(t=t.parentNode,r=n.domUtils.getIndex(e)+1),n.setRange(t,r)},n.getEventCaretRange=function(e){var t,r=e.clientX||0,o=e.clientY||0;if(n.env.doc.body.createTextRange)(t=n.env.doc.body.createTextRange()).moveToPoint(r,o);else if(void 0!==n.env.doc.createRange)if(void 0!==e.rangeParent)(t=n.env.doc.createRange()).setStart(e.rangeParent,e.rangeOffset),t.collapse(!0);else if(n.env.doc.caretPositionFromPoint){var i=n.env.doc.caretPositionFromPoint(r,o);(t=n.env.doc.createRange()).setStart(i.offsetNode,i.offset),t.collapse(!0)}else n.env.doc.caretRangeFromPoint&&(t=n.env.doc.caretRangeFromPoint(r,o));return t},n.selectRange=function(e){if(e)if(void 0!==e.select)e.select();else if(void 0!==window.getSelection){var t=n.getSelection();t.removeAllRanges(),t.addRange(e)}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(63),f=n(25),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).type=d.DOCUMENT_TYPE.COMMON,n._noteSrc="",n._noteSrcIsText=!1,n._noteTextSrc="",n._componentOn=function(){n.env.readonly=!0,n.domUtils.removeClass(n.env.body,d.CLASS.EDITING),n.domUtils.addClass(n.env.body,d.CLASS.READONLY),n.env.options.container&&(n.domUtils.removeClass(n.env.options.container,d.CLASS.EDITING),n.domUtils.addClass(n.env.options.container,d.CLASS.READONLY)),n.req.frameViewCore.on(),n._noteSrc=n.req.editorBridge.getContentHtmlForInside({});n._noteSrc=n._noteSrc.replace(/(<body [^>]*)opacity:[ ]*0;?/gi,"$1"),n.env.frame.toolbarContainer&&n.env.options.document!==n.env.doc&&f.loadCss(n.env.options.document,[n.env.dependency.files.css.fonts]),f.loadCss(n.env.doc,[n.env.dependency.files.css.fonts]),n.req.wizStyle.insertTmpReaderStyle()},n._setDomReadOnly=function(e,t){for(var r=n.env.body.getElementsByTagName(e),o=0;o<r.length;o++){r[o].readOnly=t}},n._afterRender=function(e){var t=function(){n.req.blockCore.on(),n.req.imgCore.setImgFullPath(),n.req.mediaCore.on(),n._setDomReadOnly("input",!0),n._setDomReadOnly("textarea",!0),"function"==typeof e&&e()};n.domUtils.fixList(),n.req.readerCommonEvent.on(),n.req.imgCore.on(),n.req.markerCore.on(),n.req.menuPlugin.on(),n.req.selectPlugin.on(),n.req.tableCore.on(),n.req.todoCore&&n.req.todoCore.on(),n.req.codeCore&&n.env.options.reader.type!==d.NOTE_READER_TYPE.MARKDOWN?n.req.codeCore.on({},t):t()},n.off=function(e,t){if(e=e||{},n.offEvent(),"string"==typeof e.noteSrc)n._noteSrc=e.noteSrc;else if(e.useContentExtractionHtml){var r=n.req.contentCore&&n.req.contentCore.getContentExtractionHtml();r&&(n._noteSrc=r)}else n.req.contentCore.off();if(n.env.options.pureReadMode.needContentExtraction=!1,n._noteSrc){if(n._noteSrc=n.domUtils.insertBaseToHtml(n._noteSrc),n.env.options.reader.type!==d.NOTE_READER_TYPE.COMMON||e.useContentExtractionHtml){if(!n.env.options.container||n.env.options.useFrame)return/<body(\s|>)/gi.test(n._noteSrc)||(n._noteSrc=d.EMPTY_NOTE_TEMPLATE.replace("${body}",n._noteSrc.escapeReplace())),n.env.doc.body.style.overflow="hidden",void setTimeout((function(){n.env.doc.open("text/html","replace"),n.env.doc.write(n._noteSrc),n.env.doc.close(),n.env.body=n.env.doc.body,n.domUtils.attr(n.env.body,{spellcheck:"false"}),u.run(n.env.win),n.env.scrollContainer=n.domUtils.getScrollContainer(),t()}),0);n.env.body.innerHTML=n._noteSrc,n.domUtils.removeClass(n.env.body,d.CLASS.MARKDOWN_BODY)}else n.domUtils.removeByTag(d.TAG.TMP_TAG),n._setDomReadOnly("input",!1),n._setDomReadOnly("textarea",!1);t()}else t()},n.offEvent=function(){n.req.highlightUtils.off(),n.req.readerCommonEvent.off(),n.req.blockCore.off(),n.req.todoCore&&n.req.todoCore.off(),n.req.codeCore&&n.req.codeCore.off(),n.req.tableCore.off(),n.req.menuPlugin.off(),n.req.selectPlugin.off(),n.req.imgCore.off(),n.req.markerCore.off(),n.req.frameViewCore.off()},n.on=function(e,t){var r=n.domUtils.getPageScroll().top,o=function(){!1!==n.env.readonly&&n._afterRender((function(){n.env.client.type.isPhone||n.env.client.type.isPad||n.domUtils.setPageScrollTop(r),n.env.body.style.opacity="1",n.req.nightModeUtils&&n.req.nightModeUtils.on(),n.req.lazyLoadUtils.init(),t()}))};n.req.editorBridge.editorUtils.initWizDocument((function(){n.env.isWizTemplate&&n.env.win.WizTemplate&&n.env.win.WizTemplate.off(),n.req.editorCommon.off(),n._componentOn(),n.req.amendInfo.on(),n.env.isWizTemplate&&n.env.win.WizTemplate&&n.env.win.WizTemplate.on(!0),n.req.markdownRender&&n.env.options.reader.type===d.NOTE_READER_TYPE.MARKDOWN?n._noteSrcIsText?n.req.markdownRender.do({container:n.env.body,markdownSrc:n._noteTextSrc},o):n.req.markdownRender.do({container:n.env.body},o):n.req.mathJaxRender&&n.env.options.reader.type===d.NOTE_READER_TYPE.MATHJAX?n.req.mathJaxRender.do({container:n.env.body},o):o()}))},n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"noteSrcIsText",get:function(){return this._noteSrcIsText},set:function(e){this._noteSrcIsText=e}},{key:"noteTextSrc",get:function(){return this._noteTextSrc},set:function(e){this._noteTextSrc=e}}])&&i(n.prototype,r),h&&i(n,h),t}(n(2));e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=(n(3),function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._isScrolled=!1,n._copySelection=function(e,t){var r,o,i,a=n.rangeUtils.getRange(),l=!1;if(a&&!a.collapsed)if(o=n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(a.startContainer),i=n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(a.endContainer),o&&o===i){if(!n.env.client.type.isPhone&&!n.env.client.type.isPad)return void t();l=!0}else l=!!a.cloneContents().querySelector("."+d.CLASS.CODE_CONTAINER);if(a&&!a.collapsed&&l)if(r=n.rangeUtils.getFragmentForCopy()){var s=r.innerText.replace(d.FILL_CHAR_REG,""),c=r.innerHTML.replace(d.FILL_CHAR_REG,"");r.innerHTML="",n.env.body.removeChild(r),r=null;n.req.clipboardUtils.setData(e,c,s,(function(){t()}))}else r=null,t();else t()},n._event={bind:function(){if(n._event.unbind(),n.env.body.addEventListener("dblclick",n._handler.onDblclick),n.env.body.addEventListener("click",n._handler.onClick),n.env.body.addEventListener("copy",n._handler.onCopy),n.env.body.addEventListener("cut",n._handler.onCopy),n.env.body.addEventListener("mousedown",n._handler.onMousedown),n.env.body.addEventListener("mousemove",n._handler.onMousemove),n.env.supportTouchEvent&&(n.env.body.addEventListener("touchend",n._handler.onTouchEnd),n.env.body.addEventListener("touchstart",n._handler.onTouchStart)),n.env.options.container?n.env.scrollContainer.addEventListener("scroll",n._handler.onScroll):n.env.doc.addEventListener("scroll",n._handler.onScroll),n.env.win.addEventListener("resize",n._handler.onResize),n.env.client.type.isWeb&&n.env.win.top!==n.env.win)try{n.env.win.top.addEventListener("resize",n._handler.onResize)}catch(e){}n.req.frameViewUtils.onAdjustContainerSize()},unbind:function(){if(n.env.body.removeEventListener("dblclick",n._handler.onDblclick),n.env.body.removeEventListener("click",n._handler.onClick),n.env.body.removeEventListener("copy",n._handler.onCopy),n.env.body.removeEventListener("cut",n._handler.onCopy),n.env.body.removeEventListener("mousedown",n._handler.onMousedown),n.env.body.removeEventListener("mousemove",n._handler.onMousemove),n.env.body.removeEventListener("touchend",n._handler.onTouchEnd),n.env.body.removeEventListener("touchstart",n._handler.onTouchStart),n.env.doc.removeEventListener("scroll",n._handler.onScroll),n.env.scrollContainer&&n.env.scrollContainer.removeEventListener("scroll",n._handler.onScroll),n.env.win.removeEventListener("resize",n._handler.onResize),n.env.client.type.isWeb&&n.env.win.top!==n.env.win)try{n.env.win.top.removeEventListener("resize",n._handler.onResize)}catch(e){}},bindEventForAutoEdit:function(){n._event.unbindEventForAutoEdit(),n.env.body.addEventListener("touchend",n._handler.onTouchEndForAutoEdit),n.env.body.addEventListener("touchmove",n._handler.onTouchMoveForAutoEdit)},unbindEventForAutoEdit:function(){n.env.body.removeEventListener("touchend",n._handler.onTouchEndForAutoEdit),n.env.body.removeEventListener("touchmove",n._handler.onTouchMoveForAutoEdit)}},n._handler={onDblclick:function(e){n.env.event.call(d.EVENT.ON_DBLCLICK,e)},onClick:function(e){var t=n.req.linkUtils.onClickLink(e);if(!n.env.options.reader.callback.onClick||n.env.options.reader.callback.onClick(e)){var r=!1;t||((r=n.req.imgCore.isImg(e.target))?n.env.event.call(d.EVENT.ON_CLICK,e):r||(n.req.todoUtils.isCheckbox(e.target)?n.env.event.call(d.EVENT.ON_CLICK,e):n.env.event.call(d.EVENT.AUTO_EDIT,e)))}},onCopy:function(e){n._copySelection(e,(function(){n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizEditorAfterCopied)}))},onMousedown:function(e){n.env.event.call(d.EVENT.ON_MOUSE_DOWN,e)},onMousemove:function(e){n.env.event.call(d.EVENT.ON_MOUSE_MOVE,e)},onResize:function(e){n.env.event.call(d.EVENT.ON_RESIZE,e)},onScroll:function(e){n._isScrolled=!0,n.env.event.call(d.EVENT.ON_SCROLL,e)},onTouchEnd:function(e){n.env.event.call(d.EVENT.ON_TOUCH_END,e)},onTouchEndForAutoEdit:function(e){n._event.unbindEventForAutoEdit(),n.env.event.call(d.EVENT.AUTO_EDIT,e)},onTouchMoveForAutoEdit:function(e){n._event.unbindEventForAutoEdit()},onTouchStart:function(e){n.env.event.call(d.EVENT.ON_TOUCH_START,e),n.env.client.type.isIOS&&n.env.options.reader.autoEdit&&n.env.body===n.env.doc.body&&e.target===n.env.body&&n._event.bindEventForAutoEdit()}},n.on=function(){n._event.bind()},n.off=function(){n._isScrolled=!1,n._event.unbind()},n.bind=n._event.bind,n.unbind=n._event.unbind,n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}},{key:"isScrolled",get:function(){return this._isScrolled}}])&&i(n.prototype,r),u&&i(n,u),t}(n(2)));e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(25),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).type=d.DOCUMENT_TYPE.OUTLINE,n._componentOn=function(){n.env.readonly=!0,n.domUtils.removeClass(n.env.body,d.CLASS.EDITING),n.domUtils.addClass(n.env.body,d.CLASS.READONLY),n.env.options.container&&(n.domUtils.removeClass(n.env.options.container,d.CLASS.EDITING),n.domUtils.addClass(n.env.options.container,d.CLASS.READONLY)),n.req.frameViewCore.on(),u.loadCss(n.env.doc,[n.env.dependency.files.css.fonts]),n._outlineCore.on(),n._outlineStyle.initCommon(),n.req.wizStyle.insertTmpReaderStyle(),n.req.readerOutlineEvent.bind(),n._outlineUtils.fixOutline(),n._outlineUtils.setNodeEditable()},n._afterRender=function(e){n.req.imgCore.on(),n.req.menuPlugin.on(),n.req.selectPlugin.on(),n.req.imgCore.setImgFullPath(),"function"==typeof e&&e()},n.off=function(e,t){e=e||{},n.offEvent(),t()},n.offEvent=function(){n.req.menuPlugin.off(),n.req.selectPlugin.off(),n.req.imgCore.off(),n.req.readerOutlineEvent.unbind(),n.req.frameViewCore.off(),n._outlineCore.off()},n.on=function(e,t){var r=n.domUtils.getPageScroll().top;n._outlineUtils.initWizDocument((function(){n.req.editorOutline.off(),n._componentOn(),!1!==n.env.readonly&&n._afterRender((function(){n.env.client.type.isPhone||n.env.client.type.isPad||n.domUtils.setPageScrollTop(r),n.req.nightModeUtils&&n.req.nightModeUtils.on(),n.req.lazyLoadUtils.init(),t()}))}))},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._outlineCore=e.require.outlineCore,this._outlineStyle=e.require.outlineStyle,this._outlineUtils=e.require.outlineUtils}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(1),s=(n(3),function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,i(t).call(this)))._event={bind:function(){e._event.unbind(),e.env.body.addEventListener("dblclick",e._handler.onDblclick),e.env.body.addEventListener("click",e._handler.onClick),e.env.body.addEventListener("mousedown",e._handler.onMousedown),e.env.supportTouchEvent&&e.env.body.addEventListener("touchstart",e._handler.onTouchStart),e.env.doc.addEventListener("copy",e._handler.onCopy),e.env.doc.addEventListener("cut",e._handler.onCopy),e.req.frameViewUtils.onAdjustContainerSize()},unbind:function(){e.env.body.removeEventListener("dblclick",e._handler.onDblclick),e.env.body.removeEventListener("click",e._handler.onClick),e.env.body.removeEventListener("mousedown",e._handler.onMousedown),e.env.body.removeEventListener("touchstart",e._handler.onTouchStart),e.env.doc.removeEventListener("copy",e._handler.onCopy),e.env.doc.removeEventListener("cut",e._handler.onCopy)},bindEventForAutoEdit:function(){e._event.unbindEventForAutoEdit(),e.env.body.addEventListener("touchend",e._handler.onTouchEndForAutoEdit),e.env.body.addEventListener("touchmove",e._handler.onTouchMoveForAutoEdit)},unbindEventForAutoEdit:function(){e.env.body.removeEventListener("touchend",e._handler.onTouchEndForAutoEdit),e.env.body.removeEventListener("touchmove",e._handler.onTouchMoveForAutoEdit)}},e._handler={onDblclick:function(t){e.env.event.call(l.EVENT.ON_DBLCLICK,t)},onClick:function(t){e.req.linkUtils.onClickLink(t);if(!e.env.options.reader.callback.onClick||e.env.options.reader.callback.onClick(t)){var n=t.target,r=e.req.outlineUtils.isInContent(n),o=!r&&e.req.outlineUtils.isInNotes(n);if(r||o?e.env.event.call(l.EVENT.AUTO_EDIT,t):e.env.event.call(l.EVENT.ON_CLICK,t),n===e.env.body){var i=e.req.outlineUtils.getContainer(),a=e.domUtils.getPageScroll();t.clientY+a.top>i.clientHeight&&e.env.event.call(l.EVENT.AUTO_EDIT,t)}e.req.frameViewUtils.onAdjustContainerSize()}},onCopy:function(t){e._clipboardDoing=!0,e.req.outlineCore.copySelection(t,!1,(function(){e._clipboardDoing=!1,e.env.client.sendCmdToWizClient(l.CLIENT_EVENT.WizEditorAfterCopied)}))},onMousedown:function(t){e.env.event.call(l.EVENT.ON_MOUSE_DOWN,t)},onTouchStart:function(t){e.env.client.type.isIOS&&e.env.options.reader.autoEdit&&e.env.body===e.env.doc.body&&t.target===e.env.body&&e._event.bindEventForAutoEdit()},onTouchEndForAutoEdit:function(t){e._event.unbindEventForAutoEdit(),e.env.event.call(l.EVENT.AUTO_EDIT,t)},onTouchMoveForAutoEdit:function(t){e._event.unbindEventForAutoEdit()}},e.bind=e._event.bind,e.unbind=e._event.unbind,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),t}(n(140)));e.exports=s},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h="active",p=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._event={bind:function(){n._event.unbind(),n.env.supportTouchEvent?n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown):n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown)},unbind:function(){n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown)}},n._handler={onMouseDown:function(e){var t=e.target;if(!n.req.menuPlugin.getContainerFromDom(t)){var r=n._selectUtils.getHeaderFromDom(t);if(r)return n._selectUtils.showOptions(r),void u.stopEvent(e);n._selectUtils.getContainerFromDom(t)||n._selectUtils.hideOptions()}}},n._selectUtils={getContainerFromDom:function(e){return n.domUtils.getParentByClass(e,d.CLASS.SELECT_PLUGIN_CONTAINER,!0)},getHeaderFromDom:function(e){return n.domUtils.getParentByClass(e,d.CLASS.SELECT_PLUGIN_HEADER,!0)},getHeaderText:function(e){return e.querySelector("."+d.CLASS.SELECT_PLUGIN_HEADER_TEXT)},hideOptions:function(e){for(var t,r=(t=e?[e]:n.env.body.querySelectorAll("."+d.CLASS.SELECT_PLUGIN_CONTAINER+"."+h)).length-1;r>=0;r--){var o=t[r];n.domUtils.removeClass(o,h),o.menu&&o.menu.hide(),n.env.event.call(d.EVENT.ON_SELECT_PLUGIN_HIDE,o)}},selectOption:function(e,t){e&&!t.disabled&&(n._selectUtils.showHead(e,t),n._selectUtils.hideOptions(e),n.env.event.call(d.EVENT.ON_SELECT_PLUGIN_CHANGE,e))},showHead:function(e,t){if(!(e.selectType===d.SELECT_PLUGIN.TYPE.ICON)){var r=n._selectUtils.getHeaderText(e);r&&(r.textContent=t.text)}e.value=t.value},showOptions:function(e){var t=n._selectUtils.getContainerFromDom(e);n.domUtils.hasClass(t,h)?n._selectUtils.hideOptions(t):(n._selectUtils.hideOptions(),n.domUtils.addClass(t,h),t.menu?t.menu.show():t.menu=n.req.menuPlugin.show({type:t.optionsType,data:t.optionsData,defaultValue:t.defaultValue,target:t,className:d.CLASS.SELECT_PLUGIN_MENU+" "+t.menuClassName,onSelected:n._selectUtils.selectOption}),n.env.event.call(d.EVENT.ON_SELECT_PLUGIN_SHOW,t))}},n.on=function(){n._event.bind()},n.off=function(){n._event.unbind()},n.create=function(e){var t=e.optionsData,r=e.className,o=e.defaultValue,i=e.type,a=i===d.SELECT_PLUGIN.TYPE.ICON,l=n.env.doc.createElement("div"),s=n.env.doc.createElement("div"),c=a?null:n.env.doc.createElement("span"),u=n.env.doc.createElement("i");c&&s.appendChild(c),s.appendChild(u),l.appendChild(s),l.selectType=i,l.hideOptions=function(){n._selectUtils.hideOptions(l)},l.optionsType=e.optionsType||d.MENU_PLUGIN.TYPE.SELECT,l.optionsData=e.optionsData,l.defaultValue=e.defaultValue,l.menuClassName=e.menuClassName;var f=a?"icon-more editor-icon":"icon-down_arrow editor-icon";n.domUtils.addClass(u,f),c&&n.domUtils.addClass(c,d.CLASS.SELECT_PLUGIN_HEADER_TEXT),n.domUtils.addClass(s,d.CLASS.SELECT_PLUGIN_HEADER),n.domUtils.addClass(l,d.CLASS.SELECT_PLUGIN_CONTAINER),n.domUtils.addClass(l,d.CLASS.FLOAT_LAYER),n.domUtils.addClass(l,r),n.domUtils.addClass(l,i),n.domUtils.attr(l,{onselectstart:"return false;"});for(var h=0,p=t.length;h<p;h++){var m=t[h];if(m.value===o){n._selectUtils.showHead(l,m);break}}return l},n.destory=function(){},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=p},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._touchStart=null,n._svgCheck=function(e){var t=new RegExp("("+d.CLASS.SVG_IMAGE+")","i");return!!(e&&n.domUtils.isTag(e,"img")&&t.test(e.getAttribute("class")))},n._checkWordCount=function(){var e=n.domUtils.getWordCount();return e.nChars+e.nAsianChars<102400},n._clickSvgForEdit=function(e){var t=e.target;if(n._svgCheck(t)&&n._checkWordCount()){if(/^touch/i.test(e.type)){var r=e.touches[0]||e.changedTouches[0];if(!n._touchStart||!r)return;if(Math.abs(n._touchStart.clientX-r.clientX)>10||Math.abs(n._touchStart.clientY-r.clientY)>10)return}var o=n.req.editorBridge.getContentHtmlForInside(),i=n._getSvgList(t),a={noteHtml:o,svgIndex:i.index,svgList:i.list};n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizEditorClickSvg,a),u.stopEvent(e)}},n._getSvgData=function(e){var t=e.src?e.src.replace(/^.*[\\\/]([^\\\/]*)$/,"$1"):"";return{id:e.id,fileName:t}},n._getSvgList=function(e){var t=[],r=n._getSvgData(e),o=[],i=null,a=!1;if(e)i=n.domUtils.getIndexList(e).join(".");else{var l=n.rangeUtils.getRange();if(l){var s=n.rangeUtils.getRangeDetail(l.startContainer,l.startOffset);i=n.domUtils.getIndexList(s.container).join("."),0===s.offset&&(a=!0)}}for(var c=n.env.body.querySelectorAll("img."+d.CLASS.SVG_IMAGE),f=0;f<c.length;f++){var h=c[f];if(!e||e!==h)if(i){var p=n.domUtils.getIndexList(h).join("."),m=u.compareVersion(p,i);m<0?t.push(n._getSvgData(h)):m>0?o.push(n._getSvgData(h)):a?o.push(n._getSvgData(h)):t.push(n._getSvgData(h))}else t.push(n._getSvgData(h))}return{index:t.length,list:t.concat(r,o)}},n._createSvgId=function(){var e=""+u.math.random();return e=e.substr(e.length-6),"svg_"+(new Date).valueOf()+"_"+e},n._event={bind:function(){n._event.unbind(),n.env.readonly||(n.env.client.type.isIOS||n.env.client.type.isAndroid?(n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onTouchStart),n.env.event.add(d.EVENT.ON_TOUCH_END,n._handler.onClick)):n.env.event.add(d.EVENT.ON_CLICK,n._handler.onClick))},unbind:function(){n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onTouchStart),n.env.event.remove(d.EVENT.ON_TOUCH_END,n._handler.onClick),n.env.event.remove(d.EVENT.ON_CLICK,n._handler.onClick)}},n._handler={onClick:function(e){n.env.readonly||n._clickSvgForEdit(e)},onTouchStart:function(e){e.touches.length>1?n._touchStart=null:n._touchStart=e.touches[0]}},n.createSvg=function(){if(n._checkWordCount()){var e=n.rangeUtils.getRange();e&&!e.collapsed&&(n.rangeUtils.setRange(e.endContainer,e.endOffset),e=n.rangeUtils.getRange());var t=!1,r=n.env.doc.createElement("div");if(n.domUtils.addClass(r,d.CLASS.SVG_TEMPLATE),e&&n.req.codeUtils){var o=n.req.codeUtils.getContainerFromChild(e.startContainer);o&&(n.domUtils.after(r,o),t=!0)}if(t||e)t||(n.req.editorBridge.editorUtils.insertDom(r,{insertEmptyDiv:!0}),t=!0);else{var i=n.req.tableZone.getZone();if(i.range){var a=n.req.tableUtils.getContainer(i.table);n.domUtils.after(r,a),t=!0}else n.env.body.appendChild(r),t=!0}var l=n.req.editorBridge.getContentHtmlForInside({isCreateSvg:!0}),s=n._getSvgList(r),c={noteHtml:l,svgIndex:s.index,svgList:s.list};t&&n.domUtils.remove(r),n.env.client.sendCmdToWizClient(d.CLIENT_EVENT.WizEditorClickSvg,c)}},n.fixSvgId=function(){for(var e={},t=n.env.body.querySelectorAll("img."+d.CLASS.SVG_IMAGE),r=0;r<t.length;r++){for(var o=t[r];e[o.id];)o.id=n._createSvgId();e[o.id]=1}},n.init=function(){},n.bind=n._event.bind,n.unbind=n._event.unbind,n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){var r=n(1),o=n(3);e.exports=function(){var e=null,t=null,n=null,i=null,a=null,l=null,s=null,c=null;this.initCore=function(r){t=(e=r).env,n=e.require.commandExtend,i=e.require.domUtils,a=e.require.historyUtils,l=e.require.rangeUtils,s=e.require.tableZone,c=e.require.todoUtils};var d="&nbsp; &nbsp;&nbsp;",u={bind:function(){u.unbind(),t.event.add(r.EVENT.ON_KEY_DOWN,u.handler.onKeyDown)},unbind:function(){t.event.remove(r.EVENT.ON_KEY_DOWN,u.handler.onKeyDown)},handler:{onKeyDown:function(e){9===(e.keyCode||e.which)&&function(e){var r=l.getRange(),o=s.getZone();if(!r||o.range)return!1;if(e)return a.saveSnap(!1),t.client.type.isMac?setTimeout((function(){n.execCommand("outdent")}),10):n.execCommand("outdent"),!0;var u=r.startContainer,f=r.startOffset,h=l.getRangeDetail(u,f),p=i.isTag(u,["ul","ol","li"]),m=c&&c.isCaretAfterCheckbox(),g=i.getParentByTagName(u,["ul","ol","li"],!1),v=!1,b=h.container;if(g&&0===h.offset)for(;b!==t.body;){if(b.previousSibling){v=!1;break}if(v=!0,(b=b.parentNode)===g)break}return!i.isTag(u,["td","th"])&&(!r.collapsed||m||v||p?(a.saveSnap(!1),t.client.type.isMac?setTimeout((function(){n.execCommand("indent")}),10):n.execCommand("indent"),!0):!(3!==u.nodeType&&!i.getParentByTagName(u,["a","b","body","div","font","html","i","p","span","strong","u"]))&&(a.saveSnap(!1),n.execCommand("insertHTML",!1,d),!0))}(e.shiftKey)&&o.stopEvent(e)}}};this.init=function(e){d=e},this.on=function(){u.bind()},this.off=function(){u.unbind()}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.ON_DRAG_START,n._handler.onDragStart),n.env.event.add(d.EVENT.ON_KEY_UP,n._handler.onKeyUp),n.env.supportTouchEvent?(n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown),n.env.event.add(d.EVENT.ON_TOUCH_END,n._handler.onMouseUp)):(n.env.event.add(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.add(d.EVENT.ON_MOUSE_OVER,n._handler.onMouseOver),n.env.event.add(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp)),n.env.event.add(d.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.add(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory)},unbind:function(){n.env.event.remove(d.EVENT.ON_DRAG_START,n._handler.onDragStart),n.env.event.remove(d.EVENT.ON_KEY_UP,n._handler.onKeyUp),n.env.event.remove(d.EVENT.ON_MOUSE_DOWN,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_MOUSE_OVER,n._handler.onMouseOver),n.env.event.remove(d.EVENT.ON_MOUSE_UP,n._handler.onMouseUp),n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onMouseDown),n.env.event.remove(d.EVENT.ON_TOUCH_END,n._handler.onMouseUp),n.env.event.remove(d.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.remove(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory)}},n._handler={afterRestoreHistory:function(){var e,t=[];if(0!==(e=n.env.doc.getElementsByClassName(d.CLASS.SELECTED_CELL)).length){for(var r=0,o=e.length;r<o;r++){var i=e[r];n.domUtils.isInWizTmp(i)||t.push(i)}if(n.domUtils.getParentByTagName(t[0],"table",!0,null)){n._tableZone.setStart(t[0]);for(var a,l=n._tableZone.getZone(),s=t[t.length-1],c=n._tableUtils.getRangeByCellData(n._tableUtils.getCellData(l.grid,s)),u=1;u<t.length-1;u++){var f=t[u];1!==f.rowSpan&&(((a=n._tableUtils.getRangeByCellData(n._tableUtils.getCellData(l.grid,f))).maxY>c.maxY||(a.maxY=c.maxY&&a.maxX>c.maxX))&&(s=f,c=a))}n._tableZone.setEnd(s),n._menuMethods.remove(),n._menuMethods.show()}else n._tableZone.clear()}else n._tableZone.clear()},onDragStart:function(e){n.domUtils.getParentByTagName(e.target,"table",!0,null)&&u.stopEvent(e)},onKeyDown:function(e){var t=n.rangeUtils.getSelection(),r=n._tableZone.getZone();if(n.env.browser.isIe)return!0;if(!r.range||!t)return!0;var o,i,a,l,s,c,d,f=e.shiftKey?"extend":"move",h=e.keyCode||e.which,p=!1,m=t.focusNode;switch(h){case 37:e.ctrlKey||e.metaKey||!m||(p=!0,n.rangeUtils.modify(f,"backward","character")),o={x:-1,y:0};break;case 38:e.ctrlKey||e.metaKey||!m||(p=!0,n.rangeUtils.modify("move","backward","line")),o={x:0,y:-1};break;case 9:e.shiftKey||(o={x:1,y:0,canChangeRow:!0});break;case 39:e.ctrlKey||e.metaKey||!m||(p=!0,n.rangeUtils.modify(f,"forward","character")),o={x:1,y:0};break;case 13:if(!e.ctrlKey&&!e.metaKey)break;case 40:e.ctrlKey||e.metaKey||!m||(p=!0,n.rangeUtils.modify("move","forward","line")),o={x:0,y:1}}if(p){if(i=t.focusNode,m=n.domUtils.getParentByTagName(m,["td","th"],!0,null),(i=n.domUtils.getParentByTagName(i,["td","th"],!0,null))&&i!==m&&(38===h||40===h||13===h?p=!1:n._tableZone.setStart(i).setEnd(i)),p)return c=n._tableUtils.checkCaretInTableContainer(e),i||c.tableContainer?c.before&&(n.rangeUtils.setRange(r.start.cell,0),n._tableZone.setStart(r.start.cell).setEnd(r.start.cell)):(n._tableZone.clear(),n._menuMethods.show()),u.stopEvent(e),!1;if(38===h&&r.start.cell===r.end.cell&&0===r.start.y_src){for(a=r.start.x,i=n.domUtils.getPreviousNode(n._tableUtils.getContainer(m));i&&!n.domUtils.isTag(i,"br")&&n.domUtils.isEmptyDom(i);)i=n.domUtils.getPreviousNode(i);return i?(n._tableZone.clear(),n._menuMethods.show(),(d=n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(i))?n.req.codeUtils.focusToLast(d.codeMirror):(n.rangeUtils.setRange(i,n.domUtils.getEndOffset(i)),0!==a||n.domUtils.getParentByTagName(i,["table"],!0,null)||n.rangeUtils.modify("move","backward","lineboundary"),n.rangeUtils.fixScroll())):(n.rangeUtils.setRange(r.start.cell,0),n._tableZone.setStart(r.start.cell).setEnd(r.start.cell)),u.stopEvent(e),!1}if(40===h&&r.start.cell===r.end.cell&&r.start.y_src+r.start.cell.rowSpan>=r.grid.length){for(a=r.start.x,i=n.domUtils.getNextNode(n._tableUtils.getContainer(m));i&&!n.domUtils.isTag(i,"br")&&n.domUtils.isEmptyDom(i);)i=n.domUtils.getNextNode(i);return i?(n._tableZone.clear(),n._menuMethods.show(),(d=n.req.codeUtils&&n.req.codeUtils.getContainerFromChild(i))?n.req.codeUtils.focusToFirst(d.codeMirror):(n.rangeUtils.setRange(i,n.domUtils.getEndOffset(i)),0!==a||n.domUtils.getParentByTagName(i,["table"],!0,null)||n.rangeUtils.modify("move","backward","lineboundary"),n.rangeUtils.fixScroll())):n._tableZone.setStart(r.start.cell).setEnd(r.start.cell),u.stopEvent(e),!1}}if(o){if(l=e.shiftKey&&r.end||r.start,(s=n._tableZone.switchCell(l,o))===l)return u.stopEvent(e),!1;if(s)return e.shiftKey?n._tableZone.setEnd(s.cell,!0):n._tableZone.setStart(s.cell,s.x,s.y).setEnd(s.cell),n.rangeUtils.fixScroll(),u.stopEvent(e),!1}return!0},onKeyUp:function(e){var t=e.keyCode||e.which;if(!(!n.env.browser.isMac&&(e.ctrlKey&&65===t||17===t)||n.env.browser.isMac&&(e.metaKey&&65===t||91===t||93===t))){var r,o=n._tableZone.getZone(),i=n.rangeUtils.getRange();!o.range&&i&&i.collapsed&&(r=n.domUtils.getParentByTagName(i.startContainer,["td","th"],!0,null))&&(n._tableZone.setStart(r).setEnd(r),n._menuMethods.show()),n._tableUtils.fixSelection(e)}},onMouseDown:function(e){if("mousedown"!==e.type||0===e.button||1===e.button){var t=n._tableUtils.isMenu(e.target),r=n._tableUtils.isBar(e.target);if(!t&&!r){n._menuMethods.setMenuPos("end");var o=n.domUtils.getParentByTagName(e.target,["th","td"],!0,null),i=o?n.domUtils.getParentByTagName(o,"table",!1,null):null,a=n._tableUtils.getMousePosition(e,i),l=n._tableZone.isZoneBorder(e);if(l.isBodyBorder||l.isContainer)n.env.supportTouchEvent||u.stopEvent(e);else{if(!n.env.supportTouchEvent){if(l.isRight)return void n._tableZone.startDragColLine(e.target,a.x);if(l.isBottom)return void n._tableZone.startDragRowLine(e.target,a.y);if(l.isDot)return}l.isBorder||l.isScroll||(n._tableZone.setStart(o),n._menuMethods.show())}}}else n._menuMethods.hide()},onMouseOver:function(e){var t=n.domUtils.getParentByTagName(e.target,["td","th"],!0,null);n._tableZone.modify(t)},onMouseUp:function(e){if(n._tableUtils.fixSelection(e),"mouseup"!==e.type||0===e.button||1===e.button){var t,r=n._tableZone.getZone();if(!r.active){if(n._tableUtils.isMenu(e.target))return;if((t=n._tableZone.isZoneBorder(e)).isRight&&!n._tableZone.isRangeActiving())return;if(t.isBottom&&!n._tableZone.isRangeActiving())return;if(t.isDot)return;if(t.isBorder||t.isScroll)return}var o=n.domUtils.getParentByTagName(e.target,["td","th"],!0,null);!o&&r.active&&(o=r.end?r.end.cell:r.start.cell),n._tableZone.setEnd(o)}},onSelectionChange:function(e){var t,r,o=n._tableUtils.checkCaretInTableContainer(e),i=n.rangeUtils.getRange();i&&!i.collapsed&&((r=n._tableUtils.getContainer(i.startContainer))&&n._tableUtils.moveOutFromTableContainer(r),(r=n._tableUtils.getContainer(i.endContainer))&&n._tableUtils.moveOutFromTableContainer(r));var a=n._tableZone.getZone();if(n.env.browser.isIe&&!a.active&&(i=n.rangeUtils.getRange())&&i.collapsed){var l=n.domUtils.getParentByTagName(i.startContainer,["td","th"],!0,null);if(a.range&&a.start.cell===l)return;l?(n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!0),n._tableZone.setStart(l).setEnd(l),n._menuMethods.show(),setTimeout((function(){n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!1)}),10)):(n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!0),n._menuMethods.hide(),n._tableZone.clear(),setTimeout((function(){n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!1)}),10))}else o.tableContainer&&a.table&&!a.table.parentNode?(n._menuMethods.hide(),n._tableZone.clear()):o.tableContainer&&!a.range&&(t=o.tableContainer.querySelectorAll("td"),(t=o.this&&o.this._tableMenu||o.after?t[t.length-1]:o.before?t[0]:null)&&(n._tableZone.setStart(t).setEnd(t),n._menuMethods.show()))}},n._menuMethods={remove:function(){n._tableMenu&&n._tableMenu.remove()},show:function(){n._tableMenu&&n._tableMenu.show()},hide:function(){n._tableMenu&&n._tableMenu.hide()},setMenuPos:function(e){n._tableMenu&&n._tableMenu.setMenuPos(e)}},n.on=function(){n.env.readonly||n._event.bind(),n._tableUtils.fixTable(),n._tableUtils.initTableContainer(null),n._tableZone.clear()},n.off=function(){n._tableZone.clear(),n._event.unbind()},n.canCreateTable=function(){return n._tableUtils.canCreateTable(n._tableZone.getZone())},n.clearCellValue=function(){var e=n._tableZone.getZone();e.range&&(n.req.historyUtils.saveSnap(!1),n._tableUtils.clearCellValue(e.grid,e.range))},n.deleteCols=function(){var e=n._tableZone.getZone();if(e.range)if(0!==e.range.minX||e.range.maxX!==e.grid[0].length-1){n.req.historyUtils.saveSnap(!1);for(var t=e.range.maxX;t>=e.range.minX;t--)n._tableUtils.deleteCols(e.grid,t);n._tableZone.clear()}else n.deleteTable()},n.deleteRows=function(){var e=n._tableZone.getZone();if(e.range)if(0!==e.range.minY||e.range.maxY!==e.grid.length-1){n.req.historyUtils.saveSnap(!1);for(var t=e.range.maxY;t>=e.range.minY;t--)n._tableUtils.deleteRows(e.grid,t);n._tableZone.clear()}else n.deleteTable()},n.deleteTable=function(){var e=n._tableZone.getZone();if(e.table){n.req.historyUtils.saveSnap(!1);var t,r=e.table.parentNode;r&&r.removeChild(e.table),n._menuMethods.remove(),n._tableZone.remove(),(r=n.domUtils.getParentByFilter(r,(function(e){return n.domUtils.hasClass(e,d.CLASS.TABLE_CONTAINER)}),!0))&&(r.parentNode===n.env.body?(t=n.env.doc.createElement("div")).appendChild(n.env.doc.createElement("br")):t=n.env.doc.createElement("br"),n.domUtils.before(t,r),n.domUtils.remove(r),n.rangeUtils.setRange(t,0))}},n.distributeCols=function(){var e=n._tableZone.getZone();e.range&&(n.req.historyUtils.saveSnap(!1),n._tableUtils.distributeCols(e.table,e.grid),n._tableZone.updateGrid())},n.insertCol=function(e){var t=n._tableZone.getZone();t.range&&(n.req.historyUtils.saveSnap(!1),n._tableUtils.insertCol(t.grid,e?t.range.minX:t.range.maxX+1),n._tableZone.updateGrid())},n.insertRow=function(e){var t=n._tableZone.getZone();t.range&&(n.req.historyUtils.saveSnap(!1),n._tableUtils.insertRow(t.grid,e?t.range.minY:t.range.maxY+1),n._tableZone.updateGrid())},n.insertTable=function(e,t){n.req.historyUtils.saveSnap(!1);var r,o,i,a,l=n.rangeUtils.getRange();n.canCreateTable()&&(l&&(l.deleteContents(),o=n.rangeUtils.getRangeDetail(l.startContainer,l.startOffset),(o=n.domUtils.getBlockParent(o.container,!0))&&o!==n.env.body&&n.domUtils.isEmptyDom(o)&&n.domUtils.isTag(o,"div")&&(i=o,o.innerHTML="")),a=n._tableUtils.createTable(e,t),(i=i||n.env.doc.createElement("div")).appendChild(a),i.parentNode||(i=n.req.blockUtils.insertBlock(a)),n._tableUtils.initTableContainer(a),r=a.querySelector("td"),n._tableZone.setStart(r).setEnd(r),n.env.event.call(d.EVENT.UPDATE_TABLE_RENDER))},n.merge=function(){var e=n._tableZone.getZone();if(e.range){n.req.historyUtils.saveSnap(!1);var t=n._tableUtils.mergeCell(e.grid,e.range);t&&(n._tableZone.updateGrid(),n._tableZone.setStart(t).setEnd(t))}},n.modifySelectionBlock=function(e){var t=n.rangeUtils.getRange(),r=n._tableZone.getZone();return!(t&&!t.collapsed||!r.range)&&(n._tableUtils.modifySelectionBlock(r,e),!0)},n.modifySelectionDom=function(e,t){var r=n.rangeUtils.getRange(),o=n._tableZone.getZone();return!(r&&!r.collapsed||!o.range)&&(n._tableUtils.modifySelectionDom(o,e,t),!0)},n.onKeyDown=n._handler.onKeyDown,n.setCellAlign=function(e,t){var r=n._tableZone.getZone();r.range&&(n.req.historyUtils.saveSnap(!1),n._tableUtils.setCellAlign(r.grid,r.range,{align:e,valign:t}),n._tableZone.setStartRange())},n.setCellBg=function(e){var t=n._tableZone.getZone();t.range&&(n.req.historyUtils.saveSnap(!1),n._tableUtils.setCellBg(t.grid,t.range,e),n._tableZone.setStartRange())},n.split=function(){var e=n._tableZone.getZone(),t=n._tableUtils.splitCell(e.table,e.grid,e.range);t&&(n.req.historyUtils.saveSnap(!1),n._tableZone.updateGrid(),e=n._tableZone.getZone(),n._tableZone.setStart(e.grid[t.minY][t.minX].cell).setEnd(e.grid[t.maxY][t.maxX].cell))},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._tableMenu=e.require.tableMenuList,this._tableUtils=e.require.tableUtils,this._tableZone=e.require.tableZone}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(2),f="wiz-menu-align",h="wiz-menu-bg",p="wiz-menu-merge-cell",m="wiz-menu-distribute-cols",g="wiz-menu-rest",v="wiz-menu-delete-row",b="wiz-menu-delete-col",y="wiz-menu-delete-table",_="wiz-menu-splot-cell",S=["top","middle","bottom"],E=1,C=2,T="active",A="table-menu-click-item",O="hover-item",w=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._menuBtnDom=null,n._menuListDom=null,n._meunList=void 0,n._selectCells=[],n._isFrist=!1,n._zone=null,n._deleteZoneDom=null,n._showMenuFn=void 0,n._hideMenuFn=void 0,n._event={bind:function(){n._event.unbind(),null!==n._menuBtnDom&&(n._menuBtnDom.addEventListener("click",n._handler.onClick),n._menuListDom.addEventListener("click",n._handler.onClick),n.env.supportTouchEvent||(n._menuListDom.addEventListener("mouseover",n._handler.onMouseOver),n._menuListDom.addEventListener("mouseout",n._handler.onMouseOut)),n.env.event.add(d.EVENT.BEFORE_SAVESNAP,n._handler.onBeforeSaveSnap),n.env.event.add(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory))},unbind:function(){null!==n._menuBtnDom&&(n._menuBtnDom.removeEventListener("click",n._handler.onClick),n._menuListDom.removeEventListener("click",n._handler.onClick),n._menuListDom.removeEventListener("mouseover",n._handler.onMouseOver),n._menuListDom.removeEventListener("mouseout",n._handler.onMouseOut),n.env.event.remove(d.EVENT.BEFORE_SAVESNAP,n._handler.onBeforeSaveSnap),n.env.event.remove(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory))}},n._handler={onClick:function(e){var t=!1,r=n.domUtils.getParentByFilter(e.target,(function(e){return n.domUtils.hasClass(e,A)}),!0);if(null!==r){switch(r.getAttribute("data-type")){case d.TYPE.TABLE.SET_CELL_BG:var o=r.getAttribute("data-color");n._tableCore.setCellBg(o),sHideBtn=!0;break;case d.TYPE.TABLE.OPEN_MENU:n.switchMenu(),t=void 0;break;case d.TYPE.TABLE.SET_CELL_ALIGN:var i=null,a=null;"align"===r.getAttribute("data-align-type")?i=r.getAttribute("data-align-value"):a=r.getAttribute("data-align-value"),n._tableCore.setCellAlign(i,a),container=r.parentNode,n.domUtils.removeClass(container.querySelectorAll("."+T),T),n.domUtils.addClass(r,T);break;case d.TYPE.TABLE.DISTRIBUTE_COLS:n._tableCore.distributeCols();break;case d.TYPE.TABLE.MERGE_CELL:n._tableCore.merge();break;case d.TYPE.TABLE.CLEAR_CELL:n._tableCore.clearCellValue();break;case d.TYPE.TABLE.DELETE_ROW:n._tableCore.deleteRows(),t=!0;break;case d.TYPE.TABLE.DELETE_COL:n._tableCore.deleteCols(),t=!0;break;case d.TYPE.TABLE.DELETE_TABLE:n._tableCore.deleteTable(),t=!0;break;case d.TYPE.TABLE.SPLIT_CELL:n._tableCore.split();break;default:t=void 0}void 0!==t&&(t?n.hide():n.hideMenu())}},onMouseOver:function(e){var t=n.domUtils.getParentByFilter(e.target,(function(e){return n.domUtils.hasClass(e,O)}),!0);if(null!==t){var r=t.querySelector(".".concat(d.CLASS.TABLE_SUB_MENU));if(r){var o=n.domUtils.getParentByFilter(t,(function(e){return n.domUtils.hasClass(e,d.CLASS.TABLE_MAIN_MENU)}),!0);o.offsetLeft+o.offsetWidth+r.offsetWidth<n.env.doc.documentElement.clientWidth?n.domUtils.css(r,{transform:"translateX(100%)"}):n.domUtils.css(r,{transform:"translateX(0)"})}switch(t.getAttribute("data-type")){case d.TYPE.TABLE.SELECT_BG:var i=n._zone.end.cell.getAttribute("data-background-color"),a=t.querySelector(".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM,".").concat(T));a&&n.domUtils.removeClass(a,T),(a=t.querySelector(".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM,"[data-color").concat(i?'="'.concat(i,'"'):"","]")))&&n.domUtils.addClass(a,T);break;case d.TYPE.TABLE.DELETE_ROW:n.domUtils.css(n._deleteZoneDom,{display:"block",width:n._zone.table.offsetWidth+"px",height:n._zone.end.cell.offsetTop-n._zone.start.cell.offsetTop+n._zone.end.cell.offsetHeight+"px",top:n._zone.start.cell.offsetTop+"px",left:"0px"});break;case d.TYPE.TABLE.DELETE_COL:n.domUtils.css(n._deleteZoneDom,{display:"block",width:n._zone.end.cell.offsetLeft-n._zone.start.cell.offsetLeft+n._zone.end.cell.offsetWidth+"px",height:n._zone.table.offsetHeight+"px",top:"28px",left:n._zone.start.cell.offsetLeft+"px"})}}else n._deleteZoneDom.style.display="none"},onMouseOut:function(){n._deleteZoneDom.style.display="none"},onBeforeSaveSnap:function(){n.hideMenu()},onAfterRestoreHistory:function(){n.show()}},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._tableCore=e.require.tableCore,this._tableUtils=e.require.tableUtils,this._tableZone=e.require.tableZone,this._initMeunList()}},{key:"_initMeunList",value:function(){var e=this._zone?this._zone.end.cell.getAttribute("data-background-color"):"";this._meunList=[{id:h,name:this.lang.Table.SetCellBg,isHover:!0,type:d.TYPE.TABLE.SELECT_BG,subMenu:{type:C,render:function(){for(var t=[["","#ffdbdb","#ffecc6"],["#fff0b3","#cef2df","#b3f5ff"],["#d1e6ff","#e9dfff","#e6e9ed"]],n='<div class="'.concat(d.CLASS.TOOL_TIP," ").concat(d.CLASS.FLOAT_LAYER," ").concat(d.CLASS.TABLE_SUB_MENU," ").concat(d.CLASS.TABLE_COLOR_PAD,'">'),r=0;r<t.length;r++){n+='<div class="'.concat(d.CLASS.TABLE_COLOR_PAD_ROW,'">');for(var o=0;o<t[r].length;o++)n+='<div class="'+d.CLASS.TABLE_COLOR_PAD_ITEM+" "+A+(e===t[r][o]?" ".concat(T):"")+'" data-color="'+t[r][o]+'" data-type="'+d.TYPE.TABLE.SET_CELL_BG+'">',n+='<div class="icon-border"></div>',n+=0===r&&0===o?'<i class="pad-demo editor-icon icon-oblique_line"></i>':'<div class="color-block-icon" style="background-color: '.concat(t[r][o],' !important;"></div>'),n+="</div>";n+="</div>"}return n+="</div>"}}},{id:f,name:this.lang.Table.CellAlign,isHover:!0,subMenu:{type:E,list:[{type:d.TYPE.TABLE.SET_CELL_ALIGN,icon:"icon-valign_top",name:this.lang.Table.AlignTop,attr:{"data-align-type":"valign","data-align-value":S[0]}},{type:d.TYPE.TABLE.SET_CELL_ALIGN,icon:"icon-valign_middle",name:this.lang.Table.AlignMiddle,attr:{"data-align-type":"valign","data-align-value":S[1]}},{type:d.TYPE.TABLE.SET_CELL_ALIGN,icon:"icon-valign_bottom",name:this.lang.Table.AlignBottom,attr:{"data-align-type":"valign","data-align-value":S[2]}}]}},{id:m,type:d.TYPE.TABLE.DISTRIBUTE_COLS,name:this.lang.Table.DistributeCols},{id:p,type:d.TYPE.TABLE.MERGE_CELL,name:this.lang.Table.MergeCell,isSplit:!0},{id:_,type:d.TYPE.TABLE.SPLIT_CELL,name:this.lang.Table.SplitCell,isSplit:!0},{id:g,type:d.TYPE.TABLE.CLEAR_CELL,name:this.lang.Table.ClearCell},{id:v,type:d.TYPE.TABLE.DELETE_ROW,isHover:!0,name:this.lang.Table.DeleteRow},{id:b,type:d.TYPE.TABLE.DELETE_COL,isHover:!0,name:this.lang.Table.DeleteCol},{id:y,type:d.TYPE.TABLE.DELETE_TABLE,name:this.lang.Table.DeleteTable}]}},{key:"_createdMenuBtn",value:function(){var e=this.env.doc.createElement(d.TAG.TMP_TAG);return this.domUtils.addClass(e,d.CLASS.TABLE_TOOLS),e.innerHTML='<button type="button" class="icon-down_arrow_small editor-icon '.concat(d.CLASS.TABLE_MENU_BUTTON," ").concat(A,'" data-type="').concat(d.TYPE.TABLE.OPEN_MENU,'"></button>'),null===this._menuListDom&&this._createdMenuList(),e}},{key:"_createdDeleteZone",value:function(){var e=this.env.doc.createElement(d.TAG.TMP_TAG);return this.domUtils.addClass(e,d.CLASS.TABLE_DELETE_ZONE),e}},{key:"_createdMenuList",value:function(){var e=this,t=this.req.tooltip.create();this._menuListDom=t.container,this._showMenuFn=function(n){return t.show(n,d.TYPE.LAYOUT.BOTTOM_START,{x:!0,y:!1},e._zone.table.parentNode)},this._hideMenuFn=t.hide,this.domUtils.addClass(this._menuListDom,d.CLASS.TOOL_TIP),this.domUtils.addClass(this._menuListDom,d.CLASS.FLOAT_LAYER),this.domUtils.addClass(this._menuListDom,d.CLASS.TABLE_MAIN_MENU),this._menuListDom.innerHTML="".concat(this._meunList.reduce((function(t,n){return t+'<li class="'.concat(d.CLASS.TOOL_TIP_ITEM," ").concat(A).concat(n.isSplit?" split":"").concat(n.subMenu?" has-sub-menu":"").concat(n.isHover?" ".concat(O):"",'" id="').concat(n.id,'" data-type="').concat(n.type,'"><span>').concat(n.name,"</span>").concat(n.subMenu?'<i class="icon-down_arrow_small editor-icon list-icon"></i>':"").concat(n.subMenu?e._createdSubMenu(n.subMenu):"","</li>")}),"<ul>"),"</ul>")}},{key:"showMenu",value:function(){if(null!==this._menuBtnDom){null===this._menuListDom&&(this._menuListDom=this.env.doc.querySelector(".".concat(d.CLASS.TABLE_MAIN_MENU)));var e=this._tableUtils.canMerge(this._zone.grid,this._zone.range),t=this._menuListDom.querySelector("[data-type="+d.TYPE.TABLE.MERGE_CELL+"]"),n=this._menuListDom.querySelector("[data-type="+d.TYPE.TABLE.DISTRIBUTE_COLS+"]"),r=this._tableUtils.canSplit(this._zone.grid,this._zone.range),o=this._menuListDom.querySelector("[data-type="+d.TYPE.TABLE.SPLIT_CELL+"]");t&&this.domUtils.css(t,{display:e?"block":"none"}),this.domUtils.css(n,{display:this._zone.range.maxX!==this._zone.range.minX?"block":"none"}),o&&this.domUtils.css(o,{display:r?"block":"none"}),this._showMenuFn&&this._showMenuFn(this._menuBtnDom)}}},{key:"hideMenu",value:function(){null!==this._menuBtnDom&&(null===this._menuListDom&&(this._menuListDom=this.env.doc.querySelector(".".concat(d.CLASS.TABLE_MAIN_MENU))),this._hideMenuFn&&this._hideMenuFn())}},{key:"switchMenu",value:function(){null!==this._menuBtnDom&&(null===this._menuListDom&&(this._menuListDom=this.env.doc.querySelector(".".concat(d.CLASS.TABLE_MAIN_MENU))),"block"!==this._menuListDom.style.display?this.showMenu():this.hideMenu())}},{key:"_createdSubMenu",value:function(e){if(e.render)return e.render();if(e.list&&e.list.length){var t='<div class="'.concat(d.CLASS.TOOL_TIP," ").concat(d.CLASS.FLOAT_LAYER," ").concat(d.CLASS.TABLE_SUB_MENU,'">');return t+="<ul>".concat(e.list.reduce((function(e,t){return e+'<li class="'.concat(d.CLASS.TOOL_TIP_ITEM," ").concat(A,'" data-type="').concat(t.type,'"').concat(t.attr?Object.keys(t.attr).reduce((function(e,n){return"".concat(e," ").concat(n,'="').concat(t.attr[n],'"')}),""):"",'><i class="').concat(t.icon,' editor-icon list-icon position-icon"></i><span>').concat(t.name,"</span></li>")}),""),"</ul>"),"".concat(t,"</div>")}}},{key:"_getPositionObj",value:function(e,t){var n=this.domUtils.getRelativePosition(e,t);return{top:n.y+10+"px",left:n.x+e.offsetWidth-7+"px"}}},{key:"show",value:function(){var e=this;if(!this.env.supportTouchEvent&&(this._zone=this._tableZone.getZone(),this._selectCells=this._tableZone.getSelectedCells(),this.hide(),this._zone.grid&&this._zone.range&&0!==this._selectCells.length)){var t=this.domUtils.getParentByFilter(this._zone.table,(function(t){return e.domUtils.hasClass(t,d.CLASS.TABLE_BODY)}),!1);this._menuBtnDom=t.querySelector(".".concat(d.CLASS.TABLE_TOOLS)),null===this._menuBtnDom&&(this._menuBtnDom=this._createdMenuBtn(),this.domUtils.setContenteditable(this._menuBtnDom,!1),t.appendChild(this._menuBtnDom),this._event.bind()),this._deleteZoneDom=t.querySelector("."+d.CLASS.TABLE_DELETE_ZONE),this._deleteZoneDom||(this._deleteZoneDom=this._createdDeleteZone(),t.appendChild(this._deleteZoneDom)),this.domUtils.css(this._menuBtnDom,this._getPositionObj(this._selectCells[this._isFrist?0:this._selectCells.length-1],t)),this.domUtils.css(this._menuBtnDom,{display:"block"})}}},{key:"hide",value:function(){null!==this._menuBtnDom&&(this.hideMenu(),this.domUtils.css(this._menuBtnDom,{display:"none"}),this.domUtils.css(this._deleteZoneDom,{display:"none"}))}},{key:"remove",value:function(){null!==this._menuBtnDom&&(this._event.unbind(),this.domUtils.remove(this._menuBtnDom),this.domUtils.remove(this._deleteZoneDom),this.domUtils.remove(this._menuListDom),this._menuBtnDom=null,this._menuListDom=null,this._deleteZoneDom=null)}},{key:"setMenuPos",value:function(e){this._isFrist="frist"===e}}])&&i(n.prototype,r),u&&i(n,u),t}(u);e.exports=w},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i)))).canCreateTable=function(e){var t=n.rangeUtils.getRange();if(t){if(n.domUtils.getParentByTagName(t.startContainer,["table"],!0,null)||n.domUtils.getParentByTagName(t.endContainer,["table"],!0,null))return!1;if(n.domUtils.getParentByClass(t.startContainer,d.CLASS.CODE_CONTAINER,!0))return!1}return!e.range},n.canMerge=function(e,t){return e&&t&&e[t.minY][t.minX].cell!==e[t.maxY][t.maxX].cell},n.canSplit=function(e,t){if(!e||!t)return!1;var r={},o=!1;return n.eachRange(e,t,(function(t){var n=t.x_src+"_"+t.y_src;t.fake&&!r[n]&&(r[n]=e[t.y_src][t.x_src],o=!0)})),!!o&&r},n.checkCaretInTableContainer=function(e){var t,r,o,i,a,l=/^(mouse|touch)/i,s={tableContainer:null,tableMenu:!1,before:!1,after:!1};if(e&&l.test(e.type))o=e.target;else{if(!(t=n.rangeUtils.getRange())||!t.collapsed)return s;o=(a=n.rangeUtils.getRangeDetail(t.startContainer,t.startOffset)).container,i=a.offset}return n.domUtils.isTag(o,"table")&&n.initTableContainer(o),n.isMenu(o)?(s.tableContainer=n.getContainerExcludeTable(o),s.tableMenu=!0,s):((r=n.getContainerExcludeTable(o))&&(s.tableContainer=r,e&&l.test(e.type)||(i>0?s.after=!0:s.before=!0)),s)},n.clearCellValue=function(e,t){e&&t&&n.eachRange(e,t,(function(e){e.fake||(e.cell.innerHTML="<br/>")}))},n.cloneCell=function(e,t){var r=n.env.doc.createElement(e.tagName);return r.style.cssText=e.style.cssText,t?r.innerHTML="<br/>":(r.colSpan=e.colSpan,r.rowSpan=e.rowSpan,r.innerHTML=e.innerHTML),r},n.createCell=function(e){var t=n.env.doc.createElement("td"),r={align:"left",valign:"middle"};return e&&(r.style="width:"+e+"px"),n.domUtils.attr(t,r),t.appendChild(n.env.doc.createElement("br")),t},n.createTable=function(e,t){if(e&&t){for(var r=n.env.doc.createElement("table"),o=n.env.doc.createElement("tbody"),i=0;i<t;i++){for(var a=n.env.doc.createElement("tr"),l=0;l<e;l++)a.appendChild(n.createCell(n.env.options.table.colWidth));o.appendChild(a)}return r.style.width="".concat(n.env.options.table.colWidth*e+1,"px"),r.appendChild(o),r}},n.deleteCols=function(e,t){if(e&&0!==e.length&&!(t>e[0].length)){for(var r=n.domUtils.getParentByTagName(e[0][0].cell,"table",!1,null),o=[],i=n.env.options.table.colWidth,a=0;a<e.length;a++){var l=e[a][t];l.y_src===a&&l.cell.colSpan>1?(l.cell.colSpan--,o.push(l.cell)):l.y_src===a&&(i=n.getCellWidth(l.cell),l.cell.parentElement.removeChild(l.cell)),e[a].splice(t,1)}for(var s=0;s<o.length;s++){var c=o[s];c.style.width=n.getCellWidth(c)-i+"px"}r.getElementsByTagName("td").length||r.getElementsByTagName("th").length?n.fixTableWidth(r):r.parentElement.removeChild(r)}},n.deleteRows=function(e,t){if(e&&0!==e.length&&!(t>e.length)){for(var r=n.domUtils.getParentByTagName(e[0][0].cell,"table",!1,null),o=r.rows,i=e[t].length-1;i>=0;i--){var a=e[t][i];if(a.x_src===i&&a.y_src<a.y)a.cell.rowSpan--;else if(a.x_src===i&&a.y_src===a.y&&a.cell.rowSpan>1&&t+1<e.length){a.cell.rowSpan--;var l=n.getNextCellDataInRow(e[t+1],i);l=l?l.cell:null,o[t+1].insertBefore(a.cell,l)}}e.splice(t,1),o[t].parentElement.removeChild(o[t]),r.getElementsByTagName("tr").length?n.fixTableWidth(r):r.parentElement.removeChild(r)}},n.distributeCols=function(e,t){if(e&&t){var n=t[0].length;if(0!==n){for(var r=e.rows,o=e.offsetWidth/n,i=r.length-1;i>=0;i--)for(var a=r[i].cells.length-1;a>=0;a--){var l=r[i].cells[a];l.style.width=o*l.colSpan+"px"}e.style.width=e.offsetWidth+"px"}}},n.eachRange=function(e,t,n){if(e&&t&&n&&"function"==typeof n)for(var r=!0,o=t.minY;!1!==r&&o<e.length&&o<=t.maxY;o++)for(var i=t.minX;!1!==r&&i<e[o].length&&i<=t.maxX;i++)r=n(e[o][i])},n.fixColTimer=-1,n.fixColWidth=function(e,t,r,o,i){i>=0||(n.fixColTimer&&clearTimeout(n.fixColTimer),n.fixColTimer=setTimeout((function(){var a=i;e.style.width=t+"px";for(var l=0,s=r.length;l<s;l++){var c=r[l],u=c.cell.offsetWidth-o[n.getKeyForColWidth(c)]+i;a=0===l?u:Math.max(a,u)}if(a>i){e.style.width=t-i+a+"px";for(var f=0,h=r.length;f<h;f++){var p=r[f];p.cell.style.width=o[n.getKeyForColWidth(p)]-i+a+"px"}n.env.event.call(d.EVENT.UPDATE_TABLE_RENDER)}}),0))},n.fixSelection=function(){var e=n.rangeUtils.getRange();if(e&&!e.collapsed){var t=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,a=n.getContainer(t),l=n.getContainer(o);if(!(!a&&!l||a&&l)){for(var s,c=a||l;s=n.getContainer(c);)c=a?n.domUtils.getNextNode(s,!1,o):n.domUtils.getPreviousNode(s,!1,t);a?(t=c||o,r=0):(o=c||t,i=n.domUtils.getEndOffset(o)),a?n.rangeUtils.setRange(o,i,t,r):n.rangeUtils.setRange(t,r,o,i)}}},n.fixTable=function(){for(var e=function(e){if(e){var t=n.getContainer(e);t||(t=n.domUtils.getParentByTagName(e,["table"])),n.domUtils.splitDomSingle(t,e);for(var r=n.domUtils.getParentByTagName(e,["table"]),o=e.parentNode.children,i=0;i<o.length;i++){var a=o[i].children,l=n.env.doc.createElement("div");n.domUtils.before(l,r);for(var s=0;s<a.length;s++){for(var c=a[s];c.firstChild;)l.appendChild(c.firstChild);var u=n.env.doc.createElement("span");u.innerText="    ",l.appendChild(u)}}var f=n.getContainer(r),h=n.getTableBody(r);n.domUtils.removeClass(f,d.CLASS.TABLE_CONTAINER),n.domUtils.removeClass(h,d.CLASS.TABLE_BODY),n.domUtils.attr(f,{contenteditable:null}),n.domUtils.attr(h,{contenteditable:null}),n.domUtils.remove(r)}},t=n.env.body.querySelectorAll("."+d.CLASS.WIZ_BODY+" table table"),r=t.length-1;r>=0;r--){var o=t[r];n.domUtils.isInWizTmp(o)||e(n.domUtils.getParentByTagName(o,["tr"],!1))}},n.fixTableWidth=function(e){if(e){for(var t=e.rows,r=0,o=0;o<t[0].cells.length;o++){var i=t[0].cells[o];r+=n.getCellWidth(i,!0)}e.style.width=r+1+"px"}},n.getAlign=function(e,t){if(!e||!t)return!1;var r,o,i,a={align:"",valign:""};return n.eachRange(e,t,(function(e){return i=e.cell,e.fake||(r=i.align.toLowerCase(),o=i.vAlign.toLowerCase()),""===a.align&&(a.align=r,a.valign=o),null!==a.align&&(a.align=a.align===r?r:null),null!==a.valign&&(a.valign=a.valign===o?o:null),null!==a.align||null!==a.valign})),a},n.getCellWidth=function(e,t){var n=parseInt(e.style.width,10);return(isNaN(n)||t)&&(n=parseInt(e.offsetWidth,10)),n},n.getCellData=function(e,t){if(!e||!t)return null;for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++){var o=e[n][r];if(o.cell===t)return o}return null},n.getCellsByRange=function(e,t){var r=[];return e&&t?(n.eachRange(e,t,(function(e){e.fake||r.push(e.cell)})),r):r},n.getContainer=function(e){var t=n.domUtils.getParentByClass(e,d.CLASS.TABLE_CONTAINER,!0);return t&&n.domUtils.isInWizTmp(t)&&(t=null),t},n.getTableBody=function(e){return n.domUtils.getParentByFilter(e,(function(e){return n.domUtils.hasClass(e,d.CLASS.TABLE_BODY)}),!0)},n.getContainerExcludeTable=function(e){return n.domUtils.getParentByTagName(e,["th","td"],!0,null)?null:n.getContainer(e)},n.getDomsByCellList=function(e){var t=[];if(!e)return t;for(var r=0,o=e.length;r<o;r++){var i=e[r],a=n.domUtils.getListA2B({startDom:i.firstChild,startOffset:0,endDom:i.lastChild,endOffset:1,noSplit:!0});t=t.concat(a.list)}return t},n.getKeyForColWidth=function(e){return e.x_src+"_"+e.y_src},n.getNextCellInTable=function(e){var t=e.nextElementSibling;if(t)return t;for(var n=e.parentNode.nextElementSibling;n;){if(n.cells.length>0)return n.cells[0];n=n.nextElementSibling}return null},n.getNextCellDataInRow=function(e,t){if(!e)return null;for(var n=t;n<e.length;n++)if(!e[n].fake)return e[n];return null},n.getMousePosition=function(e,t){var r=u.getEventClientPos(e),o=n.getTableBody(t||e.target),i=n.domUtils.getPageScroll();return{x:r.x+i.left+(o?o.scrollLeft:0),y:r.y+i.top+(o?o.scrollTop:0)}},n.getRangeByCellData=function(e){return e?{minX:e.x_src,minY:e.y_src,maxX:e.x_src+e.cell.colSpan-1,maxY:e.y_src+e.cell.rowSpan-1}:{minX:0,minY:0,maxX:0,maxY:0}},n.getRangeByCellsData=function(e,t,r){if(!e||!t||!r)return null;var o=n.getRangeByCellData(t);if(t.cell===r.cell)return o;for(var i=n.getRangeByCellData(r),a=Math.min(o.minX,i.minX),l=Math.min(o.minY,i.minY),s=Math.max(o.maxX,i.maxX),c=Math.max(o.maxY,i.maxY),d={},u=!0;u;){u=!1;for(var f=a,h=l,p=s,m=c,g=l;g<=c;g++){for(var v=a;v<=s;v++)if(g>l&&g<c&&v<s-1)v=s-1;else{var b=e[g][v];if(!d[b.x_src+"_"+b.y_src]){var y=n.getRangeByCellData(b);if(a=Math.min(a,y.minX),l=Math.min(l,y.minY),s=Math.max(s,y.maxX),c=Math.max(c,y.maxY),a!==f||l!==h||s!==p||c!==m){u=!0;break}}}if(u)break}}return{minX:a,minY:l,maxX:s,maxY:c}},n.getTableGrid=function(e){if(!e||!n.domUtils.isTag(e,"table"))return null;for(var t,r,o,i=function(e,t){for(;a[t][e];)e++;return e},a=[],l=e.rows,s=0;s<l.length;s++){var c=l[s].cells;a[s]||(a[s]=[]);for(var d=0;d<c.length;d++){var u=c[d],f=u.colSpan,h=u.rowSpan;u.firstChild||(u.innerHTML="<br>"),o=i(d,s);for(var p=0;p<h;p++){a[s+p]||(a[s+p]=[]);for(var m=0;m<f;m++){var g=s+p,v=i(o+m,g);0===p&&0===m&&(t=v,r=g),a[g][v]={cell:u,x:v,y:g,x_src:t,y_src:r,fake:p>0||m>0}}}}}return a},n.getTemplateByHtmlForPaste=function(e){var t,r,o=!1,i=n.env.doc.createElement("div");if(i.innerHTML=e,n.domUtils.childNodesFilter(i),1===(t=i.querySelectorAll("table")).length){var a=t[0];n.domUtils.remove(a),n.domUtils.isEmptyDom(i)?(o=!0,r=a):i.innerHTML=e}if(!o){for(var l=(t=i.querySelectorAll("table")).length-1;l>=0;l--){var s=t[l];n.domUtils.before(n.env.doc.createTextNode(s.innerText),s),n.domUtils.remove(s)}for(var c=i.childNodes.length-1;c>=0;c--){var d=i.childNodes[c];1!==d.nodeType&&3!==d.nodeType&&n.domUtils.isEmptyDom(d)&&i.removeChild(d)}r=i}return{isTable:o,pasteDom:r}},n.getTemplateByTxtForPaste=function(e){var t=(e=(e||"").trim()).split(/\r?\n/),r=n.env.doc.createElement("table"),o=n.env.doc.createElement("tbody"),i=0;r.appendChild(o);for(var a=0;a<t.length;a++){for(var l=t[a].split("\t"),s=n.env.doc.createElement("tr"),c=0;c<l.length;c++){var d=n.createCell();l[c]&&(d.innerHTML="",d.appendChild(n.env.doc.createTextNode(l[c]))),s.appendChild(d)}i=Math.max(i,s.cells.length),o.appendChild(s)}t=r.rows;for(var u=0;u<t.length;u++)for(var f=t[u],h=f.cells.length;h<i;h++)f.appendChild(n.createCell());return{isTable:!0,pasteDom:r}},n.initTable=function(e){for(var t=e.rows.length-1;t>=0;t--)for(var n=e.rows[t].cells.length-1;n>=0;n--){var r=e.rows[t].cells[n];r.style.width=r.offsetWidth+"px"}e.style.width=e.offsetWidth+"px"},n.initTableContainer=function(e){for(var t=e?[e]:n.env.body.querySelectorAll("."+d.CLASS.WIZ_BODY+" table"),r=function(e,t){var r=e.parentNode;if(t(r)){if(n.domUtils.isTag(r,"blockquote")){var o=r;r=n.env.doc.createElement("div"),n.domUtils.before(r,o),r.appendChild(e),n.domUtils.remove(o)}}else r=n.env.doc.createElement("div"),n.domUtils.before(r,e),r.appendChild(e);return r},o=0,i=t.length;o<i;o++){var a=t[o];if(!n.domUtils.isInWizTmp(a)){var l=r(a,(function(e){return e!==n.env.body&&!n.domUtils.hasClass(e,d.CLASS.TEMPLATE_EDITABLE)&&(1===e.childNodes.length?(n.domUtils.addClass(e,d.CLASS.TABLE_BODY),!0):n.domUtils.hasClass(e,d.CLASS.TABLE_BODY))})),s=r(l,(function(e){return!(e===n.env.body||!n.domUtils.isTag(e,"div")||n.domUtils.hasClass(e,d.CLASS.TEMPLATE_EDITABLE))&&(1===e.childNodes.length?(n.domUtils.addClass(e,d.CLASS.TABLE_CONTAINER),!0):n.domUtils.hasClass(e,d.CLASS.TABLE_CONTAINER))}));n.domUtils.addClass(s,d.CLASS.TABLE_CONTAINER),n.domUtils.css(s,{position:"relative",padding:"0px"}),n.domUtils.addClass(l,d.CLASS.TABLE_BODY),n.domUtils.removeClass(l,d.CLASS.TABLE_MOVING),n.domUtils.setContenteditable(s,!1),n.domUtils.setContenteditable(l,!n.env.readonly)}}},n.insertCol=function(e,t){if(e){var r,o,i,a;t=t||0;var l=n.domUtils.getParentByTagName(e[0][0].cell,"table",!1,null),s=l.rows,c=null;l&&l.style.width&&(l.style.width=parseInt(l.style.width,10)+n.env.options.table.colWidth+"px");for(var d=0;d<e.length;d++){e[d].length>t?o=(r=e[d][t]).cell:(r=null,o=null),o&&o!==c&&r.x_src<t?(r.cell.colSpan++,r.cell.style.width=n.getCellWidth(r.cell)+n.env.options.table.colWidth+"px"):(!o||o&&r.x_src===t)&&(i=n.createCell(n.env.options.table.colWidth),o&&r.y_src<r.y?(a=n.getNextCellDataInRow(e[d],t),s[d].insertBefore(i,a?a.cell:null)):s[d].insertBefore(i,o)),c=r?r.cell:null}n.fixTableWidth(l)}},n.insertRow=function(e,t){if(e){var r;t=t||0;for(var o=n.env.doc.createElement("tr"),i=e.length>t?t:e.length-1,a=e[i],l=0;l<a.length;l++){var s=a[l];e.length>t&&s.y_src<s.y&&s.x_src===s.x?s.cell.rowSpan++:(e.length<=t||s.y_src===s.y)&&(r=n.cloneCell(s.cell,!0),s.cell.colSpan>1&&(r.style.width=s.cell.offsetWidth/s.cell.colSpan+"px"),o.appendChild(r))}var c=n.domUtils.getParentByTagName(e[0][0].cell,"table",!1,null).rows[i],d=c.parentElement;e.length<=t&&(c=null),d.insertBefore(o,c)}},n.isMenu=function(e){return!!e&&!!n.domUtils.getParentByFilter(e,(function(e){return n.domUtils.hasClass(e,d.CLASS.TABLE_TOOLS)||n.domUtils.hasClass(e,d.CLASS.TOOL_TIP)}),!0)},n.mergeCell=function(e,t){if(!n.canMerge(e,t))return null;var r=t.maxY-t.minY+1,o=t.maxX-t.minX+1,i=e[t.minY][t.minX].cell,a=n.env.doc.createElement("div");for(n.eachRange(e,t,(function(e){if(!e.fake&&e.cell!==i){if(!n.domUtils.isEmptyDom(e.cell))for(a.lastChild&&a.appendChild(n.env.doc.createElement("br"));e.cell.firstChild;)a.appendChild(e.cell.firstChild);n.domUtils.remove(e.cell)}}));a.firstChild;)i.appendChild(a.firstChild);return i.rowSpan=r,i.colSpan=o,i.style.width=i.offsetWidth+"px",i},n.modifySelectionBlock=function(e,t){n.eachRange(e.grid,e.range,(function(e){e.fake||n.domUtils.modifyBlockStyle(e.cell,t)})),n.env.event.call(d.EVENT.UPDATE_TABLE_RENDER)},n.modifySelectionDom=function(e,t,r){var o=t["text-align"]||null,i=t["text-valign"]||null;delete t["text-align"],delete t["text-valign"],n.eachRange(e.grid,e.range,(function(e){if(!e.fake){var o=[];e.cell.childNodes.length>0&&(o.push(e.cell),n.domUtils.modifyNodesStyleAndClear(n.getDomsByCellList(o),t,r,[]))}})),(o||i)&&n.setCellAlign(e.grid,e.range,{align:o,valign:i}),n.env.event.call(d.EVENT.UPDATE_TABLE_RENDER)},n.moveOutFromTableContainer=function(e){if(e){var t=function(e,t){if(e&&t){for(var r=e===t,o=t.childNodes,i=e,a=o.length-1;a>=0;a--){var l=o[a],s=!1,c=!1;1!==l.nodeType||!(r&&n.domUtils.hasClass(l,d.CLASS.TABLE_BODY)||!r&&n.domUtils.isTag(l,["table",d.TAG.TMP_TAG]))||c?n.domUtils.hasClass(l,d.CLASS.TABLE_TOOLS)||n.domUtils.hasClass(l,d.CLASS.TABLE_DELETE_ZONE)||n.domUtils.hasClass(l,d.CLASS.TABLE_BAR)||(n.domUtils.before(l,i,!s),s&&(i=l)):(n.domUtils.hasClass(l,d.CLASS.TABLE_BODY)||n.domUtils.isTag(l,"table"))&&(s=!0,c=!0)}0===t.childNodes.length&&n.domUtils.remove(e)}};t(e,e),t(e,e.querySelector("."+d.CLASS.TABLE_BODY))}},n.setCellAlign=function(e,t,r){if(e&&t){var o={};null!=r.align&&(o.align=r.align||"left"),null!=r.valign&&(o.valign=r.valign||"middle"),n.eachRange(e,t,(function(e){e.fake||(o.align&&n.domUtils.css(e.cell,{textAlign:""}),o.valign&&n.domUtils.css(e.cell,{textValign:""}),n.domUtils.attr(e.cell,o))}))}},n.setCellBg=function(e,t,r){e&&t&&("transparent"===(r=r||"").toLowerCase()&&(r=""),n.eachRange(e,t,(function(e){e.fake||(n.domUtils.css(e.cell,{backgroundColor:r}),e.cell.setAttribute("data-background-color",r))})))},n.setColWidth=function(e,t,r,o){o=function(){for(var e=o,i=0;i<t.length;i++){var a=t[i][r],l=n.env.options.table.colWidthMin-a.cell.offsetWidth;if(1===a.cell.colSpan){e=l,a.cell;break}e<l&&(e=l,a.cell)}return o<e?e:o}();for(var i=e.offsetWidth+o,a=[],l={},s=0,c=t.length;s<c;s++){var d=t[s][r],u=n.getKeyForColWidth(d);l[u]||(l[u]=d.cell.offsetWidth+o,a.push(d))}e.style.width=i+"px";for(var f=0,h=a.length;f<h;f++){var p=a[f];p.cell.style.width=l[n.getKeyForColWidth(p)]+"px"}n.fixColWidth(e,i,a,l,o)},n.setRowHeight=function(e,t,r,o){for(var i,a,l=o,s=0;s<t[r].length;s++){i=t[r][s];var c=n.env.options.table.rowHeightMin-i.cell.offsetHeight;if(1===i.cell.rowSpan){l=c,a=i.cell;break}l<c&&(l=c,a=i.cell)}a&&(a.parentNode.style.height=o<l?n.env.options.table.rowHeightMin+"px":i.cell.offsetHeight+o+"px")},n.splitCell=function(e,t,r){var o=n.canSplit(t,r);if(!o)return null;for(var i in o)if(o.hasOwnProperty(i))for(var a=o[i],l=a.cell.rowSpan,s=a.cell.colSpan,c=a.y_src;c<a.y_src+l;c++)for(var d=a.x_src;d<a.x_src+s;d++){var u=t[c][d];if(u.fake){var f=n.getNextCellDataInRow(t[c],d);f=f?f.cell:null;var h=n.cloneCell(u.cell,!0);e.rows[c].insertBefore(h,f),u.fake=!1,u.cell=h,u.y_src=c,u.x_src=d}else u.cell.rowSpan=1,u.cell.colSpan=1;u.cell.style.width=""}return r},n.isBar=function(e){return!!n.domUtils.getParentByFilter(e,(function(e){return n.domUtils.hasClass(e,d.CLASS.TABLE_COL_BAR)||n.domUtils.hasClass(e,d.CLASS.TABLE_BAR)}),!0)},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(n(2));e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(1),f=n(3),h=n(2),p="row",m="col",g="all",v="click-item",b="move-item",y=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=a(this,(e=c(t)).call.apply(e,[this].concat(i))))._zone={active:!1,table:null,start:null,end:null,range:null,grid:null},n._updateRenderTimer=null,n._domModifiedTimer=null,n._locationBarDom={container:null,row:null,col:null,all:null,addBtn:null,line:null},n._unBorder=!1,n._moveType="",n._moveInitIndex=void 0,n._moveIndex=void 0,n._clearSelectedCell=function(){if(n._zone.table)for(var e=n._zone.table.getElementsByClassName(u.CLASS.SELECTED_CELL),t=e.length-1;t>=0;t--)n.domUtils.removeClass(e[t],[u.CLASS.SELECTED_CELL,u.CLASS.SELECTED_CELL_MULTI])},n._colLineRender=function(e){if(n._zone.table){var t=n._getRangeBorder(),r=t.colLine.minLeft;e<r&&(e=r),n.domUtils.css(t.colLine,{top:n._zone.table.offsetTop+"px",left:e+"px",height:n._zone.table.offsetHeight+"px",display:"block"}),t.container.style.display="block"}},n._getCellsDataByRange=function(e,t){if(!n._zone.grid||!n._zone.range)return null;var r=[];return n._tableUtils.eachRange(n._zone.grid,n._zone.range,(function(n){n.fake&&n.x!==e&&n.y!==t||r.push(n)})),r},n._getDomById=function(e,t,r){var o=e.querySelector("#"+t);return o||((o=n.env.doc.createElement(r)).id=t,e.appendChild(o)),o},n._getDomByClass=function(e,t,r){var o=e.querySelector("."+t);return o||(o=n.env.doc.createElement(r),n.domUtils.addClass(o,t),e.appendChild(o)),o},n._getRangeBorder=function(){var e={container:null,rowLine:null,colLine:null,start:{dom:null,top:null,right:null,bottom:null,left:null,dot:null},range:{dom:null,top:null,right:null,bottom:null,left:null,dot:null}};return e.container=n._getDomById(n.env.body,u.ID.TABLE_RANGE_BORDER,u.TAG.TMP_TAG),n.env.supportTouchEvent||n._createdLocationBar(),n.domUtils.setContenteditable(e.container,!1),e.colLine=n._getDomById(e.container,u.ID.TABLE_COL_LINE,"div"),e.rowLine=n._getDomById(e.container,u.ID.TABLE_ROW_LINE,"div"),e.start.dom=n._getDomById(e.container,u.ID.TABLE_RANGE_BORDER+"_start","div"),e.start.top=n._getDomById(e.start.dom,u.ID.TABLE_RANGE_BORDER+"_start_top","div"),e.start.right=n._getDomById(e.start.dom,u.ID.TABLE_RANGE_BORDER+"_start_right","div"),e.start.bottom=n._getDomById(e.start.dom,u.ID.TABLE_RANGE_BORDER+"_start_bottom","div"),e.start.left=n._getDomById(e.start.dom,u.ID.TABLE_RANGE_BORDER+"_start_left","div"),e.start.dot=n._getDomById(e.start.dom,u.ID.TABLE_RANGE_BORDER+"_start_dot","div"),e.range.dom=n._getDomById(e.container,u.ID.TABLE_RANGE_BORDER+"_range","div"),e.range.top=n._getDomById(e.range.dom,u.ID.TABLE_RANGE_BORDER+"_range_top","div"),e.range.right=n._getDomById(e.range.dom,u.ID.TABLE_RANGE_BORDER+"_range_right","div"),e.range.bottom=n._getDomById(e.range.dom,u.ID.TABLE_RANGE_BORDER+"_range_bottom","div"),e.range.left=n._getDomById(e.range.dom,u.ID.TABLE_RANGE_BORDER+"_range_left","div"),e.range.dot=n._getDomById(e.range.dom,u.ID.TABLE_RANGE_BORDER+"_range_dot","div"),e},n._initTableBtnAndMenu=function(){n._hideAddTool(),n._tableMenu.show()},n._initTableContainer=function(e){n._tableUtils.initTableContainer(n._zone.table),n._zone.table.parentNode.appendChild(e.container)},n._initZone=function(e){n._zone.table=e,n._zone.grid=n._tableUtils.getTableGrid(n._zone.table)},n._isStartFocus=function(){var e,t,r,o=n.rangeUtils.getRange();return o?(n._zone.grid&&n._zone.start&&(e=n.domUtils.getParentByTagName(o.startContainer,["th","td"],!0,null),t=o.collapsed?e:n.domUtils.getParentByTagName(o.endContainer,["th","td"],!0,null)),!n._zone.start||n._zone.start.cell===e&&e===t||!o.collapsed&&n._zone.start.cell===e&&e!==t&&0===o.endOffset&&t===n._tableUtils.getNextCellInTable(e)&&(t=e.lastChild,r=n.domUtils.getEndOffset(t),setTimeout((function(){n.rangeUtils.setRange(o.startContainer,o.startOffset,t,r)}),200),!0)):n.env.supportTouchEvent||!n.isSingleCell()},n._rangeRender=function(e,t,r){e||(n._clearSelectedCell(),n._selectCellsData(n._getCellsDataByRange(t,r)));var o=n._getRangeBorder();if(!n._zone.start||!n._zone.range)return o.container.style.display="none",o.start.dom.style.display="none",void(o.range.dom.style.display="none");e||n._initTableContainer(o),n._setRangeBorder(),n.setStartRange()},n._setRangeBorder=function(){var e,t,r,o,i,a,l,s,c=n._getRangeBorder(),d=n.env.doc.body.clientTop,u=n.env.doc.body.clientLeft,f=n._zone.start?n._zone.start.cell:null,h=n._zone.grid[n._zone.range.minY][n._zone.range.minX],p=n._zone.grid[n._zone.range.maxY][n._zone.range.maxX];h&&p&&(h=h.cell,p=p.cell,f&&(t=d+f.offsetTop,e=u+f.offsetLeft,r=f.offsetWidth,o=f.offsetHeight),a=d+h.offsetTop,i=u+h.offsetLeft,h===p?(l=h.offsetWidth,s=h.offsetHeight):(l=p.offsetLeft+p.offsetWidth-i,s=p.offsetTop+p.offsetHeight-a),n.domUtils.css(c.start.dom,{top:t+"px",left:e+"px"}),n.domUtils.css(c.start.top,{width:r+"px"}),n.domUtils.css(c.start.left,{height:o+"px"}),n.domUtils.css(c.start.bottom,{top:o-1+"px",width:r+"px"}),n.domUtils.css(c.start.right,{left:r-1+"px",height:o+"px"}),n.domUtils.css(c.start.dot,{top:o-1-4+"px",left:r-1-4+"px"}),n.domUtils.css(c.range.dom,{top:a+"px",left:i+"px"}),n.domUtils.css(c.range.top,{width:l+"px"}),n.domUtils.css(c.range.left,{height:s+"px"}),n.domUtils.css(c.range.bottom,{top:s+"px",width:l+"px"}),n.domUtils.css(c.range.right,{left:l+"px",height:s+"px"}),n.domUtils.css(c.range.dot,{top:s-4+"px",left:l-4+"px"}),c.start.dom.style.display="block",n.isSingleCell()?(c.start.dot.style.display="block",c.range.dom.style.display="none"):(c.start.dot.style.display="none",c.range.dom.style.display="block"),n.env.supportTouchEvent||n.locationBarRander(),c.container.style.display="block",n._unBorder?c.start.dom.style.display="none":c.start.dom.style.display="block",c.start.dot.style.display="none",c.range.dot.style.display="none")},n._rowLineRender=function(e){if(n._zone.table){var t=n._getRangeBorder(),r=t.rowLine.minTop;e<r&&(e=r),n.domUtils.css(t.rowLine,{left:n._zone.table.offsetLeft+"px",top:e+"px",width:n._zone.table.offsetWidth+"px",display:"block"}),t.container.style.display="block"}},n._selectCellsData=function(e){if(e)for(var t=0,r=e.length;t<r;t++)n.domUtils.addClass(e[t].cell,u.CLASS.SELECTED_CELL+(r>1?" "+u.CLASS.SELECTED_CELL_MULTI:""))},n._event={bind:function(){n._event.unbind(),n.env.event.add(u.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.add(u.EVENT.UPDATE_TABLE_RENDER,n._handler.updateRender);var e=n._tableUtils.getTableBody(n._zone.table);e&&e.addEventListener("scroll",n._handler.onScroll),n._zone.table&&(n._zone.table.addEventListener("DOMSubtreeModified",n._handler.onDomModified),n.env.event.add(u.EVENT.ON_RESIZE,n._handler.onDomModified)),n.env.supportTouchEvent||(n.env.event.add(u.EVENT.ON_MOUSE_DOWN,n._handler.onBarStartMove),n._locationBarDom.container&&(n._locationBarDom.row.addEventListener("mouseover",n._handler.onPointMouseOver),n._locationBarDom.col.addEventListener("mouseover",n._handler.onPointMouseOver),n._locationBarDom.all.addEventListener("mouseover",n._handler.onPointMouseOver),n._locationBarDom.addBtn.addEventListener("mouseout",n._handler.onPointMouseOut),n._locationBarDom.addBtn.addEventListener("click",n._handler.addBtnClick))),n.env.event.add(u.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory)},unbind:function(){n.env.event.remove(u.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.remove(u.EVENT.UPDATE_TABLE_RENDER,n._handler.updateRender);var e=n._tableUtils.getTableBody(n._zone.table);e&&e.removeEventListener("scroll",n._handler.onScroll),n._zone.table&&(n._zone.table.removeEventListener("DOMSubtreeModified",n._handler.onDomModified),n.env.event.remove(u.EVENT.ON_RESIZE,n._handler.onDomModified)),n.env.event.remove(u.EVENT.ON_TOUCH_START,n._handler.onBarStartMove),n.env.event.remove(u.EVENT.ON_MOUSE_DOWN,n._handler.onBarStartMove),n.env.supportTouchEvent||(n.env.event.remove(u.EVENT.ON_TOUCH_START,n._handler.onBarStartMove),n.env.event.remove(u.EVENT.ON_MOUSE_DOWN,n._handler.onBarStartMove),n._locationBarDom.container&&(n._locationBarDom.row.removeEventListener("mouseover",n._handler.onPointMouseOver),n._locationBarDom.col.removeEventListener("mouseover",n._handler.onPointMouseOver),n._locationBarDom.all.removeEventListener("mouseover",n._handler.onPointMouseOver),n._locationBarDom.addBtn.removeEventListener("mouseout",n._handler.onPointMouseOut),n._locationBarDom.addBtn.removeEventListener("click",n._handler.addBtnClick))),n.env.event.remove(u.EVENT.AFTER_RESTORE_HISTORY,n._handler.onAfterRestoreHistory)},bindStopSelectStart:function(){n._event.unbindStopSelectStart(),n.env.event.add(u.EVENT.ON_SELECT_START,n._handler.onStopSelectStart)},unbindStopSelectStart:function(){n.env.event.remove(u.EVENT.ON_SELECT_START,n._handler.onStopSelectStart)},bindDragLine:function(){n._event.unbindDragLine(),n._event.bindStopSelectStart(),n.env.event.add(u.EVENT.ON_MOUSE_MOVE,n._handler.onDragLineMove),n.env.event.add(u.EVENT.ON_MOUSE_UP,n._handler.onDragLineEnd)},unbindDragLine:function(){n._event.unbindStopSelectStart(),n.env.event.remove(u.EVENT.ON_MOUSE_MOVE,n._handler.onDragLineMove),n.env.event.remove(u.EVENT.ON_MOUSE_UP,n._handler.onDragLineEnd)}},n._handler={onDragLineMove:function(e){var t=n._getRangeBorder(),r=n._tableUtils.getMousePosition(e,n._zone.table);"block"===t.colLine.style.display?n._colLineRender(r.x-t.colLine.startMouse+t.colLine.startLine):n._rowLineRender(r.y-t.rowLine.startMouse+t.rowLine.startLine)},onDragLineEnd:function(e){n._event.unbindDragLine();var t,r=n._getRangeBorder(),o=n._tableUtils.getMousePosition(e,n._zone.table),i="block"===r.colLine.style.display,a="block"===r.rowLine.style.display;r.colLine.style.display="none",r.rowLine.style.display="none",n.req.historyUtils.saveSnap(!1),i&&r.colLine.startMouse!==o.x?(t=r.colLine.cellData)&&(n._tableUtils.initTable(n._zone.table),n._tableUtils.setColWidth(n._zone.table,n._zone.grid,t.x,o.x-r.colLine.startMouse)):a&&r.rowLine.startMouse!==o.y&&(t=r.rowLine.cellData)&&(n._tableUtils.initTable(n._zone.table),n._tableUtils.setRowHeight(n._zone.table,n._zone.grid,t.y,o.y-r.rowLine.startMouse)),r.colLine.cellData=null,r.colLine.minLeft=null,r.colLine.startLine=null,r.colLine.startMouse=null,r.rowLine.cellData=null,r.rowLine.minTop=null,r.rowLine.startLine=null,r.rowLine.startMouse=null,n.env.supportTouchEvent||n.locationBarRander(),n.env.event.call(u.EVENT.UPDATE_TABLE_RENDER)},onSelectionChange:function(e){n.env.browser.isIe||n._isStartFocus()||(n.rangeUtils.remove(),f.stopEvent(e))},onDomModified:function(e){var t=e&&"DOMSubtreeModified"===e.type&&1===e.target.nodeType&&!n.req.imgUtils.checkImgListCompleted(e.target.querySelectorAll("img"));n._domModifiedTimer&&clearTimeout(n._domModifiedTimer),n._domModifiedTimer=setTimeout((function(){n.env.event.call(u.EVENT.UPDATE_TABLE_RENDER,e,t,!0)}),100)},onStopSelectStart:function(e){return f.stopEvent(e),!1},updateRender:function(e,t,r){!function t(r,o){n._rangeRender(o),r||n._initTableBtnAndMenu(),n._updateRenderTimer&&clearTimeout(n._updateRenderTimer),r&&!n.req.imgUtils.checkImgListCompleted(e.target.querySelectorAll("img"))&&(n._updateRenderTimer=setTimeout((function(){t(r,o)}),500))}(t,r)},onBarStartMove:function(e){if((0===e.button||1===e.button)&&n.domUtils.hasClass(e.target,v)){var t=e.target.getAttribute("data-type"),r=parseInt(e.target.getAttribute("data-index")),o=n._zone.grid;switch(n._unBorder=!0,n._tableMenu.setMenuPos("frist"),t){case g:var i=o.length-1;n.setStart(o[0][0].cell).setEnd(o[i][o[i].length-1].cell);break;case m:n.setRangeOfBar(o[0][r],o[o.length-1][r],r,void 0);break;case p:n.setRangeOfBar(o[r][0],o[r][o[r].length-1],void 0,r)}n.domUtils.hasClass(e.target,b)&&(n._moveType=t,n._moveInitIndex=r,n._moveType&&!isNaN(n._moveInitIndex)&&(n.env.event.add(u.EVENT.ON_MOUSE_MOVE,n._handler.onBarMove),n.env.event.add(u.EVENT.ON_MOUSE_UP,n._handler.onBarEndMove)))}else n._unBorder=!1},onBarMove:function(e){var t=e.target.getAttribute("data-type");if(n._moveType){var r=parseInt(e.target.getAttribute("data-index"));if(t===n._moveType&&n._moveIndex!==r){var o=n._zone.grid,i=Math.min(n._moveInitIndex,r),a=Math.max(n._moveInitIndex,r);n._moveType===m?n.setStart(o[0][i].cell,void 0,void 0,!0).setEnd(o[o.length-1][a].cell):n._moveType===p&&n.setStart(o[i][0].cell,void 0,void 0,!0).setEnd(o[a][o[a].length-1].cell),n._moveIndex=r}}},onBarEndMove:function(e){n._moveType&&void 0!==n._moveInitIndex&&(n.env.event.remove(u.EVENT.ON_MOUSE_MOVE,n._handler.onBarMove),n.env.event.remove(u.EVENT.ON_MOUSE_UP,n._handler.onBarEndMove),n._moveType="")},addBtnClick:function(){n.req.historyUtils.saveSnap(!1);var e=n._zone.grid,t=parseInt(n._locationBarDom.addBtn.getAttribute("data-add-index"));n._locationBarDom.addBtn.getAttribute("data-add-type")===p?n._tableUtils.insertRow(e,t):n._tableUtils.insertCol(e,t),n.updateGrid()},addBtnMouseDown:function(e){return f.stopEventDefault(e)},onPointMouseOver:function(e){if(n.domUtils.hasClass(e.target,u.CLASS.TABLE_LINE_POINT)){var t=parseInt(e.target.getAttribute("data-index")),r=e.target.getAttribute("data-type"),o=n.domUtils.getParentByFilter(n._zone.table,(function(e){return n.domUtils.hasClass(e,u.CLASS.TABLE_CONTAINER)})),i=n.domUtils.getRelativePosition(e.target,o,!0);n._locationBarDom.addBtn.setAttribute("data-add-type",r),n._locationBarDom.addBtn.setAttribute("data-add-index",t),r===m?(n.domUtils.css(n._locationBarDom.addBtn,{left:"".concat(i.x+u.CSS.TABLECOMPONENT.PADDING+1,"px"),top:"-10px",transform:"rotate(45deg)",display:"block"}),n.domUtils.css(n._locationBarDom.line,{width:"2px",height:"".concat(n._zone.table.offsetHeight+16,"px"),left:"".concat(i.x+u.CSS.TABLECOMPONENT.PADDING+11,"px"),top:"11px",display:"block"})):(n.domUtils.css(n._locationBarDom.addBtn,{top:"".concat(i.y+1,"px"),left:"-10px",transform:"rotate(-45deg)",display:"block"}),n.domUtils.css(n._locationBarDom.line,{height:"2px",width:"".concat(Math.min(n._zone.table.offsetWidth-n._zone.table.parentNode.scrollLeft,n._zone.table.parentNode.offsetWidth)+16,"px"),top:"".concat(i.y+11,"px"),left:"12px",display:"block"})),f.stopEvent(e)}},onPointMouseOut:function(){setTimeout((function(){n._hideAddTool()}))},onAfterRestoreHistory:function(){n._locationBarDom.container=null,n._createdLocationBar(),n._hideAddTool(),n._event.bind()},onScroll:function(e){e.target.scrollLeft?n.domUtils.css(n._locationBarDom.container.querySelector(".bar-box-shadow"),{opacity:1}):n.domUtils.css(n._locationBarDom.container.querySelector(".bar-box-shadow"),{opacity:0})}},n.clear=function(){if(n._zone.active=!1,n._zone.start=null,n._zone.end=null,n._zone.range=null,n._zone.grid=null,n.env.body.querySelector("table")){n._rangeRender(),n._initTableBtnAndMenu();var e=n._getRangeBorder();e.colLine.style.display="none",e.rowLine.style.display="none",n._locationBarDom.container&&(n._locationBarDom.container.style.display="none"),n._locationBarDom.col&&(n._locationBarDom.col.style.display="none"),n._event.unbind()}return n._zone.table=null,l(n)},n.getFragmentForCopy=function(){var e=null;if(!n._zone.range)return e;var t=n.env.doc.createElement("table"),r=n.env.doc.createElement("tbody");t.appendChild(r);for(var o=n._zone.range.minY;o<=n._zone.range.maxY;o++){for(var i=n.env.doc.createElement("tr"),a=n._zone.range.minX;a<=n._zone.range.maxX;a++){var l=n._zone.grid[o][a];if(!l.fake){var s=n._tableUtils.cloneCell(l.cell,!1);i.children.length>0&&i.appendChild(n.env.doc.createTextNode("\t")),i.appendChild(s)}}i.appendChild(n.env.doc.createTextNode("\n")),r.appendChild(i)}return(e=n.env.doc.createElement("div")).appendChild(t),e},n.getSelectedCells=function(){return n._tableUtils.getCellsByRange(n._zone.grid,n._zone.range)},n.getZone=function(){return{active:n._zone.active,table:n._zone.table,start:n._zone.start,end:n._zone.end,range:n._zone.range,grid:n._zone.grid}},n.isRangeActiving=function(){return n._zone.start&&n._zone.active},n.isSingleCell=function(){if(!n._zone.grid||!n._zone.range)return!1;var e=n._zone.grid[n._zone.range.minY][n._zone.range.minX],t=n._zone.grid[n._zone.range.maxY][n._zone.range.maxX],r=n._zone.start;return e.cell===t.cell&&t.cell===r.cell},n.isZoneBorder=function(e){var t,r,o,i=e.target,a=e.offsetX,l=e.offsetY,s=f.getEventClientPos(e),c=!1,d=!1,h=!1,p=!1,m=!1,g=!!n.domUtils.getParentByFilter(i,(function(e){return e&&1===e.nodeType&&(e.id===u.ID.TABLE_RANGE_BORDER+"_start_dot"||e.id===u.ID.TABLE_RANGE_BORDER+"_range_dot")}),!0);if(g||(h=!!n.domUtils.getParentByFilter(i,(function(e){return!(!e||1!==e.nodeType||e.id!==u.ID.TABLE_RANGE_BORDER+"_start_right"&&e.id!==u.ID.TABLE_RANGE_BORDER+"_range_right")||!(!e||1!==e.nodeType||!n.domUtils.isTag(e,["td","th"]))&&(t=e.offsetWidth-4,r=e.offsetWidth+4,a>=t&&a<=r);var t,r}),!0)),g||h||(p=!!n.domUtils.getParentByFilter(i,(function(e){return!(!e||1!==e.nodeType||e.id!==u.ID.TABLE_RANGE_BORDER+"_start_bottom"&&e.id!==u.ID.TABLE_RANGE_BORDER+"_range_bottom")||!(!e||1!==e.nodeType||!n.domUtils.isTag(e,["td","th"]))&&(t=e.offsetHeight-4,r=e.offsetHeight+4,l>=t&&l<=r);var t,r}),!0)),p||g||h||(d=!!n.domUtils.getParentByFilter(i,(function(e){return e&&1===e.nodeType&&e.id===u.ID.TABLE_RANGE_BORDER}),!0)),!(p||g||h||d||(m=!!n._tableUtils.getContainerExcludeTable(i))||i!==n.env.body)){t=n.env.win.getComputedStyle(i);var v=n.domUtils.getOffset(n.env.body);r=parseInt(t.paddingLeft),o=parseInt(t.paddingRight),c=s.x-v.x<=r||s.x-v.x>=n.env.body.offsetWidth-o}return{isBodyBorder:c,isBorder:d,isBottom:p,isContainer:m,isDot:g,isRight:h,isScroll:(e.target.clientWidth>0&&e.target.clientWidth<e.offsetX||e.target.clientHeight>0&&e.target.clientHeight<e.offsetY)&&(e.target.offsetWidth>=e.offsetX||e.target.offsetHeight>=e.offsetY)}},n.modify=function(e){if(!n._zone.active||!e)return l(n);var t=n.domUtils.getParentByTagName(e,["table"],!0,null);if(!t||t!==n._zone.table)return l(n);var r=n._tableUtils.getCellData(n._zone.grid,e);n._zone.range=n._tableUtils.getRangeByCellsData(n._zone.grid,n._zone.start,r),n._zone.end=r,n._rangeRender(),n._initTableBtnAndMenu();var o=n._tableUtils.getTableBody(n._zone.table);return n.domUtils.addClass(o,u.CLASS.TABLE_MOVING),l(n)},n.remove=function(){n.clear();var e,t=n._getRangeBorder();t&&(e=t.container.parentNode)&&e.removeChild(t.container)},n.setEnd=function(e,t){t&&(n._zone.active=!0),n.modify(e),n._zone.active=!1,n.setStartRange(),n.env.event.call(u.EVENT.ON_SELECTION_CHANGE,null);var r=n._tableUtils.getTableBody(n._zone.table);return n.domUtils.removeClass(r,u.CLASS.TABLE_MOVING),l(n)},n.setStart=function(e,t,r){if(!e)return n.clear(),l(n);var o=n.domUtils.getParentByTagName(e,["table"],!0,null);if(!o||n.domUtils.isInWizTmp(o))return n.clear(),l(n);if(o!==n._zone.table&&(n.clear(),n._initZone(o)),n._zone.active=!0,n._zone.end=null,n._zone.start=n._tableUtils.getCellData(n._zone.grid,e),void 0!==t&&"undefined"!=typeof curY)try{var i=n._zone.grid[curY][t];i&&i.cell===n._zone.start.cell&&(n._zone.start=i)}catch(e){}return n._zone.range=n._tableUtils.getRangeByCellsData(n._zone.grid,n._zone.start,n._zone.start),n._rangeRender(),n._initTableBtnAndMenu(),n.domUtils.scrollIntoView(n._zone.start.cell),n._event.bind(),l(n)},n.setStartRange=function(){n._zone.grid&&n._zone.range&&!n.isSingleCell()?n.rangeUtils.remove():n.env.client.type.isIOS||n._isStartFocus()||n.rangeUtils.setRange(n._zone.start.cell,0)},n.startDragColLine=function(e,t){var r,o;if(e&&1===e.nodeType&&e.id===u.ID.TABLE_RANGE_BORDER+"_start_right")o=n._zone.start,e=n._zone.start.cell,r=n._zone.table;else if(e&&1===e.nodeType&&e.id===u.ID.TABLE_RANGE_BORDER+"_range_right")e=(o=n._zone.grid[n._zone.range.maxY][n._zone.range.maxX]).cell,r=n._zone.table;else{if(!(e=n.domUtils.getParentByTagName(e,["th","td"],!0,null)))return;if(!(r=n.domUtils.getParentByTagName(e,["table"],!0,null)))return;r!==n._zone.table&&(n._clearSelectedCell(),n.clear()),n._zone.grid||n._initZone(r),o=n._tableUtils.getCellData(n._zone.grid,e)}for(var i,a=o.x;a+1<n._zone.grid[o.y].length&&(a++,(i=n._zone.grid[o.y][a]).cell===e);)o=i;var l=e.offsetLeft+e.offsetWidth,s=n._getRangeBorder();n._initTableContainer(s),s.colLine.minLeft=r.offsetLeft,s.colLine.startLine=l,s.colLine.startMouse=t,s.colLine.cellData=o,n._colLineRender(l),n.rangeUtils.remove(),n._event.bindDragLine()},n.startDragRowLine=function(e,t){var r,o;if(e&&1===e.nodeType&&e.id===u.ID.TABLE_RANGE_BORDER+"_start_bottom")o=n._zone.start,e=n._zone.start.cell,r=n._zone.table;else if(e&&1===e.nodeType&&e.id===u.ID.TABLE_RANGE_BORDER+"_range_bottom")e=(o=n._zone.grid[n._zone.range.maxY][n._zone.range.maxX]).cell,r=n._zone.table;else{if(!(e=n.domUtils.getParentByTagName(e,["th","td"],!0,null)))return;if(!(r=n.domUtils.getParentByTagName(e,["table"],!0,null)))return;r!==n._zone.table&&(n._clearSelectedCell(),n.clear()),n._zone.grid||n._initZone(r),o=n._tableUtils.getCellData(n._zone.grid,e)}for(var i,a=o.y;a+1<n._zone.grid.length&&(a++,(i=n._zone.grid[a][o.x]).cell===e);)o=i;var l=e.offsetTop+e.offsetHeight,s=n._getRangeBorder();n._initTableContainer(s),s.rowLine.minTop=r.offsetTop,s.rowLine.startLine=l,s.rowLine.startMouse=t,s.rowLine.cellData=o,n._rowLineRender(l),n.rangeUtils.remove(),n._event.bindDragLine()},n.switchCell=function(e,t){if(!t||!n._zone.start)return null;var r=function(){t.canChangeRow&&i>=0&&i<n._zone.grid.length&&(o<0?(o=n._zone.grid[i].length-1,i-=1):o>=n._zone.grid[i].length&&(o=0,i+=1))};t.x=t.x?t.x>0?1:-1:0,t.y=t.y?t.y>0?1:-1:0;var o=e.x+t.x,i=e.y+t.y;r();for(var a=e;i>=0&&i<n._zone.grid.length&&o>=0&&o<n._zone.grid[i].length&&a.cell===e.cell;)a=n._zone.grid[i][o],o+=t.x,i+=t.y,r();return a},n.updateGrid=function(){var e,t;return n._zone.table&&(n._zone.grid&&(e=n._zone.grid[n._zone.range.minY][n._zone.range.minX],t=n._zone.grid[n._zone.range.maxY][n._zone.range.maxX]),n._initZone(n._zone.table),e=n._tableUtils.getCellData(n._zone.grid,e.cell),t=n._tableUtils.getCellData(n._zone.grid,t.cell),n._zone.range=n._tableUtils.getRangeByCellsData(n._zone.grid,e,t),n._zone.start=n._tableUtils.getCellData(n._zone.grid,n._zone.start.cell),n._zone.end&&(n._zone.end=n._tableUtils.getCellData(n._zone.grid,n._zone.end.cell))),n.env.event.call(u.EVENT.UPDATE_TABLE_RENDER),l(n)},n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){s(c(t.prototype),"initCore",this).call(this,e),this._tableMenu=e.require.tableMenuList,this._tableUtils=e.require.tableUtils}},{key:"_createdLocationBar",value:function(e){var t=this,n=this.domUtils.getParentByFilter(this._zone.table,(function(e){return t.domUtils.hasClass(e,u.CLASS.TABLE_CONTAINER)}));if(n){var r=n.querySelector(".".concat(u.CLASS.TABLE_BAR)),o=n.querySelector(".".concat(u.CLASS.TABLE_COL_BAR));if(r?(this._locationBarDom.container=r,this._locationBarDom.container.style.display="flex",this._locationBarDom.col=o,this._locationBarDom.col.style.display="flex"):(this._locationBarDom.container=this.env.doc.createElement(u.TAG.TMP_TAG),this.domUtils.addClass(this._locationBarDom.container,u.CLASS.TABLE_BAR),n.appendChild(this._locationBarDom.container)),this._locationBarDom.all=this._getDomByClass(this._locationBarDom.container,u.CLASS.TABLE_ALL_BAR,"div"),this._locationBarDom.row=this._getDomByClass(this._locationBarDom.container,u.CLASS.TABLE_ROW_BAR,"div"),e)this._locationBarDom.col=this._getDomByClass(e,u.CLASS.TABLE_COL_BAR,"div");else{var i=this._tableUtils.getTableBody(this._zone.table);this._locationBarDom.col=this._getDomByClass(i,u.CLASS.TABLE_COL_BAR,u.TAG.TMP_TAG),this.domUtils.setContenteditable(this._locationBarDom.col,!1)}this._locationBarDom.addBtn=this._getDomByClass(this._locationBarDom.container,u.CLASS.TABLE_ADD_BTN,"button"),this._locationBarDom.line=this._getDomByClass(this._locationBarDom.container,u.CLASS.TABLE_ADD_TIP_LINE,"div"),this._getDomByClass(this._locationBarDom.container,"bar-box-shadow","div"),this._locationBarDom.addBtn.type="button",this._locationBarDom.all.innerHTML='<div class="'.concat(u.CLASS.TABLE_LINE_BOX," ").concat(v,'" data-type="').concat(g,'"></div><div class="').concat(u.CLASS.TABLE_LINE_POINT,' rows" data-index="0" data-type="').concat(p,'"></div><div class="').concat(u.CLASS.TABLE_LINE_POINT,' cols" data-index="0" data-type="').concat(m,'">'),r||this._event.bind()}}},{key:"_createdLocationBarItem",value:function(e,t,n,r){return'<div class="wiz-table-localtion-bar-block" style="'.concat(e===m?"width: ".concat(n,"px;"):"height: ".concat(n,"px"),'"><div class="').concat(u.CLASS.TABLE_LINE_BOX).concat(r?" active":""," ").concat(b," ").concat(v,'" data-type="').concat(e,'" data-index="').concat(t,'"></div><div class="').concat(u.CLASS.TABLE_LINE_POINT,'" data-index="').concat(t+1,'" data-type="').concat(e,'"></div></div>')}},{key:"_hideAddTool",value:function(){this._locationBarDom.container&&(this._locationBarDom.addBtn=this._getDomByClass(this._locationBarDom.container,u.CLASS.TABLE_ADD_BTN,"button"),this._locationBarDom.line=this._getDomByClass(this._locationBarDom.container,u.CLASS.TABLE_ADD_TIP_LINE,"div")),this._locationBarDom.addBtn&&(this._locationBarDom.addBtn.style.display="none"),this._locationBarDom.line&&(this._locationBarDom.line.style.display="none")}},{key:"setRangeOfBar",value:function(e,t,n,r){if(!e||!t)return this.clear(),this;var o=this.domUtils.getParentByTagName(e.cell,["table"],!0,null);if(!o||this.domUtils.isInWizTmp(o))return this.clear(),this;o!==this._zone.table&&(this.clear(),this._initZone(o)),this._zone.active=!0,this._zone.start=e,this._zone.end=t,this._zone.range={minX:this._zone.start.x,minY:this._zone.start.y,maxX:this._zone.end.x,maxY:this._zone.end.y},this._rangeRender(void 0,n,r),this._initTableBtnAndMenu(),this.domUtils.scrollIntoView(this._zone.start.cell),this._event.bind()}},{key:"_getMergeSpan",value:function(e,t){return parseInt(e.cell.getAttribute("".concat(t,"span")))||1}},{key:"_isMarge",value:function(e,t){return 1!==this._getMergeSpan(e,t)}},{key:"locationBarRander",value:function(){var e=this._zone.grid;if(e.length){for(var t="",n=0;n<e[0].length;){var r=e[0][n];if(this._isMarge(r,"col"))for(var o=1;o<e.length;o++){var i=e[o][n];if(!i.fake&&i.cell.offsetWidth<r.cell.offsetWidth&&(r=i,!this._isMarge(r,"col")))break}var a=r.cell.offsetWidth;r.cell.getBoundingClientRect&&(a=r.cell.getBoundingClientRect().width);var l=n+this._getMergeSpan(r,"col");l>=e[0].length&&(a+=1),t+=this._createdLocationBarItem(m,n,a,this._zone.range&&n>=this._zone.range.minX&&n<=this._zone.range.maxX),n=l}for(this._locationBarDom.col.innerHTML=t,t="",n=0;n<e.length;){var s=e[n][0];if(this._isMarge(s,"row"))for(var c=1;c<e[n].length;c++){var d=e[n][c];if(!d.fake&&d.cell.offsetHeight<s.cell.offsetHeight&&(s=d,!this._isMarge(s,"row")))break}var u=s.cell.offsetHeight;s.cell.getBoundingClientRect&&(u=s.cell.getBoundingClientRect().height);var f=n+this._getMergeSpan(s,"row");f>=e.length&&(u+=1),t+=this._createdLocationBarItem(p,n,u,this._zone.range&&n>=this._zone.range.minY&&n<=this._zone.range.maxY),n=f}this._locationBarDom.row.innerHTML=t}}}])&&i(n.prototype,r),h&&i(n,h),t}(h);e.exports=y},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(63),h=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._clientItem=null,n._curTouchTarget=null,n._checkTodo=function(e,t){var r=n._todoUtils.checkTodo(e,n._clientItem);r&&(n.env.readonly&&n._patchForReader.addModified(r),t&&u.stopEvent(t))},n._patchForReader={curCheckbox:null,docLockChecked:!1,modifiedIdList:{},htmlToSave:"",init:function(){if(n.env.readonly){n._patchForReader.modifiedIdList={};for(var e=n.env.body.querySelectorAll("."+d.CLASS.TODO_CHECKBOX),t=0;t<e.length;t++){e[t].wizTodoIndex=t}}},addModified:function(e){if(n.env.readonly){var t=e.checkbox,r=e.checked,o=n._patchForReader.modifiedIdList[t.wizTodoIndex];"boolean"==typeof o&&o!==r?delete n._patchForReader.modifiedIdList[t.wizTodoIndex]:n._patchForReader.modifiedIdList[t.wizTodoIndex]=r}},getModifiedList:function(){var e=[];for(var t in n._patchForReader.modifiedIdList)n._patchForReader.modifiedIdList.hasOwnProperty(t)&&e.push({index:t,checked:n._patchForReader.modifiedIdList[t]});return e},modifyDoc:function(){var e="",t=n._patchForReader.getModifiedList();if(0===t.length)return e;e=n._clientItem.getOriginalDoc();var r=n.env.doc.getElementById(d.ID.IFRAME_FOR_SAVE);r||((r=n.env.doc.createElement("iframe")).id=d.ID.IFRAME_FOR_SAVE,n.env.body.appendChild(r)),r.style.display="none";var o,i=n.env.doc,a=n.env.win,l=n.env.body,s=r.contentDocument,c=n._clientItem.isPersonalDocument();s.open("text/html","replace"),s.write(e),s.close(),n.env.doc=s,n.env.win=r.contentWindow,n.env.body=s.body,f.run(n.env.win),n._todoUtils.oldPatch.fixOldTodo(),n._todoUtils.fixNewTodo(),o=n.env.body.querySelectorAll("."+d.CLASS.TODO_CHECKBOX);for(var u=t.length-1;u>=0;u--){var h=t[u].index,p=t[u].checked,m=o[h];if(m){var g=n._todoUtils.getMainFromChild(m);n._todoUtils.check(g,p),c||n._todoUtils.addUserInfo(g,p,n._clientItem)}}return n._todoUtils.checkTodoStyle(!0),e=n.req.editorBridge.getContentHtmlForInside(),n.env.body=l,n.env.doc=i,n.env.win=a,n.env.scrollContainer=n.domUtils.getScrollContainer(),n.env.body.removeChild(r),e}},n._event={bind:function(){n._event.unbind(),n.env.event.add(d.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.add(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory),n.env.event.add(d.EVENT.ON_EXEC_COMMAND,n._handler.onExecCommand),n.env.event.add(d.EVENT.ON_PASTE,n._handler.onPaste),n.env.event.add(d.EVENT.AFTER_INSERT_DOM,n._handler.afterInsertDom),n.env.client.type.isIOS||n.env.client.type.isAndroid?(n.env.event.add(d.EVENT.ON_CLICK,n._handler.onTouchEnd),n.env.event.add(d.EVENT.ON_TOUCH_START,n._handler.onTouchStart)):n.env.event.add(d.EVENT.ON_CLICK,n._handler.onClick)},unbind:function(){n.env.event.remove(d.EVENT.ON_CLICK,n._handler.onClick),n.env.event.remove(d.EVENT.ON_SELECTION_CHANGE,n._handler.onSelectionChange),n.env.event.remove(d.EVENT.ON_TOUCH_END,n._handler.onTouchEnd),n.env.event.remove(d.EVENT.ON_TOUCH_START,n._handler.onTouchStart),n.env.event.remove(d.EVENT.AFTER_RESTORE_HISTORY,n._handler.afterRestoreHistory)}},n._handler={afterInsertDom:function(){n._todoUtils.fixNewTodo(),n._todoUtils.checkTodoStyle(!1)},afterRestoreHistory:function(){n._todoUtils.checkTodoStyle(!1),n._todoUtils.fixNewTodo(),n.req.todoStyle.restoreUserAvatarStyle()},onCheckDocLock:function(e,t){n._patchForReader.docLockChecked=!t,e||n._checkTodo(n._patchForReader.curCheckbox),n._patchForReader.curCheckbox=null},onClick:function(e){return n.onClickTodo(e)},onExecCommand:function(){var e,t,r=n.rangeUtils.getRange();if(r&&(e=r.collapsed?r.startContainer:n.domUtils.getParentRoot([r.startContainer,r.endContainer]),e=n.domUtils.getBlockParent(e,!0)))for(var o=0,i=(t=e.querySelectorAll("."+d.CLASS.TODO_CHECKBOX)).length;o<i;o++)n._todoUtils.fixCheckbox(t[o],!1)},onKeyDown:function(e){if(!n._clientItem.hasPermission())return!0;var t=n.rangeUtils.getRange();if(!t)return!0;var r,o,i,a,l,s,c,f,h,p,m,g,v,b,y,_,S=e.keyCode||e.which;if(!t.collapsed){if(8!==S&&46!==S&&u.checkNonTxtKey(e))return!0;if((_=n.rangeUtils.getRangeDomList({noSplit:!0}))&&_.list.length>0){n.req.historyUtils.saveSnap(!1),i=t.endContainer,a=t.endOffset,3!==i.nodeType&&(t.endOffset===i.childNodes.length?(i=n.domUtils.getLastDeepChild(i),a=n.domUtils.getEndOffset(i)):(i=i.childNodes[t.endOffset],a=0)),p=n._todoUtils.getContainerFromChild(i);for(var E=_.list.length-1;E>=0;E--)y=_.list[E],n._todoUtils.isCheckbox(y)&&(h=n._todoUtils.getContainerFromChild(y),(f=n._todoUtils.getMainFromChild(y))&&(c=f.parentNode,n._todoUtils.cancelTodo(c,!0)),p&&h===p&&(i.parentNode||(i=c,a=n.domUtils.getEndOffset(i)),n.rangeUtils.setRange(t.startContainer,t.startOffset,i,a)));return!0}}if(l=n._todoUtils.isCaretAfterCheckbox(),c=(s=n._todoUtils.getMainByCaret())?n.domUtils.getBlockParent(s,!1):n._todoUtils.getContainerFromChild(t.startContainer),m=n.domUtils.getEndOffset(t.endContainer)===t.endOffset,!c||s||n._todoUtils.getCheckbox(c)||(n._todoUtils.clearTodoClass(c),c=null),!c&&!m&&13!==S)return!0;if(8===S&&l)return n.req.historyUtils.saveSnap(!1),n._todoUtils.cancelTodo(c),u.stopEvent(e),!1;if(46===S&&(n.req.historyUtils.saveSnap(!1),r=t.startContainer,o=t.startOffset,n.rangeUtils.selectCharIncludeFillChar(),i=(t=n.rangeUtils.getRange()).endContainer,f=n._todoUtils.getMainFromChild(i)||n._todoUtils.getMainInDom(i),n.rangeUtils.setRange(r,o),f&&f!==s))return n._todoUtils.cancelTodo(f.parentNode,!0),!1;if(37===S&&l&&(y=n.domUtils.getPreviousNode(c)))return n.rangeUtils.setRange(y,n.domUtils.getEndOffset(y)),u.stopEvent(e),!1;if(!c||13!==S||e.shiftKey)return!0;if(n.req.historyUtils.saveSnap(!1),n._todoUtils.isEmptyContainer(c))return c.innerHTML="<br>",n._todoUtils.clearTodoClass(c),n.rangeUtils.setRange(c,1),n.domUtils.getParentByTagName(c,["blockquote","ul","ol"])&&n.env.event.call(d.EVENT.EXEC_COMMEND,"outdent",!1),u.stopEvent(e),!1;t.deleteContents(),n._todoUtils.fixNewTodo(c);var C,T=!1,A=n._todoUtils.getUserInfoInDom(c);A?(C=n.domUtils.getPreviousNode(A,!1,c),t.startContainer===A&&t.startOffset!==n.domUtils.getEndOffset(A)?T=!0:n._todoUtils.getUserInfoFromChild(t.startContainer)&&(T=!0)):C=c,t.setEndAfter(T?c:C);var O,w=t.cloneContents(),N=n.env.doc.createElement("div");for(w.appendChild(N);w.childNodes.length>1;)N.appendChild(w.firstChild);if(n.domUtils.isEmptyDom(N)){if(v=n._todoUtils.cloneTodo(c),n.domUtils.after(v,c),n._todoUtils.setTodo(v),s=n._todoUtils.getMainInDom(v),3===(y=n.domUtils.getLastDeepChild(v)).nodeType)y.nodeValue=d.FILL_CHAR+d.FILL_CHAR;else if(n.domUtils.isSelfClosingTag(y)){var L=n.env.doc.createTextNode(d.FILL_CHAR+d.FILL_CHAR);n.domUtils.after(L,y),y=L}else y.appendChild(n.env.doc.createTextNode(d.FILL_CHAR+d.FILL_CHAR)),y=y.childNodes[0];n.rangeUtils.setRange(y,1)}else{O=t.extractContents(),b=[];for(var I=0;I<O.childNodes.length;I++)b.push(O.childNodes[I]);g=c!==n.env.body&&n.domUtils.isBlock(c)?c.tagName:"div",v=n.env.doc.createElement(g),n.domUtils.after(v,c),(s=n._todoUtils.setTodo(v)).length>0&&(s=s[0]),n._todoUtils.insertToMain(b,s);for(var U=0;U<b.length;U++)n._todoUtils.clearBlock(b[U]);n.rangeUtils.setRange(s,1)}u.stopEvent(e)},onPaste:function(){setTimeout((function(){n._handler.afterInsertDom()}),300)},onSelectionChange:function(){var e=n.rangeUtils.getRange();if(e){var t,r,o;e.collapsed||(r=e.endContainer,o=e.endOffset);var i=n._todoUtils.isCaretBeforeCheckbox();i.enable&&((t=i.checkbox)&&t.nextSibling?(r=t.nextSibling,o=0):t&&(r=t.parentNode,o=n.domUtils.getIndex(t)+1),n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!0),e.collapsed?n.rangeUtils.setRange(r,o):n.rangeUtils.setRange(e.startContainer,e.startOffset,r,o),setTimeout((function(){n.env.event.setPause(d.EVENT.ON_SELECTION_CHANGE,!1)}),10))}},onTouchEnd:function(e){e.target===n._curTouchTarget&&(n._curTouchTarget=null,n.onClickTodo(e))},onTouchStart:function(e){n._curTouchTarget=e.target}},n.init=function(){},n.on=function(){n._todoUtils.oldPatch.fixOldTodo(),n._todoUtils.fixNewTodo(),n._patchForReader.init(),n._event.bind(),n._clientItem||(n._clientItem=n.req.clientBridge.getBridge()),n._todoUtils.checkTodoStyle(!0)},n.off=function(){n._event.unbind()},n.checkTodoStyle=function(){n._todoUtils.checkTodoStyle(!1)},n.closeDocument=function(){var e;return n._clientItem||(n._clientItem=n.req.clientBridge.getBridge()),!(e=n.env.client.type.isWin&&n.env.options.pc.pluginModified?n.req.editorBridge.getContentHtmlForInside():n._patchForReader.modifyDoc())||n.env.client.type.isIOS||n.env.client.type.isMac||n._clientItem.saveDoc(e,""),n._clientItem.beforeCloseDoc&&n._clientItem.beforeCloseDoc(),n._patchForReader.init(),e},n.onClickTodo=function(e){if(!n._clientItem.hasPermission())return!1;var t=e.target;if(!n._todoUtils.isCheckbox(t))return!1;var r=n._todoUtils.getContainerFromChild(t),o=n._todoUtils.getContainerFromChild(r.parentNode);return o?n._todoUtils.fixNewTodo(o):n._todoUtils.fixNewTodo(r),!(!n.env.readonly||!n._patchForReader.curCheckbox)||(!n.env.readonly||n._patchForReader.docLockChecked?n._checkTodo(t,e):(n._patchForReader.curCheckbox=t,n._clientItem.checkDocLock("onCheckDocLock")),n.rangeUtils.setRange(r,r.children.length),!0)},n.setTodo=function(){n.req.historyUtils.saveSnap(!1);n._todoUtils.setTodo(null)},n.getModifiedListFromReader=n._patchForReader.getModifiedList,n.onCheckDocLock=n._handler.onCheckDocLock,n.onKeyDown=n._handler.onKeyDown,n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e),this._todoUtils=e.require.todoUtils}}])&&i(n.prototype,r),h&&i(n,h),t}(n(2));e.exports=h},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(2),f="data:text/xml;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUYxRkNCNDRFNUYzMTFFN0I3MjU4OUZFNDhFRjQzMjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUYxRkNCNDVFNUYzMTFFN0I3MjU4OUZFNDhFRjQzMjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5RjFGQ0I0MkU1RjMxMUU3QjcyNTg5RkU0OEVGNDMyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5RjFGQ0I0M0U1RjMxMUU3QjcyNTg5RkU0OEVGNDMyNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoB3J04AAAJhSURBVHja7JjLK0RRHMdnhFiM55RsFJGFrcSOGguDaHZCSRY2Q7PwiAUlj1gMCkvF2FDKZpLXSh7xB1jMf6AmY5RSGt9Tv6vjdO5j7twzzcKvPt07v+ae873n/B5nxp1KpVy5ZHmuHLOcE5QvOqLR6O99KNmZLR2rYFYqiKwBrIU9lz5cSzKYiAXoCF7swGCHdsC47grBGsEDKHPgzUMGYgrAPhjkfBsyQSsk5gtMgQgGjTu8RUXgGPRyviMwIxPko+s0hGwriBcPOAMdnO8GjLItlgnSYuZQgZhKljeghfM9gwDtiG5QM3N6m6rBJWjifDHgBwmjoFZhteAK1HG+V9BF17QL4wII2yykbEVuBTEfFNAx08KoI2aR7mvAEPi0KKYZnFPsaMZipQ882m0dVdw9C75r4LXwXDtlT6VQKEfJb7uXBYUB2sAdqDd4poeyySP456jeZNRcv2llYkJruQetku8PgFNQLPjXWTviHWhNbrvdPkEZkeB8Xlq5AOdjPSlCbcElVOFZybjhTI4fMZr8m/OxVTgBk6zsg13JmL9VWFidZXou7SwTBw/SxPxLbep8/4mvwpJ4cuSAtkdYWdFuYZuVnRiDRqmrV4VVCpJlnmZJvSqs+kwtyzwWK/16VTgbh3w+80yrsK1Dvg3TMq/UrApnS5DLYtZZMrf4yxU/gzSHW/EZ6c88fr/fNIYqFIqpSCeo3+k6rFDQGHdQMxV0xXXnCVDuoJByGnOJPl9YETQP3kAh2KLDfsoh4jRmIc0xb0XQC51zTqnqOm1JGruV5jLOsv+/Y/4FpWk/AgwACweeMaBPu0MAAAAASUVORK5CYII=",h="data:text/xml;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjlFNzg2NjRFNUYzMTFFN0IyNkY5NzZGNEEyNTU3NEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjlFNzg2NjVFNUYzMTFFN0IyNkY5NzZGNEEyNTU3NEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCOUU3ODY2MkU1RjMxMUU3QjI2Rjk3NkY0QTI1NTc0RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCOUU3ODY2M0U1RjMxMUU3QjI2Rjk3NkY0QTI1NTc0RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PohRJcgAAAEHSURBVHja7JgxCsJAEEWNSEAQ0XgG8QrWIhYp7e2stRMhpRDETltLe8sU4gE8guIdokQrm/UHvoUWZsVdEJmBx5AUMy87m5DEUUrlfinyuR8LEcqKwuuJKIrSVAdT0AZlwz0TsAVjcPR9/70QogF2oGJpEdIL7IIWaIJD1shCytzAENSAYwiPNW/sEWaOjGNKYwQWhlfnxJpFbomOzqZ+7JmVxb27ZC59cpfFFoVieQ6JkAiJkAiJkAiJkAj9gZBnsa/3iVDC3LMo1Ge+6ghtmWdgAKoGRaqsOeHxRkcoAGfggjlfyJUhYtZ02SPQEdrzi3INLhbGdWHtJns9hSP/h0Toy7gLMABy5T6ChFra5QAAAABJRU5ErkJggg==",p={common:"."+d.CLASS.TODO_MAIN+" {padding-left: 12px;}li > ."+d.CLASS.TODO_MAIN+" {padding-left: 0}."+d.CLASS.TODO_CHECKED+" {color: #666;}."+d.CLASS.TODO_UNCHECKED+" {text-decoration: initial;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TODO_CHECKED," .").concat(d.CLASS.TODO_CHECKBOX," {background-image:url(").concat(f,")}")+"."+d.CLASS.TODO_UNCHECKED+" ."+d.CLASS.TODO_CHECKBOX+" {background-image:url("+h+")}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TODO_CHECKBOX," {border-radius:0;position:relative;top:-1px;vertical-align:middle;border:0;background-color:transparent;outline:none;width:18px !important; height:18px !important; cursor:default; padding:0px 10px 0px 5px;-webkit-user-select: none;background-size:18px;background-repeat:no-repeat;background-position:5px;box-sizing:initial;}")+"."+d.CLASS.TODO_AVATAR+" {border:0;background-color:transparent;outline:none;width:20px !important; height: 20px !important; vertical-align: -20%; padding:0; margin:0 10px 0 0; border-radius:100%;background-size:20px;background-repeat:no-repeat;}."+d.CLASS.TODO_USER_INFO+" {padding-left: 20px;}input."+d.CLASS.TODO_AVATAR+" {position:relative;top:-4px;}."+d.CLASS.TODO_ACCOUNT+", ."+d.CLASS.TODO_DATE+" { color: #666; }"},m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._todoStyleMap={},n._getGuidFromStyleId=function(e){var t=new RegExp("^"+d.ID.TODO_AVATAR_STYLE+"(.*)$","i");return e.replace(t,"$1")},n.insertTodoStyle=function(e){n.removeTodoOldStyle();var t=n.env.doc.getElementById(d.ID.TODO_STYLE);!e&&t||n.req.wizStyle.replaceStyleById(d.ID.TODO_STYLE,p.common,!1),n.removeUnUsedTodoStyle();var r="wiz_todo_checkbox_img_preview";if(n.env.client.type.isIOS&&!n.env.body.querySelector("#"+r)){var o=n.env.doc.createElement(d.TAG.TMP_TAG),i=n.env.doc.createElement("img"),a=n.env.doc.createElement("img");i.src=f,a.src=h,n.domUtils.setContenteditable(o,!1),n.domUtils.css(o,{width:0,height:0,opacity:0,overflow:"hidden",display:"inline-block"}),o.id=r,o.appendChild(i),o.appendChild(a),n.env.doc.body.appendChild(o)}},n.removeTodoOldStyle=function(){n.req.wizStyle.removeStyleById(d.ID.TODO_STYLE_OLD)},n.removeTodoStyle=function(){n.removeTodoOldStyle();var e=n.env.doc.getElementById(d.ID.TODO_STYLE);n.domUtils.remove(e);for(var t=n.env.doc.querySelectorAll("style"),r=t.length-1;r>=0;r--)if((e=t[r]).id&&0===e.id.indexOf(d.ID.TODO_AVATAR_STYLE)){var o=n._getGuidFromStyleId(e.id);n._todoStyleMap[o]=e.innerHTML,n.domUtils.remove(e)}},n.removeUnUsedTodoStyle=function(e){var t,r,o,i,a=n.env.doc.querySelectorAll("style");if(e)return r=d.ID.TODO_AVATAR_STYLE+e,o=d.CLASS.TODO_USER_AVATAR+e,i=n.env.doc.querySelector("."+o),void((t=n.env.doc.getElementById(r))&&!i&&(n._todoStyleMap[e]=t.innerHTML,n.domUtils.remove(t)));for(var l=a.length-1;l>=0;l--)(r=(t=a[l]).id)&&0===r.indexOf(d.ID.TODO_AVATAR_STYLE)&&(e=n._getGuidFromStyleId(r),n.env.body.querySelector("."+d.CLASS.TODO_USER_AVATAR+e)||(n._todoStyleMap[e]=t.innerHTML,n.domUtils.remove(t)))},n.restoreUserAvatarStyle=function(){for(var e in n._todoStyleMap)if(n._todoStyleMap.hasOwnProperty(e)){var t=d.ID.TODO_AVATAR_STYLE+e;!n.env.doc.querySelector("#"+t)&&n.env.body.querySelector("."+d.CLASS.TODO_USER_AVATAR+e)&&n.req.wizStyle.replaceStyleById(t,n._todoStyleMap[e],!1)}},n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),u&&i(n,u),t}(u);e.exports=m},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(91),f=n(3),h=n(2),p="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",m=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._setTodoSingle=function(e){var t,r,o,i,a,l;if(t=e,!n.domUtils.isBlock(t)){var s=n.domUtils.getFirstDeepChild(t),c=n.domUtils.getBlockParent(s);c&&(t=c)}for(o=n.getMainHtml(),a=n.env.doc.createElement("div"),n.canBeContainer(t)?(n.domUtils.addClass(t,d.CLASS.TODO_LAYER),n.domUtils.addClass(t,d.CLASS.TODO_UNCHECKED)):o='<div class="'+d.CLASS.TODO_LAYER+" "+d.CLASS.TODO_UNCHECKED+'">'+o+"</div>",a.innerHTML=o,i=n.getMainInDom(a);a.lastChild;)t.insertBefore(a.lastChild,t.firstChild);for(r=n.domUtils.getLastDeepChild(t);n.domUtils.isTag(r,"br")||3===r.nodeType&&f.isEmpty(r.nodeValue);)n.domUtils.remove(r),r=n.domUtils.getLastDeepChild(t);n.domUtils.isSelfClosingTag(r)?n.rangeUtils.setRange(r.parentNode,n.domUtils.getIndex(r)+1):(3===r.nodeType?(0===r.nodeValue.length&&(r.nodeValue=d.FILL_CHAR),l=r):(l=n.env.doc.createTextNode(d.FILL_CHAR),r.appendChild(l)),l.nodeValue===d.FILL_CHAR?n.rangeUtils.setRange(l,0,l,1):n.rangeUtils.setRange(l,l.nodeValue.length));return n.checkTodoStyle(!1),i},n.addUserInfo=function(e,t,r){var o,i,a,l,s,c,u;if(e)if(o=n.deleteUserInfo(e.parentNode),t){o=r.getUserGuid(),i=r.getUserAlias(),a=r.getUserAvatarFileName(d.CSS.TODO_LIST.IMG_WIDTH),l=n.getTime(),n.setUserAvatarStyle(o,a),s=n.getUserInfoHtml(o,i,l),c=n.env.doc.createElement("span"),n.domUtils.addClass(c,d.CLASS.TODO_USER_INFO),c.innerHTML=s;for(var f=e.childNodes.length-1;f>=0;f--){var h=e.childNodes[f];n.domUtils.isTag(h,"br")&&e.removeChild(h)}for(u=e.nextElementSibling;u;){if(n.isMain(u)){e.parentElement.insertBefore(c,u);break}if(n.domUtils.isTag(u,"br")){e.parentElement.insertBefore(c,u);break}u=u.nextElementSibling}u||e.parentElement.appendChild(c),c.hasChildNodes()||c.appendChild(n.env.doc.createElement("br")),n.rangeUtils.setRange(c,c.childNodes.length)}else n.req.todoStyle.removeUnUsedTodoStyle(o)},n.canBeContainer=function(e){return!n.domUtils.isTag(e,["body","blockquote","td","th"])&&n.domUtils.isBlock(e)},n.cancelTodo=function(e,t){if(e){var r,o,i,a,l=n.rangeUtils.getRange();r=l?l.startContainer:null,o=l?l.startOffset:0,i=n.getMainInDom(e),a=n.deleteUserInfo(e),n.req.todoStyle.removeUnUsedTodoStyle(a),n.deleteMain(i),n.clearTodoClass(e),n.domUtils.isEmptyDom(e)&&!n.domUtils.isIncludeBr(e)&&(e.innerHTML="<br/>"),t||(r&&r.parentNode||(r=e,o=0),n.rangeUtils.setRange(r,o)),n.checkTodoStyle(!1)}},n.check=function(e,t){var r=n.getContainerFromChild(e);t?(n.domUtils.removeClass(r,d.CLASS.TODO_UNCHECKED),n.domUtils.addClass(r,d.CLASS.TODO_CHECKED)):(n.domUtils.removeClass(r,d.CLASS.TODO_CHECKED),n.domUtils.addClass(r,d.CLASS.TODO_UNCHECKED));var o=n.getCheckbox(e),i=t?"checked":"unchecked",a={};a[d.ATTR.TODO_CHECK]=i,n.domUtils.attr(o,a)},n.checkTodo=function(e,t){var r={checkbox:null,checked:!1};n.req.historyUtils.saveSnap(!1);var o,i=n.getMainFromChild(e);return i&&i.children[0]===e||n.fixCheckbox(e,!1),o="checked"!==e.getAttribute(d.ATTR.TODO_CHECK),n.check(i,o),r.checkbox=e,r.checked=o,t.isPersonalDocument()||n.addUserInfo(i,o,t),r},n.checkTodoStyle=function(e){n.env.doc.querySelector("."+d.CLASS.TODO_CHECKBOX)?n.req.todoStyle.insertTodoStyle(e):n.req.todoStyle.removeTodoStyle()},n.clearBlock=function(e){if(!e||1!==e.nodeType&&3!==e.nodeType&&11!==e.nodeType)return!1;for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];n.clearBlock(r)&&r!==e.childNodes[t]&&t--}var o=11===e.nodeType,i=!o&&n.isTodoTag(e),a=!o&&n.domUtils.isBlock(e);if(a&&n.domUtils.isEmptyDom(e)){if(!(e.children.length>0))return n.domUtils.remove(e),!0;n.domUtils.peelDom(e)}else(a||i)&&n.domUtils.peelDom(e);return!1},n.clearTodoClass=function(e){e&&n.domUtils.removeClass(e,[d.CLASS.TODO_ACCOUNT,d.CLASS.TODO_AVATAR,d.CLASS.TODO_DATE,d.CLASS.TODO_LAYER,d.CLASS.TODO_MAIN,d.CLASS.TODO_CHECKED,d.CLASS.TODO_UNCHECKED,d.CLASS.TODO_USER_INFO])},n.cloneTodo=function(e){if(!e)return null;var t,r,o;if(t=n.domUtils.clone(e,!1),!n.getMainInDom(e))return null;n.domUtils.removeClass(t,d.CLASS.TODO_CHECKED),n.domUtils.addClass(t,d.CLASS.TODO_UNCHECKED);for(var i=e,a=t;i&&i.childNodes&&i.childNodes.length;){for(o=i.childNodes[i.childNodes.length-1];o&&(3===o.nodeType&&0===o.nodeValue.replace(d.FILL_CHAR_REG,"").length||n.domUtils.isBlock(o)||n.domUtils.hasClass(o,d.CLASS.TODO_USER_INFO)||n.domUtils.isSelfClosingTag(o));)o=o.previousSibling;!o||n.isCheckbox(o)?(r=n.env.doc.createTextNode(""),o=null):3===(r=n.domUtils.clone(o,!1)).nodeType&&(r.nodeValue=""),n.clearTodoClass(r),a.appendChild(r),a=r,i=o}return t},n.deleteMain=function(e){return n.domUtils.peelDom(e,(function(e){return!n.isMain(e)&&!n.isCheckbox(e)}))},n.deleteUserInfo=function(e){var t="",r=n.getMainInDom(e),o=e.querySelector("."+d.CLASS.TODO_AVATAR),i=o?o.className:"",a=new RegExp("^(.*"+d.CLASS.TODO_USER_AVATAR+")([^ ]*)(.*)$","i");i.indexOf(d.CLASS.TODO_USER_AVATAR)>-1&&(t=i.replace(a,"$2"));for(var l=r?r.nextElementSibling:e.firstChild;l&&!n.isMain(l);)if(n.isUserInfo(l)){var s=l;l=l.nextElementSibling,e.removeChild(s)}else l=l.nextElementSibling;return t},n.fixCheckbox=function(e,t){if(e){if(n.domUtils.attr(e,{style:null}),n.domUtils.isTag(e,"input")){var r=n.env.doc.createElement("img");r.className=e.className,r.src=p;var o={};o[d.ATTR.TODO_CHECK]=e.getAttribute(d.ATTR.TODO_CHECK),n.domUtils.attr(r,o),n.domUtils.before(r,e),n.domUtils.remove(e),e=r}if(t||!n.getMainFromChild(e)){var i,a,l,s,c=n.domUtils.getBlockParent(e),u=n.canBeContainer(c),f=n.env.doc.createElement("span"),h=!1;for(f.className=(t?d.CLASS.TODO_LABEL_OLD:d.CLASS.TODO_MAIN)+" "+d.CLASS.TODO_UNCHECKED,i=n.env.doc.createElement(u?c.tagName:"div"),u?n.domUtils.after(i,c):n.domUtils.before(i,e),i.appendChild(f),a=e;a;){if(l=a.nextSibling,n.domUtils.isBlock(a)){if(!u)break;h=!0,s=i.nextSibling}h?n.domUtils.before(a,s):n.isUserInfo(a)?n.domUtils.after(a,f):f.appendChild(a),a=l}n.domUtils.addClass(i,d.CLASS.TODO_LAYER);var m=n.getContainerFromChild(i.parentNode);m&&n.clearTodoClass(m),u&&n.domUtils.isEmptyDom(c)&&n.domUtils.remove(c)}}},n.fixMain=function(e){if(e){var t,r,o=n.domUtils.getLastDeepChild(e),i=n.getCheckbox(e);if(i||n.domUtils.removeClass(e,d.CLASS.TODO_MAIN),n.domUtils.attr(e,{style:null}),(t=n.getContainerFromChild(e))&&t!==e&&t!==e.parentNode)try{t.appendChild(e)}catch(e){console.error(e)}n.domUtils.hasClass(e,d.CLASS.TODO_CHECKED)?(n.domUtils.addClass(t,d.CLASS.TODO_CHECKED),n.domUtils.removeClass(e,d.CLASS.TODO_CHECKED)):n.domUtils.hasClass(e,d.CLASS.TODO_UNCHECKED)&&(n.domUtils.addClass(t,d.CLASS.TODO_UNCHECKED),n.domUtils.removeClass(e,d.CLASS.TODO_UNCHECKED));var a=e.querySelectorAll("."+d.CLASS.TODO_MAIN);for(r=a.length-1;r>=0;r--)n.domUtils.after(a[r],e);if(n.domUtils.isEmptyDom(e)&&e.parentNode&&n.domUtils.remove(e),o!==i&&(1!==o.nodeType&&3!==o.nodeType||1===o.nodeType&&n.domUtils.isTag(o,"br"))){for(t=o.parentNode;t!==e&&1===t.childNodes.length;)o=t,t=t.parentNode;n.domUtils.remove(o),n.fixMain(e)}}},n.fixNewTodo=function(e){var t,r,o,i,a,l,s,c,u,f,h,p=function(e){n.domUtils.isEmptyDom(e)?n.domUtils.remove(e):(s=n.getCheckbox(e))||n.clearTodoClass(e)};r=(t=e||n.env.doc).querySelectorAll("."+d.CLASS.TODO_LAYER);for(var m=0;m<r.length;m++){var g=r[m];if(n.domUtils.attr(g,{style:null}),p(g),0!==(o=g.querySelectorAll("."+d.CLASS.TODO_LAYER)).length&&(a=(i=o[0]).parentNode,(f=g)!==(u=n.isTodoTag(a)||n.isLayer(a)?i:a))){for(;h=u.nextSibling;)n.domUtils.after(h,f),f=h;n.domUtils.after(u,g),p(g)}}c=t.querySelectorAll("."+d.CLASS.TODO_MAIN);for(var v=0;v<c.length;v++){var b=c[v];n.fixMain(b)}l=t.querySelectorAll("."+d.CLASS.TODO_CHECKBOX);for(var y=0;y<l.length;y++)s=l[y],n.fixCheckbox(s,!1);if(e){var _=n.domUtils.getLastDeepChild(t);n.domUtils.isTag(_,"br")&&n.domUtils.remove(_)}var S=function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];n.domUtils.hasClass(r,d.CLASS.TODO_LAYER)||n.clearTodoClass(r)}};S(t.querySelectorAll("."+d.CLASS.TODO_CHECKED)),S(t.querySelectorAll("."+d.CLASS.TODO_UNCHECKED))},n.getCheckbox=function(e){return e?e.querySelector("."+d.CLASS.TODO_CHECKBOX):null},n.getContainerFromChild=function(e){return e?n.domUtils.getParentByFilter(e,(function(e){return n.isLayer(e)}),!0):null},n.getMainByCaret=function(){var e=n.rangeUtils.getRange();if(!e)return null;var t=n.rangeUtils.getRangeDetail(e.startContainer,e.startOffset);return n.getMainFromChild(t.container)},n.getMainFromChild=function(e){return e?n.domUtils.getParentByClass(e,d.CLASS.TODO_MAIN,!0):null},n.getMainHtml=function(){return'<span class="'+d.CLASS.TODO_MAIN+'">'+n.getCheckboxHtml()+"</span>"},n.getCheckboxHtml=function(){return'<img src="'+p+'" class="'+d.CLASS.TODO_CHECKBOX+" "+d.CLASS.IMG_NOT_DRAG+'" '+d.ATTR.TODO_CHECK+'="unchecked" />'},n.getMainInDom=function(e){return e&&e.hasChildNodes()?e.querySelector("."+d.CLASS.TODO_MAIN):null},n.getUserInfoFromChild=function(e){return e?n.domUtils.getParentByClass(e,d.CLASS.TODO_USER_INFO,!0):null},n.getUserInfoInDom=function(e){return e.querySelector("."+d.CLASS.TODO_USER_INFO)},n.getUserInfoHtml=function(e,t,n){var r='<span class="'+d.CLASS.TODO_ACCOUNT+'"><input disabled readonly class="%1" />%2, </span><span class="'+d.CLASS.TODO_DATE+'">%3.</span>',o=d.CLASS.TODO_USER_AVATAR+u.encode(e);return r.replace("%1",d.CLASS.IMG_NOT_DRAG+" "+d.CLASS.TODO_AVATAR+" "+o).replace("%2",t).replace("%3",n)},n.getTime=function(){var e,t=function(e){return(e<10?"0":"")+e},r=new Date;return e=t(r.getHours())+":"+t(r.getMinutes()),"en"===n.lang.version?n.lang.Month[r.getMonth()]+" "+r.getDate()+", "+r.getFullYear()+" at "+e:r.getFullYear()+n.lang.Date.Year+(r.getMonth()+1)+n.lang.Date.Month+r.getDate()+n.lang.Date.Day+" "+e},n.insertToMain=function(e,t){if(e&&t)for(var r=null,o=e.length-1;o>=0;o--){var i=e[o];n.clearTodoClass(i),t.insertBefore(i,r),r=i}},n.isCaretAfterCheckbox=function(){var e,t,r,o,i=n.rangeUtils.getRange();return!!i&&(!!(r=n.getMainByCaret())&&(!!i.collapsed&&(!(3===(e=n.rangeUtils.getRangeDetail(i.startContainer,i.startOffset)).container.nodeType&&e.offset>0&&(o=e.container.nodeValue.substr(0,e.offset),!f.isEmpty(o)))&&(t=e.isEnd?e.container:n.domUtils.getPreviousNode(e.container,!1,r),n.isCheckbox(t)))))},n.isCaretBeforeCheckbox=function(){var e={enable:!1,checkbox:null},t=n.rangeUtils.getRange();if(!t)return e;var r=t.endContainer;return 1===r.nodeType?r=r.childNodes[t.endOffset]:3===r.nodeType&&n.domUtils.isEmptyDom(r)&&t.endOffset===r.nodeValue.length&&!n.getContainerFromChild(r)&&(r=n.domUtils.getNextNode(r,!1))&&(r=n.domUtils.getParentByFilter(r,(function(e){return n.isLayer(e)}),!0)),n.isLayer(r)||n.isMain(r)?(e.enable=!0,e.checkbox=n.getCheckbox(r)):n.isCheckbox(r)&&(e.enable=!0,e.checkbox=r),e.checkbox||(e.enable=!1),e},n.isCheckbox=function(e){return n.domUtils.hasClass(e,d.CLASS.TODO_CHECKBOX)},n.isEmptyContainer=function(e){if(!e)return!0;for(var t=e.childNodes,r=0;r<t.length;r++){var o=t[r];if(n.isMain(o)){if(!n.isEmptyMain(o))return!1}else if(!n.domUtils.isEmptyDom(o))return!1}return!0},n.isEmptyMain=function(e){if(!e)return!0;for(var t=e.childNodes,r=0;r<t.length;r++){var o=t[r];if(!n.isCheckbox(o)&&!n.domUtils.isEmptyDom(o))return!1}return!0},n.isLayer=function(e){return n.domUtils.hasClass(e,d.CLASS.TODO_LAYER)},n.isMain=function(e){return n.domUtils.hasClass(e,d.CLASS.TODO_MAIN)},n.isTodoTag=function(e){return!!e&&(n.isMain(e)||n.isUserInfo(e)||n.domUtils.hasClass(e,d.CLASS.TODO_ACCOUNT)||n.domUtils.hasClass(e,d.CLASS.TODO_DATE))},n.isUserInfo=function(e){return n.domUtils.hasClass(e,d.CLASS.TODO_USER_INFO)},n.setTodo=function(e){var t,r=[];if(0===(t=e?[e]:n.req.blockUtils.fixAndGetBlockListFromRange()).length)return r;var o=function(e){var t=e.querySelectorAll("li");if(n.domUtils.isTag(e,"li"))r.push(n._setTodoSingle(e));else if(t.length>0)for(var o=0;o<t.length;o++)r.push(n._setTodoSingle(t[o]));else!function(e){var t=e.querySelectorAll("br");if(!n.domUtils.isEmptyDom(e)&&t.length>0)for(var o=t.length-1;o>=0;o--){var i=t[o],a=n.domUtils.splitDomBeforeSub(e,i);n.domUtils.remove(i),r.push(n._setTodoSingle(a)),0===o&&a!==e&&r.push(n._setTodoSingle(e))}else r.push(n._setTodoSingle(e))}(e)},i=function(e){return!!n.domUtils.isTag(e,"li")||!n.domUtils.hasClass(e,d.CLASS.TABLE_CONTAINER)&&!e.querySelector("."+d.CLASS.TABLE_CONTAINER)&&(!n.domUtils.hasClass(e,d.CLASS.CODE_CONTAINER)&&!e.querySelector("."+d.CLASS.CODE_CONTAINER)&&!n.domUtils.isTag(e,["hr"]))},a=!0,l=t[0],s=n.getMainInDom(l),c=n.getUserInfoInDom(l);(!!n.getCheckbox(s)||c)&&(a=!1);for(var u=0;u<t.length;u++)for(var f=t[u];s=n.getMainInDom(f);){var h=n.getContainerFromChild(s);n.cancelTodo(h||f)}if(!a)return r;for(var p=0;p<t.length;p++){var m=t[p];i(m)&&o(m)}return r},n.setUserAvatarStyle=function(e,t){var r=u.encode(e),o=d.ID.TODO_AVATAR_STYLE+r,i=d.CLASS.TODO_USER_AVATAR+r,a=n.env.doc.getElementById(o);if(!a)if(a=n.env.win.parent.document.getElementById(o))n.req.wizStyle.insertStyle({id:o},a.innerHTML);else{var l=function(e){n.env.doc.getElementById(o)||n.req.wizStyle.insertStyle({id:o},"."+i+"{background-image:url("+e+");}")};/^data:/i.test(t)?l(t):n.domUtils.convertImageToBase64(t,50,50,l)}},n.oldPatch={fixImg:function(e){if(e){var t=n.env.doc.createElement("img");if(t.className=e.className,t.src=p,n.domUtils.removeClass(t,d.CLASS.TODO_CHECK_IMG_OLD),n.domUtils.addClass(t,d.CLASS.TODO_CHECKBOX),e.id&&(t.id=e.id),e.getAttribute("state")){var r={};r[d.ATTR.TODO_CHECK]=e.getAttribute("state"),n.domUtils.attr(t,r)}var o=e.parentNode;o.insertBefore(t,e),o.removeChild(e)}},fixLabel:function(e){if(e&&(n.domUtils.removeClass(e,d.CLASS.TODO_LABEL_OLD),n.domUtils.addClass(e,d.CLASS.TODO_MAIN),n.domUtils.hasClass(e,d.CLASS.TODO_CHECKED_OLD)?(n.domUtils.removeClass(e,d.CLASS.TODO_CHECKED_OLD),n.domUtils.addClass(e,d.CLASS.TODO_CHECKED)):n.domUtils.hasClass(e,d.CLASS.TODO_UNCHECKED_OLD)&&(n.domUtils.removeClass(e,d.CLASS.TODO_UNCHECKED_OLD),n.domUtils.addClass(e,d.CLASS.TODO_UNCHECKED))),e&&!n.domUtils.isTag(e,"span")){var t=e.parentNode;if(t){var r=n.env.doc.createElement("span");for(r.className=e.className;e.firstChild;)r.appendChild(e.firstChild);t.insertBefore(r,e),t.removeChild(e)}}},fixOldTodo:function(){for(var e,t,r,o,i,a,l=(o=n.env.body.querySelectorAll("."+d.CLASS.TODO_CHECK_IMG_OLD)).length-1;l>=0;l--){var s=o[l],c=n.oldPatch.getLabelFromChild(s);c&&c.children[0]===s||n.fixCheckbox(s,!0),n.oldPatch.fixImg(s)}i=n.env.body.querySelectorAll("."+d.CLASS.TODO_LABEL_OLD);for(var u=0;u<i.length;u++){var f=i[u],h=n.oldPatch.packageTodo(f);n.domUtils.addClass(h,d.CLASS.TODO_LAYER);for(var p=(e=h.querySelectorAll("."+d.CLASS.TODO_LABEL_OLD)).length-1;p>0;p--)t=e[p],r=n.oldPatch.packageTodo(t),n.domUtils.after(r,h);n.oldPatch.fixUserInfo(f)}for(var m=(i=n.env.body.querySelectorAll("."+d.CLASS.TODO_LABEL_OLD)).length-1;m>=0;m--)n.oldPatch.fixLabel(i[m]);for(var g=(a=n.env.body.querySelectorAll("."+d.CLASS.TODO_TAIL_OLD)).length-1;g>=0;g--){var v=a[g];n.domUtils.isEmptyDom(v)?n.domUtils.remove(v):n.domUtils.removeClass(d.CLASS.TODO_TAIL_OLD)}},fixUserInfo:function(e){for(var t=e.parentNode,r=n.oldPatch.getCheckImg(e),o=r?r.id:"",i=t.childNodes,a=!1,l=0;l<i.length;l++){var s=i[l];if(n.domUtils.hasClass(s,d.CLASS.TODO_USER_INFO))if(a)t.removeChild(s),l--;else{a=!0;var c={};c[d.ATTR.TODO_ID]=o,n.domUtils.attr(s,c)}}},getCheckImg:function(e){return e?e.querySelector("."+d.CLASS.TODO_CHECK_IMG_OLD):null},getLabelFromChild:function(e){return e?n.domUtils.getParentByFilter(e,(function(e){return n.domUtils.hasClass(e,d.CLASS.TODO_LABEL_OLD)}),!0):null},isFirstLabel:function(e){if(!e)return!1;for(var t=e.parentNode.childNodes,r=0;r<t.length;r++){var o=t[r];if(o===e)return!0;if(!n.domUtils.isEmptyDom(o))return!1}return!1},packageTodo:function(e){if(!e)return null;var t=e.parentNode;if(t!==n.env.body&&n.oldPatch.isFirstLabel(e))return t;var r,o=n.oldPatch.getCheckImg(e),i=o?o.id:"",a=i?t.querySelector("span["+d.ATTR.TODO_ID+"="+i+"]"):null,l=e.nextSibling,s=n.env.doc.createElement("div");for(s.appendChild(e);l;)r=l.nextSibling,s.appendChild(l),l=l===a?null:r;return t.insertBefore(s,r),s}},n.pastePatch={fix:function(e){for(var t=e.querySelectorAll("."+d.CLASS.TODO_MAIN),r=0;r<t.length;r++){if(t[r].parentNode===e){var o=n.domUtils.packageChildNodesByDiv(e);n.domUtils.addClass(o,d.CLASS.TODO_LAYER),n.domUtils.addClass(o,d.CLASS.TODO_UNCHECKED);break}}}},n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),h&&i(n,h),t}(h);e.exports=m},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(217),h=n(2),p="active",m="editor-button",g="disabled",v="editor-icon",b="selected",y="editor-submenu",_="editor-submenu-label",S="editor-submenu-table",E="toolbar-split",C="editor-img-name",T="wiz-upload-img",A="wiz-toolbar-bold",O="wiz-toolbar-code",w="wiz-toolbar-help",N="wiz-toolbar-image",L="wiz-toolbar-italic",I="wiz-toolbar-link",U="wiz-toolbar-list-ol",M="wiz-toolbar-list-ul",D="wiz-toolbar-preview",x="wiz-toolbar-quotes",R="wiz-toolbar-redo",k="wiz-toolbar-split",P="wiz-toolbar-table",B="wiz-toolbar-undo",z=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._markdownRender=null,n._toolsButtonMap={},n._mainTools=[{id:A,icon:"bold"},{id:L,icon:"italic"},{id:I,icon:"link"},{id:k},{id:x,icon:"quotes"},{id:U,icon:"list_ol"},{id:M,icon:"list_ul"},{id:k},{id:N,icon:"image"},{id:P,icon:"table"},{id:O,icon:"code"},{id:k},{id:B,icon:"undo"},{id:R,icon:"redo"}],n._sideTools=[{id:D,icon:"eye"},{id:w,icon:"question"}],n._activeButton=null,n._uploaderId="",n._event={bind:function(){n._event.unbind(),n.req.editorCommonEvent.addListener(d.TYPE.EDITOR_EVENT.SelectionChange,n._handler.onSelectionChange),n.req.historyUtils.addCallback(n._handler.onHistoryUndo),n.env.supportTouchEvent?n.env.frame.toolbarContainer.addEventListener("touchstart",n._handler.onHoverButton):(n.env.frame.toolbarContainer.addEventListener("mouseover",n._handler.onHoverButton),n.env.frame.toolbarContainer.addEventListener("mouseout",n._handler.onHoverOutButton)),n.env.frame.toolbarContainer.addEventListener("click",n._handler.onClickButton)},bindSubMenu:function(){n._event.unbindSubMenu(),n.env.doc.addEventListener("mousedown",n._handler.onClickDoc);var e=n._activeButton.querySelector("."+S);e&&(e.addEventListener("mouseover",n._handler.onMouseOverTable),e.addEventListener("click",n._handler.onSelectTable))},unbindSubMenu:function(){n.env.doc.removeEventListener("mousedown",n._handler.onClickDoc);var e=n._activeButton.querySelector("."+S);e&&(e.removeEventListener("mouseover",n._handler.onMouseOverTable),e.removeEventListener("click",n._handler.onSelectTable))},unbind:function(){n.req.editorCommonEvent.removeListener(d.TYPE.EDITOR_EVENT.SelectionChange,n._handler.onSelectionChange),n.req.historyUtils.removeCallback(n._handler.onHistoryUndo),n.env.frame.toolbarContainer&&n.env.frame.toolbarContainer.removeEventListener("click",n._handler.onClickButton)}},n._handler={onHoverButton:function(e){var t=e.target;n.domUtils.hasClass(t,v)&&!n.domUtils.hasClass(t,g)&&n.domUtils.addClass(t,"hover")},onHoverOutButton:function(e){var t=e.target;n.domUtils.hasClass(t,v)&&!n.domUtils.hasClass(t,g)&&n.domUtils.removeClass(t,"hover")},onClickButton:function(e){var t=e.target;if(n.domUtils.hasClass(t,v)&&!n.domUtils.hasClass(t,g)){n.domUtils.removeClass(t,"hover");var r,o,i=t.parentNode;switch(t.id){case A:n.env.isShowPreview||(n.req.historyUtils.saveSnap(!1),r=n._view.insertText("****"),n.rangeUtils.setRange(r,2));break;case L:n.env.isShowPreview||(n.req.historyUtils.saveSnap(!1),r=n._view.insertText("**"),n.rangeUtils.setRange(r,1));break;case I:n.env.isShowPreview||(n.req.historyUtils.saveSnap(!1),r=n._view.insertText("["+n.lang.Toolbar.LinkTopic+"](http://)"),n.rangeUtils.setRange(r,3));break;case x:n.env.isShowPreview||n._view.insertQuotes();break;case U:n.env.isShowPreview||n._view.insertListOl();break;case M:n.env.isShowPreview||n._view.insertListUl();break;case N:if(i.getAttribute("for"))n.rangeUtils.caretBackup();else{var a=n.env.options.editor.callback.onClickToolbarInsertImg;"function"==typeof a&&a()}break;case O:n.env.isShowPreview||(n.req.historyUtils.saveSnap(!1),n._view.insertText("\n"),n._view.insertText("```"),r=n._view.insertText("\n"),n._view.insertText("```"),n._view.insertText("\n"),n.rangeUtils.setRange(r,0));break;case P:if(!n.env.isShowPreview){if(n._view.isActive(i)){n._view.setActive(i,!1);break}o=n._view.createSubMenu(i),n._view.createTableSubMenu(o),n._view.setActive(i,!0)}break;case B:n.env.isShowPreview||n.req.historyUtils.undo();break;case R:n.env.isShowPreview||n.req.historyUtils.redo();break;case D:n._view.preview();break;case w:var l=n.env.options.editor.callback.onClickToolbarHelp;"function"==typeof l&&l()}setTimeout((function(){n.env.body.focus()}),50)}},onClickDoc:function(e){var t=e.target,r=n.domUtils.getParentByClass(t,m);r&&r===n._activeButton||n._view.setActive(n._activeButton,!1)},onHistoryUndo:function(e){var t=n._toolsButtonMap[B],r=n._toolsButtonMap[R];0===e.undoIndex?n.domUtils.addClass(t,g):n.domUtils.removeClass(t,g),e.undoIndex>=e.undoCount-1?n.domUtils.addClass(r,g):n.domUtils.removeClass(r,g)},onMouseOverTable:function(e){var t,r=e.target,o=0,i=0;1===r.nodeType&&/^td$/i.test(r.tagName)&&(t=r.getAttribute("data-index").split("-"),i=parseInt(t[0],10),o=parseInt(t[1],10));var a=n.domUtils.getParentByClass(r,y),l=n.domUtils.getParentByClass(r,S),s=a.querySelector("."+_);if(o&&i){s.innerHTML=i+" x "+o,l.selectRow=i,l.selectCol=o;for(var c=0;c<10;c++)for(var d=0;d<10;d++)l.rows[c].cells[d].className=c<i&&d<o?b:""}},onSelectTable:function(e){var t=e.target,r=n.domUtils.getParentByClass(t,m),o=n.domUtils.getParentByClass(t,S,!0);o&&o.selectRow&&o.selectCol&&(n.req.tableCore.insertTable(o.selectCol,o.selectRow),n._view.setActive(r,!1))},onSelectionChange:function(e){var t=n._toolsButtonMap[A],r=n._toolsButtonMap[L],o=n._toolsButtonMap[I],i=n._toolsButtonMap[x],a=n._toolsButtonMap[U],l=n._toolsButtonMap[M],s=n._toolsButtonMap[O],c=n._toolsButtonMap[N],d=n._toolsButtonMap[P],u=n._toolsButtonMap[B],f=n._toolsButtonMap[R];e?(s&&"1"===e.isInCode||d&&"1"===e.isInTable?n.domUtils.addClass([t,r,o,i,a,l,s,c,d],g):n.domUtils.removeClass([t,r,o,i,a,l,s,c,d],g),n._handler.onHistoryUndo(n.req.historyUtils.getUndoState())):n.domUtils.addClass([t,r,o,i,a,l,s,c,d,u,f],g)}},n._view={checkBlock:function(e){return!!e&&!(n.domUtils.getParentByClass(e,d.CLASS.CODE_CONTAINER,!0)||n.domUtils.getParentByClass(e,d.CLASS.TABLE_CONTAINER,!0))},checkDomInList:function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},clearImgUploadingTmp:function(e){var t=n._view.getImgUploadingTmp(e);t&&n.domUtils.remove(t)},createSubMenu:function(e){var t=e.querySelector("."+y);return t||(t=n.env.doc.createElement("div"),n.domUtils.addClass(t,y),e.appendChild(t),t)},createTableSubMenu:function(e){var t,r,o,i=e.querySelector("."+S);if(i){for(var a=(o=i.querySelectorAll("."+b)).length-1;a>=0;a--)n.domUtils.removeClass(o[a],b);return e.querySelector("."+_).innerHTML="0 x 0",i}t=n.env.doc.createElement("div"),n.domUtils.addClass(t,_),t.innerHTML="0 x 0",i=n.env.doc.createElement("table"),r=n.env.doc.createElement("tbody");for(var l=1;l<11;l++){for(var s=n.env.doc.createElement("tr"),c=1;c<11;c++){var d=n.env.doc.createElement("td");n.domUtils.attr(d,{"data-index":l+"-"+c,unselectable:"on",onmousedown:"return false;"}),s.appendChild(d)}r.appendChild(s)}return n.domUtils.addClass(i,S),i.appendChild(r),e.appendChild(t),e.appendChild(i),e},createToolbar:function(){if(!(n.env.frame.toolbarContainer.children.length>0)){var e=n.env.doc.createElement("div");n.domUtils.addClass(e,d.CLASS.WIZ_EIDTOR_TOOlBAR_MAIN);var t=n.env.doc.createElement("div");n.domUtils.addClass(t,d.CLASS.WIZ_EIDTOR_TOOlBAR_SIDE),n.env.frame.toolbarContainer.appendChild(e),n.env.frame.toolbarContainer.appendChild(t);var r=n._mainTools,o=n._sideTools;u.forEach(r,(function(t){e.appendChild(n._view.createToolIcon(t))})),u.forEach(o,(function(e){t.appendChild(n._view.createToolIcon(e))}))}},createToolIcon:function(e){var t,r=n.env.doc.createElement("div"),o=n.env.doc.createElement("i");if(e.id===k?n.domUtils.addClass(o,E):(e.id!==B&&e.id!==R||n.domUtils.addClass(o,g),n.domUtils.addClass(o,v),n.domUtils.addClass(o,"icon-"+e.icon),n.domUtils.attr(o,{unselectable:"on",onmousedown:"return false;"}),t=e.id,o.id=t,n._toolsButtonMap[t]=o),n.domUtils.addClass(r,m),e.id===N){var i=n.env.doc.createElement("label");n.domUtils.attr(i,{for:n._uploaderId}),i.appendChild(o),r.appendChild(i)}else r.appendChild(o);return r},getImgUploadingTmp:function(e){return n.env.body.querySelector("#"+n._view.getImgUploadingTmpId(e))},getImgUploadingTmpId:function(e){return T+"_"+e},getLineStartList:function(){var e,t,r=n.rangeUtils.getRange(),o=[],i=[];if(!r)return o;var a,l,s=n.rangeUtils.getRangeDetail(r.startContainer,r.startOffset),c=n.domUtils.getPrevBlock(!r.collapsed&&s.isEnd?n.domUtils.getNextNode(s.container):s.container);if(r.collapsed)n._view.checkBlock(c)&&i.push(c);else for(a=n.rangeUtils.getRangeDetail(r.endContainer,r.endOffset),l=n.domUtils.getPrevBlock(0===a.offset?n.domUtils.getPreviousNode(a.container):a.container),n._view.checkBlock(l)&&i.push(l),e=n.domUtils.getPrevBlock(n.domUtils.getPreviousNode(l));l!==n.env.body&&l!==c&&e&&e!==n.env.body&&(n._view.checkBlock(e)&&i.splice(0,0,e),e!==c);)e=n.domUtils.getPrevBlock(n.domUtils.getPreviousNode(e));for(var d=0;d<i.length;d++)e=i[d],n.domUtils.isTag(e,"br")?!(t=e.nextSibling)&&n.domUtils.isEmptyDom(e.parentNode)&&(t=e):t=n.domUtils.getFirstDeepChild(e),n._view.checkDomInList(t,o)||o.push(t);return o},hide:function(){n.env.frame.toolbarContainer&&(n.env.frame.toolbarContainer.style.display="none")},insertImgUploadingTmp:function(e,t){var r=n.rangeUtils.getRange();if(r||(n.rangeUtils.caretRestore()||n.env.body.focus(),r=n.rangeUtils.getRange()),r){r.deleteContents(),n._view.clearImgUploadingTmp(e);var o=n.env.doc.createElement("br");r.insertNode(o);var i="markdown"===n.env.options.editor.type,a=n.env.doc.createElement(d.TAG.TMP_TAG);a.innerHTML=i?t.markdownSrc.replace("uploading",'<span class="progress_txt">0%</span>)'):'<div style="border:1px solid #BDBDBD;color:#BDBDBD;width:200px;text-align:center;"><div class="'+C+'" style="padding:8px;font-size:14px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">'+t.name+'</div><div class="progress_txt" style="padding-bottom:8px;font-size:12px;">0%</div><div class="progress_line" style="width:0%;height:2px;background:#66BB6A;"></div></div>',a.style.color="#BDBDBD",a.id=n._view.getImgUploadingTmpId(e),n.domUtils.setContenteditable(a,!1),r.insertNode(a),r.insertNode(n.env.doc.createElement("br"));var l=n.domUtils.getIndex(o);n.rangeUtils.setRange(o.parentNode,l+1)}},insertListOl:function(){n._view.insertTextAtLineStart("1."+String.fromCharCode(160),n._view.getLineStartList())},insertListUl:function(){n._view.insertTextAtLineStart("*"+String.fromCharCode(160),n._view.getLineStartList())},insertQuotes:function(){n._view.insertTextAtLineStart(">"+String.fromCharCode(160),n._view.getLineStartList())},insertText:function(e){var t,r,o=n.rangeUtils.getRange();return"\n"===e?(t=n.env.doc.createElement("div")).appendChild(n.env.doc.createElement("br")):t=n.env.doc.createTextNode(e),o?(o.deleteContents(),n.rangeUtils.insertNode(t),n.rangeUtils.setRange(t,n.domUtils.getEndOffset(t))):3===t.nodeType?((r=n.env.doc.createElement("div")).appendChild(t),n.env.body.appendChild(r)):n.env.body.appendChild(t),t},insertTextAtLineStart:function(e,t){var r;if(0!==t.length)for(var o=0;o<t.length;o++){var i=t[o];r=n.env.doc.createTextNode(e),n.domUtils.isTag(i,"br")&&n.domUtils.isEmptyDom(i.parentNode)?(n.domUtils.before(r,i),n.domUtils.remove(i)):n.domUtils.before(r,i),o===t.length-1&&(r=n.domUtils.getBlockParent(r,!0),n.rangeUtils.setRange(r,n.domUtils.getEndOffset(r)))}else n.rangeUtils.getRange()||(r=n._view.insertText(e),n.rangeUtils.setRange(r,r.nodeValue.length))},isActive:function(e){return n.domUtils.hasClass(e,p)},preview:function(){var e=n.env.body.querySelector("."+d.CLASS.WIZ_EIDTOR_PREVIEW_CONTAINER);if(e?(n.req.codeUtils&&n.req.codeUtils.clearCodeMirror(e.querySelectorAll("."+d.CLASS.CODE_CONTAINER)),e.innerHTML=""):(e=n.env.doc.createElement(d.TAG.TMP_TAG),n.domUtils.addClass(e,d.CLASS.WIZ_EIDTOR_PREVIEW_CONTAINER),n.domUtils.addClass(e,d.CLASS.READONLY),n.env.body.appendChild(e)),n.req.tableMenuList.hide(),n.env.isShowPreview)return n.env.isShowPreview=!1,n.domUtils.setContenteditable(n.env.body,!0),n.domUtils.removeClass(e,d.CLASS.EDITOR_PREVIEW_SHOW),void n.env.event.call(d.EVENT.ON_SELECTION_CHANGE);n.env.isShowPreview=!0,n._handler.onSelectionChange(),n.domUtils.setContenteditable(n.env.body,!1),n.domUtils.addClass(e,d.CLASS.EDITOR_PREVIEW_SHOW),e.innerHTML="";var t=n.env.doc.createElement("div");t.innerHTML=n.env.body.innerHTML;for(var r=t.querySelectorAll(d.TAG.TMP_TAG),o=r.length-1;o>=0;o--)n.domUtils.remove(r[o]);for(;t.firstChild;)e.appendChild(t.firstChild);n._markdownRender.do({container:e},(function(){}))},setActive:function(e,t){if(!t)return n.domUtils.removeClass(e,p),void(n._activeButton===e&&(n._event.unbindSubMenu(),n._activeButton=null));n._activeButton!==e&&(n.domUtils.removeClass(n._activeButton,p),n._activeButton=e,n.domUtils.addClass(e,p),n._event.bindSubMenu())},show:function(){n._view.createToolbar(),n.env.frame.toolbarContainer.style.display="flex"}},n.off=function(){n.env.isShowPreview=!1,n._event.unbind(),n._view.hide()},n.on=function(){n.env.readonly||(n.req.frameViewStyle.insertToolbarStyle(),n.req.frameViewStyle.insertPreviewStyle()),n._markdownRender||(n._markdownRender=new f({win:n.env.win,doc:n.env.doc,callback:function(){}}),n._markdownRender.initCore(n.core)),n._view.show(),n._event.bind()},n.setImgUploaderId=function(e){var t;if(n._uploaderId=e,!n.env.readonly&&n.env.frame.toolbarContainer){if(!(t=n.env.frame.toolbarContainer.querySelector("#"+N)))return;n.domUtils.attr(t.parentNode,{for:n._uploaderId})}},n.onImgUploadBegin=function(e,t){n._view.insertImgUploadingTmp(e,t)},n.onImgUploadComplete=function(e,t){var r,o=n._view.getImgUploadingTmp(e);o&&(r=n.env.options.editor.type===d.NOTE_EDITOR_TYPE.MARKDOWN?n.env.doc.createTextNode(t.markdownSrc):n.req.imgUtils.makeDomByPath(t.url),n.domUtils.before(r,o),n.domUtils.remove(o))},n.onImgUploadError=function(e){n._view.clearImgUploadingTmp(e)},n.onImgUploadProgress=function(e,t){var r=n._view.getImgUploadingTmp(e);if(r){var o=r.querySelector(".progress_txt"),i=r.querySelector(".progress_line");o&&(o.firstChild.nodeValue=t.progress+"%"),i&&(i.style.width=t.progress+"%")}},n}var n,r,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),h&&i(n,h),t}(h);e.exports=z},function(e,t,n){var r=n(1);e.exports=function(){var e=null,t=null,n=null;this.initCore=function(r){t=(e=r).env,n=e.require.domUtils};this.create=function(e){var o,i,a;o||(o=t.doc.createElement(r.TAG.TMP_TAG),n.addClass(o,r.CLASS.TOOL_TIP),n.addClass(o,r.CLASS.FLOAT_LAYER),i=t.doc.createElement("span"),n.addClass(i,r.CLASS.TOOL_TIP_ARROW_BG),a=t.doc.createElement("span"),n.addClass(a,r.CLASS.TOOL_TIP_ARROW),o.appendChild(i),o.appendChild(a),n.attr(o,{contenteditable:"false"}),e&&(o.id=e));var l={container:o,arrow:a,arrowBg:i,isShow:function(){return n.hasClass(o,"active")}};return l.hide=function(){var e;e=l,n.removeClass(e.container,"active")},l.show=function(e,o,i,a){!function(e,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.TYPE.LAYOUT.TOP,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0;if(e){if(t.body.appendChild(e.container),o){n.css(e.container,{display:"block",visibility:"hidden"});var s=n.setLayout({layerObj:e.container,target:o,layout:i,isFixed:a,isReverse:!0,space:8,scrollDom:l});s.top<s.targetTop?n.addClass(e.container,"top"):n.removeClass(e.container,"top");var c=s.targetLeft-s.left+s.targetWidth/2+e.arrowBg.offsetWidth/2;c<0&&(c=0),n.css(e.arrowBg,{left:c+"px"});var d=s.targetLeft-s.left+s.targetWidth/2+e.arrow.offsetWidth/2;d<0&&(d=0),n.css(e.arrow,{left:d+"px"}),n.css(e.container,{display:null,visibility:null})}n.addClass(e.container,"active")}}(l,e,o,i,a)},l}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(1),u=n(3),f=n(2),h={iosPhone:".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," {")+"overflow-y:scroll;-webkit-overflow-scrolling: touch;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}"+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY,"[contenteditable=true], ")+".".concat(d.CLASS.TEMPLATE_EDITABLE,".need-editor-padding-bottom {")+"padding-bottom: 44px !important;}"+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th {position:static;}")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th:before,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td:before,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th:after,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td:after {display:none;}"),iosPad:".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," {")+"min-height: 100%;overflow-y:scroll;-webkit-overflow-scrolling: touch;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}"+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY,"[contenteditable=true], ")+".".concat(d.CLASS.TEMPLATE_EDITABLE,".need-editor-padding-bottom {")+"padding-bottom: 44px !important;}"+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th {position:static;}")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th:before,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td:before,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th:after,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td:after {display:none;}"),code:".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.CODE_CONTAINER_PASTE," textarea {visibility: hidden;}"),imageResize:".".concat(d.CLASS.WIZ_BODY," div.wiz-img-resize-handle {position: absolute;z-index: 1000;width: 18px;height: 18px;border-radius: 9px;line-height: 18px;text-align: center;margin: 0;font-size: 18px;transform: translate(-50%, -50%);background-color: #448aff !important; color: #fff !important;}")+".wiz-img-resize-handle.lt {cursor: nw-resize;}.wiz-img-resize-handle.tm {cursor: n-resize;}.wiz-img-resize-handle.rt {cursor: ne-resize;}.wiz-img-resize-handle.lm {cursor: w-resize;}.wiz-img-resize-handle.rm {cursor: e-resize;}.wiz-img-resize-handle.lb {cursor: sw-resize;}.wiz-img-resize-handle.bm {cursor: s-resize;}.wiz-img-resize-handle.rb {cursor: se-resize;}"+".".concat(d.CLASS.WIZ_BODY," img.").concat(d.CLASS.IMG_RESIZE_ACTIVE," {border: 2px solid #448aff;padding: 0;}")+".wiz-img-upload-container {width: 400px;height: 300px;background-color: #d6d9dd;display: flex;flex-direction: column;align-items: center;justify-content: center;font-size: 14px;}.wiz-img-upload-container.error {flex-direction: row;}"+"".concat(d.CLASS.WIZ_BODY," .wiz-img-upload-container div {margin: 0;}")+".wiz-img-upload-container .wiz-img-upload-progress {color: #fff;font-weight: normal; margin-bottom: 15px}.wiz-img-upload-container.error .wiz-img-upload-progress {color: #505f79; margin: 0;}.wiz-img-upload-container .wiz-img-cancel-upload-btn {color: #505f79;line-height: 30px; width: 70px;cursor: pointer;background-color: transparent;border: none;outline: none; font-size: 14px;}.wiz-img-upload-container.error .wiz-img-cancel-upload-btn {color: #448aff}"+"#".concat(d.ID.IMAGE_MENU_CONTAINER," {position: absolute; z-index: 400;}")+".".concat(d.CLASS.WIZ_BODY," #").concat(d.ID.IMAGE_MENU_CONTAINER," div,.").concat(d.CLASS.WIZ_BODY," #").concat(d.ID.IMAGE_MENU_CONTAINER," ul,.").concat(d.CLASS.WIZ_BODY," #").concat(d.ID.IMAGE_MENU_CONTAINER," li {margin: 0;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_MENU," {display: flex;height: 32px;background-color: #fff !important;opacity: 0.98;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_MENU," .icon-button{background-color: transparent !important;display:flex;justify-items:center;width:44px;height:32px;line-height:32px;border: none;outline:none;font-size: 14px;padding:0 0 0 10px;cursor: pointer;border-radius: 4px;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_MENU," .icon-button i{align-self:center;color: #172b4d !important;background-color: transparent !important;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_MENU," .icon-button .icon-rotation_right {font-size: 18px;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU_CONTAINER," {position: relative;background-color: transparent !important;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU," {position: absolute; top: 40px;list-style-type: none; padding: 8px 0;opacity: 0.98;display:none;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU," .").concat(d.CLASS.IMG_SUB_MENU_ITEM," {padding: 0 15px;font-size: 14px;height: 32px;line-height: 32px;cursor: pointer;white-space: nowrap;color:#172b4d;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU," .").concat(d.CLASS.IMG_SUB_MENU_ITEM,":hover {background-color: #e8f2ff;}")+"#".concat(d.ID.IMAGE_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU_CONTAINER," .").concat(d.CLASS.IMG_SUB_MENU," .").concat(d.CLASS.IMG_SUB_MENU_ITEM,".is-del {color: #ef403a !important;}"),tooltip:".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," i.editor-icon {top:0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," {display: none;margin: 10px 0 0;position: absolute;top: 13px;left:-9px;min-width: 135px;padding: 5px 0;max-width: none;z-index: 400;transform: translate(-15px, -15px);}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," ul {margin: 0; padding: 0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP,".").concat(d.CLASS.TABLE_SUB_MENU," {min-width: 84px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP,".active {display:block;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," > div {font-size:15px;min-width:80px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," div {margin:0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," .").concat(d.CLASS.TOOL_TIP_ARROW_BG,",")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," .").concat(d.CLASS.TOOL_TIP_ARROW," {position: absolute;border-style: solid;border-color: transparent;border-bottom-color: #cccccc;left: 22px;margin-left: -14px;top: -8px;border-width: 0 8px 8px 8px;z-index:").concat(d.CSS.Z_INDEX.tableToolsArrow,";}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," .").concat(d.CLASS.TOOL_TIP_ARROW," {border-bottom-color: #ffffff;top: -7px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP,".top .").concat(d.CLASS.TOOL_TIP_ARROW_BG," {top: auto;bottom: -8px;transform:rotate(180deg);}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP,".top .").concat(d.CLASS.TOOL_TIP_ARROW," {top: auto;bottom: -7px;transform:rotate(180deg);}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM," {margin:0;padding: 4px 12px;font-size: 14px;display: flex;justify-content: space-between; align-items: center;position: relative;cursor: pointer;color: #172b4d;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM," span {white-space: nowrap;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".has-sub-menu:hover .").concat(d.CLASS.TABLE_SUB_MENU,".").concat(d.CLASS.TOOL_TIP," {display: block;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_SUB_MENU," .").concat(d.CLASS.TOOL_TIP_ITEM," {justify-content: flex-start;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".split {padding-top: 8px; padding-bottom: 8px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".split::before {width: calc(100% - 24px); height: 1px;background-color: #e6e9ed;content: '';position: absolute; left: 50%;transform: translateX(-50%); top: 0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".split::after {width: calc(100% - 24px); height: 1px;background-color: #e6e9ed;content: '';position: absolute; left: 50%;transform: translateX(-50%); bottom: 0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,":hover {background-color: #ececec;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".disabled {color: #bbbbbb;cursor: default;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM,".disabled:hover {background-color: transparent;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP_ITEM," .").concat(d.CLASS.TABLE_SUB_MENU," {position: absolute;right: 0;top: 0; left: auto;transform: translateX(100%);}"),tableInMarkdown:".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," table tr {background-color:white;}")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," table tr:nth-child(2n) {background-color:#f8f8f8;}"),table:".".concat(d.CLASS.EDITING," .").concat(d.CLASS.TABLE_BODY,".").concat(d.CLASS.TABLE_MOVING," *,")+" .".concat(d.CLASS.EDITING," .").concat(d.CLASS.TABLE_BODY,".").concat(d.CLASS.TABLE_MOVING," *:before,")+" .".concat(d.CLASS.EDITING," .").concat(d.CLASS.TABLE_BODY,".").concat(d.CLASS.TABLE_MOVING," *:after {cursor:default !important;}")+" .".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td,")+" .".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th {position:relative;}")+"#wiz-table-range-border {display: none;width: 0;height: 0;position: absolute;top: 0;left: 0; z-index:".concat(d.CSS.Z_INDEX.tableBorder,"}")+"#wiz-table-col-line, #wiz-table-row-line {margin:0;display: none;background-color: #448aff;position: absolute;z-index:".concat(d.CSS.Z_INDEX.tableColRowLine,";}")+"#wiz-table-col-line {width: 1px;cursor:col-resize;}#wiz-table-row-line {height: 1px;cursor:row-resize;}#wiz-table-range-border_start, #wiz-table-range-border_range {display: none;width: 0;height: 0;margin: 0;position: absolute;}#wiz-table-range-border_start div, #wiz-table-range-border_range div {margin: 0;}#wiz-table-range-border_start_top, #wiz-table-range-border_range_top {height: 2px;background-color: #448aff;position: absolute;top: 0;left: 0;}#wiz-table-range-border_range_top {height: 1px;}#wiz-table-range-border_start_right, #wiz-table-range-border_range_right {width: 2px;background-color: #448aff;position: absolute;top: 0;}#wiz-table-range-border_range_right {width: 1px;}#wiz-table-range-border_start_bottom, #wiz-table-range-border_range_bottom {height: 2px;background-color: #448aff;position: absolute;top: 0;}#wiz-table-range-border_range_bottom {height: 1px;}#wiz-table-range-border_start_left, #wiz-table-range-border_range_left {width: 2px;background-color: #448aff;position: absolute;top: 0;left: 0;}#wiz-table-range-border_range_left {width: 1px;}"+"#wiz-table-range-border_start_dot, #wiz-table-range-border_range_dot {width: 5px;height: 5px;border: 2px solid rgb(255, 255, 255);background-color: #448aff;cursor: crosshair;position: absolute;z-index:".concat(d.CSS.Z_INDEX.tableRangeDot,";}")+".".concat(d.CLASS.TABLE_BAR," {position: absolute;left: 0;top: 0; margin: 0;display: flex;flex-direction: column;transform: translateX(-100%);z-index:").concat(d.CSS.Z_INDEX.tableBorder+1,"}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_BAR," div {margin: 0;}")+".".concat(d.CLASS.TABLE_LINE_BOX," {background-color: #f4f6f9;cursor: pointer;position: absolute;}")+".".concat(d.CLASS.TABLE_LINE_BOX,":hover {background-color: #d6d9dd;}")+".".concat(d.CLASS.TABLE_LINE_BOX,".active {background-color: rgba(68, 138, 255, .3);}")+".".concat(d.CLASS.TABLE_LINE_POINT," {width: 24px; height: 24px; cursor: pointer; position: absolute;z-index: 2;}")+".".concat(d.CLASS.TABLE_LINE_POINT,"::after {width: 4px; height: 4px; background-color: #d6d9dd; position: absolute;transform: translate(-50%, -50%);content: '';border-radius: 4px;}")+".".concat(d.CLASS.TABLE_LINE_POINT,".cols,.").concat(d.CLASS.TABLE_COL_BAR," .").concat(d.CLASS.TABLE_LINE_POINT," {right: 0;bottom: 16px;transform: translateX(50%);}")+".".concat(d.CLASS.TABLE_LINE_POINT,".cols::after,.").concat(d.CLASS.TABLE_COL_BAR," .").concat(d.CLASS.TABLE_LINE_POINT,"::after {left: 50%; top: 75%;}")+".".concat(d.CLASS.TABLE_LINE_POINT,".rows,.").concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ROW_BAR," .").concat(d.CLASS.TABLE_LINE_POINT," {bottom: 0;right: 15px;transform: translateY(50%);}")+".".concat(d.CLASS.TABLE_LINE_POINT,".rows::after,.").concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ROW_BAR," .").concat(d.CLASS.TABLE_LINE_POINT,"::after {left: 75%; top: 50%}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ADD_BTN," {width: 22px; height: 22px; border-radius: 11px 11px 2px 11px; position: absolute;border: none;background-color: #448aff !important;display: none;outline: none;cursor: pointer;z-index: 2;}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ADD_BTN,"::before {content: '';width: 10px; height: 2px; background-color: #fff;position: absolute;left: 50%; top: 50%; transform: translate(-50%, -50%) rotate(45deg);}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ADD_BTN,"::after {content: '';width: 2px; height: 10px; background-color: #fff;position: absolute;left: 50%; top: 50%; transform: translate(-50%, -50%) rotate(45deg);}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ALL_BAR," {width: ").concat(d.CSS.TABLECOMPONENT.PADDING,"px;height: ").concat(d.CSS.TABLECOMPONENT.PADDING,"px;position: relative;}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ALL_BAR," .").concat(d.CLASS.TABLE_LINE_BOX," {border-radius: 4px 0px 0px 0px;width: 16px;height: 16px; bottom: 0; right: 0;}")+".".concat(d.CLASS.TABLE_ADD_TIP_LINE,"{display: none;position: absolute; background-color: #448aff !important;}")+".bar-box-shadow{background-image: linear-gradient(90deg,rgba(38,38,38,.15),rgba(38,38,38,0));opacity: 0;transition: opacity .15s;position: absolute;top:  ".concat(d.CSS.TABLECOMPONENT.PADDING,"px;bottom: 0;right: 0;transform: translateX(100%); width: 8px;}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ROW_BAR," {width: ").concat(d.CSS.TABLECOMPONENT.PADDING,"px; display: flex;flex-direction: column;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_COL_BAR," {position: absolute;height: ").concat(d.CSS.TABLECOMPONENT.PADDING,"px;top: 0;left: 0;display: flex;margin: 0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_COL_BAR," div {margin: 0;}")+".wiz-table-localtion-bar-block {width: 100%;height: 100%;position: relative;}"+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ROW_BAR," .").concat(d.CLASS.TABLE_LINE_BOX," {box-sizing: border-box;width: 16px;height: 100%;bottom: 0; right: 0;}")+".".concat(d.CLASS.TABLE_COL_BAR," .").concat(d.CLASS.TABLE_LINE_BOX," {box-sizing: border-box;width: 100%;height: 16px;bottom: 0; right: 0;}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ROW_BAR," .wiz-table-localtion-bar-block .").concat(d.CLASS.TABLE_LINE_BOX," {border-top: 1px solid #d6d9dd;}")+".".concat(d.CLASS.TABLE_BAR," .").concat(d.CLASS.TABLE_ROW_BAR," .wiz-table-localtion-bar-block:nth-last-of-type(1) .").concat(d.CLASS.TABLE_LINE_BOX," {border-radius: 0px 0px 0px 4px;}")+".".concat(d.CLASS.TABLE_COL_BAR," .wiz-table-localtion-bar-block .").concat(d.CLASS.TABLE_LINE_BOX," {border-left: 1px solid #d6d9dd;}")+".".concat(d.CLASS.TABLE_COL_BAR," .wiz-table-localtion-bar-block:nth-last-of-type(1) .").concat(d.CLASS.TABLE_LINE_BOX," {border-radius: 0px 4px 0px 0px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_TOOLS," {display: none;position: absolute;left: 0;transform: translate(-75%, -25%);z-index:").concat(d.CSS.Z_INDEX.tableTools,";margin: 0;}")+".wiz-table-tools ul {margin:0 !important;}.wiz-table-tools ul {list-style: none !important;padding: 0;width:auto;}"+".".concat(d.CLASS.TABLE_DELETE_ZONE," {position: absolute; background-color: #ffb7be;border: 2px solid #ef403a;box-sizing: border-box; display: none;z-index: -10;}")+".".concat(d.CLASS.TOOL_TIP," i.editor-icon{font-size: 15px;color: #455a64; position: absolute;top: 0px;left: 0;z-index:1}")+".".concat(d.CLASS.TOOL_TIP," i.editor-icon.list-icon{position: static;transform: rotate(-90deg);margin-left: 10px;}")+".".concat(d.CLASS.TABLE_SUB_MENU," i.editor-icon.list-icon.position-icon{border: 1px solid #455a64;transform: none;color: #a7afbc;padding-left: 1px;}")+".".concat(d.CLASS.TABLE_SUB_MENU," i.editor-icon.list-icon{transform: translateY(-25%);margin-left: 0;margin-right: 10px;}")+".".concat(d.CLASS.TOOL_TIP_COLOR_BOX," i.editor-icon.color-box{position: static;margin-left: 10px;border: 1px solid #455a64; width: 15px; height: 15px; display: block;}")+".".concat(d.CLASS.TOOL_TIP_COLOR_BOX," i.editor-icon.color-box.no-color{color: #cc0000;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP,".").concat(d.CLASS.TABLE_COLOR_PAD," {padding: 10px;box-sizing: border-box;min-width: 85px;width: 85px;height: 88px;cursor: default;}")+".".concat(d.CLASS.TABLE_TOOLS," .").concat(d.CLASS.TABLE_MENU_BUTTON," {background-color: #e6e9ed; width: 20px; height: 20px;border-radius: 2px; border: 1px solid #ddd;text-align:center;line-height: 18px;padding: 0; outline: none;color: #505f79;font-size: 24px;cursor: pointer;}")+".".concat(d.CLASS.TABLE_TOOLS," .").concat(d.CLASS.TABLE_MENU_BUTTON,"::before {transform: translateX(-3px);display: block;}")+".".concat(d.CLASS.TABLE_COLOR_PAD," > div{font-size:15px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TOOL_TIP," .").concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM," {display: inline-block;width: 16px;height: 16px;margin-right: 9px;position: relative;cursor:pointer;}")+".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM," .icon-oblique_line{color: #cc0000;font-size: 16px;}")+".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM,":last-child {margin-right: 0;}")+".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM,".active i.editor-icon.icon-box {color: #448aff;}")+".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM," .color-block-icon {width: 14px; height: 14px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);}")+".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM," .icon-border {width: 14px;margin: 0;height: 14px; border: 1px solid #a7afbc; border-radius: 2px;position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);}")+".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM,".active .icon-border {border: 2px solid #448aff;}")+".wiz-table-cell-align {display: none;padding: 10px;box-sizing: border-box;min-width: 85px;height: 65px;background-color: #fff;cursor: default;}.wiz-table-cell-align .wiz-table-cell-align-item {display: inline-block;width: 15px;height: 15px;margin-right: 9px;position: relative;}.wiz-table-cell-align .wiz-table-cell-align-item[data-align-type=align] {margin-right:8px}.wiz-table-cell-align .wiz-table-cell-align-item:last-child {margin-right:0}.wiz-table-cell-align .wiz-table-cell-align-item i.valign{color: #d2d2d2;}.wiz-table-cell-align-item i.editor-icon.align {font-size:17px;}.wiz-table-cell-align-item.active i.editor-icon.valign {color: #a1c4ff;}.wiz-table-cell-align-item.active i.editor-icon.icon-box,.wiz-table-cell-align-item.active i.editor-icon.align {color: #448aff;}"+".".concat(d.CLASS.TABLE_COLOR_PAD," .").concat(d.CLASS.TABLE_COLOR_PAD_ITEM,":last-child,")+".wiz-table-cell-align .wiz-table-cell-align-item:last-child {margin-right: 0;}"+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th.wiz-selected-cell-multi,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td.wiz-selected-cell-multi {background: rgba(0,102,255,.05);}")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th:before,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td:before,")+"#wiz-table-col-line:before,#wiz-table-range-border_start_right:before,"+'#wiz-table-range-border_range_right:before {content: " ";position: absolute;top: 0;bottom: 0;right: -5px;width: 9px;cursor: col-resize;background: transparent;z-index:'.concat(d.CSS.Z_INDEX.tableTDBefore,";}")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," th:after,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," td:after,")+"#wiz-table-row-line:before,#wiz-table-range-border_start_bottom:before,"+'#wiz-table-range-border_range_bottom:before {content: " ";position: absolute;left: 0;right: 0;bottom: -5px;height: 9px;cursor: row-resize;background: transparent;z-index:'.concat(d.CSS.Z_INDEX.tableTDBefore,";}")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," tr:last-child th:after,")+".".concat(d.CLASS.EDITING,".").concat(d.CLASS.WIZ_BODY," tr:last-child td:after,")+"#wiz-table-row-line:before,#wiz-table-range-border_start_bottom:before,#wiz-table-range-border_range_bottom:before {bottom: 0px;height: 4px;}"},p={ios:".".concat(d.CLASS.WIZ_BODY," {cursor:pointer;}")+".".concat(d.CLASS.READONLY,".").concat(d.CLASS.WIZ_BODY," img {")+"max-width: 100%;height: auto !important;margin: 0px auto;cursor: pointer;}"},m={bodyForFrame:"html, body {min-width: 0; max-width: 100%;}",bodyForPcWeb:".".concat(d.CLASS.WIZ_BODY," {padding: 20px 48px;}"),body:"html {height:100%;} "+"body, .".concat(d.CLASS.WIZ_BODY," {-webkit-tap-highlight-color:rgba(255,255,255,0);}")+".".concat(d.CLASS.WIZ_BODY," {min-height:100%;box-sizing:border-box;word-wrap: break-word !important;outline:none;}")+".".concat(d.CLASS.WIZ_BODY," img::selection {background-color: rgba(0, 0, 255, 0.3);}")+".".concat(d.CLASS.WIZ_BODY," input:disabled, ")+".".concat(d.CLASS.WIZ_BODY," textarea:disabled {opacity: 1;}")+"a {cursor:pointer;}"+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.FLOAT_LAYER," {background: #fff;color:#172b4d;box-shadow:0px 3px 8px 0px rgba(0, 0, 0, 0.2);border:1px solid #e7e7e7;border-radius:4px;max-width:none;}")+"::-ms-clear,::-ms-reveal{display:none;}"+d.TAG.TMP_TAG+" {line-height: 1.7;}",blockScroll:".wiz-block-scroll::-webkit-scrollbar {width: 7px;height: 7px;}.wiz-block-scroll::-webkit-scrollbar-thumb {background-color: #7f7f7f;border-radius: 7px;}.wiz-block-scroll::-webkit-scrollbar-button {display: none;}",wizPlugin:".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.SELECT_PLUGIN_CONTAINER," {position:relative;display:inline-block;width:160px;height:28px;padding:0;margin-left:5px;cursor:pointer;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.SELECT_PLUGIN_CONTAINER,".icon {width:28px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_CONTAINER," div,")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.SELECT_PLUGIN_CONTAINER," div {margin-top:0;margin-bottom:0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.SELECT_PLUGIN_CONTAINER,", ")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," {box-sizing:border-box;}")+".".concat(d.CLASS.WIZ_BODY," .wiz-select-plugin-header {line-height:28px;font-size:14px;padding: 0 0 0 5px;overflow:hidden;margin-right:27px;white-space:nowrap;}")+".".concat(d.CLASS.WIZ_BODY," .wiz-select-plugin-header i {position:absolute;top:0;right:0;line-height:26px;padding:0;text-align:center;min-width:27px;border-left:1px solid #e7e7e7;box-sizing:border-box;}")+".".concat(d.CLASS.WIZ_BODY," .wiz-select-plugin-header i.icon-more {font-size:16px;border:0;width:100%;height:100%}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," {display:none;list-style:none;padding:8px 0;margin:0;white-space:nowrap;min-width:160px;max-width:260px;overflow-x:hidden;overflow-y:auto;position:absolute;z-index:999999;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," {cursor:pointer;font-size:14px;padding:6px 20px;line-height:normal;margin: 0px !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,".disabled {color:#a7afbc;cursor:default;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,".selected {background:#f4f6f9;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,":hover {background:#f4f6f9 !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM,".disabled:hover {background:transparent !important;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," .icon-checkmark {visibility: hidden;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," .icon-checkmark.active {visibility: visible;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," .").concat(d.CLASS.HOTKEY_LAYER," {min-width:160px;display:flex;align-items:center;justify-content:space-between;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS_ITEM," .").concat(d.CLASS.HOTKEY_LAYER," .").concat(d.CLASS.HOTKEY," {color:#A7AFBC;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_CONTAINER,".active .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," {display:block;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.MENU_PLUGIN_CONTAINER,".").concat(d.CLASS.SELECT_PLUGIN_MENU," .").concat(d.CLASS.MENU_PLUGIN_OPTIONS," {max-height:250px;}"),table:".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_CONTAINER," {border:0px !important;margin-top:0;margin-bottom:20px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_BODY," {border:0px !important;position:relative;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;outline:none;margin-top:0;padding: ").concat(d.CSS.TABLECOMPONENT.PADDING,"px 0px 5px 0px;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_BODY," table {margin:0;outline:none;}")+".".concat(d.CLASS.WIZ_BODY," td,")+".".concat(d.CLASS.WIZ_BODY," th {outline:none;}")},g={common:"html, .".concat(d.CLASS.WIZ_BODY," {")+"font-size: 12pt;}"+".".concat(d.CLASS.WIZ_BODY," {")+"font-family: ".concat(d.CSS.DEFAULT_FONT,";line-height: 1.7;")+"margin: 0 auto;position:relative;padding: 20px 16px;}"+".".concat(d.CLASS.WIZ_BODY," h1,")+".".concat(d.CLASS.WIZ_BODY," h2,")+".".concat(d.CLASS.WIZ_BODY," h3,")+".".concat(d.CLASS.WIZ_BODY," h4,")+".".concat(d.CLASS.WIZ_BODY," h5,")+".".concat(d.CLASS.WIZ_BODY," h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}")+".".concat(d.CLASS.WIZ_BODY," h1 {font-size:20pt;font-size:1.67rem;}")+".".concat(d.CLASS.WIZ_BODY," h2 {font-size:18pt;font-size:1.5rem;}")+".".concat(d.CLASS.WIZ_BODY," h3 {font-size:15pt;font-size:1.25rem;}")+".".concat(d.CLASS.WIZ_BODY," h4 {font-size:14pt;font-size:1.17rem;}")+".".concat(d.CLASS.WIZ_BODY," h5 {font-size:12pt;font-size:1rem;}")+".".concat(d.CLASS.WIZ_BODY," h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}")+".".concat(d.CLASS.WIZ_BODY," div,")+".".concat(d.CLASS.WIZ_BODY," p,")+".".concat(d.CLASS.WIZ_BODY," ul,")+".".concat(d.CLASS.WIZ_BODY," ol,")+".".concat(d.CLASS.WIZ_BODY," dl,")+".".concat(d.CLASS.WIZ_BODY," li {margin:8px 0 0;}")+".".concat(d.CLASS.WIZ_BODY," blockquote,")+".".concat(d.CLASS.WIZ_BODY," table,")+".".concat(d.CLASS.WIZ_BODY," pre,")+".".concat(d.CLASS.WIZ_BODY," code {margin:8px 0;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.CODE_MIRROR," pre {margin:0;}")+".".concat(d.CLASS.WIZ_BODY," a {word-wrap: break-word;text-decoration-skip-ink: none;}")+".".concat(d.CLASS.WIZ_BODY," ul,")+".".concat(d.CLASS.WIZ_BODY," ol {padding-left:32px;padding-left:2rem;}")+".".concat(d.CLASS.WIZ_BODY," ol.").concat(d.CLASS.ORDER_LIST_LEVEL[1]," > li {list-style-type:decimal;}")+".".concat(d.CLASS.WIZ_BODY," ol.").concat(d.CLASS.ORDER_LIST_LEVEL[2]," > li {list-style-type:lower-latin;}")+".".concat(d.CLASS.WIZ_BODY," ol.").concat(d.CLASS.ORDER_LIST_LEVEL[0]," > li {list-style-type:lower-roman;}")+".".concat(d.CLASS.WIZ_BODY," li.").concat(d.CLASS.ORDER_LIST_ALIGN_STYLE," {list-style-position: inside; margin-left: -1em;}")+".".concat(d.CLASS.WIZ_BODY," blockquote {padding: 0 12px;}")+".".concat(d.CLASS.WIZ_BODY," blockquote > :first-child {margin-top:0;}")+".".concat(d.CLASS.WIZ_BODY," blockquote > :last-child {margin-bottom:0;}")+".".concat(d.CLASS.WIZ_BODY," img {border:0;max-width:100%;height:auto !important;margin:2px 0;padding: 2px;vertical-align:bottom;}")+".".concat(d.CLASS.WIZ_BODY," table {border-collapse:collapse;border:1px solid #a7afbc;}")+".".concat(d.CLASS.WIZ_BODY," td,")+".".concat(d.CLASS.WIZ_BODY," th {padding:4px 8px;border-collapse:collapse;border:1px solid #a7afbc;min-height:28px;word-break:break-word;box-sizing: border-box;}")+".".concat(d.CLASS.WIZ_BODY," td > div:first-child {margin-top:0;}")+".".concat(d.CLASS.WIZ_BODY," td > div:last-child {margin-bottom:0;}")+".".concat(d.CLASS.WIZ_BODY," img.").concat(d.CLASS.SVG_IMAGE," {box-shadow:1px 1px 4px #E8E8E8;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.IMG_CONTAINER," {margin:0;max-width: 100%;display: inline-flex;flex-direction: column;}")+".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.IMG_CONTAINER," .").concat(d.CLASS.IMG_TITLE," {display:inline-block;text-align: center;color: #a7afbc;line-height: 18px;font-size: 12px;min-height: 18px;width: 100%;white-space: normal;}")+".wiz-hide {display:none !important;}"},v=".".concat(d.CLASS.WIZ_BODY," .").concat(d.CLASS.TABLE_BODY," {padding-top: 0px;}"),b=function(e){function t(){var e,n;o(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(i))))._clearBodyInlineStyle=function(){n.env.body===n.env.doc.body&&(n.env.body.style.height="",n.env.body.style.width="")},n.getDefaultStyle=function(){var e=g.common;return e+=n.req.outlineStyle.getOutlineDefaultCss(),n.env.client.type.isWeb,e},n.getWebTmpStyle=function(){return n.env.client.type.isWeb&&!n.env.supportTouchEvent?m.bodyForPcWeb:""},n.insertDefaultStyle=function(e,t){var r=n.getDefaultStyle();if(n.replaceStyleById(d.ID.WIZ_DEFAULT_STYLE,r,e),t){var o,i=!1;if("string"==typeof t)o=t,i=!0;else{for(var a in o="html, body{",t)t.hasOwnProperty(a)&&("font-family"===a.toLowerCase()?o+=a+":"+t[a]+","+d.CSS.DEFAULT_FONT+";":o+=a+":"+t[a]+";",i=!0);o+="}"}i&&n.insertStyle({id:d.ID.TMP_STYLE_PRE+"default_custom",name:d.NAME.TMP_STYLE},o)}},n.insertCustomStyle=function(e,t,r){if(e&&t){var o={id:e};r&&(o.name=d.NAME.TMP_STYLE),n.insertStyle(o,t)}},n.insertStyle=function(e,t,r){r||(r=n.env.doc);var o=r.createElement("style");e.name&&n.domUtils.attr(o,{name:e.name});var i=null,a=null;return e.id&&(a=e.id+"_tmp",(i=n.getStyleById(e.id,r))&&n.domUtils.attr(i,{id:a}),n.domUtils.attr(o,{id:e.id})),o.innerHTML=t,u.dom.insertToHead(o,r),n.removeStyleById(a,r),o},n.insertTmpEditorStyle=function(){n._clearBodyInlineStyle();var e=m.body+n.getWebTmpStyle()+m.table+m.wizPlugin+h.code+h.imageResize+h.tooltip+h.table;n.env.options.useFrame&&(e+=m.bodyForFrame),n.env.options.editor.type===d.NOTE_EDITOR_TYPE.MARKDOWN&&(e+=h.tableInMarkdown),n.env.supportTouchEvent&&(e+=v),n.insertStyle({id:d.ID.TMP_STYLE_PRE+"editor_common",name:d.NAME.TMP_STYLE},e),n.env.client.type.isIOS&&n.env.client.type.isPhone?n.insertStyle({id:d.ID.TMP_STYLE_PRE+"editor_ios_phone",name:d.NAME.TMP_STYLE},h.iosPhone):n.env.client.type.isIOS&&n.env.client.type.isPad&&n.insertStyle({id:d.ID.TMP_STYLE_PRE+"editor_ios_pad",name:d.NAME.TMP_STYLE},h.iosPad),n.env.client.type.isMac&&n.insertStyle({id:d.ID.TMP_STYLE_PRE+"editor_block_scroll",name:d.NAME.TMP_STYLE},m.blockScroll)},n.insertTmpReaderStyle=function(){n._clearBodyInlineStyle();var e=m.body+n.getWebTmpStyle()+m.table+m.wizPlugin;n.env.options.useFrame&&(e+=m.bodyForFrame),n.env.supportTouchEvent&&(e+=v),n.insertStyle({id:d.ID.TMP_STYLE_PRE+"reader_common",name:d.NAME.TMP_STYLE},e),n.env.client.type.isIOS&&n.insertStyle({id:d.ID.TMP_STYLE_PRE+"reader_ios",name:d.NAME.TMP_STYLE},p.ios),n.env.client.type.isMac&&n.insertStyle({id:d.ID.TMP_STYLE_PRE+"reader_block_scroll",name:d.NAME.TMP_STYLE},m.blockScroll)},n.removeFormat=function(e,t,r){var o,i,a,l,s,c=function(e){return!!e&&1===e.nodeType&&(n.domUtils.isTag(e,[d.TAG.TMP_TAG,d.TAG.TMP_PLUGIN_TAG])||e.getAttribute("name")===d.NAME.TMP_STYLE||/^wiz[_-]/i.test(e.id)||/(^| )wiz[_-]/i.test(e.className))};try{if(e&&n.env.doc.execCommand("SelectAll"),t&&n.env.doc.execCommand("RemoveFormat"),e&&(o=n.env.doc.documentElement)&&r&&n.domUtils.eachChild(o,(function(e){return!n.domUtils.hasClass(e,d.CLASS.CODE_CONTAINER)}),(function(e){c(e)||(n.domUtils.attr(e,{style:null}),n.domUtils.attr(e,{class:null}),e.style.cssText&&(e.style.cssText=""))})),r){for(var u=(i=n.env.doc.getElementsByTagName("link")).length-1;u>=0;u--)"stylesheet"!==(a=i[u]).getAttribute("rel")||c(a)||a.remove();for(var f=(l=n.env.doc.getElementsByTagName("style")).length-1;f>=0;f--)s=l[f],c(s)||s.remove()}}catch(e){return void console.error(e)}},n.getStyleById=function(e,t){t||(t=n.env.doc);var r=t.getElementById(e);return r&&n.domUtils.isTag(r,["style","link"])?r:null},n.removeStyleById=function(e,t){if(e){var r=n.getStyleById(e,t);r&&n.domUtils.remove(r)}},n.removeStyleByName=function(e){for(var t=n.env.doc.getElementsByName(e),r=t.length-1;r>=0;r--){var o=t[r];o&&n.domUtils.isTag(o,["style","link"])&&n.domUtils.remove(o)}},n.replaceStyleById=function(e,t,r){r=!!r;var o=n.env.doc.getElementById(e);o||r||((o=n.env.doc.createElement("style")).id=e,u.dom.insertToHead(o,n.env.doc)),o&&(o.innerHTML=t)},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(r=[{key:"initCore",value:function(e){l(s(t.prototype),"initCore",this).call(this,e)}}])&&i(n.prototype,r),f&&i(n,f),t}(f);e.exports=b},function(e,t,n){var r,o,i,a=n(218),l={init:function(e){return(e=e||{}).editor||(e.editor={}),e.reader||(e.reader={}),void 0!==e.autoFocus&&(e.editor.autoFocus=e.autoFocus,delete e.autoFocus),void 0!==e.maxUndo&&(e.editor.maxUndo=e.maxUndo,delete e.maxUndo),void 0!==e.noAmend&&(e.reader.noAmend=e.noAmend,delete e.noAmend),void 0!==e.codeNoIDE&&(e.reader.codeNoIDE=e.codeNoIDE,delete e.codeNoIDE),void 0!==e.markdownPlugIn&&(e.reader.markdownPlugIn=e.markdownPlugIn,delete e.markdownPlugIn),void 0!==e.timeout&&(e.reader.timeout=e.timeout,delete e.timeout),e.editor.callback=e.editor.callback||{},e.reader.callback=e.reader.callback||{},void 0!==e.callback&&(e.callback.undo&&(e.editor.callback.undo=e.callback.undo),e.callback.markerUndo&&(e.editor.callback.markerUndo=e.callback.markerUndo),e.callback.markerInitiated&&(e.editor.callback.markerInitiated=e.callback.markerInitiated),e.callback.beforeMarkdownRender&&(e.reader.callback.beforeMarkdownRender=e.callback.beforeMarkdownRender),e.callback.markdown&&(e.reader.callback.markdown=e.callback.markdown),e.callback.mathJax&&(e.reader.callback.mathJax=e.callback.mathJax),e.callback&&(delete e.callback.beforeMarkdownRender,delete e.callback.markdown,delete e.callback.mathJax,delete e.callback.undo,delete e.callback.markerUndo,delete e.callback.markerInitiated)),r=new a(e,(function(e){o=e})),l.version=r.version,l.destroy=r.destroy,l.setOptions=r.setOptions,l.on=function(e,t){return r.editor.on(e,t),l},l.off=function(e,t){return r.reader.on(e,t),l},l.backupCaret=r.editor.caretBackup,l.createSvg=r.editor.createSvg,l.execCommand=r.editor.execCommand,l.find=r.editor.find,l.focus=function(){return r.editor.focus(),l},l.getBodyText=r.editor.getBodyText,l.getContentHtml=r.editor.getContentHtml,l.getMarkdownSrc=r.editor.getMarkdownSrc,l.insertCustomStyle=function(e,t,n){return r.insertCustomStyle(e,t,n),l},l.insertDefaultStyle=function(e,t){return r.insertDefaultStyle(e,t),l},l.insertB64Html=r.editor.insertB64Html,l.insertHtml=r.editor.insertHtml,l.isModified=r.editor.isModified,l.modifySelectionBlock=r.editor.modifySelectionBlock,l.modifySelectionDom=r.editor.modifySelectionDom,l.paste=r.editor.paste,l.pasteB64=r.editor.pasteB64,l.redo=function(){return r.editor.redo(),l},l.removeFormat=function(e,t,n){return r.editor.removeFormat(e,t,n),l},l.removeStyleById=function(e){return r.removeStyleById(e),l},l.replace=r.editor.replace,l.replaceAll=r.editor.replaceAll,l.restoreCaret=r.editor.caretRestore,l.saveSnap=r.editor.saveSnap,l.setUnModified=r.editor.setUnModified,l.undo=function(){return r.editor.undo(),l},l.ListenerType=r.editor.ListenerType,l.addListener=function(e,t){return r.editor.addListener(e,t),l},l.removeListener=function(e,t){return r.editor.removeListener(e,t),l},l.triggerListener=function(e,t){return r.editor.triggerListener(e,t),l},l.startTrackEvent=r.editor.startTrackEvent,l.stopTrackEvent=r.editor.stopTrackEvent,l.amend.on=function(){return r.editor.amend.on(),l},l.amend.off=function(){return r.editor.amend.off(),l},l.amend.changeCurUser=r.editor.amend.changeCurUser,l.amend.isEdited=r.editor.amend.isEdited,l.amend.isEditing=r.editor.amend.isEditing,l.amend.hasAmendSpanByCursor=r.editor.amend.hasAmendSpanByCursor,l.amend.accept=r.editor.amend.accept,l.amend.refuse=r.editor.amend.refuse,l.nightMode.on=r.nightMode.on,l.nightMode.off=r.nightMode.off,l.code=r.editor.code,l.formatPainter=r.editor.formatPainter,l.img=r.editor.img,l.link=r.editor.link,l.marker=r.editor.marker,l.range=r.editor.range,l.table=r.editor.table,l.todo=r.editor.todo,l.toolbar=r.editor.toolbar,l.utils=r.editor.utils,l.outline=r.outline,s.on=function(e,t){return r.reader.on(e,t),s},s.off=function(e,t){return r.editor.on(e,t),s},s.closeDocument=r.reader.closeDocument,s.getRenderDocument=r.reader.getRenderDocument,s.getWordCount=r.reader.getWordCount,s.insertCustomStyle=function(e,t,n){return r.insertCustomStyle(e,t,n),s},s.insertDefaultStyle=function(e,t){return r.insertDefaultStyle(e,t),s},s.removeStyleById=function(e){return r.removeStyleById(e),s},s.setPluginModify=r.reader.setPluginModify,s.amendInfo.on=function(){return r.reader.amend.on(),s},s.amendInfo.off=function(){return r.reader.amend.off(),s},s.highlight.next=r.reader.highlight.next,s.highlight.on=r.reader.highlight.on,s.highlight.off=r.reader.highlight.off,s.highlight.previous=r.reader.highlight.previous,s.img.getAll=r.editor.img.getAll,s.marker=r.reader.marker,s.pureRead.on=r.reader.pureRead.on,s.pureRead.off=r.reader.pureRead.off,s.todo.onCheckDocLock=r.reader.todo.onCheckDocLock,s.nightMode.on=r.nightMode.on,s.nightMode.off=r.nightMode.off,i&&i(o),l},amend:{},code:{},formatPainter:{},img:{},link:{},range:{},table:{},todo:{},nightMode:{},utils:{},toolbar:{}},s={init:l.init,amendInfo:{},highlight:{},img:{},nightMode:{},pureRead:{},todo:{}};window.WizEditor=l,window.WizReader=s,e.exports={wizEditor:l,wizReader:s,setCoreCallback:function(e){i=e}}},,function(e,t,n){(0,n(565).setCoreCallback)((function(e){var t=e.env,n=e.require.clientBridge;t.win.initForWebEngine=function(){n.setQtEditor()}}))}]);